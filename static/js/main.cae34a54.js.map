{"version":3,"file":"static/js/main.cae34a54.js","mappings":"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","sources":["../node_modules/events/events.js","../node_modules/fastbitset/FastBitSet.js","../node_modules/flat-ecs/lib/Archetype.js","../node_modules/flat-ecs/lib/Component.js","../node_modules/flat-ecs/lib/ComponentMapper.js","../node_modules/flat-ecs/lib/EntityIteratingSystem.js","../node_modules/flat-ecs/lib/EntitySystem.js","../node_modules/flat-ecs/lib/Inject.js","../node_modules/flat-ecs/lib/InjectMapper.js","../node_modules/flat-ecs/lib/System.js","../node_modules/flat-ecs/lib/World.js","../node_modules/flat-ecs/lib/index.js","../node_modules/gdxts/dist/lib/3d/DefaultRenderableSorter.js","../node_modules/gdxts/dist/lib/3d/DefaultShaderProvider.js","../node_modules/gdxts/dist/lib/3d/DefaultTextureBinder.js","../node_modules/gdxts/dist/lib/3d/GL20.js","../node_modules/gdxts/dist/lib/3d/Material.js","../node_modules/gdxts/dist/lib/3d/Mesh.js","../node_modules/gdxts/dist/lib/3d/ModelBatch.js","../node_modules/gdxts/dist/lib/3d/ModelInstance.js","../node_modules/gdxts/dist/lib/3d/PerspectiveCamera.js","../node_modules/gdxts/dist/lib/3d/RenderContext.js","../node_modules/gdxts/dist/lib/3d/Renderable.js","../node_modules/gdxts/dist/lib/3d/attributes/Attribute.js","../node_modules/gdxts/dist/lib/3d/attributes/Attributes.js","../node_modules/gdxts/dist/lib/3d/attributes/BlendingAttribute.js","../node_modules/gdxts/dist/lib/3d/attributes/ColorAttribute.js","../node_modules/gdxts/dist/lib/3d/attributes/DirectionalLightsAttribute.js","../node_modules/gdxts/dist/lib/3d/attributes/FloatAttribute.js","../node_modules/gdxts/dist/lib/3d/attributes/IntAttribute.js","../node_modules/gdxts/dist/lib/3d/attributes/PointLightAttribute.js","../node_modules/gdxts/dist/lib/3d/attributes/SpotLightAttribute.js","../node_modules/gdxts/dist/lib/3d/attributes/TextureAttribute.js","../node_modules/gdxts/dist/lib/3d/attributes/VertexAttribute.js","../node_modules/gdxts/dist/lib/3d/attributes/VertexAttributes.js","../node_modules/gdxts/dist/lib/3d/attributes/index.js","../node_modules/gdxts/dist/lib/3d/environment/AmbientCubemap.js","../node_modules/gdxts/dist/lib/3d/environment/BaseLight.js","../node_modules/gdxts/dist/lib/3d/environment/DirectionalLight.js","../node_modules/gdxts/dist/lib/3d/environment/Environment.js","../node_modules/gdxts/dist/lib/3d/environment/PointLight.js","../node_modules/gdxts/dist/lib/3d/environment/SpotLight.js","../node_modules/gdxts/dist/lib/3d/environment/index.js","../node_modules/gdxts/dist/lib/3d/index.js","../node_modules/gdxts/dist/lib/3d/loader/G3dModelLoader.js","../node_modules/gdxts/dist/lib/3d/loader/ObjLoader.js","../node_modules/gdxts/dist/lib/3d/loader/UBJsonReader.js","../node_modules/gdxts/dist/lib/3d/loader/index.js","../node_modules/gdxts/dist/lib/3d/math/Fustrum.js","../node_modules/gdxts/dist/lib/3d/math/Plane.js","../node_modules/gdxts/dist/lib/3d/math/index.js","../node_modules/gdxts/dist/lib/3d/model/Animation.js","../node_modules/gdxts/dist/lib/3d/model/MeshPart.js","../node_modules/gdxts/dist/lib/3d/model/Model.js","../node_modules/gdxts/dist/lib/3d/model/Node.js","../node_modules/gdxts/dist/lib/3d/model/NodeAnimation.js","../node_modules/gdxts/dist/lib/3d/model/NodeKeyframe.js","../node_modules/gdxts/dist/lib/3d/model/NodePart.js","../node_modules/gdxts/dist/lib/3d/model/data/ModelAnimation.js","../node_modules/gdxts/dist/lib/3d/model/data/ModelData.js","../node_modules/gdxts/dist/lib/3d/model/data/ModelMaterial.js","../node_modules/gdxts/dist/lib/3d/model/data/ModelMesh.js","../node_modules/gdxts/dist/lib/3d/model/data/ModelMeshPart.js","../node_modules/gdxts/dist/lib/3d/model/data/ModelNode.js","../node_modules/gdxts/dist/lib/3d/model/data/ModelNodeAnimation.js","../node_modules/gdxts/dist/lib/3d/model/data/ModelNodeKeyframe.js","../node_modules/gdxts/dist/lib/3d/model/data/ModelNodePart.js","../node_modules/gdxts/dist/lib/3d/model/data/ModelTexture.js","../node_modules/gdxts/dist/lib/3d/model/data/index.js","../node_modules/gdxts/dist/lib/3d/model/index.js","../node_modules/gdxts/dist/lib/3d/shaders/BaseShader.js","../node_modules/gdxts/dist/lib/3d/shaders/DefaultShader.js","../node_modules/gdxts/dist/lib/3d/shaders/Shader3D.js","../node_modules/gdxts/dist/lib/3d/shaders/index.js","../node_modules/gdxts/dist/lib/3d/utils/AnimationController.js","../node_modules/gdxts/dist/lib/3d/utils/BaseAnimationController.js","../node_modules/gdxts/dist/lib/3d/utils/BoxShapeBuilder.js","../node_modules/gdxts/dist/lib/3d/utils/IndexBufferObject.js","../node_modules/gdxts/dist/lib/3d/utils/MeshBuilder.js","../node_modules/gdxts/dist/lib/3d/utils/ModelBuilder.js","../node_modules/gdxts/dist/lib/3d/utils/TextureProvider.js","../node_modules/gdxts/dist/lib/3d/utils/VertexBufferObject.js","../node_modules/gdxts/dist/lib/3d/utils/VertexData.js","../node_modules/gdxts/dist/lib/3d/utils/VertexInfo.js","../node_modules/gdxts/dist/lib/3d/utils/index.js","../node_modules/gdxts/dist/lib/Affine2.js","../node_modules/gdxts/dist/lib/Animation.js","../node_modules/gdxts/dist/lib/AssetManager.js","../node_modules/gdxts/dist/lib/BitmapFont.js","../node_modules/gdxts/dist/lib/BitmapFontCache.js","../node_modules/gdxts/dist/lib/BitmapFontData.js","../node_modules/gdxts/dist/lib/BoundingBox.js","../node_modules/gdxts/dist/lib/Camera.js","../node_modules/gdxts/dist/lib/Game.js","../node_modules/gdxts/dist/lib/Glyph.js","../node_modules/gdxts/dist/lib/GlyphLayout.js","../node_modules/gdxts/dist/lib/GlyphRun.js","../node_modules/gdxts/dist/lib/InputHandler.js","../node_modules/gdxts/dist/lib/Matrix3.js","../node_modules/gdxts/dist/lib/Matrix4.js","../node_modules/gdxts/dist/lib/Mesh.js","../node_modules/gdxts/dist/lib/NumberUtils.js","../node_modules/gdxts/dist/lib/PolygonBatcher.js","../node_modules/gdxts/dist/lib/Quaternion.js","../node_modules/gdxts/dist/lib/Shader.js","../node_modules/gdxts/dist/lib/ShapeRenderer.js","../node_modules/gdxts/dist/lib/Sprite.js","../node_modules/gdxts/dist/lib/Texture.js","../node_modules/gdxts/dist/lib/TextureAtlas.js","../node_modules/gdxts/dist/lib/TextureRegion.js","../node_modules/gdxts/dist/lib/Utils.js","../node_modules/gdxts/dist/lib/Vector2.js","../node_modules/gdxts/dist/lib/Vector3.js","../node_modules/gdxts/dist/lib/Viewport.js","../node_modules/gdxts/dist/lib/ViewportInputHandler.js","../node_modules/gdxts/dist/lib/index.js","../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js","../node_modules/@babel/runtime/helpers/createSuper.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../node_modules/@babel/runtime/helpers/get.js","../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/inherits.js","../node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/regeneratorRuntime.js","../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../node_modules/@babel/runtime/helpers/superPropBase.js","../node_modules/@babel/runtime/helpers/toConsumableArray.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../webpack/bootstrap","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","Constant.ts","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","component/Health.ts","component/Movable.ts","component/Spatial.ts","../node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js","../node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js","component/Damage.ts","System/UpgradeLevelSystem.ts","System/knight/CameraProcessingSystem.ts","System/knight/JoystickRenderSystem.ts","System/knight/JoystickSystem.ts","System/knight/NormalAttackProcessSystem.ts","System/knight/NormalAttackRenderSystem.ts","System/knight/NormalAttackSpawningSystem.ts","System/PlayerRenderSystem.ts","System/knight/ProtectBallProcessSystem.ts","System/knight/ProtectBallRenderSystem.ts","System/knight/ProtectBallSpawningSystem.ts","System/knight/Skill3ProcessSystem.ts","System/knight/Skill3RenderSystem.ts","System/knight/Skill3SpawningSystem.ts","System/PlayerMovementSystem.ts","System/mage/ProtectSkillRenderSystem.ts","System/mage/ProtectProcessingSystem.ts","System/mage/TornadoProcessSystem.ts","System/mage/TornadoSpawningSystem.ts","System/mage/TornadoRenderSystem.ts","System/EnemyMovementSystem.ts","System/EnemyRenderSystem.ts","System/EnemySpawningSystem.ts","System/mage/LaserSpawningSystem.ts","System/mage/LaserProcessSystem.ts","System/mage/LaserRenderSystem.ts","System/MenuRole.ts","System/knight/GridMapRenderSystem.ts","System/MenuRenderSystem.ts","gameScreen/GameScreen.ts","index.ts"],"sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/**\n * FastBitSet.js : a fast bit set implementation in JavaScript.\n * (c) the authors\n * Licensed under the Apache License, Version 2.0.\n *\n * Speed-optimized BitSet implementation for modern browsers and JavaScript engines.\n *\n * A BitSet is an ideal data structure to implement a Set when values being stored are\n * reasonably small integers. It can be orders of magnitude faster than a generic set implementation.\n * The FastBitSet implementation optimizes for speed, leveraging commonly available features\n * like typed arrays.\n *\n * Simple usage :\n *  // var FastBitSet = require(\"fastbitset\");// if you use node\n *  var b = new FastBitSet();// initially empty\n *  b.add(1);// add the value \"1\"\n *  b.has(1); // check that the value is present! (will return true)\n *  b.add(2);\n *  console.log(\"\"+b);// should display {1,2}\n *  b.add(10);\n *  b.array(); // would return [1,2,10]\n *\n *  var c = new FastBitSet([1,2,3,10]); // create bitset initialized with values 1,2,3,10\n *  c.difference(b); // from c, remove elements that are in b\n *  var su = c.union_size(b);// compute the size of the union (bitsets are unchanged)\n * c.union(b); // c will contain all elements that are in c and b\n * var s1 = c.intersection_size(b);// compute the size of the intersection (bitsets are unchanged)\n * c.intersection(b); // c will only contain elements that are in both c and b\n * c = b.clone(); // create a (deep) copy of b and assign it to c.\n * c.equals(b); // check whether c and b are equal\n *\n *   See README.md file for a more complete description.\n *\n * You can install the library under node with the command line\n *   npm install fastbitset\n */\n'use strict';\n\nfunction isIterable(obj) {\n  if (obj == null) {\n    return false;\n  }\n  return obj[Symbol.iterator] !== undefined;\n}\n\n// you can provide an iterable\nfunction FastBitSet(iterable) {\n  this.words = []\n  if (isIterable(iterable)) {\n    for (var key of iterable) {\n      this.add(key);\n    }\n  }\n}\n\n// Add the value (Set the bit at index to true)\nFastBitSet.prototype.add = function(index) {\n  this.resize(index);\n  this.words[index >>> 5] |= 1 << index ;\n};\n\n// If the value was not in the set, add it, otherwise remove it (flip bit at index)\nFastBitSet.prototype.flip = function(index) {\n  this.resize(index);\n  this.words[index >>> 5] ^= 1 << index ;\n};\n\n// Remove all values, reset memory usage\nFastBitSet.prototype.clear = function() {\n  this.words = []\n};\n\n// Set the bit at index to false\nFastBitSet.prototype.remove = function(index) {\n  this.resize(index);\n  this.words[index  >>> 5] &= ~(1 << index);\n};\n\n// Return true if no bit is set\nFastBitSet.prototype.isEmpty = function(index) {\n  var c = this.words.length;\n  for (var  i = 0; i < c; i++) {\n    if (this.words[i] !== 0) return false;\n  }\n  return true;\n};\n\n// Is the value contained in the set? Is the bit at index true or false? Returns a boolean\nFastBitSet.prototype.has = function(index) {\n  return (this.words[index  >>> 5] & (1 << index)) !== 0;\n};\n\n// Tries to add the value (Set the bit at index to true), return 1 if the\n// value was added, return 0 if the value was already present\nFastBitSet.prototype.checkedAdd = function(index) {\n  this.resize(index);\n  var word = this.words[index  >>> 5]\n  var newword = word | (1 << index)\n  this.words[index >>> 5] = newword\n  return (newword ^ word) >>> index\n};\n\n\n// Reduce the memory usage to a minimum\nFastBitSet.prototype.trim = function(index) {\n  var nl = this.words.length\n  while ((nl > 0) && (this.words[nl - 1] === 0)) {\n      nl--;\n  }\n  this.words = this.words.slice(0,nl);\n};\n\n\n// Resize the bitset so that we can write a value at index\nFastBitSet.prototype.resize = function(index) {\n  var count = (index + 32) >>> 5;// just what is needed\n  for(var i = this.words.length; i < count; i++) this.words[i] = 0;\n};\n\n// fast function to compute the Hamming weight of a 32-bit unsigned integer\nFastBitSet.prototype.hammingWeight = function(v) {\n  v -= ((v >>> 1) & 0x55555555);// works with signed or unsigned shifts\n  v = (v & 0x33333333) + ((v >>> 2) & 0x33333333);\n  return ((v + (v >>> 4) & 0xF0F0F0F) * 0x1010101) >>> 24;\n};\n\n\n// fast function to compute the Hamming weight of four 32-bit unsigned integers\nFastBitSet.prototype.hammingWeight4 = function(v1,v2,v3,v4) {\n  v1 -= ((v1 >>> 1) & 0x55555555);// works with signed or unsigned shifts\n  v2 -= ((v2 >>> 1) & 0x55555555);// works with signed or unsigned shifts\n  v3 -= ((v3 >>> 1) & 0x55555555);// works with signed or unsigned shifts\n  v4 -= ((v4 >>> 1) & 0x55555555);// works with signed or unsigned shifts\n\n  v1 = (v1 & 0x33333333) + ((v1 >>> 2) & 0x33333333);\n  v2 = (v2 & 0x33333333) + ((v2 >>> 2) & 0x33333333);\n  v3 = (v3 & 0x33333333) + ((v3 >>> 2) & 0x33333333);\n  v4 = (v4 & 0x33333333) + ((v4 >>> 2) & 0x33333333);\n\n  v1 = v1 + (v1 >>> 4) & 0xF0F0F0F;\n  v2 = v2 + (v2 >>> 4) & 0xF0F0F0F;\n  v3 = v3 + (v3 >>> 4) & 0xF0F0F0F;\n  v4 = v4 + (v4 >>> 4) & 0xF0F0F0F;\n  return (( (v1 + v2 + v3 + v4) * 0x1010101) >>> 24);\n};\n\n// How many values stored in the set? How many set bits?\nFastBitSet.prototype.size = function() {\n  var answer = 0;\n  var c = this.words.length;\n  var w = this.words;\n  var i = 0;\n  for (; i < c; i++) {\n    answer += this.hammingWeight(w[i]);\n  }\n  return answer;\n};\n\n// Return an array with the set bit locations (values)\nFastBitSet.prototype.array = function() {\n  var answer = new Array(this.size());\n  var pos = 0 | 0;\n  var c = this.words.length;\n  for (var k = 0; k < c; ++k) {\n    var w =  this.words[k];\n    while (w != 0) {\n      var t = w & -w;\n      answer[pos++] = (k << 5) + this.hammingWeight((t - 1) | 0);\n      w ^= t;\n    }\n  }\n  return answer;\n};\n\n\n// Return an array with the set bit locations (values)\nFastBitSet.prototype.forEach = function(fnc) {\n  var c = this.words.length;\n  for (var k = 0; k < c; ++k) {\n    var w =  this.words[k];\n    while (w != 0) {\n      var t = w & -w;\n      fnc((k << 5) + this.hammingWeight((t - 1) | 0));\n      w ^= t;\n    }\n  }\n};\n\n// Creates a copy of this bitmap\nFastBitSet.prototype.clone = function() {\n  var clone = Object.create(FastBitSet.prototype);\n  clone.words = this.words.slice();\n  return clone;\n};\n\n// Check if this bitset intersects with another one,\n// no bitmap is modified\nFastBitSet.prototype.intersects = function(otherbitmap) {\n  var newcount = Math.min(this.words.length,otherbitmap.words.length);\n  for (var k = 0 | 0; k < newcount; ++k) {\n    if ((this.words[k] & otherbitmap.words[k]) !== 0) return true;\n  }\n  return false;\n};\n\n// Computes the intersection between this bitset and another one,\n// the current bitmap is modified  (and returned by the function)\nFastBitSet.prototype.intersection = function(otherbitmap) {\n  var newcount = Math.min(this.words.length,otherbitmap.words.length);\n  var k = 0 | 0;\n  for (; k + 7 < newcount; k += 8) {\n    this.words[k] &= otherbitmap.words[k];\n    this.words[k + 1] &= otherbitmap.words[k + 1];\n    this.words[k + 2] &= otherbitmap.words[k + 2];\n    this.words[k + 3] &= otherbitmap.words[k + 3];\n    this.words[k + 4] &= otherbitmap.words[k + 4];\n    this.words[k + 5] &= otherbitmap.words[k + 5];\n    this.words[k + 6] &= otherbitmap.words[k + 6];\n    this.words[k + 7] &= otherbitmap.words[k + 7];\n  }\n  for (; k < newcount; ++k) {\n    this.words[k] &= otherbitmap.words[k];\n  }\n  var c = this.words.length;\n  for (var k = newcount; k < c; ++k) {\n    this.words[k] = 0;\n  }\n  return this;\n};\n\n// Computes the size of the intersection between this bitset and another one\nFastBitSet.prototype.intersection_size = function(otherbitmap) {\n  var newcount = Math.min(this.words.length,otherbitmap.words.length);\n  var answer = 0 | 0;\n  for (var k = 0 | 0; k < newcount; ++k) {\n    answer += this.hammingWeight(this.words[k] & otherbitmap.words[k]);\n  }\n\n  return answer;\n};\n\n// Computes the intersection between this bitset and another one,\n// a new bitmap is generated\nFastBitSet.prototype.new_intersection = function(otherbitmap) {\n  var answer = Object.create(FastBitSet.prototype);\n  var count = Math.min(this.words.length,otherbitmap.words.length);\n  answer.words = new Array(count);\n  var c = count;\n  var k = 0 | 0;\n  for (; k + 7  < c; k += 8) {\n      answer.words[k] = this.words[k] & otherbitmap.words[k];\n      answer.words[k+1] = this.words[k+1] & otherbitmap.words[k+1];\n      answer.words[k+2] = this.words[k+2] & otherbitmap.words[k+2];\n      answer.words[k+3] = this.words[k+3] & otherbitmap.words[k+3];\n      answer.words[k+4] = this.words[k+4] & otherbitmap.words[k+4];\n      answer.words[k+5] = this.words[k+5] & otherbitmap.words[k+5];\n      answer.words[k+6] = this.words[k+6] & otherbitmap.words[k+6];\n      answer.words[k+7] = this.words[k+7] & otherbitmap.words[k+7];\n  }\n  for (; k < c; ++k) {\n    answer.words[k] = this.words[k] & otherbitmap.words[k];\n  }\n  return answer;\n};\n\n// Computes the intersection between this bitset and another one,\n// the current bitmap is modified\nFastBitSet.prototype.equals = function(otherbitmap) {\n  var mcount = Math.min(this.words.length , otherbitmap.words.length);\n  for (var k = 0 | 0; k < mcount; ++k) {\n    if (this.words[k] != otherbitmap.words[k]) return false;\n  }\n  if (this.words.length < otherbitmap.words.length) {\n    var c = otherbitmap.words.length;\n    for (var k = this.words.length; k < c; ++k) {\n      if (otherbitmap.words[k] != 0) return false;\n    }\n  } else if (otherbitmap.words.length < this.words.length) {\n    var c = this.words.length;\n    for (var k = otherbitmap.words.length; k < c; ++k) {\n      if (this.words[k] != 0) return false;\n    }\n  }\n  return true;\n};\n\n// Computes the difference between this bitset and another one,\n// the current bitset is modified (and returned by the function)\nFastBitSet.prototype.difference = function(otherbitmap) {\n  var newcount = Math.min(this.words.length,otherbitmap.words.length);\n  var k = 0 | 0;\n  for (; k + 7 < newcount; k += 8) {\n    this.words[k] &= ~otherbitmap.words[k];\n    this.words[k + 1] &= ~otherbitmap.words[k + 1];\n    this.words[k + 2] &= ~otherbitmap.words[k + 2];\n    this.words[k + 3] &= ~otherbitmap.words[k + 3];\n    this.words[k + 4] &= ~otherbitmap.words[k + 4];\n    this.words[k + 5] &= ~otherbitmap.words[k + 5];\n    this.words[k + 6] &= ~otherbitmap.words[k + 6];\n    this.words[k + 7] &= ~otherbitmap.words[k + 7];\n  }\n  for (; k < newcount; ++k) {\n    this.words[k] &= ~otherbitmap.words[k];\n  }\n  return this;\n};\n\n// Computes the size of the difference between this bitset and another one\nFastBitSet.prototype.difference_size = function(otherbitmap) {\n  var newcount = Math.min(this.words.length,otherbitmap.words.length);\n  var answer = 0 | 0;\n  var k = 0 | 0;\n  for (; k < newcount; ++k) {\n    answer += this.hammingWeight(this.words[k] & (~otherbitmap.words[k]));\n  }\n  var c = this.words.length;\n  for (; k < c; ++k) {\n    answer += this.hammingWeight(this.words[k]);\n  }\n  return answer;\n};\n\n// Returns a string representation\nFastBitSet.prototype.toString = function() {\n  return '{' + this.array().join(',') + '}';\n};\n\n// Computes the union between this bitset and another one,\n// the current bitset is modified  (and returned by the function)\nFastBitSet.prototype.union = function(otherbitmap) {\n  var mcount = Math.min(this.words.length,otherbitmap.words.length);\n  var k = 0 | 0;\n  for (; k + 7  < mcount; k += 8) {\n    this.words[k] |= otherbitmap.words[k];\n    this.words[k + 1] |= otherbitmap.words[k + 1];\n    this.words[k + 2] |= otherbitmap.words[k + 2];\n    this.words[k + 3] |= otherbitmap.words[k + 3];\n    this.words[k + 4] |= otherbitmap.words[k + 4];\n    this.words[k + 5] |= otherbitmap.words[k + 5];\n    this.words[k + 6] |= otherbitmap.words[k + 6];\n    this.words[k + 7] |= otherbitmap.words[k + 7];\n  }\n  for (; k < mcount; ++k) {\n    this.words[k] |= otherbitmap.words[k];\n  }\n  if (this.words.length < otherbitmap.words.length) {\n    this.resize((otherbitmap.words.length  << 5) - 1);\n    var c = otherbitmap.words.length;\n    for (var k = mcount; k < c; ++k) {\n      this.words[k] = otherbitmap.words[k];\n    }\n  }\n  return this;\n};\n\nFastBitSet.prototype.new_union = function(otherbitmap) {\n  var answer = Object.create(FastBitSet.prototype);\n  var count = Math.max(this.words.length,otherbitmap.words.length);\n  answer.words = new Array(count);\n  var mcount = Math.min(this.words.length,otherbitmap.words.length)\n  var k = 0;\n  for (; k + 7  < mcount; k += 8) {\n      answer.words[k] = this.words[k] | otherbitmap.words[k];\n      answer.words[k+1] = this.words[k+1] | otherbitmap.words[k+1];\n      answer.words[k+2] = this.words[k+2] | otherbitmap.words[k+2];\n      answer.words[k+3] = this.words[k+3] | otherbitmap.words[k+3];\n      answer.words[k+4] = this.words[k+4] | otherbitmap.words[k+4];\n      answer.words[k+5] = this.words[k+5] | otherbitmap.words[k+5];\n      answer.words[k+6] = this.words[k+6] | otherbitmap.words[k+6];\n      answer.words[k+7] = this.words[k+7] | otherbitmap.words[k+7];\n  }\n  for (; k < mcount; ++k) {\n      answer.words[k] = this.words[k] | otherbitmap.words[k];\n  }\n  var c = this.words.length;\n  for (var k = mcount; k < c; ++k) {\n      answer.words[k] = this.words[k] ;\n  }\n  var c2 = otherbitmap.words.length;\n  for (var k = mcount; k < c2; ++k) {\n      answer.words[k] = otherbitmap.words[k] ;\n  }\n  return answer;\n};\n\n\n// Computes the difference between this bitset and another one,\n// a new bitmap is generated\nFastBitSet.prototype.new_difference = function(otherbitmap) {\n  return this.clone().difference(otherbitmap);// should be fast enough\n};\n\n// Computes the size union between this bitset and another one\nFastBitSet.prototype.union_size = function(otherbitmap) {\n  var mcount = Math.min(this.words.length,otherbitmap.words.length);\n  var answer = 0 | 0;\n  for (var k = 0 | 0; k < mcount; ++k) {\n    answer += this.hammingWeight(this.words[k] | otherbitmap.words[k]);\n  }\n  if (this.words.length < otherbitmap.words.length) {\n    var c = otherbitmap.words.length;\n    for (var k = this.words.length ; k < c; ++k) {\n      answer += this.hammingWeight(otherbitmap.words[k] | 0);\n    }\n  } else {\n    var c = this.words.length;\n    for (var k = otherbitmap.words.length ; k < c; ++k) {\n      answer += this.hammingWeight(this.words[k] | 0);\n    }\n  }\n  return answer;\n};\n\n\n\n\n///////////////\n\nmodule.exports = FastBitSet;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Archetype = void 0;\nconst fastbitset_1 = __importDefault(require(\"fastbitset\"));\nclass Archetype {\n    constructor(componentTypes) {\n        this.componentBits = new fastbitset_1.default();\n        this.componentBitsInitialized = false;\n        this.componentTypes = componentTypes;\n    }\n}\nexports.Archetype = Archetype;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Component = void 0;\nclass Component {\n}\nexports.Component = Component;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ComponentMapper = void 0;\nclass ComponentMapper {\n    constructor() {\n        this.data = [];\n    }\n    add(entityId, component) {\n        this.data[entityId] = component;\n    }\n    get(entityId) {\n        return this.data[entityId];\n    }\n    remove(entityId) {\n        delete this.data[entityId];\n    }\n}\nexports.ComponentMapper = ComponentMapper;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EntityIteratingSystem = void 0;\nconst System_1 = require(\"./System\");\nconst fastbitset_1 = __importDefault(require(\"fastbitset\"));\nclass EntityIteratingSystem extends System_1.System {\n    constructor(types) {\n        super();\n        this.componentBits = new fastbitset_1.default();\n        this.types = types;\n    }\n    setWorld(world) {\n        super.setWorld(world);\n        for (let type of this.types) {\n            this.componentBits.add(world.getComponentIndex(type));\n        }\n    }\n    process() {\n        this.begin();\n        this.world.getEntities(this.componentBits, this.processEntity.bind(this));\n        this.end();\n    }\n    begin() { }\n    end() { }\n}\nexports.EntityIteratingSystem = EntityIteratingSystem;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EntitySystem = void 0;\nconst EntityIteratingSystem_1 = require(\"./EntityIteratingSystem\");\nclass EntitySystem extends EntityIteratingSystem_1.EntityIteratingSystem {\n    constructor() {\n        super(...arguments);\n        this.entities = [];\n    }\n    process() {\n        this.entities.length = 0;\n        this.begin();\n        this.world.getEntities(this.componentBits, this.processEntity.bind(this));\n        this.processEntities(this.entities);\n        this.end();\n    }\n    processEntity(entityId) {\n        this.entities.push(entityId);\n    }\n}\nexports.EntitySystem = EntitySystem;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Inject = void 0;\nfunction Inject(name) {\n    return (target, propName) => {\n        const targetType = target.constructor;\n        if (!targetType.hasOwnProperty('__inject__')) {\n            targetType.__inject__ = {};\n        }\n        targetType.__inject__[propName] = name;\n    };\n}\nexports.Inject = Inject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InjectMapper = void 0;\nfunction InjectMapper(type) {\n    return (target, propName) => {\n        const targetType = target.constructor;\n        if (!targetType.hasOwnProperty('__injectMapper__')) {\n            targetType.__injectMapper__ = {};\n        }\n        targetType.__injectMapper__[propName] = type;\n    };\n}\nexports.InjectMapper = InjectMapper;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.System = void 0;\nclass System {\n    setWorld(world) {\n        this.world = world;\n    }\n    initialized() { }\n    dispose() { }\n}\nexports.System = System;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst fastbitset_1 = __importDefault(require(\"fastbitset\"));\nconst ComponentMapper_1 = require(\"./ComponentMapper\");\nclass World {\n    constructor() {\n        this.index = 0;\n        this.mappers = {};\n        this.componentBitsMap = [];\n        this.componentIndices = new Map();\n        this.currentComponentIndex = 0;\n        this.activeSystems = [];\n        this.passiveSystems = [];\n        this.injectionRegistry = {};\n        this.delta = 0;\n    }\n    getNewId() {\n        return this.index++;\n    }\n    createEntity() {\n        const id = this.getNewId();\n        return id;\n    }\n    getComponentBits(entityId) {\n        if (!this.componentBitsMap[entityId]) {\n            this.componentBitsMap[entityId] = new fastbitset_1.default();\n        }\n        return this.componentBitsMap[entityId];\n    }\n    getMapper(type) {\n        const typeIndex = this.getComponentIndex(type);\n        return this.getMapperByIndex(typeIndex);\n    }\n    getMapperByIndex(typeIndex) {\n        if (!this.mappers[typeIndex]) {\n            this.mappers[typeIndex] = new ComponentMapper_1.ComponentMapper();\n        }\n        return this.mappers[typeIndex];\n    }\n    getComponentIndex(type) {\n        let index = this.componentIndices.get(type);\n        if (index === undefined) {\n            index = this.currentComponentIndex++;\n            this.componentIndices.set(type, index);\n        }\n        return index;\n    }\n    createEntityByArchetype(archetype) {\n        const id = this.getNewId();\n        archetype.componentTypes.forEach(type => {\n            const component = new type();\n            if (!archetype.componentBitsInitialized) {\n                archetype.componentBits.add(this.getComponentIndex(type));\n            }\n            this.addComponent(id, component, false);\n        });\n        this.componentBitsMap[id] = archetype.componentBits;\n        return id;\n    }\n    addComponent(entityId, component, updateComponentBits = true) {\n        const typeIndex = this.getComponentIndex(component.constructor);\n        const mapper = this.getMapperByIndex(typeIndex);\n        mapper.add(entityId, component);\n        if (updateComponentBits)\n            this.getComponentBits(entityId).add(typeIndex);\n        return component;\n    }\n    getComponent(entityId, type) {\n        const mapper = this.getMapper(type);\n        return mapper.get(entityId);\n    }\n    getEntities(componentBits, iterator) {\n        for (let i = 0; i < this.componentBitsMap.length; i++) {\n            if (this.componentBitsMap[i]) {\n                const entityComponentBits = this.componentBitsMap[i];\n                if (componentBits.union_size(entityComponentBits) === entityComponentBits.size()) {\n                    iterator(i);\n                }\n            }\n        }\n    }\n    addSystem(system, active = true) {\n        active ? this.activeSystems.push(system) : this.passiveSystems.push(system);\n        system.setWorld(this);\n        this.injectMapper(system);\n        this.inject(system);\n        system.initialized();\n    }\n    injectMapper(system) {\n        const type = system.constructor;\n        const injectPoints = type.__injectMapper__ || {};\n        for (let injectKey in injectPoints) {\n            const componentType = injectPoints[injectKey];\n            system[injectKey] = this.getMapper(componentType);\n        }\n    }\n    register(name, value) {\n        this.injectionRegistry[name] = value;\n    }\n    inject(object) {\n        const type = object.constructor;\n        const injectPoints = type.__inject__ || {};\n        for (let injectKey in injectPoints) {\n            const injectName = injectPoints[injectKey];\n            object[injectKey] = this.injectionRegistry[injectName];\n        }\n    }\n    dispose() {\n        for (let system of this.activeSystems) {\n            system.dispose();\n        }\n        for (let system of this.passiveSystems) {\n            system.dispose();\n        }\n    }\n    setDelta(delta) {\n        this.delta = delta;\n    }\n    processActiveSystem() {\n        for (let system of this.activeSystems) {\n            system.process();\n        }\n    }\n    processPassiveSystem() {\n        for (let system of this.passiveSystems) {\n            system.process();\n        }\n    }\n    deleteEntity(entityId) {\n        for (let type in this.mappers) {\n            this.mappers[type].remove(entityId);\n        }\n        delete this.componentBitsMap[entityId];\n    }\n    isEntityActive(entityId) {\n        return !!this.componentBitsMap[entityId];\n    }\n}\nexports.default = World;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar World_1 = require(\"./World\");\nObject.defineProperty(exports, \"World\", { enumerable: true, get: function () { return World_1.default; } });\nvar Archetype_1 = require(\"./Archetype\");\nObject.defineProperty(exports, \"Archetype\", { enumerable: true, get: function () { return Archetype_1.Archetype; } });\nvar Component_1 = require(\"./Component\");\nObject.defineProperty(exports, \"Component\", { enumerable: true, get: function () { return Component_1.Component; } });\nvar ComponentMapper_1 = require(\"./ComponentMapper\");\nObject.defineProperty(exports, \"ComponentMapper\", { enumerable: true, get: function () { return ComponentMapper_1.ComponentMapper; } });\nvar EntityIteratingSystem_1 = require(\"./EntityIteratingSystem\");\nObject.defineProperty(exports, \"EntityIteratingSystem\", { enumerable: true, get: function () { return EntityIteratingSystem_1.EntityIteratingSystem; } });\nvar EntitySystem_1 = require(\"./EntitySystem\");\nObject.defineProperty(exports, \"EntitySystem\", { enumerable: true, get: function () { return EntitySystem_1.EntitySystem; } });\nvar System_1 = require(\"./System\");\nObject.defineProperty(exports, \"System\", { enumerable: true, get: function () { return System_1.System; } });\nvar InjectMapper_1 = require(\"./InjectMapper\");\nObject.defineProperty(exports, \"InjectMapper\", { enumerable: true, get: function () { return InjectMapper_1.InjectMapper; } });\nvar Inject_1 = require(\"./Inject\");\nObject.defineProperty(exports, \"Inject\", { enumerable: true, get: function () { return Inject_1.Inject; } });\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DefaultRenderableSorter = void 0;\r\nconst Vector3_1 = require(\"../Vector3\");\r\nconst BlendingAttribute_1 = require(\"./attributes/BlendingAttribute\");\r\nclass DefaultRenderableSorter {\r\n    constructor() {\r\n        this.tmpV1 = new Vector3_1.Vector3();\r\n        this.tmpV2 = new Vector3_1.Vector3();\r\n    }\r\n    sort(camera, renderables) {\r\n        this.camera = camera;\r\n        //renderables.sort(this.compare.bind(this));\r\n    }\r\n    getTranslation(worldTransform, center, output) {\r\n        if (center.isZero())\r\n            worldTransform.getTranslation(output);\r\n        else if (!worldTransform.hasRotationOrScaling())\r\n            worldTransform.getTranslation(output).add(center);\r\n        else\r\n            output.set(center.x, center.y, center.z).multiply(worldTransform);\r\n        return output;\r\n    }\r\n    compare(o1, o2) {\r\n        const b1 = o1.material.has(BlendingAttribute_1.BlendingAttribute.Type) && o1.material.get(BlendingAttribute_1.BlendingAttribute.Type).blended;\r\n        const b2 = o2.material.has(BlendingAttribute_1.BlendingAttribute.Type) && o2.material.get(BlendingAttribute_1.BlendingAttribute.Type).blended;\r\n        if (b1 !== b2)\r\n            return b1 ? 1 : -1;\r\n        this.getTranslation(o1.worldTransform, o1.meshPart.center, this.tmpV1);\r\n        this.getTranslation(o2.worldTransform, o2.meshPart.center, this.tmpV2);\r\n        const dst = 1000 * this.camera.position.dst2(this.tmpV1) - 1000 * this.camera.position.dst2(this.tmpV2);\r\n        const result = dst < 0 ? -1 : dst > 0 ? 1 : 0;\r\n        return b1 ? -result : result;\r\n    }\r\n}\r\nexports.DefaultRenderableSorter = DefaultRenderableSorter;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DefaultShaderProvider = void 0;\r\nconst DefaultShader_1 = require(\"./shaders/DefaultShader\");\r\nclass DefaultShaderProvider {\r\n    constructor(gl, config = null, vertexShader = '', fragmentShader = '') {\r\n        this.gl = gl;\r\n        this.shaders = [];\r\n        this.config = !config ? new DefaultShader_1.Config(vertexShader, fragmentShader) : config;\r\n    }\r\n    dispose() { }\r\n    getShader(renderable) {\r\n        const suggestedShader = renderable.shader;\r\n        if (!!suggestedShader && suggestedShader.canRender(renderable))\r\n            return suggestedShader;\r\n        for (const shader of this.shaders) {\r\n            if (shader.canRender(renderable))\r\n                return shader;\r\n        }\r\n        const shader = this.createShader(this.gl, renderable);\r\n        if (!shader.canRender(renderable))\r\n            throw new Error('unable to provide a shader for this renderable');\r\n        shader.init();\r\n        this.shaders.push(shader);\r\n        return shader;\r\n    }\r\n    createShader(gl, renderable) {\r\n        return new DefaultShader_1.DefaultShader(gl, renderable, this.config);\r\n    }\r\n}\r\nexports.DefaultShaderProvider = DefaultShaderProvider;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DefaultTextureBinder = void 0;\r\nconst Texture_1 = require(\"../Texture\");\r\nclass DefaultTextureBinder {\r\n    constructor(gl, method, offset = 0, count = -1) {\r\n        this.reuseCount = 0;\r\n        this.bindCount = 0;\r\n        this.currentTexture = 0;\r\n        DefaultTextureBinder.gl = gl;\r\n        const max = Math.min(DefaultTextureBinder.getMaxTextureUnits(), DefaultTextureBinder.MAX_GLES_UNITS);\r\n        if (count < 0)\r\n            count = max - offset;\r\n        if (offset < 0 || count < 0 || offset + count > max)\r\n            throw new Error('Illegal arguments');\r\n        this.method = method;\r\n        this.offset = offset;\r\n        this.count = count;\r\n        this.textures = new Array(count);\r\n        this.unitsLRU = method === DefaultTextureBinder.LRU ? new Array(count) : null;\r\n    }\r\n    static getMaxTextureUnits() {\r\n        return this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS);\r\n    }\r\n    begin() {\r\n        for (let i = 0; i < this.count; i++) {\r\n            this.textures[i] = null;\r\n            if (this.unitsLRU != null)\r\n                this.unitsLRU[i] = i;\r\n        }\r\n    }\r\n    end() {\r\n        DefaultTextureBinder.gl.activeTexture(DefaultTextureBinder.gl.TEXTURE0);\r\n    }\r\n    bindTexture(texture, rebind = false) {\r\n        let result;\r\n        this.reused = false;\r\n        switch (this.method) {\r\n            case DefaultTextureBinder.ROUNDROBIN:\r\n                result = this.offset + this.bindTextureRoundRobin(texture);\r\n                break;\r\n            case DefaultTextureBinder.LRU:\r\n                result = this.offset + this.bindTextureLRU(texture);\r\n                break;\r\n            default:\r\n                return -1;\r\n        }\r\n        if (this.reused) {\r\n            this.reuseCount++;\r\n            if (rebind)\r\n                texture.bind(result);\r\n            else\r\n                DefaultTextureBinder.gl.activeTexture(DefaultTextureBinder.gl.TEXTURE0 + result);\r\n        }\r\n        else\r\n            this.bindCount++;\r\n        texture.setWraps(Texture_1.TextureWrap.Repeat, Texture_1.TextureWrap.Repeat);\r\n        texture.setFilters(Texture_1.TextureFilter.Linear, Texture_1.TextureFilter.Linear);\r\n        return result;\r\n    }\r\n    bindTextureRoundRobin(texture) {\r\n        for (let i = 0; i < this.count; i++) {\r\n            const idx = (this.currentTexture + i) % this.count;\r\n            if (this.textures[idx] === texture) {\r\n                this.reused = true;\r\n                return idx;\r\n            }\r\n        }\r\n        this.currentTexture = (this.currentTexture + 1) % this.count;\r\n        this.textures[this.currentTexture] = texture;\r\n        texture.bind(this.offset + this.currentTexture);\r\n        return this.currentTexture;\r\n    }\r\n    bindTextureLRU(texture) {\r\n        let i;\r\n        for (i = 0; i < this.count; i++) {\r\n            const idx = this.unitsLRU[i];\r\n            if (this.textures[idx] === texture) {\r\n                this.reused = true;\r\n                break;\r\n            }\r\n            if (!this.textures[idx]) {\r\n                break;\r\n            }\r\n        }\r\n        if (i >= this.count)\r\n            i = this.count - 1;\r\n        const idx = this.unitsLRU[i];\r\n        while (i > 0) {\r\n            this.unitsLRU[i] = this.unitsLRU[i - 1];\r\n            i--;\r\n        }\r\n        this.unitsLRU[0] = idx;\r\n        if (!this.reused) {\r\n            this.textures[idx] = texture;\r\n            texture.bind(this.offset + idx);\r\n        }\r\n        return idx;\r\n    }\r\n    getBindCount() {\r\n        return this.bindCount;\r\n    }\r\n    getReuseCount() {\r\n        return this.reuseCount;\r\n    }\r\n    resetCounts() {\r\n        this.bindCount = this.reuseCount = 0;\r\n    }\r\n}\r\nexports.DefaultTextureBinder = DefaultTextureBinder;\r\nDefaultTextureBinder.ROUNDROBIN = 0;\r\nDefaultTextureBinder.LRU = 1;\r\nDefaultTextureBinder.MAX_GLES_UNITS = 32;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GL20 = void 0;\r\nclass GL20 {\r\n}\r\nexports.GL20 = GL20;\r\nGL20.GL_ES_VERSION_2_0 = 1;\r\nGL20.GL_DEPTH_BUFFER_BIT = 0x00000100;\r\nGL20.GL_STENCIL_BUFFER_BIT = 0x00000400;\r\nGL20.GL_COLOR_BUFFER_BIT = 0x00004000;\r\nGL20.GL_FALSE = 0;\r\nGL20.GL_TRUE = 1;\r\nGL20.GL_POINTS = 0x0000;\r\nGL20.GL_LINES = 0x0001;\r\nGL20.GL_LINE_LOOP = 0x0002;\r\nGL20.GL_LINE_STRIP = 0x0003;\r\nGL20.GL_TRIANGLES = 0x0004;\r\nGL20.GL_TRIANGLE_STRIP = 0x0005;\r\nGL20.GL_TRIANGLE_FAN = 0x0006;\r\nGL20.GL_ZERO = 0;\r\nGL20.GL_ONE = 1;\r\nGL20.GL_SRC_COLOR = 0x0300;\r\nGL20.GL_ONE_MINUS_SRC_COLOR = 0x0301;\r\nGL20.GL_SRC_ALPHA = 0x0302;\r\nGL20.GL_ONE_MINUS_SRC_ALPHA = 0x0303;\r\nGL20.GL_DST_ALPHA = 0x0304;\r\nGL20.GL_ONE_MINUS_DST_ALPHA = 0x0305;\r\nGL20.GL_DST_COLOR = 0x0306;\r\nGL20.GL_ONE_MINUS_DST_COLOR = 0x0307;\r\nGL20.GL_SRC_ALPHA_SATURATE = 0x0308;\r\nGL20.GL_FUNC_ADD = 0x8006;\r\nGL20.GL_BLEND_EQUATION = 0x8009;\r\nGL20.GL_BLEND_EQUATION_RGB = 0x8009;\r\nGL20.GL_BLEND_EQUATION_ALPHA = 0x883d;\r\nGL20.GL_FUNC_SUBTRACT = 0x800a;\r\nGL20.GL_FUNC_REVERSE_SUBTRACT = 0x800b;\r\nGL20.GL_BLEND_DST_RGB = 0x80c8;\r\nGL20.GL_BLEND_SRC_RGB = 0x80c9;\r\nGL20.GL_BLEND_DST_ALPHA = 0x80ca;\r\nGL20.GL_BLEND_SRC_ALPHA = 0x80cb;\r\nGL20.GL_CONSTANT_COLOR = 0x8001;\r\nGL20.GL_ONE_MINUS_CONSTANT_COLOR = 0x8002;\r\nGL20.GL_CONSTANT_ALPHA = 0x8003;\r\nGL20.GL_ONE_MINUS_CONSTANT_ALPHA = 0x8004;\r\nGL20.GL_BLEND_COLOR = 0x8005;\r\nGL20.GL_ARRAY_BUFFER = 0x8892;\r\nGL20.GL_ELEMENT_ARRAY_BUFFER = 0x8893;\r\nGL20.GL_ARRAY_BUFFER_BINDING = 0x8894;\r\nGL20.GL_ELEMENT_ARRAY_BUFFER_BINDING = 0x8895;\r\nGL20.GL_STREAM_DRAW = 0x88e0;\r\nGL20.GL_STATIC_DRAW = 0x88e4;\r\nGL20.GL_DYNAMIC_DRAW = 0x88e8;\r\nGL20.GL_BUFFER_SIZE = 0x8764;\r\nGL20.GL_BUFFER_USAGE = 0x8765;\r\nGL20.GL_CURRENT_VERTEX_ATTRIB = 0x8626;\r\nGL20.GL_FRONT = 0x0404;\r\nGL20.GL_BACK = 0x0405;\r\nGL20.GL_FRONT_AND_BACK = 0x0408;\r\nGL20.GL_TEXTURE_2D = 0x0de1;\r\nGL20.GL_CULL_FACE = 0x0b44;\r\nGL20.GL_BLEND = 0x0be2;\r\nGL20.GL_DITHER = 0x0bd0;\r\nGL20.GL_STENCIL_TEST = 0x0b90;\r\nGL20.GL_DEPTH_TEST = 0x0b71;\r\nGL20.GL_SCISSOR_TEST = 0x0c11;\r\nGL20.GL_POLYGON_OFFSET_FILL = 0x8037;\r\nGL20.GL_SAMPLE_ALPHA_TO_COVERAGE = 0x809e;\r\nGL20.GL_SAMPLE_COVERAGE = 0x80a0;\r\nGL20.GL_NO_ERROR = 0;\r\nGL20.GL_INVALID_ENUM = 0x0500;\r\nGL20.GL_INVALID_VALUE = 0x0501;\r\nGL20.GL_INVALID_OPERATION = 0x0502;\r\nGL20.GL_OUT_OF_MEMORY = 0x0505;\r\nGL20.GL_CW = 0x0900;\r\nGL20.GL_CCW = 0x0901;\r\nGL20.GL_LINE_WIDTH = 0x0b21;\r\nGL20.GL_ALIASED_POINT_SIZE_RANGE = 0x846d;\r\nGL20.GL_ALIASED_LINE_WIDTH_RANGE = 0x846e;\r\nGL20.GL_CULL_FACE_MODE = 0x0b45;\r\nGL20.GL_FRONT_FACE = 0x0b46;\r\nGL20.GL_DEPTH_RANGE = 0x0b70;\r\nGL20.GL_DEPTH_WRITEMASK = 0x0b72;\r\nGL20.GL_DEPTH_CLEAR_VALUE = 0x0b73;\r\nGL20.GL_DEPTH_FUNC = 0x0b74;\r\nGL20.GL_STENCIL_CLEAR_VALUE = 0x0b91;\r\nGL20.GL_STENCIL_FUNC = 0x0b92;\r\nGL20.GL_STENCIL_FAIL = 0x0b94;\r\nGL20.GL_STENCIL_PASS_DEPTH_FAIL = 0x0b95;\r\nGL20.GL_STENCIL_PASS_DEPTH_PASS = 0x0b96;\r\nGL20.GL_STENCIL_REF = 0x0b97;\r\nGL20.GL_STENCIL_VALUE_MASK = 0x0b93;\r\nGL20.GL_STENCIL_WRITEMASK = 0x0b98;\r\nGL20.GL_STENCIL_BACK_FUNC = 0x8800;\r\nGL20.GL_STENCIL_BACK_FAIL = 0x8801;\r\nGL20.GL_STENCIL_BACK_PASS_DEPTH_FAIL = 0x8802;\r\nGL20.GL_STENCIL_BACK_PASS_DEPTH_PASS = 0x8803;\r\nGL20.GL_STENCIL_BACK_REF = 0x8ca3;\r\nGL20.GL_STENCIL_BACK_VALUE_MASK = 0x8ca4;\r\nGL20.GL_STENCIL_BACK_WRITEMASK = 0x8ca5;\r\nGL20.GL_VIEWPORT = 0x0ba2;\r\nGL20.GL_SCISSOR_BOX = 0x0c10;\r\nGL20.GL_COLOR_CLEAR_VALUE = 0x0c22;\r\nGL20.GL_COLOR_WRITEMASK = 0x0c23;\r\nGL20.GL_UNPACK_ALIGNMENT = 0x0cf5;\r\nGL20.GL_PACK_ALIGNMENT = 0x0d05;\r\nGL20.GL_MAX_TEXTURE_SIZE = 0x0d33;\r\nGL20.GL_MAX_TEXTURE_UNITS = 0x84e2;\r\nGL20.GL_MAX_VIEWPORT_DIMS = 0x0d3a;\r\nGL20.GL_SUBPIXEL_BITS = 0x0d50;\r\nGL20.GL_RED_BITS = 0x0d52;\r\nGL20.GL_GREEN_BITS = 0x0d53;\r\nGL20.GL_BLUE_BITS = 0x0d54;\r\nGL20.GL_ALPHA_BITS = 0x0d55;\r\nGL20.GL_DEPTH_BITS = 0x0d56;\r\nGL20.GL_STENCIL_BITS = 0x0d57;\r\nGL20.GL_POLYGON_OFFSET_UNITS = 0x2a00;\r\nGL20.GL_POLYGON_OFFSET_FACTOR = 0x8038;\r\nGL20.GL_TEXTURE_BINDING_2D = 0x8069;\r\nGL20.GL_SAMPLE_BUFFERS = 0x80a8;\r\nGL20.GL_SAMPLES = 0x80a9;\r\nGL20.GL_SAMPLE_COVERAGE_VALUE = 0x80aa;\r\nGL20.GL_SAMPLE_COVERAGE_INVERT = 0x80ab;\r\nGL20.GL_NUM_COMPRESSED_TEXTURE_FORMATS = 0x86a2;\r\nGL20.GL_COMPRESSED_TEXTURE_FORMATS = 0x86a3;\r\nGL20.GL_DONT_CARE = 0x1100;\r\nGL20.GL_FASTEST = 0x1101;\r\nGL20.GL_NICEST = 0x1102;\r\nGL20.GL_GENERATE_MIPMAP = 0x8191;\r\nGL20.GL_GENERATE_MIPMAP_HINT = 0x8192;\r\nGL20.GL_BYTE = 0x1400;\r\nGL20.GL_UNSIGNED_BYTE = 0x1401;\r\nGL20.GL_SHORT = 0x1402;\r\nGL20.GL_UNSIGNED_SHORT = 0x1403;\r\nGL20.GL_INT = 0x1404;\r\nGL20.GL_UNSIGNED_INT = 0x1405;\r\nGL20.GL_FLOAT = 0x1406;\r\nGL20.GL_FIXED = 0x140c;\r\nGL20.GL_DEPTH_COMPONENT = 0x1902;\r\nGL20.GL_ALPHA = 0x1906;\r\nGL20.GL_RGB = 0x1907;\r\nGL20.GL_RGBA = 0x1908;\r\nGL20.GL_LUMINANCE = 0x1909;\r\nGL20.GL_LUMINANCE_ALPHA = 0x190a;\r\nGL20.GL_UNSIGNED_SHORT_4_4_4_4 = 0x8033;\r\nGL20.GL_UNSIGNED_SHORT_5_5_5_1 = 0x8034;\r\nGL20.GL_UNSIGNED_SHORT_5_6_5 = 0x8363;\r\nGL20.GL_FRAGMENT_SHADER = 0x8b30;\r\nGL20.GL_VERTEX_SHADER = 0x8b31;\r\nGL20.GL_MAX_VERTEX_ATTRIBS = 0x8869;\r\nGL20.GL_MAX_VERTEX_UNIFORM_VECTORS = 0x8dfb;\r\nGL20.GL_MAX_VARYING_VECTORS = 0x8dfc;\r\nGL20.GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS = 0x8b4d;\r\nGL20.GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS = 0x8b4c;\r\nGL20.GL_MAX_TEXTURE_IMAGE_UNITS = 0x8872;\r\nGL20.GL_MAX_FRAGMENT_UNIFORM_VECTORS = 0x8dfd;\r\nGL20.GL_SHADER_TYPE = 0x8b4f;\r\nGL20.GL_DELETE_STATUS = 0x8b80;\r\nGL20.GL_LINK_STATUS = 0x8b82;\r\nGL20.GL_VALIDATE_STATUS = 0x8b83;\r\nGL20.GL_ATTACHED_SHADERS = 0x8b85;\r\nGL20.GL_ACTIVE_UNIFORMS = 0x8b86;\r\nGL20.GL_ACTIVE_UNIFORM_MAX_LENGTH = 0x8b87;\r\nGL20.GL_ACTIVE_ATTRIBUTES = 0x8b89;\r\nGL20.GL_ACTIVE_ATTRIBUTE_MAX_LENGTH = 0x8b8a;\r\nGL20.GL_SHADING_LANGUAGE_VERSION = 0x8b8c;\r\nGL20.GL_CURRENT_PROGRAM = 0x8b8d;\r\nGL20.GL_NEVER = 0x0200;\r\nGL20.GL_LESS = 0x0201;\r\nGL20.GL_EQUAL = 0x0202;\r\nGL20.GL_LEQUAL = 0x0203;\r\nGL20.GL_GREATER = 0x0204;\r\nGL20.GL_NOTEQUAL = 0x0205;\r\nGL20.GL_GEQUAL = 0x0206;\r\nGL20.GL_ALWAYS = 0x0207;\r\nGL20.GL_KEEP = 0x1e00;\r\nGL20.GL_REPLACE = 0x1e01;\r\nGL20.GL_INCR = 0x1e02;\r\nGL20.GL_DECR = 0x1e03;\r\nGL20.GL_INVERT = 0x150a;\r\nGL20.GL_INCR_WRAP = 0x8507;\r\nGL20.GL_DECR_WRAP = 0x8508;\r\nGL20.GL_VENDOR = 0x1f00;\r\nGL20.GL_RENDERER = 0x1f01;\r\nGL20.GL_VERSION = 0x1f02;\r\nGL20.GL_EXTENSIONS = 0x1f03;\r\nGL20.GL_NEAREST = 0x2600;\r\nGL20.GL_LINEAR = 0x2601;\r\nGL20.GL_NEAREST_MIPMAP_NEAREST = 0x2700;\r\nGL20.GL_LINEAR_MIPMAP_NEAREST = 0x2701;\r\nGL20.GL_NEAREST_MIPMAP_LINEAR = 0x2702;\r\nGL20.GL_LINEAR_MIPMAP_LINEAR = 0x2703;\r\nGL20.GL_TEXTURE_MAG_FILTER = 0x2800;\r\nGL20.GL_TEXTURE_MIN_FILTER = 0x2801;\r\nGL20.GL_TEXTURE_WRAP_S = 0x2802;\r\nGL20.GL_TEXTURE_WRAP_T = 0x2803;\r\nGL20.GL_TEXTURE = 0x1702;\r\nGL20.GL_TEXTURE_CUBE_MAP = 0x8513;\r\nGL20.GL_TEXTURE_BINDING_CUBE_MAP = 0x8514;\r\nGL20.GL_TEXTURE_CUBE_MAP_POSITIVE_X = 0x8515;\r\nGL20.GL_TEXTURE_CUBE_MAP_NEGATIVE_X = 0x8516;\r\nGL20.GL_TEXTURE_CUBE_MAP_POSITIVE_Y = 0x8517;\r\nGL20.GL_TEXTURE_CUBE_MAP_NEGATIVE_Y = 0x8518;\r\nGL20.GL_TEXTURE_CUBE_MAP_POSITIVE_Z = 0x8519;\r\nGL20.GL_TEXTURE_CUBE_MAP_NEGATIVE_Z = 0x851a;\r\nGL20.GL_MAX_CUBE_MAP_TEXTURE_SIZE = 0x851c;\r\nGL20.GL_TEXTURE0 = 0x84c0;\r\nGL20.GL_TEXTURE1 = 0x84c1;\r\nGL20.GL_TEXTURE2 = 0x84c2;\r\nGL20.GL_TEXTURE3 = 0x84c3;\r\nGL20.GL_TEXTURE4 = 0x84c4;\r\nGL20.GL_TEXTURE5 = 0x84c5;\r\nGL20.GL_TEXTURE6 = 0x84c6;\r\nGL20.GL_TEXTURE7 = 0x84c7;\r\nGL20.GL_TEXTURE8 = 0x84c8;\r\nGL20.GL_TEXTURE9 = 0x84c9;\r\nGL20.GL_TEXTURE10 = 0x84ca;\r\nGL20.GL_TEXTURE11 = 0x84cb;\r\nGL20.GL_TEXTURE12 = 0x84cc;\r\nGL20.GL_TEXTURE13 = 0x84cd;\r\nGL20.GL_TEXTURE14 = 0x84ce;\r\nGL20.GL_TEXTURE15 = 0x84cf;\r\nGL20.GL_TEXTURE16 = 0x84d0;\r\nGL20.GL_TEXTURE17 = 0x84d1;\r\nGL20.GL_TEXTURE18 = 0x84d2;\r\nGL20.GL_TEXTURE19 = 0x84d3;\r\nGL20.GL_TEXTURE20 = 0x84d4;\r\nGL20.GL_TEXTURE21 = 0x84d5;\r\nGL20.GL_TEXTURE22 = 0x84d6;\r\nGL20.GL_TEXTURE23 = 0x84d7;\r\nGL20.GL_TEXTURE24 = 0x84d8;\r\nGL20.GL_TEXTURE25 = 0x84d9;\r\nGL20.GL_TEXTURE26 = 0x84da;\r\nGL20.GL_TEXTURE27 = 0x84db;\r\nGL20.GL_TEXTURE28 = 0x84dc;\r\nGL20.GL_TEXTURE29 = 0x84dd;\r\nGL20.GL_TEXTURE30 = 0x84de;\r\nGL20.GL_TEXTURE31 = 0x84df;\r\nGL20.GL_ACTIVE_TEXTURE = 0x84e0;\r\nGL20.GL_REPEAT = 0x2901;\r\nGL20.GL_CLAMP_TO_EDGE = 0x812f;\r\nGL20.GL_MIRRORED_REPEAT = 0x8370;\r\nGL20.GL_FLOAT_VEC2 = 0x8b50;\r\nGL20.GL_FLOAT_VEC3 = 0x8b51;\r\nGL20.GL_FLOAT_VEC4 = 0x8b52;\r\nGL20.GL_INT_VEC2 = 0x8b53;\r\nGL20.GL_INT_VEC3 = 0x8b54;\r\nGL20.GL_INT_VEC4 = 0x8b55;\r\nGL20.GL_BOOL = 0x8b56;\r\nGL20.GL_BOOL_VEC2 = 0x8b57;\r\nGL20.GL_BOOL_VEC3 = 0x8b58;\r\nGL20.GL_BOOL_VEC4 = 0x8b59;\r\nGL20.GL_FLOAT_MAT2 = 0x8b5a;\r\nGL20.GL_FLOAT_MAT3 = 0x8b5b;\r\nGL20.GL_FLOAT_MAT4 = 0x8b5c;\r\nGL20.GL_SAMPLER_2D = 0x8b5e;\r\nGL20.GL_SAMPLER_CUBE = 0x8b60;\r\nGL20.GL_VERTEX_ATTRIB_ARRAY_ENABLED = 0x8622;\r\nGL20.GL_VERTEX_ATTRIB_ARRAY_SIZE = 0x8623;\r\nGL20.GL_VERTEX_ATTRIB_ARRAY_STRIDE = 0x8624;\r\nGL20.GL_VERTEX_ATTRIB_ARRAY_TYPE = 0x8625;\r\nGL20.GL_VERTEX_ATTRIB_ARRAY_NORMALIZED = 0x886a;\r\nGL20.GL_VERTEX_ATTRIB_ARRAY_POINTER = 0x8645;\r\nGL20.GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING = 0x889f;\r\nGL20.GL_IMPLEMENTATION_COLOR_READ_TYPE = 0x8b9a;\r\nGL20.GL_IMPLEMENTATION_COLOR_READ_FORMAT = 0x8b9b;\r\nGL20.GL_COMPILE_STATUS = 0x8b81;\r\nGL20.GL_INFO_LOG_LENGTH = 0x8b84;\r\nGL20.GL_SHADER_SOURCE_LENGTH = 0x8b88;\r\nGL20.GL_SHADER_COMPILER = 0x8dfa;\r\nGL20.GL_SHADER_BINARY_FORMATS = 0x8df8;\r\nGL20.GL_NUM_SHADER_BINARY_FORMATS = 0x8df9;\r\nGL20.GL_LOW_FLOAT = 0x8df0;\r\nGL20.GL_MEDIUM_FLOAT = 0x8df1;\r\nGL20.GL_HIGH_FLOAT = 0x8df2;\r\nGL20.GL_LOW_INT = 0x8df3;\r\nGL20.GL_MEDIUM_INT = 0x8df4;\r\nGL20.GL_HIGH_INT = 0x8df5;\r\nGL20.GL_FRAMEBUFFER = 0x8d40;\r\nGL20.GL_RENDERBUFFER = 0x8d41;\r\nGL20.GL_RGBA4 = 0x8056;\r\nGL20.GL_RGB5_A1 = 0x8057;\r\nGL20.GL_RGB565 = 0x8d62;\r\nGL20.GL_DEPTH_COMPONENT16 = 0x81a5;\r\nGL20.GL_STENCIL_INDEX = 0x1901;\r\nGL20.GL_STENCIL_INDEX8 = 0x8d48;\r\nGL20.GL_RENDERBUFFER_WIDTH = 0x8d42;\r\nGL20.GL_RENDERBUFFER_HEIGHT = 0x8d43;\r\nGL20.GL_RENDERBUFFER_INTERNAL_FORMAT = 0x8d44;\r\nGL20.GL_RENDERBUFFER_RED_SIZE = 0x8d50;\r\nGL20.GL_RENDERBUFFER_GREEN_SIZE = 0x8d51;\r\nGL20.GL_RENDERBUFFER_BLUE_SIZE = 0x8d52;\r\nGL20.GL_RENDERBUFFER_ALPHA_SIZE = 0x8d53;\r\nGL20.GL_RENDERBUFFER_DEPTH_SIZE = 0x8d54;\r\nGL20.GL_RENDERBUFFER_STENCIL_SIZE = 0x8d55;\r\nGL20.GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE = 0x8cd0;\r\nGL20.GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME = 0x8cd1;\r\nGL20.GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL = 0x8cd2;\r\nGL20.GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE = 0x8cd3;\r\nGL20.GL_COLOR_ATTACHMENT0 = 0x8ce0;\r\nGL20.GL_DEPTH_ATTACHMENT = 0x8d00;\r\nGL20.GL_STENCIL_ATTACHMENT = 0x8d20;\r\nGL20.GL_NONE = 0;\r\nGL20.GL_FRAMEBUFFER_COMPLETE = 0x8cd5;\r\nGL20.GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT = 0x8cd6;\r\nGL20.GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT = 0x8cd7;\r\nGL20.GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS = 0x8cd9;\r\nGL20.GL_FRAMEBUFFER_UNSUPPORTED = 0x8cdd;\r\nGL20.GL_FRAMEBUFFER_BINDING = 0x8ca6;\r\nGL20.GL_RENDERBUFFER_BINDING = 0x8ca7;\r\nGL20.GL_MAX_RENDERBUFFER_SIZE = 0x84e8;\r\nGL20.GL_INVALID_FRAMEBUFFER_OPERATION = 0x0506;\r\nGL20.GL_VERTEX_PROGRAM_POINT_SIZE = 0x8642;\r\n// Extensions\r\nGL20.GL_COVERAGE_BUFFER_BIT_NV = 0x8000;\r\nGL20.GL_TEXTURE_MAX_ANISOTROPY_EXT = 0x84fe;\r\nGL20.GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84ff;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Material = void 0;\r\nconst Attributes_1 = require(\"./attributes/Attributes\");\r\nclass Material extends Attributes_1.Attributes {\r\n    constructor(id = null) {\r\n        super();\r\n        if (!id) {\r\n            this.id = 'mtl' + ++Material.counter;\r\n        }\r\n        else {\r\n            this.id = id;\r\n        }\r\n    }\r\n    equals(other) {\r\n        return other && (other === this || (other.id === this.id && super.equals(other)));\r\n    }\r\n    copy() {\r\n        const m = new Material();\r\n        m.id = this.id;\r\n        for (const attr of this.attributes) {\r\n            m.set(attr.copy());\r\n        }\r\n        return m;\r\n    }\r\n}\r\nexports.Material = Material;\r\nMaterial.counter = 0;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Mesh3D = exports.VertexDataType = void 0;\r\nconst BoundingBox_1 = require(\"../BoundingBox\");\r\nconst Vector2_1 = require(\"../Vector2\");\r\nconst Vector3_1 = require(\"../Vector3\");\r\nconst VertexAttribute_1 = require(\"./attributes/VertexAttribute\");\r\nconst VertexAttributes_1 = require(\"./attributes/VertexAttributes\");\r\nconst GL20_1 = require(\"./GL20\");\r\nconst IndexBufferObject_1 = require(\"./utils/IndexBufferObject\");\r\nconst VertexBufferObject_1 = require(\"./utils/VertexBufferObject\");\r\nvar VertexDataType;\r\n(function (VertexDataType) {\r\n    VertexDataType[VertexDataType[\"VertexArray\"] = 0] = \"VertexArray\";\r\n    VertexDataType[VertexDataType[\"VertexBufferObject\"] = 1] = \"VertexBufferObject\";\r\n    VertexDataType[VertexDataType[\"VertexBufferObjectSubData\"] = 2] = \"VertexBufferObjectSubData\";\r\n    VertexDataType[VertexDataType[\"VertexBufferObjectWithVAO\"] = 3] = \"VertexBufferObjectWithVAO\";\r\n})(VertexDataType = exports.VertexDataType || (exports.VertexDataType = {}));\r\nclass Mesh3D {\r\n    constructor(gl, staticVertices, staticIndices, maxVertices, maxIndices, attributes) {\r\n        this.gl = gl;\r\n        this.autoBind = true;\r\n        this.isInstanced = false;\r\n        this.tmpV = new Vector3_1.Vector3();\r\n        this.vertices = this.makeVertexBuffer(staticVertices, maxVertices, attributes);\r\n        this.indices = new IndexBufferObject_1.IndexBufferObject(gl, maxIndices, staticIndices);\r\n        this.isVertexArray = false;\r\n        Mesh3D.addManagedMesh(this);\r\n    }\r\n    Mesh(vertices, indices, isVertexArray) {\r\n        this.vertices = vertices;\r\n        this.indices = indices;\r\n        this.isVertexArray = isVertexArray;\r\n        Mesh3D.addManagedMesh(this);\r\n    }\r\n    makeVertexBuffer(isStatic, maxVertices, vertexAttributes) {\r\n        return new VertexBufferObject_1.VertexBufferObject(this.gl, isStatic, maxVertices, vertexAttributes);\r\n    }\r\n    //  public enableInstancedRendering (isStatic: boolean, maxInstances: number, attributes: VertexAttribute): Mesh {\r\n    //      if (!this.isInstanced) {\r\n    //         this.isInstanced = true;\r\n    //         this.instances = new InstanceBufferObject(isStatic, maxInstances, attributes);\r\n    //      } else {\r\n    //          throw new Error(\"Trying to enable InstancedRendering on same Mesh instance twice.\"\r\n    //              + \" Use disableInstancedRendering to clean up old InstanceData first\");\r\n    //      }\r\n    //      return this;\r\n    //  }\r\n    // public disableInstancedRendering(): Mesh {\r\n    //   if (this.isInstanced) {\r\n    //     this.isInstanced = false;\r\n    //     this.instances.dispose();\r\n    //     this.instances = null;\r\n    //   }\r\n    //   return this;\r\n    // }\r\n    // public setInstanceDataWithArray(instanceData: number[], offset: number = 0, count: number = -1): Mesh {\r\n    //   if (this.instances != null) {\r\n    //     if (count < 0) count = instanceData.length;\r\n    //     this.instances.setInstanceData(instanceData, offset, count);\r\n    //   } else {\r\n    //     throw new Error('An InstanceBufferObject must be set before setting instance data!');\r\n    //   }\r\n    //   return this;\r\n    // }\r\n    // public setInstanceDataWithBuffer(instanceData: Float32Array, count: number = -1): Mesh {\r\n    //   if (this.instances != null) {\r\n    //     if (count < 0) count = instanceData.length;\r\n    //     this.instances.setInstanceData(instanceData, count);\r\n    //   } else {\r\n    //     throw new Error('An InstanceBufferObject must be set before setting instance data!');\r\n    //   }\r\n    //   return this;\r\n    // }\r\n    // public updateInstanceDataWithArray(\r\n    //   targetOffset: number,\r\n    //   source: number[],\r\n    //   sourceOffset: number = 0,\r\n    //   count: number = -1\r\n    // ): Mesh {\r\n    //   if (count < 0) count = source.length;\r\n    //   this.instances.updateInstanceData(targetOffset, source, sourceOffset, count);\r\n    //   return this;\r\n    // }\r\n    // public updateInstanceDataWithBuffer(\r\n    //   targetOffset: number,\r\n    //   source: Float32Array,\r\n    //   sourceOffset: number = 0,\r\n    //   count: number = -1\r\n    // ): Mesh {\r\n    //   if (count < 0) count = source.length;\r\n    //   this.instances.updateInstanceData(targetOffset, source, sourceOffset, count);\r\n    //   return this;\r\n    // }\r\n    setVertices(vertices, offset = 0, count = -1) {\r\n        if (count < 0)\r\n            count = vertices.length;\r\n        this.vertices.setVertices(vertices, offset, vertices.length);\r\n        return this;\r\n    }\r\n    updateVertices(targetOffset, source, sourceOffset = 0, count = -1) {\r\n        if (count < 0)\r\n            count = source.length;\r\n        this.vertices.updateVertices(targetOffset, source, sourceOffset, count);\r\n        return this;\r\n    }\r\n    getVertices(vertices, srcOffset = 0, count = -1, destOffset = 0) {\r\n        const max = (this.getNumVertices() * this.getVertexSize()) / 4;\r\n        if (count === -1) {\r\n            count = max - srcOffset;\r\n            if (count > vertices.length - destOffset)\r\n                count = vertices.length - destOffset;\r\n        }\r\n        if (srcOffset < 0 || count <= 0 || srcOffset + count > max || destOffset < 0 || destOffset >= vertices.length)\r\n            throw new Error('index out of bound');\r\n        if (vertices.length - destOffset < count)\r\n            throw new Error('not enough room in vertices array, has ' + vertices.length + ' floats, needs ' + count);\r\n        const buffer = this.vertices.getBuffer();\r\n        for (let i = srcOffset; i < count; i++) {\r\n            vertices[i] = buffer.at(i - srcOffset + destOffset);\r\n        }\r\n        return vertices;\r\n    }\r\n    setIndices(indices, offset = 0, count = indices.length) {\r\n        this.indices.setIndices(indices, offset, count);\r\n        return this;\r\n    }\r\n    getIndices(srcOffset, count, indices, destOffset) {\r\n        const max = this.getNumIndices();\r\n        if (count < 0)\r\n            count = max - srcOffset;\r\n        if (srcOffset < 0 || srcOffset >= max || srcOffset + count > max)\r\n            throw new Error('Invalid range specified, offset: ' + srcOffset + ', count: ' + count + ', max: ' + max);\r\n        if (indices.length - destOffset < count)\r\n            throw new Error('not enough room in indices array, has ' + indices.length + ' shorts, needs ' + count);\r\n        const buffer = this.indices.getBuffer();\r\n        for (let i = srcOffset; i < count; i++) {\r\n            indices[i] = buffer.at(i - srcOffset + destOffset);\r\n        }\r\n    }\r\n    getNumIndices() {\r\n        return this.indices.getNumIndices();\r\n    }\r\n    getNumVertices() {\r\n        return this.vertices.getNumVertices();\r\n    }\r\n    getMaxVertices() {\r\n        return this.vertices.getNumMaxVertices();\r\n    }\r\n    getMaxIndices() {\r\n        return this.indices.getNumMaxIndices();\r\n    }\r\n    getVertexSize() {\r\n        return this.vertices.getAttributes().vertexSize;\r\n    }\r\n    setAutoBind(autoBind) {\r\n        this.autoBind = autoBind;\r\n    }\r\n    bind(shader, locations = null) {\r\n        this.vertices.bind(shader, locations);\r\n        //if (this.instances != null && this.instances.getNumInstances() > 0) this.instances.bind(shader, locations);\r\n        if (this.indices.getNumIndices() > 0)\r\n            this.indices.bind();\r\n    }\r\n    unbind(shader, locations = null) {\r\n        this.vertices.unbind(shader, locations);\r\n        //if (this.instances != null && this.instances.getNumInstances() > 0) this.instances.unbind(shader, locations);\r\n        if (this.indices.getNumIndices() > 0)\r\n            this.indices.unbind();\r\n    }\r\n    render(shader, primitiveType, offset = 0, count = -1, autoBind = this.autoBind) {\r\n        if (count < 0)\r\n            count = this.indices.getNumMaxIndices() > 0 ? this.getNumIndices() : this.getNumVertices();\r\n        if (count === 0)\r\n            return;\r\n        if (autoBind)\r\n            this.bind(shader);\r\n        if (this.isVertexArray) {\r\n            if (this.indices.getNumIndices() > 0) {\r\n                //  const buffer = this.indices.getBuffer();\r\n                //  const oldPosition = buffer.position();\r\n                //  const oldLimit = buffer.limit();\r\n                //  ((Buffer)buffer).position(offset);\r\n                //  this.gl.drawElements(primitiveType, count, GL20.GL_UNSIGNED_SHORT, buffer);\r\n                //  ((Buffer)buffer).position(oldPosition);\r\n                this.gl.drawElements(primitiveType, count, GL20_1.GL20.GL_UNSIGNED_SHORT, offset * 2);\r\n            }\r\n            else {\r\n                this.gl.drawArrays(primitiveType, offset, count);\r\n            }\r\n        }\r\n        else {\r\n            if (this.indices.getNumIndices() > 0) {\r\n                if (count + offset > this.indices.getNumMaxIndices()) {\r\n                    throw new Error('Mesh attempting to access memory outside of the index buffer (count: ' +\r\n                        count +\r\n                        ', offset: ' +\r\n                        offset +\r\n                        ', max: ' +\r\n                        this.indices.getNumMaxIndices() +\r\n                        ')');\r\n                }\r\n                this.gl.drawElements(primitiveType, count, GL20_1.GL20.GL_UNSIGNED_SHORT, offset * 2);\r\n            }\r\n            else {\r\n                this.gl.drawArrays(primitiveType, offset, count);\r\n            }\r\n        }\r\n        if (autoBind)\r\n            this.unbind(shader);\r\n    }\r\n    dispose() {\r\n        const index = Mesh3D.meshes.indexOf(this);\r\n        if (index > -1) {\r\n            Mesh3D.meshes.splice(index, 1);\r\n        }\r\n        this.vertices.dispose();\r\n        //if (this.instances != null) this.instances.dispose();\r\n        this.indices.dispose();\r\n    }\r\n    getVertexAttribute(usage) {\r\n        const attributes = this.vertices.getAttributes();\r\n        const len = attributes.size();\r\n        for (let i = 0; i < len; i++)\r\n            if (attributes.get(i).usage === usage)\r\n                return attributes.get(i);\r\n        return null;\r\n    }\r\n    getVertexAttributes() {\r\n        return this.vertices.getAttributes();\r\n    }\r\n    getVerticesBuffer() {\r\n        return this.vertices.getBuffer();\r\n    }\r\n    calculateBoundingBox(bbox = null) {\r\n        if (!bbox) {\r\n            bbox = new BoundingBox_1.BoundingBox();\r\n        }\r\n        const numVertices = this.getNumVertices();\r\n        if (numVertices === 0)\r\n            throw new Error('No vertices defined');\r\n        const verts = this.vertices.getBuffer();\r\n        bbox.inf();\r\n        const posAttrib = this.getVertexAttribute(VertexAttribute_1.Usage.Position);\r\n        const offset = posAttrib.offset / 4;\r\n        const vertexSize = this.vertices.getAttributes().vertexSize / 4;\r\n        let idx = offset;\r\n        switch (posAttrib.numComponents) {\r\n            case 1:\r\n                for (let i = 0; i < numVertices; i++) {\r\n                    bbox.ext(verts[idx], 0, 0);\r\n                    idx += vertexSize;\r\n                }\r\n                break;\r\n            case 2:\r\n                for (let i = 0; i < numVertices; i++) {\r\n                    bbox.ext(verts[idx], verts[idx + 1], 0);\r\n                    idx += vertexSize;\r\n                }\r\n                break;\r\n            case 3:\r\n                for (let i = 0; i < numVertices; i++) {\r\n                    bbox.ext(verts[idx], verts[idx + 1], verts[idx + 2]);\r\n                    idx += vertexSize;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    extendBoundingBox(out, offset, count, transform) {\r\n        const numIndices = this.getNumIndices();\r\n        const numVertices = this.getNumVertices();\r\n        const max = numIndices === 0 ? numVertices : numIndices;\r\n        if (offset < 0 || count < 1 || offset + count > max)\r\n            throw new Error('Invalid part specified ( offset=' + offset + ', count=' + count + ', max=' + max + ' )');\r\n        const verts = this.vertices.getBuffer();\r\n        const index = this.indices.getBuffer();\r\n        const posAttrib = this.getVertexAttribute(VertexAttribute_1.Usage.Position);\r\n        const posoff = posAttrib.offset / 4;\r\n        const vertexSize = this.vertices.getAttributes().vertexSize / 4;\r\n        const end = offset + count;\r\n        switch (posAttrib.numComponents) {\r\n            case 1:\r\n                if (numIndices > 0) {\r\n                    for (let i = offset; i < end; i++) {\r\n                        const idx = (index[i] & 0xffff) * vertexSize + posoff;\r\n                        this.tmpV.set(verts[idx], 0, 0);\r\n                        if (!!transform)\r\n                            this.tmpV.multiply(transform);\r\n                        out.ext(this.tmpV.x, this.tmpV.y, this.tmpV.z);\r\n                    }\r\n                }\r\n                else {\r\n                    for (let i = offset; i < end; i++) {\r\n                        const idx = i * vertexSize + posoff;\r\n                        this.tmpV.set(verts[idx], 0, 0);\r\n                        if (!!transform)\r\n                            this.tmpV.multiply(transform);\r\n                        out.ext(this.tmpV.x, this.tmpV.y, this.tmpV.z);\r\n                    }\r\n                }\r\n                break;\r\n            case 2:\r\n                if (numIndices > 0) {\r\n                    for (let i = offset; i < end; i++) {\r\n                        const idx = (index[i] & 0xffff) * vertexSize + posoff;\r\n                        this.tmpV.set(verts[idx], verts[idx + 1], 0);\r\n                        if (!!transform)\r\n                            this.tmpV.multiply(transform);\r\n                        out.ext(this.tmpV.x, this.tmpV.y, this.tmpV.z);\r\n                    }\r\n                }\r\n                else {\r\n                    for (let i = offset; i < end; i++) {\r\n                        const idx = i * vertexSize + posoff;\r\n                        this.tmpV.set(verts[idx], verts[idx + 1], 0);\r\n                        if (!!transform)\r\n                            this.tmpV.multiply(transform);\r\n                        out.ext(this.tmpV.x, this.tmpV.y, this.tmpV.z);\r\n                    }\r\n                }\r\n                break;\r\n            case 3:\r\n                if (numIndices > 0) {\r\n                    for (let i = offset; i < end; i++) {\r\n                        const idx = (index[i] & 0xffff) * vertexSize + posoff;\r\n                        this.tmpV.set(verts[idx], verts[idx + 1], verts[idx + 2]);\r\n                        if (!!transform)\r\n                            this.tmpV.multiply(transform);\r\n                        out.ext(this.tmpV.x, this.tmpV.y, this.tmpV.z);\r\n                    }\r\n                }\r\n                else {\r\n                    for (let i = offset; i < end; i++) {\r\n                        const idx = i * vertexSize + posoff;\r\n                        this.tmpV.set(verts[idx], verts[idx + 1], verts[idx + 2]);\r\n                        if (!!transform)\r\n                            this.tmpV.multiply(transform);\r\n                        out.ext(this.tmpV.x, this.tmpV.y, this.tmpV.z);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return out;\r\n    }\r\n    calculateRadiusSquared(centerX, centerY, centerZ, offset, count, transform) {\r\n        const numIndices = this.getNumIndices();\r\n        if (offset < 0 || count < 1 || offset + count > numIndices)\r\n            throw new Error('Not enough indices');\r\n        const verts = this.vertices.getBuffer();\r\n        const index = this.indices.getBuffer();\r\n        const posAttrib = this.getVertexAttribute(VertexAttribute_1.Usage.Position);\r\n        const posoff = posAttrib.offset / 4;\r\n        const vertexSize = this.vertices.getAttributes().vertexSize / 4;\r\n        const end = offset + count;\r\n        let result = 0;\r\n        switch (posAttrib.numComponents) {\r\n            case 1:\r\n                for (let i = offset; i < end; i++) {\r\n                    const idx = (index[i] & 0xffff) * vertexSize + posoff;\r\n                    this.tmpV.set(verts[idx], 0, 0);\r\n                    if (!!transform)\r\n                        this.tmpV.multiply(transform);\r\n                    const r = this.tmpV.sub(new Vector3_1.Vector3(centerX, centerY, centerZ)).length2();\r\n                    if (r > result)\r\n                        result = r;\r\n                }\r\n                break;\r\n            case 2:\r\n                for (let i = offset; i < end; i++) {\r\n                    const idx = (index[i] & 0xffff) * vertexSize + posoff;\r\n                    this.tmpV.set(verts[i], verts[idx + 1], 0);\r\n                    if (!!transform)\r\n                        this.tmpV.multiply(transform);\r\n                    const r = this.tmpV.sub(new Vector3_1.Vector3(centerX, centerY, centerZ)).length2();\r\n                    if (r > result)\r\n                        result = r;\r\n                }\r\n                break;\r\n            case 3:\r\n                for (let i = offset; i < end; i++) {\r\n                    const idx = (index[i] & 0xffff) * vertexSize + posoff;\r\n                    this.tmpV.set(verts[i], verts[idx + 1], verts[idx + 2]);\r\n                    if (!!transform)\r\n                        this.tmpV.multiply(transform);\r\n                    const r = this.tmpV.sub(new Vector3_1.Vector3(centerX, centerY, centerZ)).length2();\r\n                    if (r > result)\r\n                        result = r;\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    calculateRadius(centerX, centerY, centerZ, offset = 0, count = this.getNumIndices(), transform = null) {\r\n        return Math.sqrt(this.calculateRadiusSquared(centerX, centerY, centerZ, offset, count, transform));\r\n    }\r\n    getIndicesBuffer() {\r\n        return this.indices.getBuffer();\r\n    }\r\n    static addManagedMesh(mesh) {\r\n        if (!Mesh3D.meshes)\r\n            Mesh3D.meshes = new Array();\r\n        Mesh3D.meshes.push(mesh);\r\n    }\r\n    static invalidateAllMeshes() {\r\n        if (!Mesh3D.meshes)\r\n            return;\r\n        for (let i = 0; i < Mesh3D.meshes.length; i++) {\r\n            Mesh3D.meshes[i].vertices.invalidate();\r\n            Mesh3D.meshes[i].indices.invalidate();\r\n        }\r\n    }\r\n    static clearAllMeshes() {\r\n        Mesh3D.meshes.length = 0;\r\n    }\r\n    scale(scaleX, scaleY, scaleZ) {\r\n        const posAttr = this.getVertexAttribute(VertexAttribute_1.Usage.Position);\r\n        const offset = posAttr.offset / 4;\r\n        const numComponents = posAttr.numComponents;\r\n        const numVertices = this.getNumVertices();\r\n        const vertexSize = this.getVertexSize() / 4;\r\n        const vertices = new Array(numVertices * vertexSize);\r\n        this.getVertices(vertices);\r\n        let idx = offset;\r\n        switch (numComponents) {\r\n            case 1:\r\n                for (let i = 0; i < numVertices; i++) {\r\n                    vertices[idx] *= scaleX;\r\n                    idx += vertexSize;\r\n                }\r\n                break;\r\n            case 2:\r\n                for (let i = 0; i < numVertices; i++) {\r\n                    vertices[idx] *= scaleX;\r\n                    vertices[idx + 1] *= scaleY;\r\n                    idx += vertexSize;\r\n                }\r\n                break;\r\n            case 3:\r\n                for (let i = 0; i < numVertices; i++) {\r\n                    vertices[idx] *= scaleX;\r\n                    vertices[idx + 1] *= scaleY;\r\n                    vertices[idx + 2] *= scaleZ;\r\n                    idx += vertexSize;\r\n                }\r\n                break;\r\n        }\r\n        this.setVertices(vertices);\r\n    }\r\n    transform(matrix, start = 0, count = this.getNumIndices()) {\r\n        const posAttr = this.getVertexAttribute(VertexAttribute_1.Usage.Position);\r\n        const posOffset = posAttr.offset / 4;\r\n        const stride = this.getVertexSize() / 4;\r\n        const numComponents = posAttr.numComponents;\r\n        const vertices = new Array(count * stride);\r\n        this.getVertices(vertices, start * stride, count * stride);\r\n        Mesh3D.transform(matrix, vertices, stride, posOffset, numComponents, 0, count);\r\n        this.updateVertices(start * stride, vertices);\r\n    }\r\n    static transform(matrix, vertices, vertexSize, offset, dimensions, start, count) {\r\n        if (offset < 0 || dimensions < 1 || offset + dimensions > vertexSize)\r\n            throw new Error();\r\n        if (start < 0 || count < 1 || (start + count) * vertexSize > vertices.length)\r\n            throw new Error('start = ' + start + ', count = ' + count + ', vertexSize = ' + vertexSize + ', length = ' + vertices.length);\r\n        const tmp = new Vector3_1.Vector3();\r\n        let idx = offset + start * vertexSize;\r\n        switch (dimensions) {\r\n            case 1:\r\n                for (let i = 0; i < count; i++) {\r\n                    tmp.set(vertices[idx], 0, 0).multiply(matrix);\r\n                    vertices[idx] = tmp.x;\r\n                    idx += vertexSize;\r\n                }\r\n                break;\r\n            case 2:\r\n                for (let i = 0; i < count; i++) {\r\n                    tmp.set(vertices[idx], vertices[idx + 1], 0).multiply(matrix);\r\n                    vertices[idx] = tmp.x;\r\n                    vertices[idx + 1] = tmp.y;\r\n                    idx += vertexSize;\r\n                }\r\n                break;\r\n            case 3:\r\n                for (let i = 0; i < count; i++) {\r\n                    tmp.set(vertices[idx], vertices[idx + 1], vertices[idx + 2]).multiply(matrix);\r\n                    vertices[idx] = tmp.x;\r\n                    vertices[idx + 1] = tmp.y;\r\n                    vertices[idx + 2] = tmp.z;\r\n                    idx += vertexSize;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    transformUV(matrix, start = 0, count = this.getNumVertices()) {\r\n        const posAttr = this.getVertexAttribute(VertexAttribute_1.Usage.TextureCoordinates);\r\n        const offset = posAttr.offset / 4;\r\n        const vertexSize = this.getVertexSize() / 4;\r\n        const numVertices = this.getNumVertices();\r\n        const vertices = new Array(numVertices * vertexSize);\r\n        this.getVertices(vertices, 0, vertices.length);\r\n        Mesh3D.transformUV(matrix, vertices, vertexSize, offset, start, count);\r\n        this.setVertices(vertices, 0, vertices.length);\r\n    }\r\n    static transformUV(matrix, vertices, vertexSize, offset, start, count) {\r\n        if (start < 0 || count < 1 || (start + count) * vertexSize > vertices.length)\r\n            throw new Error('start = ' + start + ', count = ' + count + ', vertexSize = ' + vertexSize + ', length = ' + vertices.length);\r\n        const tmp = new Vector2_1.Vector2();\r\n        let idx = offset + start * vertexSize;\r\n        for (let i = 0; i < count; i++) {\r\n            tmp.set(vertices[idx], vertices[idx + 1]).mul(matrix);\r\n            vertices[idx] = tmp.x;\r\n            vertices[idx + 1] = tmp.y;\r\n            idx += vertexSize;\r\n        }\r\n    }\r\n    copy(isStatic, removeDuplicates = false, usage = null) {\r\n        const vertexSize = this.getVertexSize() / 4;\r\n        let numVertices = this.getNumVertices();\r\n        let vertices = new Array(numVertices * vertexSize);\r\n        this.getVertices(vertices, 0, vertices.length);\r\n        let checks = null;\r\n        let attrs = null;\r\n        let newVertexSize = 0;\r\n        if (!!usage) {\r\n            let size = 0;\r\n            let as = 0;\r\n            for (let i = 0; i < usage.length; i++)\r\n                if (!!this.getVertexAttribute(usage[i])) {\r\n                    size += this.getVertexAttribute(usage[i]).numComponents;\r\n                    as++;\r\n                }\r\n            if (size > 0) {\r\n                attrs = new Array(as);\r\n                checks = new Array(size);\r\n                let idx = -1;\r\n                let ai = -1;\r\n                for (let i = 0; i < usage.length; i++) {\r\n                    const a = this.getVertexAttribute(usage[i]);\r\n                    if (!a)\r\n                        continue;\r\n                    for (let j = 0; j < a.numComponents; j++)\r\n                        checks[++idx] = a.offset + j;\r\n                    attrs[++ai] = a.copy();\r\n                    newVertexSize += a.numComponents;\r\n                }\r\n            }\r\n        }\r\n        if (!checks) {\r\n            checks = new Array(vertexSize);\r\n            for (let i = 0; i < vertexSize; i++)\r\n                checks[i] = i;\r\n            newVertexSize = vertexSize;\r\n        }\r\n        const numIndices = this.getNumIndices();\r\n        let indices = null;\r\n        if (numIndices > 0) {\r\n            indices = new Array(numIndices);\r\n            this.getIndices(0, -1, indices, 0);\r\n            if (removeDuplicates || newVertexSize !== vertexSize) {\r\n                const tmp = new Array(vertices.length);\r\n                let size = 0;\r\n                for (let i = 0; i < numIndices; i++) {\r\n                    const idx1 = indices[i] * vertexSize;\r\n                    let newIndex = -1;\r\n                    if (removeDuplicates) {\r\n                        for (let j = 0; j < size && newIndex < 0; j++) {\r\n                            const idx2 = j * newVertexSize;\r\n                            let found = true;\r\n                            for (let k = 0; k < checks.length && found; k++) {\r\n                                if (tmp[idx2 + k] !== vertices[idx1 + checks[k]])\r\n                                    found = false;\r\n                            }\r\n                            if (found)\r\n                                newIndex = j;\r\n                        }\r\n                    }\r\n                    if (newIndex > 0)\r\n                        indices[i] = newIndex;\r\n                    else {\r\n                        const idx = size * newVertexSize;\r\n                        for (let j = 0; j < checks.length; j++)\r\n                            tmp[idx + j] = vertices[idx1 + checks[j]];\r\n                        indices[i] = size;\r\n                        size++;\r\n                    }\r\n                }\r\n                vertices = tmp;\r\n                numVertices = size;\r\n            }\r\n        }\r\n        let result;\r\n        if (!attrs)\r\n            result = new Mesh3D(this.gl, isStatic, isStatic, numVertices, !indices ? 0 : indices.length, this.getVertexAttributes());\r\n        else\r\n            result = new Mesh3D(this.gl, isStatic, isStatic, numVertices, !indices ? 0 : indices.length, new VertexAttributes_1.VertexAttributes(attrs));\r\n        result.setVertices(vertices, 0, numVertices * newVertexSize);\r\n        if (!!indices)\r\n            result.setIndices(indices);\r\n        return result;\r\n    }\r\n}\r\nexports.Mesh3D = Mesh3D;\r\nMesh3D.meshes = [];\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ModelBatch = void 0;\r\nconst Utils_1 = require(\"../Utils\");\r\nconst DefaultRenderableSorter_1 = require(\"./DefaultRenderableSorter\");\r\nconst DefaultShaderProvider_1 = require(\"./DefaultShaderProvider\");\r\nconst DefaultTextureBinder_1 = require(\"./DefaultTextureBinder\");\r\nconst Renderable_1 = require(\"./Renderable\");\r\nconst RenderContext_1 = require(\"./RenderContext\");\r\nclass RenderablePool extends Utils_1.FlushablePool {\r\n    obtain() {\r\n        const renderable = super.obtain();\r\n        renderable.environment = null;\r\n        renderable.material = null;\r\n        renderable.meshPart.set('', null, 0, 0, 0);\r\n        renderable.shader = null;\r\n        //renderable.userData = null;\r\n        return renderable;\r\n    }\r\n}\r\nclass ModelBatch {\r\n    constructor(gl, context = null, sorter = null) {\r\n        this.camera = null;\r\n        this.renderablesPool = new RenderablePool(() => {\r\n            return new Renderable_1.Renderable();\r\n        });\r\n        this.renderables = [];\r\n        this.context = null;\r\n        this.shaderProvider = null;\r\n        this.sorter = null;\r\n        this.sorter = !sorter ? new DefaultRenderableSorter_1.DefaultRenderableSorter() : sorter;\r\n        this.ownContext = !context;\r\n        this.context = !context ? new RenderContext_1.RenderContext(new DefaultTextureBinder_1.DefaultTextureBinder(gl, DefaultTextureBinder_1.DefaultTextureBinder.LRU, 1)) : context;\r\n        this.shaderProvider = !this.shaderProvider ? new DefaultShaderProvider_1.DefaultShaderProvider(gl) : this.shaderProvider;\r\n    }\r\n    dispose() {\r\n        this.shaderProvider.dispose();\r\n    }\r\n    begin(cam) {\r\n        if (!!this.camera)\r\n            throw new Error('Call end() first.');\r\n        this.camera = cam;\r\n        if (this.ownContext)\r\n            this.context.begin();\r\n    }\r\n    setCamera(cam) {\r\n        if (!this.camera)\r\n            throw new Error('Call begin() first.');\r\n        if (this.renderables.length > 0)\r\n            this.flush();\r\n        this.camera = cam;\r\n    }\r\n    getCamera() {\r\n        return this.camera;\r\n    }\r\n    ownsRenderContext() {\r\n        return this.ownContext;\r\n    }\r\n    getRenderContext() {\r\n        return this.context;\r\n    }\r\n    getRenderableSorter() {\r\n        return this.sorter;\r\n    }\r\n    flush() {\r\n        this.sorter.sort(this.camera, this.renderables);\r\n        let currentShader = null;\r\n        for (let i = 0; i < this.renderables.length; i++) {\r\n            const renderable = this.renderables[i];\r\n            if (currentShader !== renderable.shader) {\r\n                if (!!currentShader) {\r\n                    currentShader.end();\r\n                }\r\n                currentShader = renderable.shader;\r\n                currentShader.begin(this.camera, this.context);\r\n            }\r\n            currentShader.render(renderable);\r\n        }\r\n        if (!!currentShader)\r\n            currentShader.end();\r\n        this.renderablesPool.flush();\r\n        this.renderables.length = 0;\r\n    }\r\n    end() {\r\n        this.flush();\r\n        if (this.ownContext)\r\n            this.context.end();\r\n        this.camera = null;\r\n    }\r\n    renderWithRenderable(renderable) {\r\n        renderable.shader = this.shaderProvider.getShader(renderable);\r\n        this.renderables.push(renderable);\r\n    }\r\n    render(renderableProvider, environment = null) {\r\n        const offset = this.renderables.length;\r\n        renderableProvider.getRenderables(this.renderables, this.renderablesPool);\r\n        for (let i = offset; i < this.renderables.length; i++) {\r\n            const renderable = this.renderables[i];\r\n            if (!!environment) {\r\n                renderable.environment = environment;\r\n            }\r\n            renderable.shader = this.shaderProvider.getShader(renderable);\r\n        }\r\n    }\r\n}\r\nexports.ModelBatch = ModelBatch;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ModelInstance = void 0;\r\nconst Matrix4_1 = require(\"../Matrix4\");\r\nconst Animation_1 = require(\"./model/Animation\");\r\nconst Node_1 = require(\"./model/Node\");\r\nconst NodeAnimation_1 = require(\"./model/NodeAnimation\");\r\nconst NodeKeyframe_1 = require(\"./model/NodeKeyframe\");\r\nclass ModelInstance {\r\n    constructor(model, transform = null, rootNodeIds = null) {\r\n        this.materials = [];\r\n        this.nodes = [];\r\n        this.animations = [];\r\n        this.model = model;\r\n        this.transform = !transform ? new Matrix4_1.Matrix4() : transform;\r\n        if (!rootNodeIds)\r\n            this.copyNodes(model.nodes);\r\n        else\r\n            this.copyNodes(model.nodes, rootNodeIds);\r\n        this.copyAnimations(model.animations, ModelInstance.defaultShareKeyframes);\r\n        this.calculateTransforms();\r\n    }\r\n    copyNodes(nodes, nodeIds = null) {\r\n        for (let i = 0, n = nodes.length; i < n; ++i) {\r\n            const node = nodes[i];\r\n            if (!nodeIds) {\r\n                this.nodes.push(node.copy());\r\n            }\r\n            else {\r\n                for (const nodeId of nodeIds) {\r\n                    if (nodeId === node.id) {\r\n                        this.nodes.push(node.copy());\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.invalidate();\r\n    }\r\n    invalidateNode(node) {\r\n        for (let i = 0, n = node.parts.length; i < n; ++i) {\r\n            const part = node.parts[i];\r\n            const bindPose = part.invBoneBindTransforms;\r\n            if (!!bindPose) {\r\n                for (let j = 0; j < bindPose.size; ++j) {\r\n                    bindPose.keys[j] = this.getNode(bindPose.keys[j].id);\r\n                }\r\n            }\r\n            if (!this.materials.includes(part.material)) {\r\n                const midx = this.materials.findIndex(m => m.id === part.material.id);\r\n                if (midx < 0)\r\n                    this.materials.push((part.material = part.material.copy()));\r\n                else\r\n                    part.material = this.materials[midx];\r\n            }\r\n        }\r\n        for (let i = 0, n = node.getChildCount(); i < n; ++i) {\r\n            this.invalidateNode(node.getChildByIndex(i));\r\n        }\r\n    }\r\n    getNode(id, recursive = true, ignoreCase = false) {\r\n        return Node_1.Node.getNode(this.nodes, id, recursive, ignoreCase);\r\n    }\r\n    invalidate() {\r\n        for (let i = 0, n = this.nodes.length; i < n; ++i) {\r\n            this.invalidateNode(this.nodes[i]);\r\n        }\r\n    }\r\n    copyAnimations(source, shareKeyframes) {\r\n        for (const anim of source) {\r\n            this.copyAnimation(anim, shareKeyframes);\r\n        }\r\n    }\r\n    copyAnimation(sourceAnim, shareKeyframes) {\r\n        const animation = new Animation_1.Animation3D();\r\n        animation.id = sourceAnim.id;\r\n        animation.duration = sourceAnim.duration;\r\n        for (const nanim of sourceAnim.nodeAnimations) {\r\n            const node = this.getNode(nanim.node.id);\r\n            if (!node)\r\n                continue;\r\n            const nodeAnim = new NodeAnimation_1.NodeAnimation();\r\n            nodeAnim.node = node;\r\n            if (shareKeyframes) {\r\n                nodeAnim.translation = nanim.translation;\r\n                nodeAnim.rotation = nanim.rotation;\r\n                nodeAnim.scaling = nanim.scaling;\r\n            }\r\n            else {\r\n                if (!!nanim.translation) {\r\n                    nodeAnim.translation = new Array();\r\n                    for (const kf of nanim.translation)\r\n                        nodeAnim.translation.push(new NodeKeyframe_1.NodeKeyframe(kf.keytime, kf.value));\r\n                }\r\n                if (!!nanim.rotation) {\r\n                    nodeAnim.rotation = new Array();\r\n                    for (const kf of nanim.rotation)\r\n                        nodeAnim.rotation.push(new NodeKeyframe_1.NodeKeyframe(kf.keytime, kf.value));\r\n                }\r\n                if (!!nanim.scaling) {\r\n                    nodeAnim.scaling = new Array();\r\n                    for (const kf of nanim.scaling)\r\n                        nodeAnim.scaling.push(new NodeKeyframe_1.NodeKeyframe(kf.keytime, kf.value));\r\n                }\r\n            }\r\n            if (!!nodeAnim.translation || !!nodeAnim.rotation || !!nodeAnim.scaling)\r\n                animation.nodeAnimations.push(nodeAnim);\r\n        }\r\n        if (animation.nodeAnimations.length > 0)\r\n            this.animations.push(animation);\r\n    }\r\n    getRenderable(out, node, nodePart) {\r\n        nodePart.setRenderable(out);\r\n        if (!nodePart.bones && !!this.transform) {\r\n            out.worldTransform.set(this.transform.values).multiply(node.globalTransform);\r\n        }\r\n        else if (!!this.transform) {\r\n            out.worldTransform.set(this.transform.values);\r\n        }\r\n        else {\r\n            out.worldTransform.idt();\r\n        }\r\n        //out.userData = userData;\r\n        return out;\r\n    }\r\n    getRenderables(renderables, pool) {\r\n        for (const node of this.nodes) {\r\n            this.getRenderablesWithNode(node, renderables, pool);\r\n        }\r\n    }\r\n    getRenderablesWithNode(node, renderables, pool) {\r\n        if (node.parts.length > 0) {\r\n            for (const nodePart of node.parts) {\r\n                if (nodePart.enabled)\r\n                    renderables.push(this.getRenderable(pool.obtain(), node, nodePart));\r\n            }\r\n        }\r\n        for (const child of node.getChildren()) {\r\n            this.getRenderablesWithNode(child, renderables, pool);\r\n        }\r\n    }\r\n    calculateTransforms() {\r\n        const n = this.nodes.length;\r\n        for (let i = 0; i < n; i++) {\r\n            this.nodes[i].calculateTransforms(true);\r\n        }\r\n        for (let i = 0; i < n; i++) {\r\n            this.nodes[i].calculateBoneTransforms(true);\r\n        }\r\n    }\r\n    calculateBoundingBox(out) {\r\n        out.inf();\r\n        return this.extendBoundingBox(out);\r\n    }\r\n    extendBoundingBox(out) {\r\n        const n = this.nodes.length;\r\n        for (let i = 0; i < n; i++)\r\n            this.nodes[i].extendBoundingBox(out);\r\n        return out;\r\n    }\r\n    getAnimation(id, ignoreCase = false) {\r\n        const n = this.animations.length;\r\n        let animation;\r\n        if (ignoreCase) {\r\n            for (let i = 0; i < n; i++)\r\n                if ((animation = this.animations[i]).id.toUpperCase() === id.toUpperCase())\r\n                    return animation;\r\n        }\r\n        else {\r\n            for (let i = 0; i < n; i++)\r\n                if ((animation = this.animations[i]).id === id)\r\n                    return animation;\r\n        }\r\n        return null;\r\n    }\r\n    getMaterial(id, ignoreCase = true) {\r\n        const n = this.materials.length;\r\n        let material;\r\n        if (ignoreCase) {\r\n            for (let i = 0; i < n; i++)\r\n                if ((material = this.materials[i]).id.toUpperCase() === id.toUpperCase())\r\n                    return material;\r\n        }\r\n        else {\r\n            for (let i = 0; i < n; i++)\r\n                if ((material = this.materials[i]).id === id)\r\n                    return material;\r\n        }\r\n        return null;\r\n    }\r\n}\r\nexports.ModelInstance = ModelInstance;\r\nModelInstance.defaultShareKeyframes = true;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PerspectiveCamera = void 0;\r\nconst Matrix4_1 = require(\"../Matrix4\");\r\nconst Vector3_1 = require(\"../Vector3\");\r\nconst Fustrum_1 = require(\"./math/Fustrum\");\r\nclass PerspectiveCamera {\r\n    constructor(fieldOfViewY, viewportWidth, viewportHeight) {\r\n        this.far = 100;\r\n        this.near = 1;\r\n        this.fieldOfView = 67;\r\n        this.viewportWidth = 0;\r\n        this.viewportHeight = 0;\r\n        this.up = new Vector3_1.Vector3(0, 1, 0);\r\n        this.position = new Vector3_1.Vector3(0, 0, 0);\r\n        this.direction = new Vector3_1.Vector3(0, 0, -1);\r\n        this.view = new Matrix4_1.Matrix4();\r\n        this.combined = new Matrix4_1.Matrix4();\r\n        this.projection = new Matrix4_1.Matrix4();\r\n        this.invProjectionView = new Matrix4_1.Matrix4();\r\n        this.frustum = new Fustrum_1.Frustum();\r\n        this.tmp = new Vector3_1.Vector3();\r\n        this.tmpVec = new Vector3_1.Vector3();\r\n        this.fieldOfView = fieldOfViewY;\r\n        this.viewportWidth = viewportWidth;\r\n        this.viewportHeight = viewportHeight;\r\n        this.update();\r\n    }\r\n    update(updateFrustum = true) {\r\n        const aspect = this.viewportWidth / this.viewportHeight;\r\n        this.projection.projection(Math.abs(this.near), Math.abs(this.far), this.fieldOfView, aspect);\r\n        this.tmp.set(this.position.x, this.position.y, this.position.z);\r\n        this.tmp.add(this.direction);\r\n        this.view.setToLookAt(this.position, this.tmp, this.up);\r\n        this.combined.set(this.projection.values);\r\n        this.combined.multiply(this.view);\r\n        if (updateFrustum) {\r\n            this.invProjectionView.set(this.combined.values);\r\n            this.invProjectionView.invert();\r\n            this.frustum.update(this.invProjectionView);\r\n        }\r\n    }\r\n    lookAt(x, y, z) {\r\n        this.tmpVec.set(x, y, z).sub(this.position).normalize();\r\n        if (!this.tmpVec.isZero()) {\r\n            const dot = this.tmpVec.dot(this.up); // up and direction must ALWAYS be orthonormal vectors\r\n            if (Math.abs(dot - 1) < 0.000000001) {\r\n                // Collinear\r\n                this.up.set(this.direction.x, this.direction.y, this.direction.z).scale(-1);\r\n            }\r\n            else if (Math.abs(dot + 1) < 0.000000001) {\r\n                // Collinear opposite\r\n                this.up.set(this.direction.x, this.direction.y, this.direction.z);\r\n            }\r\n            this.direction.set(this.tmpVec.x, this.tmpVec.y, this.tmpVec.z);\r\n            this.normalizeUp();\r\n        }\r\n    }\r\n    normalizeUp() {\r\n        this.tmpVec.set(this.direction.x, this.direction.y, this.direction.z).cross(this.up);\r\n        this.up.set(this.tmpVec.x, this.tmpVec.y, this.tmpVec.z).cross(this.direction).normalize();\r\n    }\r\n    translate(vec) {\r\n        this.position.add(vec);\r\n    }\r\n    rotate(axis, angle) {\r\n        this.direction.rotate(axis, angle);\r\n        this.up.rotate(axis, angle);\r\n    }\r\n    rotateAround(point, axis, angle) {\r\n        this.tmpVec.set(point.x, point.y, point.z);\r\n        this.tmpVec.sub(this.position);\r\n        this.translate(this.tmpVec);\r\n        this.rotate(axis, angle);\r\n        this.tmpVec.rotate(axis, angle);\r\n        this.translate(new Vector3_1.Vector3(-this.tmpVec.x, -this.tmpVec.y, -this.tmpVec.z));\r\n        this.update();\r\n    }\r\n}\r\nexports.PerspectiveCamera = PerspectiveCamera;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RenderContext = void 0;\r\nconst DefaultTextureBinder_1 = require(\"./DefaultTextureBinder\");\r\nclass RenderContext {\r\n    constructor(textureBinder) {\r\n        this.textureBinder = textureBinder;\r\n        this.gl = DefaultTextureBinder_1.DefaultTextureBinder.gl;\r\n    }\r\n    begin() {\r\n        this.gl.disable(this.gl.DEPTH_TEST);\r\n        this.depthFunc = 0;\r\n        this.gl.depthMask(true);\r\n        this.depthMask = true;\r\n        this.gl.disable(this.gl.BLEND);\r\n        this.blending = false;\r\n        this.gl.disable(this.gl.CULL_FACE);\r\n        this.cullFace = this.blendSFactor = this.blendDFactor = 0;\r\n        this.textureBinder.begin();\r\n    }\r\n    end() {\r\n        if (this.depthFunc !== 0)\r\n            this.gl.disable(this.gl.DEPTH_TEST);\r\n        if (!this.depthMask)\r\n            this.gl.depthMask(true);\r\n        if (this.blending)\r\n            this.gl.disable(this.gl.BLEND);\r\n        if (this.cullFace > 0)\r\n            this.gl.disable(this.gl.CULL_FACE);\r\n        this.textureBinder.end();\r\n    }\r\n    setDepthMask(depthMask) {\r\n        if (this.depthMask !== depthMask)\r\n            this.gl.depthMask((this.depthMask = depthMask));\r\n    }\r\n    setDepthTest(depthFunction, depthRangeNear, depthRangeFar) {\r\n        const wasEnabled = this.depthFunc !== 0;\r\n        const enabled = depthFunction !== 0;\r\n        if (this.depthFunc !== depthFunction) {\r\n            this.depthFunc = depthFunction;\r\n            if (enabled) {\r\n                this.gl.enable(this.gl.DEPTH_TEST);\r\n                this.gl.depthFunc(depthFunction);\r\n            }\r\n            else\r\n                this.gl.disable(this.gl.DEPTH_TEST);\r\n        }\r\n        if (enabled) {\r\n            if (!wasEnabled || this.depthFunc !== depthFunction)\r\n                this.gl.depthFunc((this.depthFunc = depthFunction));\r\n            if (!wasEnabled || this.depthRangeNear !== depthRangeNear || this.depthRangeFar !== depthRangeFar)\r\n                this.gl.depthRange((this.depthRangeNear = depthRangeNear), (this.depthRangeFar = depthRangeFar));\r\n        }\r\n    }\r\n    setBlending(enabled, sFactor, dFactor) {\r\n        if (enabled !== this.blending) {\r\n            this.blending = enabled;\r\n            if (enabled)\r\n                this.gl.enable(this.gl.BLEND);\r\n            else\r\n                this.gl.disable(this.gl.BLEND);\r\n        }\r\n        if (enabled && (this.blendSFactor !== sFactor || this.blendDFactor !== dFactor)) {\r\n            this.gl.blendFunc(sFactor, dFactor);\r\n            this.blendSFactor = sFactor;\r\n            this.blendDFactor = dFactor;\r\n        }\r\n    }\r\n    setCullFace(face) {\r\n        if (face !== this.cullFace) {\r\n            this.cullFace = face;\r\n            if (face === this.gl.FRONT || face === this.gl.BACK || face === this.gl.FRONT_AND_BACK) {\r\n                this.gl.enable(this.gl.CULL_FACE);\r\n                this.gl.cullFace(face);\r\n            }\r\n            else\r\n                this.gl.disable(this.gl.CULL_FACE);\r\n        }\r\n    }\r\n}\r\nexports.RenderContext = RenderContext;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Renderable = void 0;\r\nconst Matrix4_1 = require(\"../Matrix4\");\r\nconst MeshPart_1 = require(\"./model/MeshPart\");\r\nclass Renderable {\r\n    constructor() {\r\n        this.worldTransform = new Matrix4_1.Matrix4();\r\n        this.meshPart = new MeshPart_1.MeshPart();\r\n        //   userData: Object;\r\n        this.bones = null;\r\n    }\r\n    set(renderable) {\r\n        this.worldTransform.set(renderable.worldTransform.values);\r\n        this.material = renderable.material;\r\n        this.meshPart.setByMeshPart(renderable.meshPart);\r\n        this.bones = renderable.bones;\r\n        this.environment = renderable.environment;\r\n        this.shader = renderable.shader;\r\n        //this.userData = renderable.userData;\r\n        return this;\r\n    }\r\n}\r\nexports.Renderable = Renderable;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Attribute = void 0;\r\nclass Attribute {\r\n    static getAttributeType(alias) {\r\n        for (let i = 0; i < Attribute.types.length; i++) {\r\n            if (Attribute.types[i] === alias)\r\n                return 1 << i;\r\n        }\r\n        return 0;\r\n    }\r\n    static getAttributeAlias(type) {\r\n        let idx = -1;\r\n        while (type !== 0 && ++idx < 63 && ((type >> idx) & 1) === 0)\r\n            ;\r\n        return idx >= 0 && idx < Attribute.types.length ? Attribute.types[idx] : null;\r\n    }\r\n    static register(alias) {\r\n        const result = this.getAttributeType(alias);\r\n        if (result > 0)\r\n            return result;\r\n        Attribute.types.push(alias);\r\n        return 1 << (Attribute.types.length - 1);\r\n    }\r\n    setType(type) {\r\n        this.type = type;\r\n        this.typeBit = this.numberOfTrailingZeros(type);\r\n    }\r\n    hashCode() {\r\n        return 7489 * this.typeBit;\r\n    }\r\n    equals(obj) {\r\n        if (!obj)\r\n            return false;\r\n        if (obj === this)\r\n            return true;\r\n        if (!obj)\r\n            return false;\r\n        if (this.type !== obj.type)\r\n            return false;\r\n        return obj.hashCode() === this.hashCode();\r\n    }\r\n    numberOfTrailingZeros(i) {\r\n        let x, y;\r\n        if (i === 0)\r\n            return 64;\r\n        let n = 63;\r\n        y = i;\r\n        if (y !== 0) {\r\n            n = n - 32;\r\n            x = y;\r\n        }\r\n        else\r\n            x = i >>> 32;\r\n        y = x << 16;\r\n        if (y !== 0) {\r\n            n = n - 16;\r\n            x = y;\r\n        }\r\n        y = x << 8;\r\n        if (y !== 0) {\r\n            n = n - 8;\r\n            x = y;\r\n        }\r\n        y = x << 4;\r\n        if (y !== 0) {\r\n            n = n - 4;\r\n            x = y;\r\n        }\r\n        y = x << 2;\r\n        if (y !== 0) {\r\n            n = n - 2;\r\n            x = y;\r\n        }\r\n        return n - ((x << 1) >>> 31);\r\n    }\r\n    toString() {\r\n        return Attribute.getAttributeAlias(this.type);\r\n    }\r\n    copy() {\r\n        return new Attribute();\r\n    }\r\n}\r\nexports.Attribute = Attribute;\r\nAttribute.types = [];\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Attributes = void 0;\r\nclass Attributes {\r\n    constructor() {\r\n        this.attributes = [];\r\n        this.sorted = true;\r\n    }\r\n    //  public final void sort () {\r\n    // \tif (!sorted) {\r\n    // \t\tattributes.sort(this);\r\n    // \t\tsorted = true;\r\n    // \t}\r\n    //  }\r\n    getMask() {\r\n        return this.mask;\r\n    }\r\n    get(type) {\r\n        for (const att of this.attributes) {\r\n            if (att.type === type)\r\n                return att;\r\n        }\r\n        return null;\r\n    }\r\n    getArrayAttribute(out, type) {\r\n        for (const att of this.attributes) {\r\n            if (att.type === type)\r\n                out.push(att);\r\n        }\r\n        return out;\r\n    }\r\n    clear() {\r\n        this.mask = 0;\r\n        this.attributes = [];\r\n    }\r\n    size() {\r\n        return this.attributes.length;\r\n    }\r\n    enable(mask) {\r\n        this.mask |= mask;\r\n    }\r\n    disable(mask) {\r\n        this.mask &= ~mask;\r\n    }\r\n    set(attribute) {\r\n        const idx = this.indexOf(attribute.type);\r\n        if (idx < 0) {\r\n            this.enable(attribute.type);\r\n            this.attributes.push(attribute);\r\n            this.sorted = false;\r\n        }\r\n        else {\r\n            this.attributes[idx] = attribute;\r\n        }\r\n        //sort(); // FIXME: See #4186\r\n    }\r\n    getAttributes() {\r\n        return this.attributes;\r\n    }\r\n    setAttributes(attributes) {\r\n        for (const att of attributes) {\r\n            this.set(att);\r\n        }\r\n    }\r\n    has(type) {\r\n        return type !== 0 && (this.mask & type) === type;\r\n    }\r\n    indexOf(type) {\r\n        if (this.has(type))\r\n            for (let i = 0; i < this.attributes.length; i++)\r\n                if (this.attributes[i].type === type)\r\n                    return i;\r\n        return -1;\r\n    }\r\n    set2Attributes(attribute1, attribute2) {\r\n        this.set(attribute1);\r\n        this.set(attribute2);\r\n    }\r\n    set3Attributes(attribute1, attribute2, attribute3) {\r\n        this.set(attribute1);\r\n        this.set(attribute2);\r\n        this.set(attribute3);\r\n    }\r\n    set4Attributes(attribute1, attribute2, attribute3, attribute4) {\r\n        this.set(attribute1);\r\n        this.set(attribute2);\r\n        this.set(attribute3);\r\n        this.set(attribute4);\r\n    }\r\n    setArrayAttribute(attributes) {\r\n        for (const attr of attributes)\r\n            this.set(attr);\r\n    }\r\n    setAttribute(attribute) {\r\n        this.set(attribute);\r\n    }\r\n    remove(mask) {\r\n        for (let i = this.attributes.length - 1; i >= 0; i--) {\r\n            const type = this.attributes[i].type;\r\n            if ((mask & type) === type) {\r\n                this.attributes.splice(i, 1);\r\n                this.disable(type);\r\n                this.sorted = false;\r\n            }\r\n        }\r\n        //sort(); // FIXME: See #4186\r\n    }\r\n    compare(arg0, arg1) {\r\n        return arg0.type - arg1.type;\r\n    }\r\n    same(other, compareValues) {\r\n        if (other === this)\r\n            return true;\r\n        if (!other || this.mask !== other.mask)\r\n            return false;\r\n        if (!compareValues)\r\n            return true;\r\n        // sort();\r\n        // other.sort();\r\n        for (let i = 0; i < this.attributes.length; i++)\r\n            if (!this.attributes[i].equals(other.attributes[i]))\r\n                return false;\r\n        return true;\r\n    }\r\n    equals(other) {\r\n        if (!other)\r\n            return false;\r\n        if (other === this)\r\n            return true;\r\n        return this.same(other, true);\r\n    }\r\n}\r\nexports.Attributes = Attributes;\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BlendingAttribute = void 0;\r\nconst GL20_1 = require(\"../GL20\");\r\nconst Attribute_1 = require(\"./Attribute\");\r\nclass BlendingAttribute extends Attribute_1.Attribute {\r\n    constructor(sourceFunc = GL20_1.GL20.GL_SRC_ALPHA, destFunc = GL20_1.GL20.GL_ONE_MINUS_SRC_ALPHA, blended = true, opacity = 1) {\r\n        super();\r\n        this.opacity = 1;\r\n        this.setType(this.type);\r\n        this.blended = blended;\r\n        this.sourceFunction = sourceFunc;\r\n        this.destFunction = destFunc;\r\n        this.opacity = opacity;\r\n    }\r\n    static is(mask) {\r\n        return (mask & this.Type) === mask;\r\n    }\r\n    set(blended = true, sourceFunc = GL20_1.GL20.GL_SRC_ALPHA, destFunc = GL20_1.GL20.GL_ONE_MINUS_SRC_ALPHA, opacity = 1) {\r\n        this.type = BlendingAttribute.Type;\r\n        this.typeBit = this.numberOfTrailingZeros(this.type);\r\n        this.blended = blended;\r\n        this.sourceFunction = sourceFunc;\r\n        this.destFunction = destFunc;\r\n        this.opacity = opacity;\r\n    }\r\n}\r\nexports.BlendingAttribute = BlendingAttribute;\r\n_a = BlendingAttribute;\r\nBlendingAttribute.Alias = 'blended';\r\nBlendingAttribute.Type = _a.register(_a.Alias);\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ColorAttribute3D = void 0;\r\nconst Utils_1 = require(\"../../Utils\");\r\nconst Attribute_1 = require(\"./Attribute\");\r\nclass ColorAttribute3D extends Attribute_1.Attribute {\r\n    constructor(type, color) {\r\n        super();\r\n        this.color = new Utils_1.Color();\r\n        this.setType(type);\r\n        if (!!color)\r\n            this.color.set(color.r, color.g, color.b, color.a);\r\n    }\r\n    static is(mask) {\r\n        return (mask & this.Mask) !== 0;\r\n    }\r\n    static createAmbient(color) {\r\n        return new ColorAttribute3D(ColorAttribute3D.Ambient, color);\r\n    }\r\n    static createDiffuse(color) {\r\n        return new ColorAttribute3D(ColorAttribute3D.Diffuse, color);\r\n    }\r\n    static createSpecular(color) {\r\n        return new ColorAttribute3D(ColorAttribute3D.Specular, color);\r\n    }\r\n    static createReflection(color) {\r\n        return new ColorAttribute3D(ColorAttribute3D.Reflection, color);\r\n    }\r\n    static createEmissive(color) {\r\n        return new ColorAttribute3D(ColorAttribute3D.Emissive, color);\r\n    }\r\n    static createAmbientLight(color) {\r\n        return new ColorAttribute3D(ColorAttribute3D.AmbientLight, color);\r\n    }\r\n    static createFog(color) {\r\n        return new ColorAttribute3D(ColorAttribute3D.Fog, color);\r\n    }\r\n    copy() {\r\n        return new ColorAttribute3D(this.type, this.color);\r\n    }\r\n}\r\nexports.ColorAttribute3D = ColorAttribute3D;\r\n_a = ColorAttribute3D;\r\nColorAttribute3D.DiffuseAlias = 'diffuseColor';\r\nColorAttribute3D.Diffuse = _a.register(ColorAttribute3D.DiffuseAlias);\r\nColorAttribute3D.SpecularAlias = 'specularColor';\r\nColorAttribute3D.Specular = _a.register(ColorAttribute3D.SpecularAlias);\r\nColorAttribute3D.AmbientAlias = 'ambientColor';\r\nColorAttribute3D.Ambient = _a.register(ColorAttribute3D.AmbientAlias);\r\nColorAttribute3D.EmissiveAlias = 'emissiveColor';\r\nColorAttribute3D.Emissive = _a.register(ColorAttribute3D.EmissiveAlias);\r\nColorAttribute3D.ReflectionAlias = 'reflectionColor';\r\nColorAttribute3D.Reflection = _a.register(ColorAttribute3D.ReflectionAlias);\r\nColorAttribute3D.AmbientLightAlias = 'ambientLightColor';\r\nColorAttribute3D.AmbientLight = _a.register(ColorAttribute3D.AmbientLightAlias);\r\nColorAttribute3D.FogAlias = 'fogColor';\r\nColorAttribute3D.Fog = _a.register(ColorAttribute3D.FogAlias);\r\nColorAttribute3D.Mask = _a.Ambient | _a.Diffuse | _a.Specular | _a.Emissive | _a.Reflection | _a.AmbientLight | _a.Fog;\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DirectionalLightsAttribute = void 0;\r\nconst Attribute_1 = require(\"./Attribute\");\r\nclass DirectionalLightsAttribute extends Attribute_1.Attribute {\r\n    constructor() {\r\n        super();\r\n        this.setType(DirectionalLightsAttribute.Type);\r\n        this.lights = new Array();\r\n    }\r\n    static is(mask) {\r\n        return (mask & DirectionalLightsAttribute.Type) === mask;\r\n    }\r\n    set(copyFrom) {\r\n        for (let i = 0; i < copyFrom.lights.length; i++) {\r\n            this.lights[i] = copyFrom.lights[i];\r\n        }\r\n    }\r\n    copy() {\r\n        const att = new DirectionalLightsAttribute();\r\n        att.set(this);\r\n        return att;\r\n    }\r\n    compareTo(other) {\r\n        if (this.type !== other.type)\r\n            return this.type < other.type ? -1 : 1;\r\n        return 0;\r\n    }\r\n}\r\nexports.DirectionalLightsAttribute = DirectionalLightsAttribute;\r\n_a = DirectionalLightsAttribute;\r\nDirectionalLightsAttribute.Alias = 'directionalLights';\r\nDirectionalLightsAttribute.Type = _a.register(DirectionalLightsAttribute.Alias);\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FloatAttribute = void 0;\r\nconst Attribute_1 = require(\"./Attribute\");\r\nclass FloatAttribute extends Attribute_1.Attribute {\r\n    constructor(type, value) {\r\n        super();\r\n        this.setType(type);\r\n        this.value = value;\r\n    }\r\n    static createShininess(value) {\r\n        return new FloatAttribute(FloatAttribute.Shininess, value);\r\n    }\r\n    static createAlphaTest(value) {\r\n        return new FloatAttribute(FloatAttribute.AlphaTest, value);\r\n    }\r\n    copy() {\r\n        return new FloatAttribute(this.type, this.value);\r\n    }\r\n}\r\nexports.FloatAttribute = FloatAttribute;\r\n_a = FloatAttribute;\r\nFloatAttribute.ShininessAlias = 'shininess';\r\nFloatAttribute.Shininess = _a.register(_a.ShininessAlias);\r\nFloatAttribute.AlphaTestAlias = 'alphaTest';\r\nFloatAttribute.AlphaTest = _a.register(FloatAttribute.AlphaTestAlias);\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IntAttribute = void 0;\r\nconst Attribute_1 = require(\"./Attribute\");\r\nclass IntAttribute extends Attribute_1.Attribute {\r\n    constructor(type, value = 0) {\r\n        super();\r\n        this.setType(type);\r\n        this.value = value;\r\n    }\r\n    static createCullFace(value) {\r\n        return new IntAttribute(IntAttribute.CullFace, value);\r\n    }\r\n    copy() {\r\n        return new IntAttribute(this.type, this.value);\r\n    }\r\n}\r\nexports.IntAttribute = IntAttribute;\r\n_a = IntAttribute;\r\nIntAttribute.CullFaceAlias = 'cullface';\r\nIntAttribute.CullFace = _a.register(IntAttribute.CullFaceAlias);\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PointLightsAttribute = void 0;\r\nconst Attribute_1 = require(\"./Attribute\");\r\nclass PointLightsAttribute extends Attribute_1.Attribute {\r\n    constructor() {\r\n        super();\r\n        this.setType(PointLightsAttribute.Type);\r\n        this.lights = new Array();\r\n    }\r\n    static is(mask) {\r\n        return (mask & PointLightsAttribute.Type) === mask;\r\n    }\r\n    set(copyFrom) {\r\n        for (let i = 0; i < copyFrom.lights.length; i++) {\r\n            this.lights[i] = copyFrom.lights[i];\r\n        }\r\n    }\r\n    copy() {\r\n        const att = new PointLightsAttribute();\r\n        att.set(this);\r\n        return att;\r\n    }\r\n    compareTo(other) {\r\n        if (this.type !== other.type)\r\n            return this.type < other.type ? -1 : 1;\r\n        return 0;\r\n    }\r\n}\r\nexports.PointLightsAttribute = PointLightsAttribute;\r\n_a = PointLightsAttribute;\r\nPointLightsAttribute.Alias = 'pointLights';\r\nPointLightsAttribute.Type = _a.register(PointLightsAttribute.Alias);\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SpotLightsAttribute = void 0;\r\nconst Attribute_1 = require(\"./Attribute\");\r\nclass SpotLightsAttribute extends Attribute_1.Attribute {\r\n    constructor() {\r\n        super();\r\n        this.setType(SpotLightsAttribute.Type);\r\n        this.lights = new Array();\r\n    }\r\n    static is(mask) {\r\n        return (mask & SpotLightsAttribute.Type) === mask;\r\n    }\r\n    set(copyFrom) {\r\n        for (let i = 0; i < copyFrom.lights.length; i++) {\r\n            this.lights[i] = copyFrom.lights[i];\r\n        }\r\n    }\r\n    copy() {\r\n        const att = new SpotLightsAttribute();\r\n        att.set(this);\r\n        return att;\r\n    }\r\n    compareTo(other) {\r\n        if (this.type !== other.type)\r\n            return this.type < other.type ? -1 : 1;\r\n        return 0;\r\n    }\r\n}\r\nexports.SpotLightsAttribute = SpotLightsAttribute;\r\n_a = SpotLightsAttribute;\r\nSpotLightsAttribute.Alias = 'spotLights';\r\nSpotLightsAttribute.Type = _a.register(SpotLightsAttribute.Alias);\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TextureAttribute = void 0;\r\nconst Attribute_1 = require(\"./Attribute\");\r\nclass TextureAttribute extends Attribute_1.Attribute {\r\n    constructor(type, offsetU = 0, offsetV = 0, scaleU = 1, scaleV = 1) {\r\n        super();\r\n        this.offsetU = 0;\r\n        this.offsetV = 0;\r\n        this.scaleU = 1;\r\n        this.scaleV = 1;\r\n        this.uvIndex = 0;\r\n        this.offsetU = offsetU;\r\n        this.offsetV = offsetV;\r\n        this.scaleU = scaleU;\r\n        this.scaleV = scaleV;\r\n        this.setType(type);\r\n    }\r\n    static is(mask) {\r\n        return (mask & TextureAttribute.Mask) !== 0;\r\n    }\r\n    static createDiffuse(region) {\r\n        const ta = new TextureAttribute(TextureAttribute.Diffuse);\r\n        ta.setTextureRegion(region);\r\n        return ta;\r\n    }\r\n    static createSpecular(region) {\r\n        const ta = new TextureAttribute(TextureAttribute.Specular);\r\n        ta.setTextureRegion(region);\r\n        return ta;\r\n    }\r\n    static createNormal(region) {\r\n        const ta = new TextureAttribute(TextureAttribute.Normal);\r\n        ta.setTextureRegion(region);\r\n        return ta;\r\n    }\r\n    static createBump(region) {\r\n        const ta = new TextureAttribute(TextureAttribute.Bump);\r\n        ta.setTextureRegion(region);\r\n        return ta;\r\n    }\r\n    static createAmbient(region) {\r\n        const ta = new TextureAttribute(TextureAttribute.Ambient);\r\n        ta.setTextureRegion(region);\r\n        return ta;\r\n    }\r\n    static createEmissive(region) {\r\n        const ta = new TextureAttribute(TextureAttribute.Emissive);\r\n        ta.setTextureRegion(region);\r\n        return ta;\r\n    }\r\n    static createReflection(region) {\r\n        const ta = new TextureAttribute(TextureAttribute.Reflection);\r\n        ta.setTextureRegion(region);\r\n        return ta;\r\n    }\r\n    setTextureRegion(region) {\r\n        this.texture = region.texture;\r\n        this.offsetU = region.u;\r\n        this.offsetV = region.v;\r\n        this.scaleU = region.u2 - this.offsetU;\r\n        this.scaleV = region.v2 - this.offsetV;\r\n    }\r\n    setTexture(texture) {\r\n        this.texture = texture;\r\n    }\r\n    setOffset(offsetU, offsetV) {\r\n        this.offsetU = offsetU;\r\n        this.offsetV = offsetV;\r\n    }\r\n    setScale(scaleU, scaleV) {\r\n        this.scaleU = scaleU;\r\n        this.scaleV = scaleV;\r\n    }\r\n    copy() {\r\n        const att = new TextureAttribute(this.type);\r\n        att.offsetU = this.offsetU;\r\n        att.offsetV = this.offsetV;\r\n        att.scaleU = this.scaleU;\r\n        att.scaleV = this.scaleV;\r\n        att.uvIndex = this.uvIndex;\r\n        att.texture = this.texture;\r\n        return att;\r\n    }\r\n}\r\nexports.TextureAttribute = TextureAttribute;\r\n_a = TextureAttribute;\r\nTextureAttribute.DiffuseAlias = 'diffuseTexture';\r\nTextureAttribute.Diffuse = _a.register(TextureAttribute.DiffuseAlias);\r\nTextureAttribute.SpecularAlias = 'specularTexture';\r\nTextureAttribute.Specular = _a.register(TextureAttribute.SpecularAlias);\r\nTextureAttribute.BumpAlias = 'bumpTexture';\r\nTextureAttribute.Bump = _a.register(TextureAttribute.BumpAlias);\r\nTextureAttribute.NormalAlias = 'normalTexture';\r\nTextureAttribute.Normal = _a.register(TextureAttribute.NormalAlias);\r\nTextureAttribute.AmbientAlias = 'ambientTexture';\r\nTextureAttribute.Ambient = _a.register(TextureAttribute.AmbientAlias);\r\nTextureAttribute.EmissiveAlias = 'emissiveTexture';\r\nTextureAttribute.Emissive = _a.register(TextureAttribute.EmissiveAlias);\r\nTextureAttribute.ReflectionAlias = 'reflectionTexture';\r\nTextureAttribute.Reflection = _a.register(TextureAttribute.ReflectionAlias);\r\nTextureAttribute.Mask = _a.Diffuse | _a.Specular | _a.Bump | _a.Normal | _a.Ambient | _a.Emissive | _a.Reflection;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.VertexAttribute3D = exports.Usage = void 0;\r\nconst Shader_1 = require(\"../../Shader\");\r\nconst GL20_1 = require(\"../GL20\");\r\nclass Usage {\r\n}\r\nexports.Usage = Usage;\r\nUsage.Position = 1;\r\nUsage.ColorUnpacked = 2;\r\nUsage.ColorPacked = 4;\r\nUsage.Normal = 8;\r\nUsage.TextureCoordinates = 16;\r\nUsage.Generic = 32;\r\nUsage.BoneWeight = 64;\r\nUsage.Tangent = 128;\r\nUsage.BiNormal = 256;\r\nclass VertexAttribute3D {\r\n    constructor(usage, numComponents, type, normalized, alias, unit = 0) {\r\n        this.usage = usage;\r\n        this.numComponents = numComponents;\r\n        this.type = type;\r\n        this.normalized = normalized;\r\n        this.alias = alias;\r\n        this.unit = unit;\r\n        this.usageIndex = this.numberOfTrailingZeros(usage);\r\n    }\r\n    copy() {\r\n        return new VertexAttribute3D(this.usage, this.numComponents, this.type, this.normalized, this.alias, this.unit);\r\n    }\r\n    static Position() {\r\n        return new VertexAttribute3D(Usage.Position, 3, GL20_1.GL20.GL_FLOAT, false, Shader_1.Shader.POSITION, 0);\r\n    }\r\n    static TexCoords(unit) {\r\n        return new VertexAttribute3D(Usage.TextureCoordinates, 2, GL20_1.GL20.GL_FLOAT, false, Shader_1.Shader.TEXCOORDS + unit, unit);\r\n    }\r\n    static Normal() {\r\n        return new VertexAttribute3D(Usage.Normal, 3, GL20_1.GL20.GL_FLOAT, false, Shader_1.Shader.NORMAL);\r\n    }\r\n    static ColorPacked() {\r\n        return new VertexAttribute3D(Usage.ColorPacked, 4, GL20_1.GL20.GL_UNSIGNED_BYTE, true, Shader_1.Shader.COLOR);\r\n    }\r\n    static ColorUnpacked() {\r\n        return new VertexAttribute3D(Usage.ColorUnpacked, 4, GL20_1.GL20.GL_FLOAT, false, Shader_1.Shader.COLOR);\r\n    }\r\n    static Tangent() {\r\n        return new VertexAttribute3D(Usage.Tangent, 3, GL20_1.GL20.GL_FLOAT, false, Shader_1.Shader.TANGENT);\r\n    }\r\n    static Binormal() {\r\n        return new VertexAttribute3D(Usage.BiNormal, 3, GL20_1.GL20.GL_FLOAT, false, Shader_1.Shader.BINORMAL);\r\n    }\r\n    static BoneWeight(unit) {\r\n        return new VertexAttribute3D(Usage.BoneWeight, 2, GL20_1.GL20.GL_FLOAT, false, Shader_1.Shader.BONEWEIGHT + unit, unit);\r\n    }\r\n    getKey() {\r\n        return (this.usageIndex << 8) + (this.unit & 0xff);\r\n    }\r\n    numberOfTrailingZeros(n) {\r\n        let result = 0;\r\n        for (let i = 5; i <= n; i += 5) {\r\n            var num = i;\r\n            while (num % 5 === 0) {\r\n                num /= 5;\r\n                result++;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    getSizeInBytes() {\r\n        switch (this.type) {\r\n            case GL20_1.GL20.GL_FLOAT:\r\n            case GL20_1.GL20.GL_FIXED:\r\n                return 4 * this.numComponents;\r\n            case GL20_1.GL20.GL_UNSIGNED_BYTE:\r\n            case GL20_1.GL20.GL_BYTE:\r\n                return this.numComponents;\r\n            case GL20_1.GL20.GL_UNSIGNED_SHORT:\r\n            case GL20_1.GL20.GL_SHORT:\r\n                return 2 * this.numComponents;\r\n        }\r\n        return 0;\r\n    }\r\n    equals(other) {\r\n        return (!!other &&\r\n            this.usage === other.usage &&\r\n            this.numComponents === other.numComponents &&\r\n            this.type === other.type &&\r\n            this.normalized === other.normalized &&\r\n            this.alias === other.alias &&\r\n            this.unit === other.unit);\r\n    }\r\n}\r\nexports.VertexAttribute3D = VertexAttribute3D;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.VertexAttributes = void 0;\r\nclass VertexAttributes {\r\n    constructor(attributes) {\r\n        this.mask = -1;\r\n        if (attributes.length === 0)\r\n            throw new Error('attributes must be >= 1');\r\n        const list = [];\r\n        for (let i = 0; i < attributes.length; i++)\r\n            list[i] = attributes[i];\r\n        this.attributes = list;\r\n        this.vertexSize = this.calculateOffsets();\r\n    }\r\n    getOffset(usage, defaultIfNotFound = 0) {\r\n        const vertexAttribute = this.findByUsage(usage);\r\n        if (!vertexAttribute)\r\n            return defaultIfNotFound;\r\n        return vertexAttribute.offset / 4;\r\n    }\r\n    findByUsage(usage) {\r\n        for (const att of this.attributes) {\r\n            if (att.usage === usage)\r\n                return att;\r\n        }\r\n        return null;\r\n    }\r\n    calculateOffsets() {\r\n        let count = 0;\r\n        for (let i = 0; i < this.attributes.length; i++) {\r\n            this.attributes[i].offset = count;\r\n            count += this.attributes[i].getSizeInBytes();\r\n        }\r\n        return count;\r\n    }\r\n    size() {\r\n        return this.attributes.length;\r\n    }\r\n    get(index) {\r\n        return this.attributes[index];\r\n    }\r\n    toString() {\r\n        let returnValue = '[';\r\n        for (let i = 0; i < this.attributes.length; i++) {\r\n            returnValue += '(';\r\n            returnValue += this.attributes[i].alias;\r\n            returnValue += ', ';\r\n            returnValue += this.attributes[i].usage;\r\n            returnValue += ', ';\r\n            returnValue += this.attributes[i].numComponents;\r\n            returnValue += ', ';\r\n            returnValue += this.attributes[i].offset;\r\n            returnValue += ')';\r\n            returnValue += '\\n';\r\n        }\r\n        returnValue += ']';\r\n        return returnValue;\r\n    }\r\n    equals(other) {\r\n        if (other === this)\r\n            return true;\r\n        if (this.attributes.length !== other.attributes.length)\r\n            return false;\r\n        for (let i = 0; i < this.attributes.length; i++) {\r\n            if (!this.attributes[i].equals(other.attributes[i]))\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    getMask() {\r\n        if (this.mask === -1) {\r\n            let result = 0;\r\n            for (let i = 0; i < this.attributes.length; i++) {\r\n                result |= this.attributes[i].usage;\r\n            }\r\n            this.mask = result;\r\n        }\r\n        return this.mask;\r\n    }\r\n    getMaskWithSizePacked() {\r\n        return this.getMask() | (this.attributes.length << 32);\r\n    }\r\n}\r\nexports.VertexAttributes = VertexAttributes;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./Attribute\"), exports);\r\n__exportStar(require(\"./Attributes\"), exports);\r\n__exportStar(require(\"./BlendingAttribute\"), exports);\r\n__exportStar(require(\"./ColorAttribute\"), exports);\r\n__exportStar(require(\"./DirectionalLightsAttribute\"), exports);\r\n__exportStar(require(\"./FloatAttribute\"), exports);\r\n__exportStar(require(\"./IntAttribute\"), exports);\r\n__exportStar(require(\"./PointLightAttribute\"), exports);\r\n__exportStar(require(\"./SpotLightAttribute\"), exports);\r\n__exportStar(require(\"./TextureAttribute\"), exports);\r\n__exportStar(require(\"./VertexAttribute\"), exports);\r\n__exportStar(require(\"./VertexAttributes\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AmbientCubemap = void 0;\r\nconst Utils_1 = require(\"../../Utils\");\r\nclass AmbientCubemap {\r\n    constructor(copyFrom = null) {\r\n        if (!copyFrom) {\r\n            this.data = new Array(AmbientCubemap.NUM_VALUES);\r\n        }\r\n        else {\r\n            if (copyFrom.length !== AmbientCubemap.NUM_VALUES)\r\n                throw new Error('Incorrect array size');\r\n            this.data = new Array(copyFrom.length);\r\n            Utils_1.Utils.arrayCopy(copyFrom, 0, this.data, 0, this.data.length);\r\n        }\r\n    }\r\n    static clamp(v) {\r\n        return v < 0 ? 0 : v > 1 ? 1 : v;\r\n    }\r\n    setData(values) {\r\n        for (let i = 0; i < this.data.length; i++)\r\n            this.data[i] = values[i];\r\n        return this;\r\n    }\r\n    setColor(r, g, b) {\r\n        for (let idx = 0; idx < AmbientCubemap.NUM_VALUES;) {\r\n            this.data[idx] = r;\r\n            this.data[idx + 1] = g;\r\n            this.data[idx + 2] = b;\r\n            idx += 3;\r\n        }\r\n        return this;\r\n    }\r\n    getColor(out, side) {\r\n        side *= 3;\r\n        return out.set(this.data[side], this.data[side + 1], this.data[side + 2], 1);\r\n    }\r\n    clear() {\r\n        for (let i = 0; i < this.data.length; i++)\r\n            this.data[i] = 0;\r\n        return this;\r\n    }\r\n    clamp() {\r\n        for (let i = 0; i < this.data.length; i++)\r\n            this.data[i] = AmbientCubemap.clamp(this.data[i]);\r\n        return this;\r\n    }\r\n    addColor(r, g, b) {\r\n        for (let idx = 0; idx < this.data.length;) {\r\n            this.data[idx++] += r;\r\n            this.data[idx++] += g;\r\n            this.data[idx++] += b;\r\n        }\r\n        return this;\r\n    }\r\n    add(r, g, b, x, y, z) {\r\n        const x2 = x * x, y2 = y * y, z2 = z * z;\r\n        let d = x2 + y2 + z2;\r\n        if (d === 0)\r\n            return this;\r\n        d = (1 / d) * (d + 1);\r\n        const rd = r * d, gd = g * d, bd = b * d;\r\n        let idx = x > 0 ? 0 : 3;\r\n        this.data[idx] += x2 * rd;\r\n        this.data[idx + 1] += x2 * gd;\r\n        this.data[idx + 2] += x2 * bd;\r\n        idx = y > 0 ? 6 : 9;\r\n        this.data[idx] += y2 * rd;\r\n        this.data[idx + 1] += y2 * gd;\r\n        this.data[idx + 2] += y2 * bd;\r\n        idx = z > 0 ? 12 : 15;\r\n        this.data[idx] += z2 * rd;\r\n        this.data[idx + 1] += z2 * gd;\r\n        this.data[idx + 2] += z2 * bd;\r\n        return this;\r\n    }\r\n    addWithColorAndDirection(color, direction) {\r\n        return this.add(color.r, color.g, color.b, direction.x, direction.y, direction.z);\r\n    }\r\n    addWithPointTarget(color, point, target) {\r\n        return this.add(color.r, color.g, color.b, target.x - point.x, target.y - point.y, target.z - point.z);\r\n    }\r\n    addWithPointTargetIntensity(color, point, target, intensity) {\r\n        const t = intensity / (1 + target.distance(point));\r\n        return this.add(color.r * t, color.g * t, color.b * t, target.x - point.x, target.y - point.y, target.z - point.z);\r\n    }\r\n    toString() {\r\n        let result = '';\r\n        for (let i = 0; i < this.data.length; i += 3) {\r\n            result += this.data[i] + ', ' + this.data[i + 1] + ', ' + this.data[i + 2] + '\\n';\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.AmbientCubemap = AmbientCubemap;\r\nAmbientCubemap.NUM_VALUES = 6 * 3;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseLight = void 0;\r\nconst Utils_1 = require(\"../../Utils\");\r\nclass BaseLight {\r\n    constructor() {\r\n        this.color = new Utils_1.Color(0, 0, 0, 1);\r\n    }\r\n    setColor(r, g, b, a) {\r\n        this.color.set(r, g, b, a);\r\n        return this;\r\n    }\r\n}\r\nexports.BaseLight = BaseLight;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DirectionalLight = void 0;\r\nconst Vector3_1 = require(\"../../Vector3\");\r\nconst BaseLight_1 = require(\"./BaseLight\");\r\nclass DirectionalLight extends BaseLight_1.BaseLight {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.direction = new Vector3_1.Vector3();\r\n    }\r\n    setDirection(directionX, directionY, directionZ) {\r\n        this.direction.set(directionX, directionY, directionZ);\r\n        return this;\r\n    }\r\n    setFrom(color, direction) {\r\n        if (!!color)\r\n            this.color.set(color.r, color.g, color.b, color.a);\r\n        if (!!direction)\r\n            this.direction.setFrom(direction).normalize();\r\n        return this;\r\n    }\r\n    set(r, g, b, dirX, dirY, dirZ) {\r\n        this.color.set(r, g, b, 1);\r\n        this.direction.set(dirX, dirY, dirZ).normalize();\r\n        return this;\r\n    }\r\n    equals(other) {\r\n        return !!other && (other === this || (this.color.equals(other.color) && this.direction.equals(other.direction)));\r\n    }\r\n}\r\nexports.DirectionalLight = DirectionalLight;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Environment = void 0;\r\nconst Attributes_1 = require(\"../attributes/Attributes\");\r\nconst DirectionalLightsAttribute_1 = require(\"../attributes/DirectionalLightsAttribute\");\r\nconst PointLightAttribute_1 = require(\"../attributes/PointLightAttribute\");\r\nconst SpotLightAttribute_1 = require(\"../attributes/SpotLightAttribute\");\r\nconst DirectionalLight_1 = require(\"./DirectionalLight\");\r\nconst PointLight_1 = require(\"./PointLight\");\r\nconst SpotLight_1 = require(\"./SpotLight\");\r\nclass Environment extends Attributes_1.Attributes {\r\n    addLights(lights) {\r\n        for (const light of lights)\r\n            this.addLight(light);\r\n        return this;\r\n    }\r\n    addLight(light) {\r\n        if (light instanceof DirectionalLight_1.DirectionalLight)\r\n            this.addDirectionalLight(light);\r\n        else if (light instanceof PointLight_1.PointLight) {\r\n            this.addPointLight(light);\r\n        }\r\n        else if (light instanceof SpotLight_1.SpotLight)\r\n            this.addSpotLight(light);\r\n        else\r\n            throw new Error('Unknown light type');\r\n        return this;\r\n    }\r\n    addDirectionalLight(light) {\r\n        let dirLights = this.get(DirectionalLightsAttribute_1.DirectionalLightsAttribute.Type);\r\n        if (!dirLights)\r\n            this.set((dirLights = new DirectionalLightsAttribute_1.DirectionalLightsAttribute()));\r\n        dirLights.lights.push(light);\r\n        return this;\r\n    }\r\n    addPointLight(light) {\r\n        let pointLights = this.get(PointLightAttribute_1.PointLightsAttribute.Type);\r\n        if (!pointLights)\r\n            this.set((pointLights = new PointLightAttribute_1.PointLightsAttribute()));\r\n        pointLights.lights.push(light);\r\n        return this;\r\n    }\r\n    addSpotLight(light) {\r\n        let spotLights = this.get(SpotLightAttribute_1.SpotLightsAttribute.Type);\r\n        if (!spotLights)\r\n            this.set((spotLights = new SpotLightAttribute_1.SpotLightsAttribute()));\r\n        spotLights.lights.push(light);\r\n        return this;\r\n    }\r\n    removeLights(lights) {\r\n        for (const light of lights)\r\n            this.removeLight(light);\r\n        return this;\r\n    }\r\n    removeLight(light) {\r\n        if (light instanceof DirectionalLight_1.DirectionalLight)\r\n            this.removeDirectionalLight(light);\r\n        else if (light instanceof PointLight_1.PointLight)\r\n            this.removePointLight(light);\r\n        else if (light instanceof SpotLight_1.SpotLight)\r\n            this.removeSpotLight(light);\r\n        else\r\n            throw new Error('Unknown light type');\r\n        return this;\r\n    }\r\n    removeDirectionalLight(light) {\r\n        if (this.has(DirectionalLightsAttribute_1.DirectionalLightsAttribute.Type)) {\r\n            const dirLights = this.get(DirectionalLightsAttribute_1.DirectionalLightsAttribute.Type);\r\n            const index = dirLights.lights.indexOf(light, 0);\r\n            if (index > -1) {\r\n                dirLights.lights.splice(index, 1);\r\n            }\r\n            if (dirLights.lights.length === 0)\r\n                this.remove(DirectionalLightsAttribute_1.DirectionalLightsAttribute.Type);\r\n        }\r\n        return this;\r\n    }\r\n    removePointLight(light) {\r\n        if (this.has(PointLightAttribute_1.PointLightsAttribute.Type)) {\r\n            const pointLights = this.get(PointLightAttribute_1.PointLightsAttribute.Type);\r\n            const index = pointLights.lights.indexOf(light, 0);\r\n            if (index > -1) {\r\n                pointLights.lights.splice(index, 1);\r\n            }\r\n            if (pointLights.lights.length === 0)\r\n                this.remove(PointLightAttribute_1.PointLightsAttribute.Type);\r\n        }\r\n        return this;\r\n    }\r\n    removeSpotLight(light) {\r\n        if (this.has(SpotLightAttribute_1.SpotLightsAttribute.Type)) {\r\n            const spotLights = this.get(SpotLightAttribute_1.SpotLightsAttribute.Type);\r\n            const index = spotLights.lights.indexOf(light, 0);\r\n            if (index > -1) {\r\n                spotLights.lights.splice(index, 1);\r\n            }\r\n            if (spotLights.lights.length === 0)\r\n                this.remove(SpotLightAttribute_1.SpotLightsAttribute.Type);\r\n        }\r\n        return this;\r\n    }\r\n}\r\nexports.Environment = Environment;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PointLight = void 0;\r\nconst Vector3_1 = require(\"../../Vector3\");\r\nconst BaseLight_1 = require(\"./BaseLight\");\r\nclass PointLight extends BaseLight_1.BaseLight {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.position = new Vector3_1.Vector3();\r\n    }\r\n    setPosition(positionX, positionY, positionZ) {\r\n        this.position.set(positionX, positionY, positionZ);\r\n        return this;\r\n    }\r\n    setIntensity(intensity) {\r\n        this.intensity = intensity;\r\n        return this;\r\n    }\r\n    setFrom(copyFrom) {\r\n        return this.set(copyFrom.color, copyFrom.position, copyFrom.intensity);\r\n    }\r\n    set(color, position, intensity) {\r\n        if (!!color)\r\n            this.color.setFromColor(color);\r\n        if (!!position)\r\n            this.position.setFrom(position);\r\n        this.intensity = intensity;\r\n        return this;\r\n    }\r\n    setFromValue(r, g, b, x, y, z, intensity) {\r\n        this.color.set(r, g, b, 1);\r\n        this.position.set(x, y, z);\r\n        this.intensity = intensity;\r\n        return this;\r\n    }\r\n    equals(other) {\r\n        return (!!other &&\r\n            (other === this ||\r\n                (this.color.equals(other.color) && this.position.equals(other.position) && this.intensity === other.intensity)));\r\n    }\r\n}\r\nexports.PointLight = PointLight;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SpotLight = void 0;\r\nconst Utils_1 = require(\"../../Utils\");\r\nconst Vector3_1 = require(\"../../Vector3\");\r\nconst BaseLight_1 = require(\"./BaseLight\");\r\nclass SpotLight extends BaseLight_1.BaseLight {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.position = new Vector3_1.Vector3();\r\n        this.direction = new Vector3_1.Vector3();\r\n    }\r\n    setPosition(positionX, positionY, positionZ) {\r\n        this.position.set(positionX, positionY, positionZ);\r\n        return this;\r\n    }\r\n    setDirection(directionX, directionY, directionZ) {\r\n        this.direction.set(directionX, directionY, directionZ);\r\n        return this;\r\n    }\r\n    setIntensity(intensity) {\r\n        this.intensity = intensity;\r\n        return this;\r\n    }\r\n    setCutoffAngle(cutoffAngle) {\r\n        this.cutoffAngle = cutoffAngle;\r\n        return this;\r\n    }\r\n    setExponent(exponent) {\r\n        this.exponent = exponent;\r\n        return this;\r\n    }\r\n    set(color, position, direction, intensity, cutoffAngle, exponent) {\r\n        if (!!color)\r\n            this.color.setFromColor(color);\r\n        if (!!position)\r\n            this.position.setFrom(position);\r\n        if (!!direction)\r\n            this.direction.setFrom(direction).normalize();\r\n        this.intensity = intensity;\r\n        this.cutoffAngle = cutoffAngle;\r\n        this.exponent = exponent;\r\n        return this;\r\n    }\r\n    setFromValue(r, g, b, posX, posY, posZ, dirX, dirY, dirZ, intensity, cutoffAngle, exponent) {\r\n        this.color.set(r, g, b, 1);\r\n        this.position.set(posX, posY, posZ);\r\n        this.direction.set(dirX, dirY, dirZ).normalize();\r\n        this.intensity = intensity;\r\n        this.cutoffAngle = cutoffAngle;\r\n        this.exponent = exponent;\r\n        return this;\r\n    }\r\n    setFrom(copyFrom) {\r\n        return this.set(copyFrom.color, copyFrom.position, copyFrom.direction, copyFrom.intensity, copyFrom.cutoffAngle, copyFrom.exponent);\r\n    }\r\n    setTarget(target) {\r\n        this.direction.set(target.x, target.y, target.z).sub(this.position).normalize();\r\n        return this;\r\n    }\r\n    equals(other) {\r\n        return (!!other &&\r\n            (other === this ||\r\n                (this.color.equals(other.color) &&\r\n                    this.position.equals(other.position) &&\r\n                    this.direction.equals(other.direction) &&\r\n                    Utils_1.MathUtils.isEqual(this.intensity, other.intensity) &&\r\n                    Utils_1.MathUtils.isEqual(this.cutoffAngle, other.cutoffAngle) &&\r\n                    Utils_1.MathUtils.isEqual(this.exponent, other.exponent))));\r\n    }\r\n}\r\nexports.SpotLight = SpotLight;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./AmbientCubemap\"), exports);\r\n__exportStar(require(\"./BaseLight\"), exports);\r\n__exportStar(require(\"./DirectionalLight\"), exports);\r\n__exportStar(require(\"./Environment\"), exports);\r\n__exportStar(require(\"./PointLight\"), exports);\r\n__exportStar(require(\"./SpotLight\"), exports);\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./attributes\"), exports);\r\n__exportStar(require(\"./DefaultRenderableSorter\"), exports);\r\n__exportStar(require(\"./DefaultShaderProvider\"), exports);\r\n__exportStar(require(\"./DefaultTextureBinder\"), exports);\r\n__exportStar(require(\"./environment\"), exports);\r\n__exportStar(require(\"./GL20\"), exports);\r\n__exportStar(require(\"./loader\"), exports);\r\n__exportStar(require(\"./Material\"), exports);\r\n__exportStar(require(\"./math\"), exports);\r\n__exportStar(require(\"./Mesh\"), exports);\r\n__exportStar(require(\"./model\"), exports);\r\n__exportStar(require(\"./ModelBatch\"), exports);\r\n__exportStar(require(\"./ModelInstance\"), exports);\r\n__exportStar(require(\"./PerspectiveCamera\"), exports);\r\n__exportStar(require(\"./Renderable\"), exports);\r\n__exportStar(require(\"./RenderContext\"), exports);\r\n__exportStar(require(\"./shaders\"), exports);\r\n__exportStar(require(\"./utils\"), exports);\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.G3dModelLoader = void 0;\r\nconst Matrix4_1 = require(\"../../Matrix4\");\r\nconst Quaternion_1 = require(\"../../Quaternion\");\r\nconst Utils_1 = require(\"../../Utils\");\r\nconst Vector2_1 = require(\"../../Vector2\");\r\nconst Vector3_1 = require(\"../../Vector3\");\r\nconst VertexAttribute_1 = require(\"../attributes/VertexAttribute\");\r\nconst GL20_1 = require(\"../GL20\");\r\nconst ModelAnimation_1 = require(\"../model/data/ModelAnimation\");\r\nconst ModelData_1 = require(\"../model/data/ModelData\");\r\nconst ModelMaterial_1 = require(\"../model/data/ModelMaterial\");\r\nconst ModelMesh_1 = require(\"../model/data/ModelMesh\");\r\nconst ModelMeshPart_1 = require(\"../model/data/ModelMeshPart\");\r\nconst ModelNode_1 = require(\"../model/data/ModelNode\");\r\nconst ModelNodeAnimation_1 = require(\"../model/data/ModelNodeAnimation\");\r\nconst ModelNodeKeyframe_1 = require(\"../model/data/ModelNodeKeyframe\");\r\nconst ModelNodePart_1 = require(\"../model/data/ModelNodePart\");\r\nconst ModelTexture_1 = require(\"../model/data/ModelTexture\");\r\nconst Model_1 = require(\"../model/Model\");\r\nconst UBJsonReader_1 = require(\"./UBJsonReader\");\r\nclass G3dModelLoader {\r\n    constructor() {\r\n        this.tempQ = new Quaternion_1.Quaternion();\r\n        this.reader = new UBJsonReader_1.UBJsonReader();\r\n    }\r\n    load(gl, fileName) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const fileExtension = fileName.split('.').pop();\r\n            const binaryFomat = fileExtension === 'g3db' ? true : false;\r\n            const shipData = yield this.parseModel(fileName, binaryFomat);\r\n            const shipModel = new Model_1.Model(gl);\r\n            yield shipModel.load(shipData);\r\n            return shipModel;\r\n        });\r\n    }\r\n    parseModel(fileName, binaryFomat = true) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            var path = fileName.substring(0, fileName.lastIndexOf('/'));\r\n            let json;\r\n            if (binaryFomat) {\r\n                const buffer = yield fetch(fileName).then(res => res.arrayBuffer());\r\n                json = this.reader.parse(buffer);\r\n            }\r\n            else {\r\n                const string = yield fetch(fileName).then(res => res.text());\r\n                json = JSON.parse(string);\r\n            }\r\n            const model = new ModelData_1.ModelData();\r\n            const version = json['version'];\r\n            model.version[0] = version[0];\r\n            model.version[1] = version[1];\r\n            if (model.version[0] !== G3dModelLoader.VERSION_HI || model.version[1] !== G3dModelLoader.VERSION_LO)\r\n                throw new Error('Model version not supported');\r\n            model.id = this.getString(json['id'], '');\r\n            this.parseMeshes(model, json);\r\n            this.parseMaterials(model, json, path);\r\n            this.parseNodes(model, json);\r\n            this.parseAnimations(model, json);\r\n            return model;\r\n        });\r\n    }\r\n    parseMeshes(model, json) {\r\n        const meshes = json['meshes'];\r\n        if (meshes !== undefined) {\r\n            for (const mesh of meshes) {\r\n                const jsonMesh = new ModelMesh_1.ModelMesh();\r\n                const id = this.getString(mesh['id'], '');\r\n                jsonMesh.id = id;\r\n                const attributes = mesh['attributes'];\r\n                jsonMesh.attributes = this.parseAttributes(attributes);\r\n                jsonMesh.vertices = mesh['vertices'];\r\n                const meshParts = mesh['parts'];\r\n                const parts = new Array();\r\n                for (const meshPart of meshParts) {\r\n                    const jsonPart = new ModelMeshPart_1.ModelMeshPart();\r\n                    const partId = this.getString(meshPart['id'], null);\r\n                    if (!partId) {\r\n                        throw new Error('Not id given for mesh part');\r\n                    }\r\n                    for (const other of parts) {\r\n                        if (other.id === partId) {\r\n                            throw new Error(\"Mesh part with id '\" + partId + \"' already in defined\");\r\n                        }\r\n                    }\r\n                    jsonPart.id = partId;\r\n                    const type = this.getString(meshPart['type'], null);\r\n                    if (!type) {\r\n                        throw new Error(\"No primitive type given for mesh part '\" + partId + \"'\");\r\n                    }\r\n                    jsonPart.primitiveType = this.parseType(type);\r\n                    jsonPart.indices = meshPart['indices'];\r\n                    parts.push(jsonPart);\r\n                }\r\n                jsonMesh.parts = parts;\r\n                model.meshes.push(jsonMesh);\r\n            }\r\n        }\r\n    }\r\n    parseType(type) {\r\n        if (type === 'TRIANGLES') {\r\n            return GL20_1.GL20.GL_TRIANGLES;\r\n        }\r\n        else if (type === 'LINES') {\r\n            return GL20_1.GL20.GL_LINES;\r\n        }\r\n        else if (type === 'POINTS') {\r\n            return GL20_1.GL20.GL_POINTS;\r\n        }\r\n        else if (type === 'TRIANGLE_STRIP') {\r\n            return GL20_1.GL20.GL_TRIANGLE_STRIP;\r\n        }\r\n        else if (type === 'LINE_STRIP') {\r\n            return GL20_1.GL20.GL_LINE_STRIP;\r\n        }\r\n        else {\r\n            throw new Error(\"Unknown primitive type '\" +\r\n                type +\r\n                \"', should be one of triangle, trianglestrip, line, linestrip, lineloop or point\");\r\n        }\r\n    }\r\n    parseAttributes(attributes) {\r\n        const vertexAttributes = new Array();\r\n        let unit = 0;\r\n        let blendWeightCount = 0;\r\n        for (const attr of attributes) {\r\n            if (attr === 'POSITION') {\r\n                vertexAttributes.push(VertexAttribute_1.VertexAttribute3D.Position());\r\n            }\r\n            else if (attr === 'NORMAL') {\r\n                vertexAttributes.push(VertexAttribute_1.VertexAttribute3D.Normal());\r\n            }\r\n            else if (attr === 'COLOR') {\r\n                vertexAttributes.push(VertexAttribute_1.VertexAttribute3D.ColorUnpacked());\r\n            }\r\n            else if (attr === 'COLORPACKED') {\r\n                //vertexAttributes.push(VertexAttribute.ColorPacked());\r\n                throw Error('ColorPacked currently not supported');\r\n            }\r\n            else if (attr === 'TANGENT') {\r\n                vertexAttributes.push(VertexAttribute_1.VertexAttribute3D.Tangent());\r\n            }\r\n            else if (attr === 'BINORMAL') {\r\n                vertexAttributes.push(VertexAttribute_1.VertexAttribute3D.Binormal());\r\n            }\r\n            else if (attr.startsWith('TEXCOORD')) {\r\n                vertexAttributes.push(VertexAttribute_1.VertexAttribute3D.TexCoords(unit++));\r\n            }\r\n            else if (attr.startsWith('BLENDWEIGHT')) {\r\n                vertexAttributes.push(VertexAttribute_1.VertexAttribute3D.BoneWeight(blendWeightCount++));\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown vertex attribute '\" + attr + \"', should be one of position, normal, uv, tangent or binormal\");\r\n            }\r\n        }\r\n        return vertexAttributes;\r\n    }\r\n    parseMaterials(model, json, materialDir) {\r\n        const materials = json['materials'];\r\n        if (materials !== undefined) {\r\n            for (const material of materials) {\r\n                const jsonMaterial = new ModelMaterial_1.ModelMaterial();\r\n                const id = this.getString(material['id'], null);\r\n                if (!id)\r\n                    throw new Error('Material needs an id.');\r\n                jsonMaterial.id = id;\r\n                // Read material colors\r\n                const diffuse = material['diffuse'];\r\n                if (diffuse !== undefined)\r\n                    jsonMaterial.diffuse = this.parseColor(diffuse);\r\n                const ambient = material['ambient'];\r\n                if (ambient !== undefined)\r\n                    jsonMaterial.ambient = this.parseColor(ambient);\r\n                const emissive = material['emissive'];\r\n                if (emissive !== undefined)\r\n                    jsonMaterial.emissive = this.parseColor(emissive);\r\n                const specular = material['specular'];\r\n                if (specular !== undefined)\r\n                    jsonMaterial.specular = this.parseColor(specular);\r\n                const reflection = material['reflection'];\r\n                if (reflection !== undefined)\r\n                    jsonMaterial.reflection = this.parseColor(reflection);\r\n                jsonMaterial.shininess = this.getFloat(material['shininess'], 0);\r\n                jsonMaterial.opacity = this.getFloat(material['opacity'], 1);\r\n                const textures = material['textures'];\r\n                if (textures !== undefined) {\r\n                    for (const texture of textures) {\r\n                        const jsonTexture = new ModelTexture_1.ModelTexture();\r\n                        const textureId = this.getString(texture['id'], null);\r\n                        if (!textureId)\r\n                            throw new Error('Texture has no id.');\r\n                        jsonTexture.id = textureId;\r\n                        const fileName = this.getString(texture['filename'], null);\r\n                        if (!fileName)\r\n                            throw new Error('Texture needs filename.');\r\n                        jsonTexture.fileName =\r\n                            materialDir + (materialDir.length === 0 || materialDir.endsWith('/') ? '' : '/') + fileName;\r\n                        jsonTexture.uvTranslation = this.readVector2(texture['uvTranslation'], 0, 0);\r\n                        jsonTexture.uvScaling = this.readVector2(texture['uvScaling'], 1, 1);\r\n                        const textureType = this.getString(texture['type'], null);\r\n                        if (textureType === undefined)\r\n                            throw new Error('Texture needs type.');\r\n                        jsonTexture.usage = this.parseTextureUsage(textureType);\r\n                        if (jsonMaterial.textures === undefined)\r\n                            jsonMaterial.textures = new Array();\r\n                        jsonMaterial.textures.push(jsonTexture);\r\n                    }\r\n                }\r\n                model.materials.push(jsonMaterial);\r\n            }\r\n        }\r\n    }\r\n    parseTextureUsage(value) {\r\n        if (value.toUpperCase() === 'AMBIENT')\r\n            return ModelTexture_1.ModelTexture.USAGE_AMBIENT;\r\n        else if (value.toUpperCase() === 'BUMP')\r\n            return ModelTexture_1.ModelTexture.USAGE_BUMP;\r\n        else if (value.toUpperCase() === 'DIFFUSE')\r\n            return ModelTexture_1.ModelTexture.USAGE_DIFFUSE;\r\n        else if (value.toUpperCase() === 'EMISSIVE')\r\n            return ModelTexture_1.ModelTexture.USAGE_EMISSIVE;\r\n        else if (value.toUpperCase() === 'NONE')\r\n            return ModelTexture_1.ModelTexture.USAGE_NONE;\r\n        else if (value.toUpperCase() === 'NORMAL')\r\n            return ModelTexture_1.ModelTexture.USAGE_NORMAL;\r\n        else if (value.toUpperCase() === 'REFLECTION')\r\n            return ModelTexture_1.ModelTexture.USAGE_REFLECTION;\r\n        else if (value.toUpperCase() === 'SHININESS')\r\n            return ModelTexture_1.ModelTexture.USAGE_SHININESS;\r\n        else if (value.toUpperCase() === 'SPECULAR')\r\n            return ModelTexture_1.ModelTexture.USAGE_SPECULAR;\r\n        else if (value.toUpperCase() === 'TRANSPARENCY')\r\n            return ModelTexture_1.ModelTexture.USAGE_TRANSPARENCY;\r\n        return ModelTexture_1.ModelTexture.USAGE_UNKNOWN;\r\n    }\r\n    parseColor(colorArray) {\r\n        if (colorArray.length >= 3)\r\n            return new Utils_1.Color(colorArray[0], colorArray[1], colorArray[2], 1);\r\n        else\r\n            throw new Error('Expected Color values <> than three.');\r\n    }\r\n    readVector2(vectorArray, x, y) {\r\n        if (vectorArray === undefined)\r\n            return new Vector2_1.Vector2(x, y);\r\n        else if (vectorArray.length === 2)\r\n            return new Vector2_1.Vector2(vectorArray[0], vectorArray[1]);\r\n        else\r\n            throw new Error('Expected Vector2 values <> than two.');\r\n    }\r\n    parseNodes(model, json) {\r\n        const nodes = json['nodes'];\r\n        if (nodes !== undefined) {\r\n            for (const node of nodes) {\r\n                model.nodes.push(this.parseNodesRecursively(node));\r\n            }\r\n        }\r\n        return model.nodes;\r\n    }\r\n    parseNodesRecursively(json) {\r\n        const jsonNode = new ModelNode_1.ModelNode();\r\n        const id = this.getString(json['id'], null);\r\n        if (!id)\r\n            throw new Error('Node id missing.');\r\n        jsonNode.id = id;\r\n        const translation = json['translation'];\r\n        if (translation !== undefined && translation.length !== 3)\r\n            throw new Error('Node translation incomplete');\r\n        jsonNode.translation =\r\n            translation === undefined ? null : new Vector3_1.Vector3(translation[0], translation[1], translation[2]);\r\n        const rotation = json['rotation'];\r\n        if (rotation !== undefined && rotation.length !== 4)\r\n            throw new Error('Node rotation incomplete');\r\n        jsonNode.rotation =\r\n            rotation === undefined ? null : new Quaternion_1.Quaternion(rotation[0], rotation[1], rotation[2], rotation[3]);\r\n        const scale = json['scale'];\r\n        if (scale !== undefined && scale.length !== 3)\r\n            throw new Error('Node scale incomplete');\r\n        jsonNode.scale = scale === undefined ? null : new Vector3_1.Vector3(scale[0], scale[1], scale[2]);\r\n        const meshId = this.getString(json['mesh'], null);\r\n        if (!!meshId)\r\n            jsonNode.meshId = meshId;\r\n        const materials = json['parts'];\r\n        if (materials !== undefined) {\r\n            jsonNode.parts = new Array();\r\n            let i = 0;\r\n            for (const material of materials) {\r\n                const nodePart = new ModelNodePart_1.ModelNodePart();\r\n                const meshPartId = this.getString(material['meshpartid'], null);\r\n                const materialId = this.getString(material['materialid'], null);\r\n                if (!meshPartId || !materialId) {\r\n                    throw new Error('Node ' + id + ' part is missing meshPartId or materialId');\r\n                }\r\n                nodePart.materialId = materialId;\r\n                nodePart.meshPartId = meshPartId;\r\n                const bones = material['bones'];\r\n                if (bones !== undefined) {\r\n                    nodePart.bones = new Utils_1.ArrayMap();\r\n                    for (const bone of bones) {\r\n                        const nodeId = this.getString(bone['node'], null);\r\n                        if (!nodeId)\r\n                            throw new Error('Bone node ID missing');\r\n                        const transform = new Matrix4_1.Matrix4();\r\n                        let val = bone['translation'];\r\n                        if (!!val && val.length >= 3)\r\n                            transform.translate(val[0], val[1], val[2]);\r\n                        val = bone['rotation'];\r\n                        if (!!val && val.length >= 4)\r\n                            transform.rotate(this.tempQ.set(val[0], val[1], val[2], val[3]));\r\n                        val = bone['scale'];\r\n                        if (!!val && val.length >= 3)\r\n                            transform.scale(val[0], val[1], val[2]);\r\n                        nodePart.bones.set(nodeId, transform);\r\n                    }\r\n                }\r\n                jsonNode.parts[i] = nodePart;\r\n                i++;\r\n            }\r\n        }\r\n        const children = json['children'];\r\n        if (children !== undefined) {\r\n            jsonNode.children = new Array();\r\n            let i = 0;\r\n            for (const child of children) {\r\n                jsonNode.children[i] = this.parseNodesRecursively(child);\r\n                i++;\r\n            }\r\n        }\r\n        return jsonNode;\r\n    }\r\n    parseAnimations(model, json) {\r\n        const animations = json['animations'];\r\n        if (!animations)\r\n            return;\r\n        for (const anim of animations) {\r\n            const nodes = anim['bones'];\r\n            if (nodes === undefined)\r\n                continue;\r\n            const animation = new ModelAnimation_1.ModelAnimation();\r\n            model.animations.push(animation);\r\n            animation.id = anim['id'];\r\n            for (const node of nodes) {\r\n                const nodeAnim = new ModelNodeAnimation_1.ModelNodeAnimation();\r\n                animation.nodeAnimations.push(nodeAnim);\r\n                nodeAnim.nodeId = node['boneId'];\r\n                // For backwards compatibility (version 0.1):\r\n                const keyframes = node['keyframes'];\r\n                if (keyframes !== undefined && Array.isArray(keyframes)) {\r\n                    for (const keyframe of keyframes) {\r\n                        const keytime = this.getFloat(keyframe['keytime'], 0) / 1000;\r\n                        const translation = keyframe['translation'];\r\n                        if (translation !== undefined && translation.length === 3) {\r\n                            if (!nodeAnim.translation)\r\n                                nodeAnim.translation = new Array();\r\n                            const tkf = new ModelNodeKeyframe_1.ModelNodeKeyframe();\r\n                            tkf.keytime = keytime;\r\n                            tkf.value = new Vector3_1.Vector3(translation[0], translation[1], translation[2]);\r\n                            nodeAnim.translation.push(tkf);\r\n                        }\r\n                        const rotation = keyframe['rotation'];\r\n                        if (rotation !== undefined && rotation.length === 4) {\r\n                            if (!nodeAnim.rotation)\r\n                                nodeAnim.rotation = new Array();\r\n                            const rkf = new ModelNodeKeyframe_1.ModelNodeKeyframe();\r\n                            rkf.keytime = keytime;\r\n                            rkf.value = new Quaternion_1.Quaternion(rotation[0], rotation[1], rotation[2], rotation[3]);\r\n                            nodeAnim.rotation.push(rkf);\r\n                        }\r\n                        const scale = keyframe['scale'];\r\n                        if (scale !== undefined && scale.length === 3) {\r\n                            if (!nodeAnim.scaling)\r\n                                nodeAnim.scaling = new Array();\r\n                            const skf = new ModelNodeKeyframe_1.ModelNodeKeyframe();\r\n                            skf.keytime = keytime;\r\n                            skf.value = new Vector3_1.Vector3(scale[0], scale[1], scale[2]);\r\n                            nodeAnim.scaling.push(skf);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    // Version 0.2:\r\n                    const translationKF = node['translation'];\r\n                    if (translationKF !== undefined && Array.isArray(translationKF)) {\r\n                        nodeAnim.translation = new Array();\r\n                        for (const keyframe of translationKF) {\r\n                            const kf = new ModelNodeKeyframe_1.ModelNodeKeyframe();\r\n                            nodeAnim.translation.push(kf);\r\n                            kf.keytime = this.getFloat(keyframe['keytime'], 0) / 1000;\r\n                            const translation = keyframe['value'];\r\n                            if (translation !== undefined && translation.length >= 3)\r\n                                kf.value = new Vector3_1.Vector3(translation[0], translation[1], translation[2]);\r\n                        }\r\n                    }\r\n                    const rotationKF = node['rotation'];\r\n                    if (!!rotationKF && Array.isArray(rotationKF)) {\r\n                        nodeAnim.rotation = new Array();\r\n                        for (const keyframe of rotationKF) {\r\n                            const kf = new ModelNodeKeyframe_1.ModelNodeKeyframe();\r\n                            nodeAnim.rotation.push(kf);\r\n                            kf.keytime = this.getFloat(keyframe['keytime'], 0) / 1000;\r\n                            const rotation = keyframe['value'];\r\n                            if (rotation !== undefined && rotation.length >= 4)\r\n                                kf.value = new Quaternion_1.Quaternion(rotation[0], rotation[1], rotation[2], rotation[3]);\r\n                        }\r\n                    }\r\n                    const scalingKF = node['scaling'];\r\n                    if (!!scalingKF && Array.isArray(scalingKF)) {\r\n                        nodeAnim.scaling = new Array();\r\n                        for (const keyframe of scalingKF) {\r\n                            const kf = new ModelNodeKeyframe_1.ModelNodeKeyframe();\r\n                            nodeAnim.scaling.push(kf);\r\n                            kf.keytime = this.getFloat(keyframe['keytime'], 0) / 1000;\r\n                            const scaling = keyframe['value'];\r\n                            if (scaling !== undefined && scaling.length >= 3)\r\n                                kf.value = new Vector3_1.Vector3(scaling[0], scaling[1], scaling[2]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    getString(object, defValue) {\r\n        return object !== undefined ? object : defValue;\r\n    }\r\n    getFloat(object, defValue) {\r\n        return object !== undefined ? object : defValue;\r\n    }\r\n}\r\nexports.G3dModelLoader = G3dModelLoader;\r\nG3dModelLoader.VERSION_HI = 0;\r\nG3dModelLoader.VERSION_LO = 1;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ObjLoader = exports.MtlLoader = exports.ObjMaterial = void 0;\r\nconst Quaternion_1 = require(\"../../Quaternion\");\r\nconst Shader_1 = require(\"../../Shader\");\r\nconst Utils_1 = require(\"../../Utils\");\r\nconst Vector3_1 = require(\"../../Vector3\");\r\nconst VertexAttribute_1 = require(\"../attributes/VertexAttribute\");\r\nconst GL20_1 = require(\"../GL20\");\r\nconst Material_1 = require(\"../Material\");\r\nconst ModelData_1 = require(\"../model/data/ModelData\");\r\nconst ModelMaterial_1 = require(\"../model/data/ModelMaterial\");\r\nconst ModelMesh_1 = require(\"../model/data/ModelMesh\");\r\nconst ModelMeshPart_1 = require(\"../model/data/ModelMeshPart\");\r\nconst ModelNode_1 = require(\"../model/data/ModelNode\");\r\nconst ModelNodePart_1 = require(\"../model/data/ModelNodePart\");\r\nconst ModelTexture_1 = require(\"../model/data/ModelTexture\");\r\nconst Model_1 = require(\"../model/Model\");\r\nclass Group {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.faces = [];\r\n        this.numFaces = 0;\r\n        this.mat = new Material_1.Material('');\r\n        this.materialName = 'default';\r\n    }\r\n}\r\nclass ObjMaterial {\r\n    constructor() {\r\n        this.materialName = 'default';\r\n        this.reset();\r\n    }\r\n    build() {\r\n        const mat = new ModelMaterial_1.ModelMaterial();\r\n        mat.id = this.materialName;\r\n        mat.ambient = !this.ambientColor\r\n            ? null\r\n            : new Utils_1.Color(this.ambientColor.r, this.ambientColor.g, this.ambientColor.b, this.ambientColor.a);\r\n        mat.diffuse = new Utils_1.Color(this.diffuseColor.r, this.diffuseColor.g, this.diffuseColor.b, this.diffuseColor.a);\r\n        mat.specular = new Utils_1.Color(this.specularColor.r, this.specularColor.g, this.specularColor.b, this.specularColor.a);\r\n        mat.opacity = this.opacity;\r\n        mat.shininess = this.shininess;\r\n        this.addTexture(mat, this.alphaTexFilename, ModelTexture_1.ModelTexture.USAGE_TRANSPARENCY);\r\n        this.addTexture(mat, this.ambientTexFilename, ModelTexture_1.ModelTexture.USAGE_AMBIENT);\r\n        this.addTexture(mat, this.diffuseTexFilename, ModelTexture_1.ModelTexture.USAGE_DIFFUSE);\r\n        this.addTexture(mat, this.specularTexFilename, ModelTexture_1.ModelTexture.USAGE_SPECULAR);\r\n        this.addTexture(mat, this.shininessTexFilename, ModelTexture_1.ModelTexture.USAGE_SHININESS);\r\n        return mat;\r\n    }\r\n    addTexture(mat, texFilename, usage) {\r\n        if (!!texFilename) {\r\n            const tex = new ModelTexture_1.ModelTexture();\r\n            tex.usage = usage;\r\n            tex.fileName = texFilename;\r\n            if (mat.textures === undefined)\r\n                mat.textures = new Array();\r\n            mat.textures.push(tex);\r\n        }\r\n    }\r\n    reset() {\r\n        this.ambientColor = null;\r\n        this.diffuseColor = Utils_1.Color.WHITE;\r\n        this.specularColor = Utils_1.Color.WHITE;\r\n        this.opacity = 1;\r\n        this.shininess = 0;\r\n        this.alphaTexFilename = null;\r\n        this.ambientTexFilename = null;\r\n        this.diffuseTexFilename = null;\r\n        this.shininessTexFilename = null;\r\n        this.specularTexFilename = null;\r\n    }\r\n}\r\nexports.ObjMaterial = ObjMaterial;\r\nclass MtlLoader {\r\n    constructor() {\r\n        this.materials = new Array();\r\n    }\r\n    /** loads .mtl file */\r\n    load(fileName) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let line;\r\n            let tokens;\r\n            const currentMaterial = new ObjMaterial();\r\n            if (fileName.length === 0)\r\n                return;\r\n            const res = yield fetch(fileName);\r\n            if (!res.ok)\r\n                return;\r\n            const fileContent = yield res.text();\r\n            const lines = fileContent.split('\\n').map((s) => s.trim());\r\n            let i = 0;\r\n            try {\r\n                while ((line = lines[i]) !== undefined) {\r\n                    i++;\r\n                    if (line.length > 0 && line.charAt(0) === '\\t')\r\n                        line = line.substring(1).trim();\r\n                    tokens = line.split(' ');\r\n                    if (tokens[0].length === 0) {\r\n                        continue;\r\n                    }\r\n                    else if (tokens[0].charAt(0) === '#') {\r\n                        continue;\r\n                    }\r\n                    else {\r\n                        const key = tokens[0].toLowerCase();\r\n                        if (key === 'newmtl') {\r\n                            const mat = currentMaterial.build();\r\n                            this.materials.push(mat);\r\n                            if (tokens.length > 1) {\r\n                                currentMaterial.materialName = tokens[1];\r\n                                currentMaterial.materialName = currentMaterial.materialName.replace('.', '_');\r\n                            }\r\n                            else {\r\n                                currentMaterial.materialName = 'default';\r\n                            }\r\n                            currentMaterial.reset();\r\n                        }\r\n                        else if (key === 'ka') {\r\n                            currentMaterial.ambientColor = this.parseColor(tokens);\r\n                        }\r\n                        else if (key === 'kd') {\r\n                            currentMaterial.diffuseColor = this.parseColor(tokens);\r\n                        }\r\n                        else if (key === 'ks') {\r\n                            currentMaterial.specularColor = this.parseColor(tokens);\r\n                        }\r\n                        else if (key === 'tr' || key === 'd') {\r\n                            currentMaterial.opacity = parseFloat(tokens[1]);\r\n                        }\r\n                        else if (key === 'ns') {\r\n                            currentMaterial.shininess = parseFloat(tokens[1]);\r\n                        }\r\n                        else if (key === 'map_d') {\r\n                            currentMaterial.alphaTexFilename = tokens[1];\r\n                        }\r\n                        else if (key === 'map_ka') {\r\n                            currentMaterial.ambientTexFilename = tokens[1];\r\n                        }\r\n                        else if (key === 'map_kd') {\r\n                            currentMaterial.diffuseTexFilename = tokens[1];\r\n                        }\r\n                        else if (key === 'map_ks') {\r\n                            currentMaterial.specularTexFilename = tokens[1];\r\n                        }\r\n                        else if (key === 'map_ns') {\r\n                            currentMaterial.shininessTexFilename = tokens[1];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (ex) {\r\n                console.error(ex);\r\n            }\r\n            const mat = currentMaterial.build();\r\n            this.materials.push(mat);\r\n            return;\r\n        });\r\n    }\r\n    parseColor(tokens) {\r\n        const r = parseFloat(tokens[1]);\r\n        const g = parseFloat(tokens[2]);\r\n        const b = parseFloat(tokens[3]);\r\n        let a = 1;\r\n        if (tokens.length > 4) {\r\n            a = parseFloat(tokens[4]);\r\n        }\r\n        return new Utils_1.Color(r, g, b, a);\r\n    }\r\n    getMaterial(name) {\r\n        for (const m of this.materials)\r\n            if (m.id === name)\r\n                return m;\r\n        const mat = new ModelMaterial_1.ModelMaterial();\r\n        mat.id = name;\r\n        mat.diffuse = new Utils_1.Color(1, 1, 1, 1);\r\n        this.materials.push(mat);\r\n        return mat;\r\n    }\r\n}\r\nexports.MtlLoader = MtlLoader;\r\nclass ObjLoader {\r\n    constructor() {\r\n        this.verts = [];\r\n        this.norms = [];\r\n        this.uvs = [];\r\n        this.groups = [];\r\n    }\r\n    load(gl, fileName) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const data = yield this.loadModelData(fileName);\r\n            const model = new Model_1.Model(gl);\r\n            yield model.load(data);\r\n            return model;\r\n        });\r\n    }\r\n    loadModelData(fileName, flipV = false) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (ObjLoader.logWarning)\r\n                throw Error('Wavefront (OBJ) is not fully supported, consult the documentation for more information');\r\n            let line;\r\n            let tokens;\r\n            let firstChar;\r\n            const mtl = new MtlLoader();\r\n            let activeGroup = new Group('default');\r\n            this.groups.push(activeGroup);\r\n            const res = yield fetch(fileName);\r\n            if (!res.ok)\r\n                return;\r\n            const fileContent = yield res.text();\r\n            const lines = fileContent.split('\\n').map((s) => s.trim());\r\n            let i = 0;\r\n            let id = 0;\r\n            try {\r\n                while ((line = lines[i]) !== undefined) {\r\n                    i++;\r\n                    tokens = line.split(' ');\r\n                    if (tokens.length < 1)\r\n                        break;\r\n                    if (tokens[0].length === 0) {\r\n                        continue;\r\n                    }\r\n                    else if ((firstChar = tokens[0].toLowerCase().charAt(0)) === '#') {\r\n                        continue;\r\n                    }\r\n                    else if (firstChar === 'v') {\r\n                        if (tokens[0].length === 1) {\r\n                            this.verts.push(parseFloat(tokens[1]));\r\n                            this.verts.push(parseFloat(tokens[2]));\r\n                            this.verts.push(parseFloat(tokens[3]));\r\n                        }\r\n                        else if (tokens[0].charAt(1) === 'n') {\r\n                            this.norms.push(parseFloat(tokens[1]));\r\n                            this.norms.push(parseFloat(tokens[2]));\r\n                            this.norms.push(parseFloat(tokens[3]));\r\n                        }\r\n                        else if (tokens[0].charAt(1) === 't') {\r\n                            this.uvs.push(parseFloat(tokens[1]));\r\n                            this.uvs.push(flipV ? 1 - parseFloat(tokens[2]) : parseFloat(tokens[2]));\r\n                        }\r\n                    }\r\n                    else if (firstChar === 'f') {\r\n                        let parts;\r\n                        const faces = activeGroup.faces;\r\n                        for (let i = 1; i < tokens.length - 2; i--) {\r\n                            parts = tokens[1].split('/');\r\n                            faces.push(this.getIndex(parts[0], this.verts.length));\r\n                            if (parts.length > 2) {\r\n                                if (i === 1)\r\n                                    activeGroup.hasNorms = true;\r\n                                faces.push(this.getIndex(parts[2], this.norms.length));\r\n                            }\r\n                            if (parts.length > 1 && parts[1].length > 0) {\r\n                                if (i === 1)\r\n                                    activeGroup.hasUVs = true;\r\n                                faces.push(this.getIndex(parts[1], this.uvs.length));\r\n                            }\r\n                            parts = tokens[++i].split('/');\r\n                            faces.push(this.getIndex(parts[0], this.verts.length));\r\n                            if (parts.length > 2)\r\n                                faces.push(this.getIndex(parts[2], this.norms.length));\r\n                            if (parts.length > 1 && parts[1].length > 0)\r\n                                faces.push(this.getIndex(parts[1], this.uvs.length));\r\n                            parts = tokens[++i].split('/');\r\n                            faces.push(this.getIndex(parts[0], this.verts.length));\r\n                            if (parts.length > 2)\r\n                                faces.push(this.getIndex(parts[2], this.norms.length));\r\n                            if (parts.length > 1 && parts[1].length > 0)\r\n                                faces.push(this.getIndex(parts[1], this.uvs.length));\r\n                            activeGroup.numFaces++;\r\n                        }\r\n                    }\r\n                    else if (firstChar === 'o' || firstChar === 'g') {\r\n                        if (tokens.length > 1)\r\n                            activeGroup = this.setActiveGroup(tokens[1]);\r\n                        else\r\n                            activeGroup = this.setActiveGroup('default');\r\n                    }\r\n                    else if (tokens[0] === 'mtllib') {\r\n                        yield mtl.load(tokens[1]);\r\n                    }\r\n                    else if (tokens[0] === 'usemtl') {\r\n                        if (tokens.length === 1)\r\n                            activeGroup.materialName = 'default';\r\n                        else\r\n                            activeGroup.materialName = tokens[1].replace('.', '_');\r\n                    }\r\n                }\r\n            }\r\n            catch (ex) {\r\n                console.error(ex);\r\n            }\r\n            for (let i = 0; i < this.groups.length; i++) {\r\n                if (this.groups[i].numFaces < 1) {\r\n                    this.groups.splice(i, 1);\r\n                    i--;\r\n                }\r\n            }\r\n            if (this.groups.length < 1)\r\n                return null;\r\n            let numGroups = this.groups.length;\r\n            const data = new ModelData_1.ModelData();\r\n            for (let g = 0; g < numGroups; g++) {\r\n                const group = this.groups[g];\r\n                const faces = group.faces;\r\n                const numElements = faces.length;\r\n                const numFaces = group.numFaces;\r\n                const hasNorms = group.hasNorms;\r\n                const hasUVs = group.hasUVs;\r\n                const finalVerts = [];\r\n                for (let i = 0, vi = 0; i < numElements;) {\r\n                    let vertIndex = faces[i++] * 3;\r\n                    finalVerts[vi++] = this.verts[vertIndex++];\r\n                    finalVerts[vi++] = this.verts[vertIndex++];\r\n                    finalVerts[vi++] = this.verts[vertIndex];\r\n                    if (hasNorms) {\r\n                        let normIndex = faces[i++] * 3;\r\n                        finalVerts[vi++] = this.norms[normIndex++];\r\n                        finalVerts[vi++] = this.norms[normIndex++];\r\n                        finalVerts[vi++] = this.norms[normIndex];\r\n                    }\r\n                    if (hasUVs) {\r\n                        let uvIndex = faces[i++] * 2;\r\n                        finalVerts[vi++] = this.uvs[uvIndex++];\r\n                        finalVerts[vi++] = this.uvs[uvIndex];\r\n                    }\r\n                }\r\n                const numIndices = numFaces * 3 >= 32767 ? 0 : numFaces * 3;\r\n                const finalIndices = [];\r\n                if (numIndices > 0) {\r\n                    for (let i = 0; i < numIndices; i++) {\r\n                        finalIndices[i] = i;\r\n                    }\r\n                }\r\n                const attributes = new Array();\r\n                attributes.push(new VertexAttribute_1.VertexAttribute3D(VertexAttribute_1.Usage.Position, 3, GL20_1.GL20.GL_FLOAT, false, Shader_1.Shader.POSITION));\r\n                if (hasNorms)\r\n                    attributes.push(new VertexAttribute_1.VertexAttribute3D(VertexAttribute_1.Usage.Normal, 3, GL20_1.GL20.GL_FLOAT, false, Shader_1.Shader.NORMAL));\r\n                if (hasUVs)\r\n                    attributes.push(new VertexAttribute_1.VertexAttribute3D(VertexAttribute_1.Usage.TextureCoordinates, 2, GL20_1.GL20.GL_FLOAT, false, Shader_1.Shader.TEXCOORDS + '0'));\r\n                const stringId = (++id).toString();\r\n                const nodeId = 'default' === group.name ? 'node' + stringId : group.name;\r\n                const meshId = 'default' === group.name ? 'mesh' + stringId : group.name;\r\n                const partId = 'default' === group.name ? 'part' + stringId : group.name;\r\n                const node = new ModelNode_1.ModelNode();\r\n                node.id = nodeId;\r\n                node.meshId = meshId;\r\n                node.scale = new Vector3_1.Vector3(1, 1, 1);\r\n                node.translation = new Vector3_1.Vector3();\r\n                node.rotation = new Quaternion_1.Quaternion();\r\n                const pm = new ModelNodePart_1.ModelNodePart();\r\n                pm.meshPartId = partId;\r\n                pm.materialId = group.materialName;\r\n                node.parts = [pm];\r\n                const part = new ModelMeshPart_1.ModelMeshPart();\r\n                part.id = partId;\r\n                part.indices = finalIndices;\r\n                part.primitiveType = GL20_1.GL20.GL_TRIANGLES;\r\n                const mesh = new ModelMesh_1.ModelMesh();\r\n                mesh.id = meshId;\r\n                mesh.attributes = attributes;\r\n                mesh.vertices = finalVerts;\r\n                mesh.parts = [part];\r\n                data.nodes.push(node);\r\n                data.meshes.push(mesh);\r\n                const mm = mtl.getMaterial(group.materialName);\r\n                data.materials.push(mm);\r\n            }\r\n            if (this.verts.length > 0)\r\n                this.verts.length = 0;\r\n            if (this.norms.length > 0)\r\n                this.norms.length = 0;\r\n            if (this.uvs.length > 0)\r\n                this.uvs.length = 0;\r\n            if (this.groups.length > 0)\r\n                this.groups.length = 0;\r\n            return data;\r\n        });\r\n    }\r\n    setActiveGroup(name) {\r\n        for (const group of this.groups) {\r\n            if (group.name === name)\r\n                return group;\r\n        }\r\n        const group = new Group(name);\r\n        this.groups.push(group);\r\n        return group;\r\n    }\r\n    getIndex(index, size) {\r\n        if (!index || index.length === 0)\r\n            return 0;\r\n        const idx = parseInt(index);\r\n        if (idx < 0)\r\n            return size + idx;\r\n        else\r\n            return idx - 1;\r\n    }\r\n}\r\nexports.ObjLoader = ObjLoader;\r\nObjLoader.logWarning = false;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BinaryInput = exports.UBJsonReader = void 0;\r\nclass UBJsonReader {\r\n    constructor() {\r\n        this.oldFormat = true;\r\n    }\r\n    parse(buffer) {\r\n        const input = new BinaryInput(buffer);\r\n        let type = input.readByte();\r\n        return this.parseWithType(input, type);\r\n    }\r\n    parseWithType(input, type) {\r\n        if (type === '['.charCodeAt(0))\r\n            return this.parseArray(input);\r\n        else if (type === '{'.charCodeAt(0))\r\n            return this.parseObject(input);\r\n        else if (type === 'Z'.charCodeAt(0))\r\n            return null;\r\n        else if (type === 'T'.charCodeAt(0))\r\n            return true;\r\n        else if (type === 'F'.charCodeAt(0))\r\n            return false;\r\n        else if (type === 'B'.charCodeAt(0))\r\n            return this.readUChar(input);\r\n        else if (type === 'U'.charCodeAt(0))\r\n            return this.readUChar(input);\r\n        else if (type === 'i'.charCodeAt(0))\r\n            return this.oldFormat ? input.readShort() : input.readByte();\r\n        else if (type === 'I'.charCodeAt(0))\r\n            return this.oldFormat ? input.readInt(true) : input.readShort();\r\n        else if (type === 'l'.charCodeAt(0))\r\n            return input.readInt(true);\r\n        else if (type === 'L'.charCodeAt(0))\r\n            return input.readLong();\r\n        else if (type === 'd'.charCodeAt(0))\r\n            return input.readFloat();\r\n        else if (type === 'D'.charCodeAt(0))\r\n            return input.readFloat();\r\n        else if (type === 's'.charCodeAt(0) || type === 'S'.charCodeAt(0))\r\n            return this.parseString(input, type);\r\n        else if (type === 'a'.charCodeAt(0) || type === 'A'.charCodeAt(0))\r\n            return this.parseData(input, type);\r\n        else if (type === 'C'.charCodeAt(0))\r\n            return input.readString();\r\n        else\r\n            throw new Error('Unrecognized data type: ' + type);\r\n    }\r\n    parseObject(input) {\r\n        const result = {};\r\n        let type = input.readByte();\r\n        let valueType = 0;\r\n        if (type === '$'.charCodeAt(0)) {\r\n            valueType = input.readByte();\r\n            type = input.readByte();\r\n        }\r\n        let size = -1;\r\n        if (type === '#'.charCodeAt(0)) {\r\n            size = this.parseSize(input, input.readByte(), false, -1);\r\n            if (size < 0)\r\n                throw new Error('Unrecognized data type: ' + type);\r\n            if (size === 0)\r\n                return result;\r\n            type = input.readByte();\r\n        }\r\n        let c = 0;\r\n        while (type !== '}'.charCodeAt(0)) {\r\n            const key = this.parseString(input, type, true);\r\n            const child = this.parseWithType(input, valueType === 0 ? input.readByte() : valueType);\r\n            result[key] = child;\r\n            if (size > 0 && ++c >= size)\r\n                break;\r\n            type = input.readByte();\r\n        }\r\n        return result;\r\n    }\r\n    parseSize(input, type, useIntOnError, defaultValue) {\r\n        if (type === 'i'.charCodeAt(0))\r\n            return this.readUChar(input);\r\n        if (type === 'I'.charCodeAt(0))\r\n            return this.readUShort(input);\r\n        if (type === 'l'.charCodeAt(0))\r\n            return this.readUInt(input);\r\n        if (type === 'L'.charCodeAt(0))\r\n            return input.readLong();\r\n        if (useIntOnError) {\r\n            let result = (type & 0xff) << 24;\r\n            result |= (input.readByte() & 0xff) << 16;\r\n            result |= (input.readByte() & 0xff) << 8;\r\n            result |= input.readByte() & 0xff;\r\n            return result;\r\n        }\r\n        return defaultValue;\r\n    }\r\n    parseArray(input) {\r\n        const result = [];\r\n        let type = input.readByte();\r\n        let valueType = 0;\r\n        if (type === '$'.charCodeAt(0)) {\r\n            valueType = input.readByte();\r\n            type = input.readByte();\r\n        }\r\n        let size = -1;\r\n        if (type === '#'.charCodeAt(0)) {\r\n            size = this.parseSize(input, input.readByte(), false, -1);\r\n            if (size < 0)\r\n                throw new Error('Unrecognized data type ' + type);\r\n            if (size === 0)\r\n                return result;\r\n            type = valueType === 0 ? input.readByte() : valueType;\r\n        }\r\n        let c = 0;\r\n        while (type !== ']'.charCodeAt(0)) {\r\n            const val = this.parseWithType(input, type);\r\n            result.push(val);\r\n            if (size > 0 && ++c >= size)\r\n                break;\r\n            type = valueType === 0 ? input.readByte() : valueType;\r\n        }\r\n        return result;\r\n    }\r\n    parseData(input, blockType) {\r\n        const dataType = input.readByte();\r\n        const size = blockType === 'A'.charCodeAt(0) ? this.readUInt(input) : this.readUChar(input);\r\n        const result = [];\r\n        for (let i = 0; i < size; i++) {\r\n            const val = this.parseWithType(input, dataType);\r\n            result.push(val);\r\n        }\r\n        return result;\r\n    }\r\n    readUChar(input) {\r\n        return input.readByte() & 0xff;\r\n    }\r\n    parseString(input, type, sOptional = false) {\r\n        let size = -1;\r\n        if (type === 'S'.charCodeAt(0)) {\r\n            size = this.parseSize(input, input.readByte(), true, -1);\r\n        }\r\n        else if (type === 's'.charCodeAt(0))\r\n            size = this.readUChar(input);\r\n        else if (sOptional)\r\n            size = this.parseSize(input, type, false, -1);\r\n        if (size < 0)\r\n            throw new Error(`Unrecognized data type: ${type}, string expected`);\r\n        return size > 0 ? this.readString(input, size) : '';\r\n    }\r\n    readUShort(input) {\r\n        return input.readShort() & 0xffff;\r\n    }\r\n    readUInt(input) {\r\n        return input.readInt(true) & 0xffffffff;\r\n    }\r\n    readString(input, size) {\r\n        return input.readStringWithSize(size);\r\n    }\r\n}\r\nexports.UBJsonReader = UBJsonReader;\r\nclass BinaryInput {\r\n    constructor(data, strings = new Array(), index = 0, buffer = new DataView(data)) {\r\n        this.strings = strings;\r\n        this.index = index;\r\n        this.buffer = buffer;\r\n    }\r\n    readByte() {\r\n        return this.buffer.getInt8(this.index++);\r\n    }\r\n    readUnsignedByte() {\r\n        return this.buffer.getUint8(this.index++);\r\n    }\r\n    readShort() {\r\n        let value = this.buffer.getInt16(this.index);\r\n        this.index += 2;\r\n        return value;\r\n    }\r\n    readInt32() {\r\n        let value = this.buffer.getInt32(this.index);\r\n        this.index += 4;\r\n        return value;\r\n    }\r\n    readLong() {\r\n        let value = this.buffer.getInt32(this.index);\r\n        this.index += 8;\r\n        return value;\r\n    }\r\n    readInt(optimizePositive) {\r\n        const ch1 = this.readUnsignedByte();\r\n        const ch2 = this.readUnsignedByte();\r\n        const ch3 = this.readUnsignedByte();\r\n        const ch4 = this.readUnsignedByte();\r\n        const result = (ch1 << 24) + (ch2 << 16) + (ch3 << 8) + (ch4 << 0);\r\n        return optimizePositive ? result : (result >>> 1) ^ -(result & 1);\r\n    }\r\n    readStringRef() {\r\n        let index = this.readInt(true);\r\n        return index === 0 ? null : this.strings[index - 1];\r\n    }\r\n    readStringWithSize(size) {\r\n        switch (size) {\r\n            case 0:\r\n                return null;\r\n            case 1:\r\n                return '';\r\n        }\r\n        let chars = '';\r\n        for (let i = 0; i < size;) {\r\n            let b = this.readUnsignedByte();\r\n            switch (b >> 4) {\r\n                case 12:\r\n                case 13:\r\n                    chars += String.fromCharCode(((b & 0x1f) << 6) | (this.readUnsignedByte() & 0x3f));\r\n                    i += 2;\r\n                    break;\r\n                case 14:\r\n                    chars += String.fromCharCode(((b & 0x0f) << 12) | ((this.readUnsignedByte() & 0x3f) << 6) | (this.readUnsignedByte() & 0x3f));\r\n                    i += 3;\r\n                    break;\r\n                default:\r\n                    chars += String.fromCharCode(b);\r\n                    i++;\r\n            }\r\n        }\r\n        return chars;\r\n    }\r\n    readString() {\r\n        let byteCount = this.readInt(true);\r\n        switch (byteCount) {\r\n            case 0:\r\n                return null;\r\n            case 1:\r\n                return '';\r\n        }\r\n        byteCount--;\r\n        let chars = '';\r\n        for (let i = 0; i < byteCount;) {\r\n            let b = this.readUnsignedByte();\r\n            switch (b >> 4) {\r\n                case 12:\r\n                case 13:\r\n                    chars += String.fromCharCode(((b & 0x1f) << 6) | (this.readUnsignedByte() & 0x3f));\r\n                    i += 2;\r\n                    break;\r\n                case 14:\r\n                    chars += String.fromCharCode(((b & 0x0f) << 12) | ((this.readUnsignedByte() & 0x3f) << 6) | (this.readUnsignedByte() & 0x3f));\r\n                    i += 3;\r\n                    break;\r\n                default:\r\n                    chars += String.fromCharCode(b);\r\n                    i++;\r\n            }\r\n        }\r\n        return chars;\r\n    }\r\n    readFloat() {\r\n        let value = this.buffer.getFloat32(this.index);\r\n        this.index += 4;\r\n        return value;\r\n    }\r\n    readBoolean() {\r\n        return this.readByte() !== 0;\r\n    }\r\n}\r\nexports.BinaryInput = BinaryInput;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./G3dModelLoader\"), exports);\r\n__exportStar(require(\"./ObjLoader\"), exports);\r\n__exportStar(require(\"./UBJsonReader\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Frustum = void 0;\r\nconst Matrix4_1 = require(\"../../Matrix4\");\r\nconst Utils_1 = require(\"../../Utils\");\r\nconst Vector3_1 = require(\"../../Vector3\");\r\nconst Plane_1 = require(\"./Plane\");\r\nclass Frustum {\r\n    constructor() {\r\n        this.planes = new Array(6);\r\n        this.planePoints = [\r\n            new Vector3_1.Vector3(),\r\n            new Vector3_1.Vector3(),\r\n            new Vector3_1.Vector3(),\r\n            new Vector3_1.Vector3(),\r\n            new Vector3_1.Vector3(),\r\n            new Vector3_1.Vector3(),\r\n            new Vector3_1.Vector3(),\r\n            new Vector3_1.Vector3()\r\n        ];\r\n        this.planePointsArray = new Array(8 * 3);\r\n        for (let i = 0; i < 6; i++) {\r\n            this.planes[i] = new Plane_1.Plane(new Vector3_1.Vector3(), 0);\r\n        }\r\n    }\r\n    update(inverseProjectionView) {\r\n        Utils_1.Utils.arrayCopy(Frustum.clipSpacePlanePointsArray, 0, this.planePointsArray, 0, Frustum.clipSpacePlanePointsArray.length);\r\n        Matrix4_1.Matrix4.prj(inverseProjectionView, this.planePointsArray, 0, 8, 3);\r\n        for (let i = 0, j = 0; i < 8; i++) {\r\n            const v = this.planePoints[i];\r\n            v.x = this.planePointsArray[j++];\r\n            v.y = this.planePointsArray[j++];\r\n            v.z = this.planePointsArray[j++];\r\n        }\r\n        this.planes[0].set(this.planePoints[1], this.planePoints[0], this.planePoints[2]);\r\n        this.planes[1].set(this.planePoints[4], this.planePoints[5], this.planePoints[7]);\r\n        this.planes[2].set(this.planePoints[0], this.planePoints[4], this.planePoints[3]);\r\n        this.planes[3].set(this.planePoints[5], this.planePoints[1], this.planePoints[6]);\r\n        this.planes[4].set(this.planePoints[2], this.planePoints[3], this.planePoints[6]);\r\n        this.planes[5].set(this.planePoints[4], this.planePoints[0], this.planePoints[1]);\r\n    }\r\n    pointInFrustum(point) {\r\n        for (let i = 0; i < this.planes.length; i++) {\r\n            const result = this.planes[i].testPoint(point.x, point.y, point.z);\r\n            if (result === Plane_1.PlaneSide.Back)\r\n                return false;\r\n        }\r\n        return true;\r\n    }\r\n    sphereInFrustum(center, radius) {\r\n        for (let i = 0; i < 6; i++)\r\n            if (this.planes[i].normal.x * center.x + this.planes[i].normal.y * center.y + this.planes[i].normal.z * center.z <\r\n                -radius - this.planes[i].d)\r\n                return false;\r\n        return true;\r\n    }\r\n    sphereInFrustumWithoutNearFar(center, radius) {\r\n        for (let i = 2; i < 6; i++)\r\n            if (this.planes[i].normal.x * center.x + this.planes[i].normal.y * center.y + this.planes[i].normal.z * center.z <\r\n                -radius - this.planes[i].d)\r\n                return false;\r\n        return true;\r\n    }\r\n    boundsInFrustrum(center, dimensions) {\r\n        for (let i = 0, len2 = this.planes.length; i < len2; i++) {\r\n            if (this.planes[i].testPoint(center.x + dimensions.x / 2, center.y + dimensions.y / 2, center.z + dimensions.z / 2) !== Plane_1.PlaneSide.Back)\r\n                continue;\r\n            if (this.planes[i].testPoint(center.x + dimensions.x / 2, center.y + dimensions.y / 2, center.z - dimensions.z / 2) !== Plane_1.PlaneSide.Back)\r\n                continue;\r\n            if (this.planes[i].testPoint(center.x + dimensions.x / 2, center.y - dimensions.y / 2, center.z + dimensions.z / 2) !== Plane_1.PlaneSide.Back)\r\n                continue;\r\n            if (this.planes[i].testPoint(center.x + dimensions.x / 2, center.y - dimensions.y / 2, center.z - dimensions.z / 2) !== Plane_1.PlaneSide.Back)\r\n                continue;\r\n            if (this.planes[i].testPoint(center.x - dimensions.x / 2, center.y + dimensions.y / 2, center.z + dimensions.z / 2) !== Plane_1.PlaneSide.Back)\r\n                continue;\r\n            if (this.planes[i].testPoint(center.x - dimensions.x / 2, center.y + dimensions.y / 2, center.z - dimensions.z / 2) !== Plane_1.PlaneSide.Back)\r\n                continue;\r\n            if (this.planes[i].testPoint(center.x - dimensions.x / 2, center.y - dimensions.y / 2, center.z + dimensions.z / 2) !== Plane_1.PlaneSide.Back)\r\n                continue;\r\n            if (this.planes[i].testPoint(center.x - dimensions.x / 2, center.y - dimensions.y / 2, center.z - dimensions.z / 2) !== Plane_1.PlaneSide.Back)\r\n                continue;\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.Frustum = Frustum;\r\nFrustum.clipSpacePlanePoints = [\r\n    new Vector3_1.Vector3(-1, -1, -1),\r\n    new Vector3_1.Vector3(1, -1, -1),\r\n    new Vector3_1.Vector3(1, 1, -1),\r\n    new Vector3_1.Vector3(-1, 1, -1),\r\n    new Vector3_1.Vector3(-1, -1, 1),\r\n    new Vector3_1.Vector3(1, -1, 1),\r\n    new Vector3_1.Vector3(1, 1, 1),\r\n    new Vector3_1.Vector3(-1, 1, 1)\r\n];\r\nFrustum.clipSpacePlanePointsArray = new Array(8 * 3);\r\n(() => {\r\n    let j = 0;\r\n    for (const v of Frustum.clipSpacePlanePoints) {\r\n        Frustum.clipSpacePlanePointsArray[j++] = v.x;\r\n        Frustum.clipSpacePlanePointsArray[j++] = v.y;\r\n        Frustum.clipSpacePlanePointsArray[j++] = v.z;\r\n    }\r\n})();\r\nFrustum.tmpV = new Vector3_1.Vector3();\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Plane = exports.PlaneSide = void 0;\r\nconst Vector3_1 = require(\"../../Vector3\");\r\nvar PlaneSide;\r\n(function (PlaneSide) {\r\n    PlaneSide[PlaneSide[\"OnPlane\"] = 0] = \"OnPlane\";\r\n    PlaneSide[PlaneSide[\"Back\"] = 1] = \"Back\";\r\n    PlaneSide[PlaneSide[\"Front\"] = 2] = \"Front\";\r\n})(PlaneSide = exports.PlaneSide || (exports.PlaneSide = {}));\r\nclass Plane {\r\n    constructor(normal = null, d = 0) {\r\n        this.normal = new Vector3_1.Vector3();\r\n        this.d = 0;\r\n        if (!!normal) {\r\n            this.normal.setFrom(normal).normalize();\r\n            this.d = d;\r\n        }\r\n    }\r\n    set(point1, point2, point3) {\r\n        this.normal\r\n            .set(point1.x, point1.y, point1.z)\r\n            .sub(point2)\r\n            .cross(new Vector3_1.Vector3(point2.x - point3.x, point2.y - point3.y, point2.z - point3.z))\r\n            .normalize();\r\n        this.d = -point1.dot(this.normal);\r\n    }\r\n    setByValue(pointX, pointY, pointZ, norX, norY, norZ) {\r\n        this.normal.set(norX, norY, norZ);\r\n        this.d = -(pointX * norX + pointY * norY + pointZ * norZ);\r\n    }\r\n    distance(point) {\r\n        return this.normal.dot(point) + this.d;\r\n    }\r\n    testPoint(x, y, z) {\r\n        const dist = this.normal.dotWithValue(x, y, z) + this.d;\r\n        if (dist === 0)\r\n            return PlaneSide.OnPlane;\r\n        else if (dist < 0)\r\n            return PlaneSide.Back;\r\n        else\r\n            return PlaneSide.Front;\r\n    }\r\n    isFrontFacing(direction) {\r\n        const dot = this.normal.dot(direction);\r\n        return dot <= 0;\r\n    }\r\n    getNormal() {\r\n        return this.normal;\r\n    }\r\n    getD() {\r\n        return this.d;\r\n    }\r\n    setFromPlane(plane) {\r\n        this.normal.setFrom(plane.normal);\r\n        this.d = plane.d;\r\n    }\r\n    toString() {\r\n        return this.normal.toString() + ', ' + this.d;\r\n    }\r\n}\r\nexports.Plane = Plane;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./Fustrum\"), exports);\r\n__exportStar(require(\"./Plane\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Animation3D = void 0;\r\nclass Animation3D {\r\n    constructor() {\r\n        this.duration = 0;\r\n        this.nodeAnimations = [];\r\n    }\r\n}\r\nexports.Animation3D = Animation3D;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MeshPart = void 0;\r\nconst BoundingBox_1 = require(\"../../BoundingBox\");\r\nconst Vector3_1 = require(\"../../Vector3\");\r\nclass MeshPart {\r\n    constructor(other = null) {\r\n        this.id = '';\r\n        this.primitiveType = 0;\r\n        this.offset = 0;\r\n        this.size = 0;\r\n        this.mesh = null;\r\n        this.center = new Vector3_1.Vector3();\r\n        this.halfExtents = new Vector3_1.Vector3();\r\n        this.radius = -1;\r\n        this.bounds = new BoundingBox_1.BoundingBox();\r\n        if (!!other) {\r\n            this.setByMeshPart(other);\r\n        }\r\n    }\r\n    dispose() { }\r\n    setByMeshPart(other) {\r\n        this.id = other.id;\r\n        this.mesh = other.mesh;\r\n        this.offset = other.offset;\r\n        this.size = other.size;\r\n        this.primitiveType = other.primitiveType;\r\n        this.center.set(other.center.x, other.center.y, other.center.z);\r\n        this.halfExtents.set(other.halfExtents.x, other.halfExtents.y, other.halfExtents.z);\r\n        this.radius = other.radius;\r\n        return this;\r\n    }\r\n    set(id, mesh, offset, size, type) {\r\n        this.id = id;\r\n        this.mesh = mesh;\r\n        this.offset = offset;\r\n        this.size = size;\r\n        this.primitiveType = type;\r\n        this.center.set(0, 0, 0);\r\n        this.halfExtents.set(0, 0, 0);\r\n        this.radius = -1;\r\n        return this;\r\n    }\r\n    update() {\r\n        this.mesh.extendBoundingBox(this.bounds, this.offset, this.size, null);\r\n        this.bounds.getCenter(this.center);\r\n        this.bounds.getDimensions(this.halfExtents).scale(0.5);\r\n        this.radius = this.halfExtents.length();\r\n    }\r\n    equals(other) {\r\n        return (other === this ||\r\n            (!!other &&\r\n                other.mesh === this.mesh &&\r\n                other.primitiveType === this.primitiveType &&\r\n                other.offset === this.offset &&\r\n                other.size === this.size));\r\n    }\r\n    render(shader, autoBind) {\r\n        this.mesh.render(shader, this.primitiveType, this.offset, this.size, autoBind);\r\n    }\r\n}\r\nexports.MeshPart = MeshPart;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Model = void 0;\r\nconst Matrix4_1 = require(\"../../Matrix4\");\r\nconst Quaternion_1 = require(\"../../Quaternion\");\r\nconst Utils_1 = require(\"../../Utils\");\r\nconst Vector3_1 = require(\"../../Vector3\");\r\nconst BlendingAttribute_1 = require(\"../attributes/BlendingAttribute\");\r\nconst ColorAttribute_1 = require(\"../attributes/ColorAttribute\");\r\nconst FloatAttribute_1 = require(\"../attributes/FloatAttribute\");\r\nconst TextureAttribute_1 = require(\"../attributes/TextureAttribute\");\r\nconst VertexAttributes_1 = require(\"../attributes/VertexAttributes\");\r\nconst GL20_1 = require(\"../GL20\");\r\nconst Material_1 = require(\"../Material\");\r\nconst Mesh_1 = require(\"../Mesh\");\r\nconst TextureProvider_1 = require(\"../utils/TextureProvider\");\r\nconst Animation_1 = require(\"./Animation\");\r\nconst ModelTexture_1 = require(\"./data/ModelTexture\");\r\nconst MeshPart_1 = require(\"./MeshPart\");\r\nconst Node_1 = require(\"./Node\");\r\nconst NodeAnimation_1 = require(\"./NodeAnimation\");\r\nconst NodeKeyframe_1 = require(\"./NodeKeyframe\");\r\nconst NodePart_1 = require(\"./NodePart\");\r\nclass Model {\r\n    constructor(gl) {\r\n        this.gl = gl;\r\n        this.materials = [];\r\n        this.nodes = [];\r\n        this.animations = [];\r\n        this.meshes = [];\r\n        this.meshParts = [];\r\n        this.disposables = [];\r\n        this.nodePartBones = new Map();\r\n    }\r\n    load(modelData, textureProvider = new TextureProvider_1.FileTextureProvider()) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.loadMeshes(modelData.meshes);\r\n            yield this.loadMaterials(modelData.materials, textureProvider);\r\n            this.loadNodes(modelData.nodes);\r\n            this.loadAnimations(modelData.animations);\r\n            this.calculateTransforms();\r\n        });\r\n    }\r\n    loadAnimations(modelAnimations) {\r\n        for (const anim of modelAnimations) {\r\n            const animation = new Animation_1.Animation3D();\r\n            animation.id = anim.id;\r\n            for (const nanim of anim.nodeAnimations) {\r\n                const node = this.getNode(nanim.nodeId);\r\n                if (!node)\r\n                    continue;\r\n                const nodeAnim = new NodeAnimation_1.NodeAnimation();\r\n                nodeAnim.node = node;\r\n                if (!!nanim.translation) {\r\n                    nodeAnim.translation = new Array();\r\n                    for (const kf of nanim.translation) {\r\n                        if (kf.keytime > animation.duration)\r\n                            animation.duration = kf.keytime;\r\n                        nodeAnim.translation.push(new NodeKeyframe_1.NodeKeyframe(kf.keytime, new Vector3_1.Vector3().setFrom(!kf.value ? node.translation : kf.value)));\r\n                    }\r\n                }\r\n                if (!!nanim.rotation) {\r\n                    nodeAnim.rotation = new Array();\r\n                    for (const kf of nanim.rotation) {\r\n                        if (kf.keytime > animation.duration)\r\n                            animation.duration = kf.keytime;\r\n                        nodeAnim.rotation.push(new NodeKeyframe_1.NodeKeyframe(kf.keytime, new Quaternion_1.Quaternion().setFrom(!kf.value ? node.rotation : kf.value)));\r\n                    }\r\n                }\r\n                if (!!nanim.scaling) {\r\n                    nodeAnim.scaling = new Array();\r\n                    for (const kf of nanim.scaling) {\r\n                        if (kf.keytime > animation.duration)\r\n                            animation.duration = kf.keytime;\r\n                        nodeAnim.scaling.push(new NodeKeyframe_1.NodeKeyframe(kf.keytime, new Vector3_1.Vector3().setFrom(!kf.value ? node.scale : kf.value)));\r\n                    }\r\n                }\r\n                if ((!!nodeAnim.translation && nodeAnim.translation.length > 0) ||\r\n                    (!!nodeAnim.rotation && nodeAnim.rotation.length > 0) ||\r\n                    (!!nodeAnim.scaling && nodeAnim.scaling.length > 0))\r\n                    animation.nodeAnimations.push(nodeAnim);\r\n            }\r\n            if (animation.nodeAnimations.length > 0)\r\n                this.animations.push(animation);\r\n        }\r\n    }\r\n    loadNodes(modelNodes) {\r\n        this.nodePartBones.clear();\r\n        for (const node of modelNodes) {\r\n            this.nodes.push(this.loadNode(node));\r\n        }\r\n        for (const [key, value] of this.nodePartBones) {\r\n            if (!key.invBoneBindTransforms)\r\n                key.invBoneBindTransforms = new Utils_1.ArrayMap();\r\n            key.invBoneBindTransforms.clear();\r\n            for (let i = 0; i < value.size; i++) {\r\n                const k = value.keys[i];\r\n                const v = value.values[i];\r\n                key.invBoneBindTransforms.set(this.getNode(k), new Matrix4_1.Matrix4().set(v.values).invert());\r\n            }\r\n        }\r\n    }\r\n    loadNode(modelNode) {\r\n        const node = new Node_1.Node();\r\n        node.id = modelNode.id;\r\n        if (!!modelNode.translation)\r\n            node.translation.set(modelNode.translation.x, modelNode.translation.y, modelNode.translation.z);\r\n        if (!!modelNode.rotation)\r\n            node.rotation.set(modelNode.rotation.x, modelNode.rotation.y, modelNode.rotation.z, modelNode.rotation.w);\r\n        if (!!modelNode.scale)\r\n            node.scale.set(modelNode.scale.x, modelNode.scale.y, modelNode.scale.z);\r\n        if (!!modelNode.parts) {\r\n            for (const modelNodePart of modelNode.parts) {\r\n                let meshPart = null;\r\n                let meshMaterial = null;\r\n                if (!!modelNodePart.meshPartId) {\r\n                    for (const part of this.meshParts) {\r\n                        if (modelNodePart.meshPartId === part.id) {\r\n                            meshPart = part;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if (!!modelNodePart.materialId) {\r\n                    for (const material of this.materials) {\r\n                        if (modelNodePart.materialId === material.id) {\r\n                            meshMaterial = material;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if (!meshPart || !meshMaterial)\r\n                    throw new Error('Invalid node: ' + node.id);\r\n                const nodePart = new NodePart_1.NodePart();\r\n                nodePart.meshPart = meshPart;\r\n                nodePart.material = meshMaterial;\r\n                node.parts.push(nodePart);\r\n                if (!!modelNodePart.bones)\r\n                    this.nodePartBones.set(nodePart, modelNodePart.bones);\r\n            }\r\n        }\r\n        if (!!modelNode.children) {\r\n            for (const child of modelNode.children) {\r\n                node.addChild(this.loadNode(child));\r\n            }\r\n        }\r\n        return node;\r\n    }\r\n    loadMeshes(meshes) {\r\n        for (const mesh of meshes) {\r\n            this.convertMesh(mesh);\r\n        }\r\n    }\r\n    convertMesh(modelMesh) {\r\n        let numIndices = 0;\r\n        for (const part of modelMesh.parts) {\r\n            numIndices += part.indices.length;\r\n        }\r\n        const hasIndices = numIndices > 0;\r\n        const attributes = new VertexAttributes_1.VertexAttributes(modelMesh.attributes);\r\n        const numVertices = modelMesh.vertices.length / (attributes.vertexSize / 4);\r\n        const mesh = new Mesh_1.Mesh3D(this.gl, true, true, numVertices, numIndices, attributes);\r\n        this.meshes.push(mesh);\r\n        this.disposables.push(mesh);\r\n        mesh.vertices.updateVertices(0, modelMesh.vertices, 0, modelMesh.vertices.length);\r\n        let offset = 0;\r\n        let indicesOffset = 0;\r\n        for (const part of modelMesh.parts) {\r\n            const meshPart = new MeshPart_1.MeshPart();\r\n            meshPart.id = part.id;\r\n            meshPart.primitiveType = part.primitiveType;\r\n            meshPart.offset = offset;\r\n            meshPart.size = hasIndices ? part.indices.length : numVertices;\r\n            meshPart.mesh = mesh;\r\n            if (hasIndices) {\r\n                mesh.indices.updateIndices(indicesOffset, part.indices, 0, part.indices.length);\r\n                indicesOffset += part.indices.length;\r\n            }\r\n            offset += meshPart.size;\r\n            this.meshParts.push(meshPart);\r\n        }\r\n        for (const part of this.meshParts)\r\n            part.update();\r\n    }\r\n    loadMaterials(modelMaterials, textureProvider) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            for (const mtl of modelMaterials) {\r\n                this.materials.push(yield this.convertMaterial(mtl, textureProvider));\r\n            }\r\n        });\r\n    }\r\n    convertMaterial(mtl, textureProvider) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const result = new Material_1.Material();\r\n            result.id = mtl.id;\r\n            if (mtl.ambient !== undefined)\r\n                result.set(new ColorAttribute_1.ColorAttribute3D(ColorAttribute_1.ColorAttribute3D.Ambient, mtl.ambient));\r\n            if (mtl.diffuse !== undefined)\r\n                result.set(new ColorAttribute_1.ColorAttribute3D(ColorAttribute_1.ColorAttribute3D.Diffuse, mtl.diffuse));\r\n            if (mtl.specular !== undefined)\r\n                result.set(new ColorAttribute_1.ColorAttribute3D(ColorAttribute_1.ColorAttribute3D.Specular, mtl.specular));\r\n            if (mtl.emissive !== undefined)\r\n                result.set(new ColorAttribute_1.ColorAttribute3D(ColorAttribute_1.ColorAttribute3D.Emissive, mtl.emissive));\r\n            if (mtl.reflection !== undefined)\r\n                result.set(new ColorAttribute_1.ColorAttribute3D(ColorAttribute_1.ColorAttribute3D.Reflection, mtl.reflection));\r\n            if (mtl.shininess > 0)\r\n                result.set(new FloatAttribute_1.FloatAttribute(FloatAttribute_1.FloatAttribute.Shininess, mtl.shininess));\r\n            if (mtl.opacity !== 1)\r\n                result.set(new BlendingAttribute_1.BlendingAttribute(GL20_1.GL20.GL_SRC_ALPHA, GL20_1.GL20.GL_ONE_MINUS_SRC_ALPHA, true, mtl.opacity));\r\n            const textures = new Map();\r\n            if (mtl.textures !== undefined) {\r\n                for (const tex of mtl.textures) {\r\n                    let texture;\r\n                    if (textures.has(tex.fileName)) {\r\n                        texture = textures.get(tex.fileName);\r\n                    }\r\n                    else {\r\n                        texture = yield textureProvider.load(this.gl, tex.fileName);\r\n                        textures.set(tex.fileName, texture);\r\n                        this.disposables.push(texture);\r\n                    }\r\n                    //  const descriptor = new TextureDescriptor(texture);\r\n                    //  descriptor.minFilter = texture.getMinFilter();\r\n                    //  descriptor.magFilter = texture.getMagFilter();\r\n                    //  descriptor.uWrap = texture.getUWrap();\r\n                    //  descriptor.vWrap = texture.getVWrap();\r\n                    const offsetU = !tex.uvTranslation ? 0 : tex.uvTranslation.x;\r\n                    const offsetV = !tex.uvTranslation ? 0 : tex.uvTranslation.y;\r\n                    const scaleU = !tex.uvScaling ? 1 : tex.uvScaling.x;\r\n                    const scaleV = !tex.uvScaling ? 1 : tex.uvScaling.y;\r\n                    let ta;\r\n                    switch (tex.usage) {\r\n                        case ModelTexture_1.ModelTexture.USAGE_DIFFUSE:\r\n                            ta = new TextureAttribute_1.TextureAttribute(TextureAttribute_1.TextureAttribute.Diffuse, offsetU, offsetV, scaleU, scaleV);\r\n                            break;\r\n                        case ModelTexture_1.ModelTexture.USAGE_SPECULAR:\r\n                            ta = new TextureAttribute_1.TextureAttribute(TextureAttribute_1.TextureAttribute.Specular, offsetU, offsetV, scaleU, scaleV);\r\n                            break;\r\n                        case ModelTexture_1.ModelTexture.USAGE_BUMP:\r\n                            ta = new TextureAttribute_1.TextureAttribute(TextureAttribute_1.TextureAttribute.Bump, offsetU, offsetV, scaleU, scaleV);\r\n                            break;\r\n                        case ModelTexture_1.ModelTexture.USAGE_NORMAL:\r\n                            ta = new TextureAttribute_1.TextureAttribute(TextureAttribute_1.TextureAttribute.Normal, offsetU, offsetV, scaleU, scaleV);\r\n                            break;\r\n                        case ModelTexture_1.ModelTexture.USAGE_AMBIENT:\r\n                            ta = new TextureAttribute_1.TextureAttribute(TextureAttribute_1.TextureAttribute.Ambient, offsetU, offsetV, scaleU, scaleV);\r\n                            break;\r\n                        case ModelTexture_1.ModelTexture.USAGE_EMISSIVE:\r\n                            ta = new TextureAttribute_1.TextureAttribute(TextureAttribute_1.TextureAttribute.Emissive, offsetU, offsetV, scaleU, scaleV);\r\n                            break;\r\n                        case ModelTexture_1.ModelTexture.USAGE_REFLECTION:\r\n                            ta = new TextureAttribute_1.TextureAttribute(TextureAttribute_1.TextureAttribute.Reflection, offsetU, offsetV, scaleU, scaleV);\r\n                            break;\r\n                    }\r\n                    ta.setTexture(texture);\r\n                    ta.setOffset(offsetU, offsetV);\r\n                    ta.setScale(scaleU, scaleV);\r\n                    result.set(ta);\r\n                }\r\n            }\r\n            return result;\r\n        });\r\n    }\r\n    manageDisposable(disposable) {\r\n        if (this.disposables.indexOf(disposable) < 0)\r\n            this.disposables.push(disposable);\r\n    }\r\n    getManagedDisposables() {\r\n        return this.disposables;\r\n    }\r\n    dispose() {\r\n        for (const disposable of this.disposables) {\r\n            disposable.dispose();\r\n        }\r\n    }\r\n    calculateTransforms() {\r\n        const n = this.nodes.length;\r\n        for (let i = 0; i < n; i++) {\r\n            this.nodes[i].calculateTransforms(true);\r\n        }\r\n        for (let i = 0; i < n; i++) {\r\n            this.nodes[i].calculateBoneTransforms(true);\r\n        }\r\n    }\r\n    calculateBoundingBox(out) {\r\n        out.inf();\r\n        return this.extendBoundingBox(out);\r\n    }\r\n    extendBoundingBox(out) {\r\n        const n = this.nodes.length;\r\n        for (let i = 0; i < n; i++)\r\n            this.nodes[i].extendBoundingBox(out);\r\n        return out;\r\n    }\r\n    getAnimation(id, ignoreCase = false) {\r\n        const n = this.animations.length;\r\n        if (ignoreCase) {\r\n            for (let i = 0; i < n; i++)\r\n                if (this.animations[i].id.toUpperCase() === id.toUpperCase())\r\n                    return this.animations[i];\r\n        }\r\n        else {\r\n            for (let i = 0; i < n; i++)\r\n                if (this.animations[i].id === id)\r\n                    return this.animations[i];\r\n        }\r\n        return null;\r\n    }\r\n    getMaterial(id, ignoreCase = true) {\r\n        const n = this.materials.length;\r\n        let material;\r\n        if (ignoreCase) {\r\n            for (let i = 0; i < n; i++)\r\n                if ((material = this.materials[i]).id.toUpperCase() === id.toUpperCase())\r\n                    return material;\r\n        }\r\n        else {\r\n            for (let i = 0; i < n; i++)\r\n                if ((material = this.materials[i]).id === id)\r\n                    return material;\r\n        }\r\n        return null;\r\n    }\r\n    getNode(id, recursive = true, ignoreCase = false) {\r\n        return Node_1.Node.getNode(this.nodes, id, recursive, ignoreCase);\r\n    }\r\n}\r\nexports.Model = Model;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Node = void 0;\r\nconst Matrix4_1 = require(\"../../Matrix4\");\r\nconst Quaternion_1 = require(\"../../Quaternion\");\r\nconst Vector3_1 = require(\"../../Vector3\");\r\nclass Node {\r\n    constructor() {\r\n        this.inheritTransform = true;\r\n        this.isAnimated = false;\r\n        this.translation = new Vector3_1.Vector3();\r\n        this.rotation = new Quaternion_1.Quaternion(0, 0, 0, 1);\r\n        this.scale = new Vector3_1.Vector3(1, 1, 1);\r\n        this.localTransform = new Matrix4_1.Matrix4();\r\n        this.globalTransform = new Matrix4_1.Matrix4();\r\n        this.parts = new Array();\r\n        this.parent = null;\r\n        this.children = new Array();\r\n    }\r\n    calculateLocalTransform() {\r\n        if (!this.isAnimated)\r\n            this.localTransform.setFromTranslationRotation(this.translation, this.rotation, this.scale);\r\n        return this.localTransform;\r\n    }\r\n    calculateWorldTransform() {\r\n        if (this.inheritTransform && !!this.parent) {\r\n            this.globalTransform.set(this.parent.globalTransform.values).multiply(this.localTransform);\r\n        }\r\n        else {\r\n            this.globalTransform.set(this.localTransform.values);\r\n        }\r\n        return this.globalTransform;\r\n    }\r\n    calculateTransforms(recursive) {\r\n        this.calculateLocalTransform();\r\n        this.calculateWorldTransform();\r\n        if (recursive) {\r\n            for (const child of this.children) {\r\n                child.calculateTransforms(true);\r\n            }\r\n        }\r\n    }\r\n    calculateBoneTransforms(recursive) {\r\n        for (const part of this.parts) {\r\n            if (!part.invBoneBindTransforms || !part.bones || part.invBoneBindTransforms.size !== part.bones.length)\r\n                continue;\r\n            for (let i = 0; i < part.invBoneBindTransforms.size; i++) {\r\n                part.bones[i]\r\n                    .set(part.invBoneBindTransforms.keys[i].globalTransform.values)\r\n                    .multiply(part.invBoneBindTransforms.values[i]);\r\n            }\r\n        }\r\n        if (recursive) {\r\n            for (const child of this.children) {\r\n                child.calculateBoneTransforms(true);\r\n            }\r\n        }\r\n    }\r\n    calculateBoundingBox(out, transform = true) {\r\n        out.inf();\r\n        return this.extendBoundingBox(out, transform);\r\n    }\r\n    extendBoundingBox(out, transform = true) {\r\n        const partCount = this.parts.length;\r\n        for (let i = 0; i < partCount; i++) {\r\n            const part = this.parts[i];\r\n            if (part.enabled) {\r\n                const meshPart = part.meshPart;\r\n                if (transform)\r\n                    meshPart.mesh.extendBoundingBox(out, meshPart.offset, meshPart.size, this.globalTransform);\r\n                else\r\n                    meshPart.mesh.extendBoundingBox(out, meshPart.offset, meshPart.size, null);\r\n            }\r\n        }\r\n        const childCount = this.children.length;\r\n        for (let i = 0; i < childCount; i++)\r\n            this.children[i].extendBoundingBox(out);\r\n        return out;\r\n    }\r\n    attachTo(parent) {\r\n        parent.addChild(this);\r\n    }\r\n    detach() {\r\n        if (!!this.parent) {\r\n            this.parent.removeChild(this);\r\n            this.parent = null;\r\n        }\r\n    }\r\n    hasChildren() {\r\n        return !!this.children && this.children.length > 0;\r\n    }\r\n    getChildCount() {\r\n        return this.children.length;\r\n    }\r\n    getChildByIndex(index) {\r\n        return this.children[index];\r\n    }\r\n    getChild(id, recursive, ignoreCase) {\r\n        return Node.getNode(this.children, id, recursive, ignoreCase);\r\n    }\r\n    addChild(child) {\r\n        return this.insertChild(-1, child);\r\n    }\r\n    insertChild(index, child) {\r\n        for (let p = this; !!p; p = p.getParent()) {\r\n            if (p === child)\r\n                throw new Error('Cannot add a parent as a child');\r\n        }\r\n        const p = child.getParent();\r\n        if (!!p && !p.removeChild(child))\r\n            throw new Error('Could not remove child from its current parent');\r\n        if (index < 0 || index >= this.children.length) {\r\n            index = this.children.length;\r\n            this.children.push(child);\r\n        }\r\n        else\r\n            this.children.splice(index, 0, child);\r\n        child.parent = this;\r\n        return index;\r\n    }\r\n    //  public <T extends Node> int insertChildren (int index, final Iterable<T> nodes) {\r\n    //      if (index < 0 || index > children.size) index = children.size;\r\n    //      int i = index;\r\n    //      for (T child : nodes)\r\n    //          insertChild(i++, child);\r\n    //      return index;\r\n    //  }\r\n    removeChild(child) {\r\n        const index = this.children.indexOf(child);\r\n        if (index === -1)\r\n            return false;\r\n        child.parent = null;\r\n        this.children.splice(index, 1);\r\n        return true;\r\n    }\r\n    getChildren() {\r\n        return this.children;\r\n    }\r\n    getParent() {\r\n        return this.parent;\r\n    }\r\n    hasParent() {\r\n        return !!this.parent;\r\n    }\r\n    copy() {\r\n        return new Node().set(this);\r\n    }\r\n    set(other) {\r\n        this.detach();\r\n        this.id = other.id;\r\n        this.isAnimated = other.isAnimated;\r\n        this.inheritTransform = other.inheritTransform;\r\n        this.translation.setFrom(other.translation);\r\n        this.rotation.setFrom(other.rotation);\r\n        this.scale.setFrom(other.scale);\r\n        this.localTransform.set(other.localTransform.values);\r\n        this.globalTransform.set(other.globalTransform.values);\r\n        this.parts.length = 0;\r\n        for (const nodePart of other.parts) {\r\n            this.parts.push(nodePart.copy());\r\n        }\r\n        this.children.length = 0;\r\n        for (const child of other.getChildren()) {\r\n            this.addChild(child.copy());\r\n        }\r\n        return this;\r\n    }\r\n    static getNode(nodes, id, recursive, ignoreCase) {\r\n        const n = nodes.length;\r\n        let node;\r\n        if (ignoreCase) {\r\n            for (let i = 0; i < n; i++)\r\n                if ((node = nodes[i]).id.toUpperCase() === id.toUpperCase())\r\n                    return node;\r\n        }\r\n        else {\r\n            for (let i = 0; i < n; i++)\r\n                if ((node = nodes[i]).id === id)\r\n                    return node;\r\n        }\r\n        if (recursive) {\r\n            for (let i = 0; i < n; i++)\r\n                if (!!(node = this.getNode(nodes[i].children, id, true, ignoreCase)))\r\n                    return node;\r\n        }\r\n        return null;\r\n    }\r\n}\r\nexports.Node = Node;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NodeAnimation = void 0;\r\nclass NodeAnimation {\r\n    constructor() {\r\n        this.translation = null;\r\n        this.rotation = null;\r\n        this.scaling = null;\r\n    }\r\n}\r\nexports.NodeAnimation = NodeAnimation;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NodeKeyframe = void 0;\r\nclass NodeKeyframe {\r\n    constructor(t, v) {\r\n        this.value = null;\r\n        this.keytime = t;\r\n        this.value = v;\r\n    }\r\n}\r\nexports.NodeKeyframe = NodeKeyframe;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NodePart = void 0;\r\nconst Matrix4_1 = require(\"../../Matrix4\");\r\nconst Utils_1 = require(\"../../Utils\");\r\nconst MeshPart_1 = require(\"./MeshPart\");\r\nclass NodePart {\r\n    constructor(meshPart = null, material = null) {\r\n        this.invBoneBindTransforms = null;\r\n        this.bones = null;\r\n        this.enabled = true;\r\n        this.meshPart = meshPart;\r\n        this.material = material;\r\n    }\r\n    copy() {\r\n        return new NodePart().set(this);\r\n    }\r\n    setRenderable(out) {\r\n        out.material = this.material;\r\n        out.meshPart.setByMeshPart(this.meshPart);\r\n        out.bones = this.bones;\r\n        return out;\r\n    }\r\n    set(other) {\r\n        this.meshPart = new MeshPart_1.MeshPart(other.meshPart);\r\n        this.material = other.material;\r\n        this.enabled = other.enabled;\r\n        if (!other.invBoneBindTransforms) {\r\n            this.invBoneBindTransforms = null;\r\n            this.bones = null;\r\n        }\r\n        else {\r\n            if (!this.invBoneBindTransforms) {\r\n                this.invBoneBindTransforms = new Utils_1.ArrayMap();\r\n            }\r\n            this.invBoneBindTransforms.clear();\r\n            for (let i = 0; i < other.invBoneBindTransforms.size; i++) {\r\n                this.invBoneBindTransforms.set(other.invBoneBindTransforms.keys[i], other.invBoneBindTransforms.values[i]);\r\n            }\r\n            if (!this.bones || this.bones.length !== this.invBoneBindTransforms.size)\r\n                this.bones = new Array();\r\n            for (let i = 0; i < this.invBoneBindTransforms.size; i++) {\r\n                if (this.bones[i] === undefined)\r\n                    this.bones[i] = new Matrix4_1.Matrix4();\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n}\r\nexports.NodePart = NodePart;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ModelAnimation = void 0;\r\nclass ModelAnimation {\r\n    constructor() {\r\n        this.nodeAnimations = [];\r\n    }\r\n}\r\nexports.ModelAnimation = ModelAnimation;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ModelData = void 0;\r\nclass ModelData {\r\n    constructor() {\r\n        this.version = [];\r\n        this.meshes = [];\r\n        this.materials = [];\r\n        this.nodes = [];\r\n        this.animations = [];\r\n    }\r\n    addMesh(mesh) {\r\n        for (const other of this.meshes) {\r\n            if (other.id === mesh.id) {\r\n                throw new Error(\"Mesh with id '\" + other.id + \"' already in model\");\r\n            }\r\n        }\r\n        this.meshes.push(mesh);\r\n    }\r\n}\r\nexports.ModelData = ModelData;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ModelMaterial = exports.MaterialType = void 0;\r\nvar MaterialType;\r\n(function (MaterialType) {\r\n    MaterialType[MaterialType[\"Lambert\"] = 0] = \"Lambert\";\r\n    MaterialType[MaterialType[\"Phong\"] = 1] = \"Phong\";\r\n})(MaterialType = exports.MaterialType || (exports.MaterialType = {}));\r\nclass ModelMaterial {\r\n    constructor() {\r\n        this.opacity = 1.0;\r\n    }\r\n}\r\nexports.ModelMaterial = ModelMaterial;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ModelMesh = void 0;\r\nclass ModelMesh {\r\n}\r\nexports.ModelMesh = ModelMesh;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ModelMeshPart = void 0;\r\nclass ModelMeshPart {\r\n}\r\nexports.ModelMeshPart = ModelMeshPart;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ModelNode = void 0;\r\nclass ModelNode {\r\n}\r\nexports.ModelNode = ModelNode;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ModelNodeAnimation = void 0;\r\nclass ModelNodeAnimation {\r\n    constructor() {\r\n        this.translation = null;\r\n        this.rotation = null;\r\n        this.scaling = null;\r\n    }\r\n}\r\nexports.ModelNodeAnimation = ModelNodeAnimation;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ModelNodeKeyframe = void 0;\r\nclass ModelNodeKeyframe {\r\n    constructor() {\r\n        this.value = null;\r\n    }\r\n}\r\nexports.ModelNodeKeyframe = ModelNodeKeyframe;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ModelNodePart = void 0;\r\nclass ModelNodePart {\r\n}\r\nexports.ModelNodePart = ModelNodePart;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ModelTexture = void 0;\r\nclass ModelTexture {\r\n}\r\nexports.ModelTexture = ModelTexture;\r\nModelTexture.USAGE_UNKNOWN = 0;\r\nModelTexture.USAGE_NONE = 1;\r\nModelTexture.USAGE_DIFFUSE = 2;\r\nModelTexture.USAGE_EMISSIVE = 3;\r\nModelTexture.USAGE_AMBIENT = 4;\r\nModelTexture.USAGE_SPECULAR = 5;\r\nModelTexture.USAGE_SHININESS = 6;\r\nModelTexture.USAGE_NORMAL = 7;\r\nModelTexture.USAGE_BUMP = 8;\r\nModelTexture.USAGE_TRANSPARENCY = 9;\r\nModelTexture.USAGE_REFLECTION = 10;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./ModelAnimation\"), exports);\r\n__exportStar(require(\"./ModelData\"), exports);\r\n__exportStar(require(\"./ModelMaterial\"), exports);\r\n__exportStar(require(\"./ModelMesh\"), exports);\r\n__exportStar(require(\"./ModelMeshPart\"), exports);\r\n__exportStar(require(\"./ModelNode\"), exports);\r\n__exportStar(require(\"./ModelNodeAnimation\"), exports);\r\n__exportStar(require(\"./ModelNodeKeyframe\"), exports);\r\n__exportStar(require(\"./ModelNodePart\"), exports);\r\n__exportStar(require(\"./ModelTexture\"), exports);\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./Animation\"), exports);\r\n__exportStar(require(\"./data\"), exports);\r\n__exportStar(require(\"./MeshPart\"), exports);\r\n__exportStar(require(\"./Model\"), exports);\r\n__exportStar(require(\"./Node\"), exports);\r\n__exportStar(require(\"./NodeAnimation\"), exports);\r\n__exportStar(require(\"./NodeKeyframe\"), exports);\r\n__exportStar(require(\"./NodePart\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseShader = exports.Uniform = exports.LocalSetter = exports.GlobalSetter = void 0;\r\nconst Attributes_1 = require(\"../attributes/Attributes\");\r\nclass GlobalSetter {\r\n    isGlobal(shader, inputID) {\r\n        return true;\r\n    }\r\n}\r\nexports.GlobalSetter = GlobalSetter;\r\nclass LocalSetter {\r\n    isGlobal(shader, inputID) {\r\n        return false;\r\n    }\r\n}\r\nexports.LocalSetter = LocalSetter;\r\nclass Uniform {\r\n    constructor(alias, materialMask = 0, environmentMask = 0, overallMask = 0) {\r\n        this.alias = alias;\r\n        this.materialMask = materialMask;\r\n        this.environmentMask = environmentMask;\r\n        this.overallMask = overallMask;\r\n    }\r\n    validate(shader, inputID, renderable) {\r\n        const matFlags = !!renderable && !!renderable.material ? renderable.material.getMask() : 0;\r\n        const envFlags = !!renderable && !!renderable.environment ? renderable.environment.getMask() : 0;\r\n        return ((matFlags & this.materialMask) === this.materialMask &&\r\n            (envFlags & this.environmentMask) === this.environmentMask &&\r\n            ((matFlags | envFlags) & this.overallMask) === this.overallMask);\r\n    }\r\n}\r\nexports.Uniform = Uniform;\r\nclass BaseShader {\r\n    constructor() {\r\n        this.uniforms = [];\r\n        this.validators = [];\r\n        this.setters = [];\r\n        this.globalUniforms = [];\r\n        this.localUniforms = [];\r\n        this.attributes = new Map();\r\n        this.combinedAttributes = new Attributes_1.Attributes();\r\n        this.tempArray = [];\r\n    }\r\n    canRender(instance) {\r\n        return true;\r\n    }\r\n    init() { }\r\n    compareTo(other) { }\r\n    register(alias, validator = null, setter = null) {\r\n        const existing = this.getUniformID(alias);\r\n        if (existing >= 0) {\r\n            this.validators.splice(existing, 0, validator);\r\n            this.setters.splice(existing, 0, setter);\r\n            return existing;\r\n        }\r\n        this.uniforms.push(alias);\r\n        this.validators.push(validator);\r\n        this.setters.push(setter);\r\n        return this.uniforms.length - 1;\r\n    }\r\n    getUniformID(alias) {\r\n        const n = this.uniforms.length;\r\n        for (let i = 0; i < n; i++)\r\n            if (this.uniforms[i] === alias)\r\n                return i;\r\n        return -1;\r\n    }\r\n    getUniformAlias(id) {\r\n        return this.uniforms[id];\r\n    }\r\n    initWithVariables(program, renderable) {\r\n        if (!!this.locations)\r\n            throw new Error('Already initialized');\r\n        this.program = program;\r\n        const n = this.uniforms.length;\r\n        this.locations = new Array(n);\r\n        for (let i = 0; i < n; i++) {\r\n            const input = this.uniforms[i];\r\n            const validator = this.validators[i];\r\n            const setter = this.setters[i];\r\n            if (!!validator && !validator.validate(this, i, renderable)) {\r\n                this.locations[i] = null;\r\n            }\r\n            else {\r\n                this.locations[i] = program.getUniformLocation(input, false);\r\n                if (!!this.locations[i] && !!setter) {\r\n                    if (setter.isGlobal(this, i)) {\r\n                        this.globalUniforms.push(i);\r\n                    }\r\n                    else {\r\n                        this.localUniforms.push(i);\r\n                    }\r\n                }\r\n            }\r\n            if (!this.locations[i]) {\r\n                this.validators.splice(i, 0, null);\r\n            }\r\n        }\r\n        if (!!renderable) {\r\n            const attrs = renderable.meshPart.mesh.getVertexAttributes();\r\n            const c = attrs.size();\r\n            for (let i = 0; i < c; i++) {\r\n                const attr = attrs.get(i);\r\n                const location = program.getAttributeLocation(attr.alias);\r\n                if (location >= 0)\r\n                    this.attributes.set(attr.getKey(), location);\r\n            }\r\n        }\r\n    }\r\n    begin(camera, context) {\r\n        this.camera = camera;\r\n        this.context = context;\r\n        this.program.bind();\r\n        this.currentMesh = null;\r\n        for (let i = 0; i < this.globalUniforms.length; ++i) {\r\n            const u = this.globalUniforms[i];\r\n            if (!!this.setters[u]) {\r\n                this.setters[u].set(this, u, null, null);\r\n            }\r\n        }\r\n    }\r\n    render(renderable) {\r\n        if (renderable.worldTransform.det3x3() === 0)\r\n            return;\r\n        this.combinedAttributes.clear();\r\n        if (!!renderable.environment)\r\n            this.combinedAttributes.setAttributes(renderable.environment.getAttributes());\r\n        if (!!renderable.material)\r\n            this.combinedAttributes.setAttributes(renderable.material.getAttributes());\r\n        this.renderWithCombinedAttributes(renderable, this.combinedAttributes);\r\n    }\r\n    renderWithCombinedAttributes(renderable, combinedAttributes) {\r\n        for (let u, i = 0; i < this.localUniforms.length; ++i)\r\n            if (!!this.setters[(u = this.localUniforms[i])]) {\r\n                this.setters[u].set(this, u, renderable, combinedAttributes);\r\n            }\r\n        if (this.currentMesh !== renderable.meshPart.mesh) {\r\n            if (!!this.currentMesh)\r\n                this.currentMesh.unbind(this.program);\r\n            this.currentMesh = renderable.meshPart.mesh;\r\n            this.currentMesh.bind(this.program, this.getAttributeLocations(renderable.meshPart.mesh.getVertexAttributes()));\r\n        }\r\n        renderable.meshPart.render(this.program, false);\r\n    }\r\n    getAttributeLocations(attrs) {\r\n        this.tempArray.length = 0;\r\n        const n = attrs.size();\r\n        for (let i = 0; i < n; i++) {\r\n            let number = this.attributes.get(attrs.get(i).getKey());\r\n            if (number === undefined || number === null) {\r\n                number = -1;\r\n            }\r\n            this.tempArray.push(number);\r\n        }\r\n        return this.tempArray;\r\n    }\r\n    end() {\r\n        if (!!this.currentMesh) {\r\n            this.currentMesh.unbind(this.program);\r\n            this.currentMesh = null;\r\n        }\r\n    }\r\n    dispose() {\r\n        this.program = null;\r\n        this.uniforms.length = 0;\r\n        this.validators.length = 0;\r\n        this.setters.length = 0;\r\n        this.localUniforms.length = 0;\r\n        this.globalUniforms.length = 0;\r\n        this.locations = null;\r\n    }\r\n    has(inputID) {\r\n        return inputID >= 0 && inputID < this.locations.length && !!this.locations[inputID];\r\n    }\r\n    loc(inputID) {\r\n        return inputID >= 0 && inputID < this.locations.length ? this.locations[inputID] : null;\r\n    }\r\n    setMatrix4(uniform, value) {\r\n        if (!this.uniforms[uniform])\r\n            return false;\r\n        this.program.setUniform4x4f(this.uniforms[uniform], value.values);\r\n        return true;\r\n    }\r\n    setMatrix3(uniform, value) {\r\n        if (!this.uniforms[uniform])\r\n            return false;\r\n        this.program.setUniform3x3f(this.uniforms[uniform], value.getValues());\r\n        return true;\r\n    }\r\n    setVector3(uniform, value) {\r\n        if (!this.uniforms[uniform])\r\n            return false;\r\n        this.program.setUniform3f(this.uniforms[uniform], value.x, value.y, value.z);\r\n        return true;\r\n    }\r\n    setVector2(uniform, value) {\r\n        if (!this.uniforms[uniform])\r\n            return false;\r\n        this.program.setUniform2f(this.uniforms[uniform], value.x, value.y);\r\n        return true;\r\n    }\r\n    setColor(uniform, value) {\r\n        if (!this.uniforms[uniform])\r\n            return false;\r\n        this.program.setUniform4f(this.uniforms[uniform], value.r, value.g, value.b, value.a);\r\n        return true;\r\n    }\r\n    setF(uniform, value) {\r\n        if (!this.uniforms[uniform])\r\n            return false;\r\n        this.program.setUniformf(this.uniforms[uniform], value);\r\n        return true;\r\n    }\r\n    set2f(uniform, v1, v2) {\r\n        if (!this.uniforms[uniform])\r\n            return false;\r\n        this.program.setUniform2f(this.uniforms[uniform], v1, v2);\r\n        return true;\r\n    }\r\n    set3f(uniform, v1, v2, v3) {\r\n        if (!this.uniforms[uniform])\r\n            return false;\r\n        this.program.setUniform3f(this.uniforms[uniform], v1, v2, v3);\r\n        return true;\r\n    }\r\n    set4f(uniform, v1, v2, v3, v4) {\r\n        if (!this.uniforms[uniform])\r\n            return false;\r\n        this.program.setUniform4f(this.uniforms[uniform], v1, v2, v3, v4);\r\n        return true;\r\n    }\r\n    setI(uniform, value) {\r\n        if (!this.uniforms[uniform])\r\n            return false;\r\n        this.program.setUniformi(this.uniforms[uniform], value);\r\n        return true;\r\n    }\r\n    setTexture(uniform, texture) {\r\n        if (!this.uniforms[uniform])\r\n            return false;\r\n        this.program.setUniformi(this.uniforms[uniform], this.context.textureBinder.bindTexture(texture));\r\n        return true;\r\n    }\r\n}\r\nexports.BaseShader = BaseShader;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DefaultShader = exports.Setters = exports.Inputs = exports.Bones = exports.ACubemap = exports.Config = void 0;\r\nconst Matrix3_1 = require(\"../../Matrix3\");\r\nconst Matrix4_1 = require(\"../../Matrix4\");\r\nconst Shader_1 = require(\"../../Shader\");\r\nconst Utils_1 = require(\"../../Utils\");\r\nconst Vector3_1 = require(\"../../Vector3\");\r\nconst Attributes_1 = require(\"../attributes/Attributes\");\r\nconst BlendingAttribute_1 = require(\"../attributes/BlendingAttribute\");\r\nconst ColorAttribute_1 = require(\"../attributes/ColorAttribute\");\r\nconst DirectionalLightsAttribute_1 = require(\"../attributes/DirectionalLightsAttribute\");\r\nconst FloatAttribute_1 = require(\"../attributes/FloatAttribute\");\r\nconst IntAttribute_1 = require(\"../attributes/IntAttribute\");\r\nconst PointLightAttribute_1 = require(\"../attributes/PointLightAttribute\");\r\nconst SpotLightAttribute_1 = require(\"../attributes/SpotLightAttribute\");\r\nconst TextureAttribute_1 = require(\"../attributes/TextureAttribute\");\r\nconst VertexAttribute_1 = require(\"../attributes/VertexAttribute\");\r\nconst AmbientCubemap_1 = require(\"../environment/AmbientCubemap\");\r\nconst DirectionalLight_1 = require(\"../environment/DirectionalLight\");\r\nconst PointLight_1 = require(\"../environment/PointLight\");\r\nconst SpotLight_1 = require(\"../environment/SpotLight\");\r\nconst GL20_1 = require(\"../GL20\");\r\nconst BaseShader_1 = require(\"./BaseShader\");\r\nclass Config {\r\n    constructor(vertexShader = '', fragmentShader = '') {\r\n        this.vertexShader = null;\r\n        this.fragmentShader = null;\r\n        this.numDirectionalLights = 2;\r\n        this.numPointLights = 5;\r\n        this.numSpotLights = 0;\r\n        this.numBones = 12;\r\n        this.ignoreUnimplemented = true;\r\n        this.defaultCullFace = -1;\r\n        this.defaultDepthFunc = -1;\r\n        this.vertexShader = vertexShader;\r\n        this.fragmentShader = fragmentShader;\r\n    }\r\n}\r\nexports.Config = Config;\r\nclass ACubemap extends BaseShader_1.LocalSetter {\r\n    constructor(dirLightsOffset, pointLightsOffset) {\r\n        super();\r\n        this.cacheAmbientCubemap = new AmbientCubemap_1.AmbientCubemap();\r\n        this.dirLightsOffset = dirLightsOffset;\r\n        this.pointLightsOffset = pointLightsOffset;\r\n    }\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        if (!renderable.environment)\r\n            shader.program.setUniform3fv(shader.getUniformAlias(inputID), ACubemap.ones);\r\n        else {\r\n            renderable.worldTransform.getTranslation(ACubemap.tmpV1);\r\n            if (combinedAttributes.has(ColorAttribute_1.ColorAttribute3D.AmbientLight)) {\r\n                const color = combinedAttributes.get(ColorAttribute_1.ColorAttribute3D.AmbientLight).color;\r\n                this.cacheAmbientCubemap.setColor(color.r, color.g, color.b);\r\n            }\r\n            if (combinedAttributes.has(DirectionalLightsAttribute_1.DirectionalLightsAttribute.Type)) {\r\n                const att = combinedAttributes.get(DirectionalLightsAttribute_1.DirectionalLightsAttribute.Type);\r\n                const lights = att.lights;\r\n                for (let i = this.dirLightsOffset; i < lights.length; i++)\r\n                    this.cacheAmbientCubemap.addWithColorAndDirection(lights[i].color, lights[i].direction);\r\n            }\r\n            // if (combinedAttributes.has(PointLightsAttribute.Type)) {\r\n            //   Array<PointLight> lights = ((PointLightsAttribute)combinedAttributes.get(PointLightsAttribute.Type)).lights;\r\n            //   for (int i = pointLightsOffset; i < lights.size; i++)\r\n            //     cacheAmbientCubemap.add(lights.get(i).color, lights.get(i).position, tmpV1, lights.get(i).intensity);\r\n            // }\r\n            this.cacheAmbientCubemap.clamp();\r\n            shader.program.setUniform3fv(shader.getUniformAlias(inputID), this.cacheAmbientCubemap.data);\r\n        }\r\n    }\r\n}\r\nexports.ACubemap = ACubemap;\r\nACubemap.ones = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];\r\nACubemap.tmpV1 = new Vector3_1.Vector3();\r\nclass Bones extends BaseShader_1.LocalSetter {\r\n    constructor(numBones) {\r\n        super();\r\n        this.bones = new Array(numBones * 16);\r\n    }\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        for (let i = 0; i < this.bones.length; i += 16) {\r\n            const idx = i / 16;\r\n            if (!renderable.bones || idx >= renderable.bones.length || !renderable.bones[idx]) {\r\n                Utils_1.Utils.arrayCopy(Bones.idtMatrix.values, 0, this.bones, i, 16);\r\n            }\r\n            else {\r\n                Utils_1.Utils.arrayCopy(renderable.bones[idx].values, 0, this.bones, i, 16);\r\n            }\r\n        }\r\n        shader.program.setUniform4x4fWithLocation(shader.loc(inputID), this.bones);\r\n    }\r\n}\r\nexports.Bones = Bones;\r\nBones.idtMatrix = new Matrix4_1.Matrix4();\r\nclass Inputs {\r\n}\r\nexports.Inputs = Inputs;\r\nInputs.projTrans = new BaseShader_1.Uniform('u_projTrans');\r\nInputs.viewTrans = new BaseShader_1.Uniform('u_viewTrans');\r\nInputs.projViewTrans = new BaseShader_1.Uniform('u_projViewTrans');\r\nInputs.cameraPosition = new BaseShader_1.Uniform('u_cameraPosition');\r\nInputs.cameraDirection = new BaseShader_1.Uniform('u_cameraDirection');\r\nInputs.cameraUp = new BaseShader_1.Uniform('u_cameraUp');\r\nInputs.cameraNearFar = new BaseShader_1.Uniform('u_cameraNearFar');\r\nInputs.worldTrans = new BaseShader_1.Uniform('u_worldTrans');\r\nInputs.viewWorldTrans = new BaseShader_1.Uniform('u_viewWorldTrans');\r\nInputs.projViewWorldTrans = new BaseShader_1.Uniform('u_projViewWorldTrans');\r\nInputs.normalMatrix = new BaseShader_1.Uniform('u_normalMatrix');\r\nInputs.bones = new BaseShader_1.Uniform('u_bones');\r\nInputs.shininess = new BaseShader_1.Uniform('u_shininess', FloatAttribute_1.FloatAttribute.Shininess);\r\nInputs.opacity = new BaseShader_1.Uniform('u_opacity', BlendingAttribute_1.BlendingAttribute.Type);\r\nInputs.diffuseColor = new BaseShader_1.Uniform('u_diffuseColor', ColorAttribute_1.ColorAttribute3D.Diffuse);\r\nInputs.diffuseTexture = new BaseShader_1.Uniform('u_diffuseTexture', TextureAttribute_1.TextureAttribute.Diffuse);\r\nInputs.diffuseUVTransform = new BaseShader_1.Uniform('u_diffuseUVTransform', TextureAttribute_1.TextureAttribute.Diffuse);\r\nInputs.specularColor = new BaseShader_1.Uniform('u_specularColor', ColorAttribute_1.ColorAttribute3D.Specular);\r\nInputs.specularTexture = new BaseShader_1.Uniform('u_specularTexture', TextureAttribute_1.TextureAttribute.Specular);\r\nInputs.specularUVTransform = new BaseShader_1.Uniform('u_specularUVTransform', TextureAttribute_1.TextureAttribute.Specular);\r\nInputs.emissiveColor = new BaseShader_1.Uniform('u_emissiveColor', ColorAttribute_1.ColorAttribute3D.Emissive);\r\nInputs.emissiveTexture = new BaseShader_1.Uniform('u_emissiveTexture', TextureAttribute_1.TextureAttribute.Emissive);\r\nInputs.emissiveUVTransform = new BaseShader_1.Uniform('u_emissiveUVTransform', TextureAttribute_1.TextureAttribute.Emissive);\r\nInputs.reflectionColor = new BaseShader_1.Uniform('u_reflectionColor', ColorAttribute_1.ColorAttribute3D.Reflection);\r\nInputs.reflectionTexture = new BaseShader_1.Uniform('u_reflectionTexture', TextureAttribute_1.TextureAttribute.Reflection);\r\nInputs.reflectionUVTransform = new BaseShader_1.Uniform('u_reflectionUVTransform', TextureAttribute_1.TextureAttribute.Reflection);\r\nInputs.normalTexture = new BaseShader_1.Uniform('u_normalTexture', TextureAttribute_1.TextureAttribute.Normal);\r\nInputs.normalUVTransform = new BaseShader_1.Uniform('u_normalUVTransform', TextureAttribute_1.TextureAttribute.Normal);\r\nInputs.ambientTexture = new BaseShader_1.Uniform('u_ambientTexture', TextureAttribute_1.TextureAttribute.Ambient);\r\nInputs.ambientUVTransform = new BaseShader_1.Uniform('u_ambientUVTransform', TextureAttribute_1.TextureAttribute.Ambient);\r\nInputs.alphaTest = new BaseShader_1.Uniform('u_alphaTest');\r\nInputs.ambientCube = new BaseShader_1.Uniform('u_ambientCubemap');\r\nInputs.dirLights = new BaseShader_1.Uniform('u_dirLights');\r\nInputs.pointLights = new BaseShader_1.Uniform('u_pointLights');\r\nInputs.spotLights = new BaseShader_1.Uniform('u_spotLights');\r\nInputs.environmentCubemap = new BaseShader_1.Uniform('u_environmentCubemap');\r\nclass Setters {\r\n}\r\nexports.Setters = Setters;\r\nSetters.projTrans = new (class extends BaseShader_1.GlobalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        shader.setMatrix4(inputID, shader.camera.projection);\r\n    }\r\n})();\r\nSetters.viewTrans = new (class extends BaseShader_1.GlobalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        shader.setMatrix4(inputID, shader.camera.view);\r\n    }\r\n})();\r\nSetters.projViewTrans = new (class extends BaseShader_1.GlobalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        shader.setMatrix4(inputID, shader.camera.combined);\r\n    }\r\n})();\r\nSetters.cameraPosition = new (class extends BaseShader_1.GlobalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        shader.set4f(inputID, shader.camera.position.x, shader.camera.position.y, shader.camera.position.y, 1.1881 / (shader.camera.far * shader.camera.far));\r\n    }\r\n})();\r\nSetters.cameraDirection = new (class extends BaseShader_1.GlobalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        shader.setVector3(inputID, shader.camera.direction);\r\n    }\r\n})();\r\nSetters.cameraUp = new (class extends BaseShader_1.GlobalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        shader.setVector3(inputID, shader.camera.up);\r\n    }\r\n})();\r\nSetters.cameraNearFar = new (class extends BaseShader_1.GlobalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        shader.set2f(inputID, shader.camera.near, shader.camera.far);\r\n    }\r\n})();\r\nSetters.worldTrans = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        shader.setMatrix4(inputID, renderable.worldTransform);\r\n    }\r\n})();\r\nSetters.viewWorldTrans = new (class extends BaseShader_1.LocalSetter {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.temp = new Matrix4_1.Matrix4();\r\n    }\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        shader.setMatrix4(inputID, this.temp.set(shader.camera.view.values).multiply(renderable.worldTransform));\r\n    }\r\n})();\r\nSetters.projViewWorldTrans = new (class extends BaseShader_1.LocalSetter {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.temp = new Matrix4_1.Matrix4();\r\n    }\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        shader.setMatrix4(inputID, this.temp.set(shader.camera.combined.values).multiply(renderable.worldTransform));\r\n    }\r\n})();\r\nSetters.normalMatrix = new (class extends BaseShader_1.LocalSetter {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.tmpM = new Matrix3_1.Matrix3();\r\n    }\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        shader.setMatrix3(inputID, this.tmpM.setByMatrix4(renderable.worldTransform).inv().transpose());\r\n    }\r\n})();\r\nSetters.shininess = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        shader.setF(inputID, combinedAttributes.get(FloatAttribute_1.FloatAttribute.Shininess).value);\r\n    }\r\n})();\r\nSetters.diffuseColor = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        shader.setColor(inputID, combinedAttributes.get(ColorAttribute_1.ColorAttribute3D.Diffuse).color);\r\n    }\r\n})();\r\nSetters.diffuseTexture = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        const unit = shader.context.textureBinder.bindTexture(combinedAttributes.get(TextureAttribute_1.TextureAttribute.Diffuse).texture);\r\n        shader.setI(inputID, unit);\r\n    }\r\n})();\r\nSetters.diffuseUVTransform = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        const ta = combinedAttributes.get(TextureAttribute_1.TextureAttribute.Diffuse);\r\n        shader.set4f(inputID, ta.offsetU, ta.offsetV, ta.scaleU, ta.scaleV);\r\n    }\r\n})();\r\nSetters.specularColor = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        shader.setColor(inputID, combinedAttributes.get(ColorAttribute_1.ColorAttribute3D.Specular).color);\r\n    }\r\n})();\r\nSetters.specularTexture = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        const unit = shader.context.textureBinder.bindTexture(combinedAttributes.get(TextureAttribute_1.TextureAttribute.Specular).texture);\r\n        shader.setI(inputID, unit);\r\n    }\r\n})();\r\nSetters.specularUVTransform = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        const ta = combinedAttributes.get(TextureAttribute_1.TextureAttribute.Specular);\r\n        shader.set4f(inputID, ta.offsetU, ta.offsetV, ta.scaleU, ta.scaleV);\r\n    }\r\n})();\r\nSetters.emissiveColor = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        shader.setColor(inputID, combinedAttributes.get(ColorAttribute_1.ColorAttribute3D.Emissive).color);\r\n    }\r\n})();\r\nSetters.emissiveTexture = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        const unit = shader.context.textureBinder.bindTexture(combinedAttributes.get(TextureAttribute_1.TextureAttribute.Emissive).texture);\r\n        shader.setI(inputID, unit);\r\n    }\r\n})();\r\nSetters.emissiveUVTransform = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        const ta = combinedAttributes.get(TextureAttribute_1.TextureAttribute.Emissive);\r\n        shader.set4f(inputID, ta.offsetU, ta.offsetV, ta.scaleU, ta.scaleV);\r\n    }\r\n})();\r\nSetters.reflectionColor = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        shader.setColor(inputID, combinedAttributes.get(ColorAttribute_1.ColorAttribute3D.Reflection).color);\r\n    }\r\n})();\r\nSetters.reflectionTexture = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        const unit = shader.context.textureBinder.bindTexture(combinedAttributes.get(TextureAttribute_1.TextureAttribute.Reflection).texture);\r\n        shader.setI(inputID, unit);\r\n    }\r\n})();\r\nSetters.reflectionUVTransform = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        const ta = combinedAttributes.get(TextureAttribute_1.TextureAttribute.Reflection);\r\n        shader.set4f(inputID, ta.offsetU, ta.offsetV, ta.scaleU, ta.scaleV);\r\n    }\r\n})();\r\nSetters.normalTexture = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        const unit = shader.context.textureBinder.bindTexture(combinedAttributes.get(TextureAttribute_1.TextureAttribute.Normal).texture);\r\n        shader.setI(inputID, unit);\r\n    }\r\n})();\r\nSetters.normalUVTransform = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        const ta = combinedAttributes.get(TextureAttribute_1.TextureAttribute.Normal);\r\n        shader.set4f(inputID, ta.offsetU, ta.offsetV, ta.scaleU, ta.scaleV);\r\n    }\r\n})();\r\nSetters.ambientTexture = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        const unit = shader.context.textureBinder.bindTexture(combinedAttributes.get(TextureAttribute_1.TextureAttribute.Ambient).texture);\r\n        shader.setI(inputID, unit);\r\n    }\r\n})();\r\nSetters.ambientUVTransform = new (class extends BaseShader_1.LocalSetter {\r\n    set(shader, inputID, renderable, combinedAttributes) {\r\n        const ta = combinedAttributes.get(TextureAttribute_1.TextureAttribute.Ambient);\r\n        shader.set4f(inputID, ta.offsetU, ta.offsetV, ta.scaleU, ta.scaleV);\r\n    }\r\n})();\r\nclass DefaultShader extends BaseShader_1.BaseShader {\r\n    constructor(gl, renderable, config = null, prefix = '', vertexShader = '', fragmentShader = '') {\r\n        super();\r\n        this.gl = gl;\r\n        this.u_dirLights0color = this.register('u_dirLights[0].color');\r\n        this.u_dirLights0direction = this.register('u_dirLights[0].direction');\r\n        this.u_dirLights1color = this.register('u_dirLights[1].color');\r\n        this.u_pointLights0color = this.register('u_pointLights[0].color');\r\n        this.u_pointLights0position = this.register('u_pointLights[0].position');\r\n        this.u_pointLights0intensity = this.register('u_pointLights[0].intensity');\r\n        this.u_pointLights1color = this.register('u_pointLights[1].color');\r\n        this.u_spotLights0color = this.register('u_spotLights[0].color');\r\n        this.u_spotLights0position = this.register('u_spotLights[0].position');\r\n        this.u_spotLights0intensity = this.register('u_spotLights[0].intensity');\r\n        this.u_spotLights0direction = this.register('u_spotLights[0].direction');\r\n        this.u_spotLights0cutoffAngle = this.register('u_spotLights[0].cutoffAngle');\r\n        this.u_spotLights0exponent = this.register('u_spotLights[0].exponent');\r\n        this.u_spotLights1color = this.register('u_spotLights[1].color');\r\n        this.u_fogColor = this.register('u_fogColor');\r\n        this.u_shadowMapProjViewTrans = this.register('u_shadowMapProjViewTrans');\r\n        this.u_shadowTexture = this.register('u_shadowTexture');\r\n        this.u_shadowPCFOffset = this.register('u_shadowPCFOffset');\r\n        this.lightLocs = new Array();\r\n        this.ambientCubemap = new AmbientCubemap_1.AmbientCubemap();\r\n        this.tmpV1 = new Vector3_1.Vector3();\r\n        if (vertexShader.length === 0)\r\n            vertexShader = DefaultShader.defaultVertexShader;\r\n        if (fragmentShader.length === 0)\r\n            fragmentShader = DefaultShader.defaultFragmentShader;\r\n        if (!config) {\r\n            config = new Config();\r\n        }\r\n        else {\r\n            prefix = DefaultShader.createPrefix(renderable, config);\r\n        }\r\n        this.createShader(renderable, config, new Shader_1.Shader(this.gl, prefix + vertexShader, prefix + fragmentShader));\r\n    }\r\n    createShader(renderable, config, shaderProgram) {\r\n        const attributes = DefaultShader.combineAttributes(renderable);\r\n        this.config = config;\r\n        this.program = shaderProgram;\r\n        this.lighting = !!renderable.environment;\r\n        // this.environmentCubemap = attributes.has(CubemapAttribute.EnvironmentMap)\r\n        //     || (lighting && attributes.has(CubemapAttribute.EnvironmentMap));\r\n        this.environmentCubemap = false;\r\n        //this.shadowMap = lighting && renderable.environment.shadowMap !== null;\r\n        this.shadowMap = false;\r\n        this.renderable = renderable;\r\n        this.attributesMask = attributes.getMask() | DefaultShader.optionalAttributes;\r\n        this.vertexMask = renderable.meshPart.mesh.getVertexAttributes().getMaskWithSizePacked();\r\n        this.directionalLights = new Array(this.lighting && config.numDirectionalLights > 0 ? config.numDirectionalLights : 0);\r\n        for (let i = 0; i < this.directionalLights.length; i++) {\r\n            this.directionalLights[i] = new DirectionalLight_1.DirectionalLight();\r\n        }\r\n        this.pointLights = new Array(this.lighting && config.numPointLights > 0 ? config.numPointLights : 0);\r\n        for (let i = 0; i < this.pointLights.length; i++)\r\n            this.pointLights[i] = new PointLight_1.PointLight();\r\n        this.spotLights = new Array(this.lighting && config.numSpotLights > 0 ? config.numSpotLights : 0);\r\n        for (let i = 0; i < this.spotLights.length; i++)\r\n            this.spotLights[i] = new SpotLight_1.SpotLight();\r\n        if (!config.ignoreUnimplemented && (DefaultShader.implementedFlags & this.attributesMask) !== this.attributesMask)\r\n            throw new Error('Some attributes not implemented yet (' + this.attributesMask + ')');\r\n        if (!!renderable.bones && renderable.bones.length > config.numBones) {\r\n            throw new Error('too many bones: ' + renderable.bones.length + ', max configured: ' + config.numBones);\r\n        }\r\n        // Global uniforms\r\n        this.u_projTrans = this.register(Inputs.projTrans.alias, null, Setters.projTrans);\r\n        this.u_viewTrans = this.register(Inputs.viewTrans.alias, null, Setters.viewTrans);\r\n        this.u_projViewTrans = this.register(Inputs.projViewTrans.alias, null, Setters.projViewTrans);\r\n        this.u_cameraPosition = this.register(Inputs.cameraPosition.alias, null, Setters.cameraPosition);\r\n        this.u_cameraDirection = this.register(Inputs.cameraDirection.alias, null, Setters.cameraDirection);\r\n        this.u_cameraUp = this.register(Inputs.cameraUp.alias, null, Setters.cameraUp);\r\n        this.u_cameraNearFar = this.register(Inputs.cameraNearFar.alias, null, Setters.cameraNearFar);\r\n        const timeUniform = new BaseShader_1.Uniform('u_time');\r\n        this.u_time = this.register(timeUniform.alias, timeUniform);\r\n        // Object uniforms\r\n        this.u_worldTrans = this.register(Inputs.worldTrans.alias, null, Setters.worldTrans);\r\n        this.u_viewWorldTrans = this.register(Inputs.viewWorldTrans.alias, null, Setters.viewWorldTrans);\r\n        this.u_projViewWorldTrans = this.register(Inputs.projViewWorldTrans.alias, null, Setters.projViewWorldTrans);\r\n        this.u_normalMatrix = this.register(Inputs.normalMatrix.alias, null, Setters.normalMatrix);\r\n        this.u_bones =\r\n            !!renderable.bones && config.numBones > 0\r\n                ? this.register(Inputs.bones.alias, null, new Bones(config.numBones))\r\n                : -1;\r\n        this.u_shininess = this.register(Inputs.shininess.alias, null, Setters.shininess);\r\n        this.u_opacity = this.register(Inputs.opacity.alias);\r\n        this.u_diffuseColor = this.register(Inputs.diffuseColor.alias, null, Setters.diffuseColor);\r\n        this.u_diffuseTexture = this.register(Inputs.diffuseTexture.alias, null, Setters.diffuseTexture);\r\n        this.u_diffuseUVTransform = this.register(Inputs.diffuseUVTransform.alias, null, Setters.diffuseUVTransform);\r\n        this.u_specularColor = this.register(Inputs.specularColor.alias, null, Setters.specularColor);\r\n        this.u_specularTexture = this.register(Inputs.specularTexture.alias, null, Setters.specularTexture);\r\n        this.u_specularUVTransform = this.register(Inputs.specularUVTransform.alias, null, Setters.specularUVTransform);\r\n        this.u_emissiveColor = this.register(Inputs.emissiveColor.alias, null, Setters.emissiveColor);\r\n        this.u_emissiveTexture = this.register(Inputs.emissiveTexture.alias, null, Setters.emissiveTexture);\r\n        this.u_emissiveUVTransform = this.register(Inputs.emissiveUVTransform.alias, null, Setters.emissiveUVTransform);\r\n        this.u_reflectionColor = this.register(Inputs.reflectionColor.alias, null, Setters.reflectionColor);\r\n        this.u_reflectionTexture = this.register(Inputs.reflectionTexture.alias, null, Setters.reflectionTexture);\r\n        this.u_reflectionUVTransform = this.register(Inputs.reflectionUVTransform.alias, null, Setters.reflectionUVTransform);\r\n        this.u_normalTexture = this.register(Inputs.normalTexture.alias, null, Setters.normalTexture);\r\n        this.u_normalUVTransform = this.register(Inputs.normalUVTransform.alias, null, Setters.normalUVTransform);\r\n        this.u_ambientTexture = this.register(Inputs.ambientTexture.alias, null, Setters.ambientTexture);\r\n        this.u_ambientUVTransform = this.register(Inputs.ambientUVTransform.alias, null, Setters.ambientUVTransform);\r\n        this.u_alphaTest = this.register(Inputs.alphaTest.alias);\r\n        this.u_ambientCubemap = this.lighting\r\n            ? this.register(Inputs.ambientCube.alias, null, new ACubemap(config.numDirectionalLights, config.numPointLights))\r\n            : -1;\r\n        //u_environmentCubemap = environmentCubemap ? register(Inputs.environmentCubemap, Setters.environmentCubemap) : -1;\r\n    }\r\n    init() {\r\n        const program = this.program;\r\n        this.program = null;\r\n        this.initWithVariables(program, this.renderable);\r\n        this.renderable = null;\r\n        this.dirLightsLoc = this.getLightLoc(this.u_dirLights0color);\r\n        this.dirLightsColorOffset = this.getLightLoc(this.u_dirLights0color) - this.dirLightsLoc;\r\n        this.dirLightsDirectionOffset = this.getLightLoc(this.u_dirLights0direction) - this.dirLightsLoc;\r\n        this.dirLightsSize = this.getLightLoc(this.u_dirLights1color) - this.dirLightsLoc;\r\n        if (this.dirLightsSize < 0)\r\n            this.dirLightsSize = 0;\r\n        this.pointLightsLoc = this.getLightLoc(this.u_pointLights0color);\r\n        this.pointLightsColorOffset = this.getLightLoc(this.u_pointLights0color) - this.pointLightsLoc;\r\n        this.pointLightsPositionOffset = this.getLightLoc(this.u_pointLights0position) - this.pointLightsLoc;\r\n        this.pointLightsIntensityOffset = this.has(this.u_pointLights0intensity)\r\n            ? this.getLightLoc(this.u_pointLights0intensity) - this.pointLightsLoc\r\n            : -1;\r\n        this.pointLightsSize = this.getLightLoc(this.u_pointLights1color) - this.pointLightsLoc;\r\n        if (this.pointLightsSize < 0)\r\n            this.pointLightsSize = 0;\r\n        this.spotLightsLoc = this.getLightLoc(this.u_spotLights0color);\r\n        this.spotLightsColorOffset = this.getLightLoc(this.u_spotLights0color) - this.spotLightsLoc;\r\n        this.spotLightsPositionOffset = this.getLightLoc(this.u_spotLights0position) - this.spotLightsLoc;\r\n        this.spotLightsDirectionOffset = this.getLightLoc(this.u_spotLights0direction) - this.spotLightsLoc;\r\n        this.spotLightsIntensityOffset = this.has(this.u_spotLights0intensity)\r\n            ? this.getLightLoc(this.u_spotLights0intensity) - this.spotLightsLoc\r\n            : -1;\r\n        this.spotLightsCutoffAngleOffset = this.getLightLoc(this.u_spotLights0cutoffAngle) - this.spotLightsLoc;\r\n        this.spotLightsExponentOffset = this.getLightLoc(this.u_spotLights0exponent) - this.spotLightsLoc;\r\n        this.spotLightsSize = this.getLightLoc(this.u_spotLights1color) - this.spotLightsLoc;\r\n        if (this.spotLightsSize < 0)\r\n            this.spotLightsSize = 0;\r\n    }\r\n    static and(mask, flag) {\r\n        return (mask & flag) === flag;\r\n    }\r\n    static or(mask, flag) {\r\n        return (mask & flag) !== 0;\r\n    }\r\n    static combineAttributes(renderable) {\r\n        this.tmpAttributes.clear();\r\n        if (!!renderable.environment)\r\n            this.tmpAttributes.setAttributes(renderable.environment.getAttributes());\r\n        if (!!renderable.material)\r\n            this.tmpAttributes.setAttributes(renderable.material.getAttributes());\r\n        return this.tmpAttributes;\r\n    }\r\n    static combineAttributeMasks(renderable) {\r\n        let mask = 0;\r\n        if (!!renderable.environment)\r\n            mask |= renderable.environment.getMask();\r\n        if (!!renderable.material)\r\n            mask |= renderable.material.getMask();\r\n        return mask;\r\n    }\r\n    static createPrefix(renderable, config) {\r\n        const attributes = this.combineAttributes(renderable);\r\n        let prefix = '';\r\n        const attributesMask = attributes.getMask();\r\n        const vertexMask = renderable.meshPart.mesh.getVertexAttributes().getMask();\r\n        if (this.and(vertexMask, VertexAttribute_1.Usage.Position))\r\n            prefix += '#define positionFlag\\n';\r\n        if (this.or(vertexMask, VertexAttribute_1.Usage.ColorUnpacked | VertexAttribute_1.Usage.ColorPacked))\r\n            prefix += '#define colorFlag\\n';\r\n        if (this.and(vertexMask, VertexAttribute_1.Usage.BiNormal))\r\n            prefix += '#define binormalFlag\\n';\r\n        if (this.and(vertexMask, VertexAttribute_1.Usage.Tangent))\r\n            prefix += '#define tangentFlag\\n';\r\n        if (this.and(vertexMask, VertexAttribute_1.Usage.Normal))\r\n            prefix += '#define normalFlag\\n';\r\n        if (this.and(vertexMask, VertexAttribute_1.Usage.Normal) || this.and(vertexMask, VertexAttribute_1.Usage.Tangent | VertexAttribute_1.Usage.BiNormal)) {\r\n            if (!!renderable.environment) {\r\n                prefix += '#define lightingFlag\\n';\r\n                prefix += '#define ambientCubemapFlag\\n';\r\n                prefix += '#define numDirectionalLights ' + config.numDirectionalLights + '\\n';\r\n                prefix += '#define numPointLights ' + config.numPointLights + '\\n';\r\n                prefix += '#define numSpotLights ' + config.numSpotLights + '\\n';\r\n                if (attributes.has(ColorAttribute_1.ColorAttribute3D.Fog)) {\r\n                    prefix += '#define fogFlag\\n';\r\n                }\r\n                // if (renderable.environment.shadowMap !== null) prefix += \"#define shadowMapFlag\\n\";\r\n                // if (attributes.has(CubemapAttribute.EnvironmentMap)) prefix += \"#define environmentCubemapFlag\\n\";\r\n            }\r\n        }\r\n        const n = renderable.meshPart.mesh.getVertexAttributes().size();\r\n        for (let i = 0; i < n; i++) {\r\n            const attr = renderable.meshPart.mesh.getVertexAttributes().get(i);\r\n            if (attr.usage === VertexAttribute_1.Usage.BoneWeight)\r\n                prefix += '#define boneWeight' + attr.unit + 'Flag\\n';\r\n            else if (attr.usage === VertexAttribute_1.Usage.TextureCoordinates)\r\n                prefix += '#define texCoords' + attr.unit + 'Flag\\n';\r\n        }\r\n        if ((attributesMask & BlendingAttribute_1.BlendingAttribute.Type) === BlendingAttribute_1.BlendingAttribute.Type)\r\n            prefix += '#define ' + BlendingAttribute_1.BlendingAttribute.Alias + 'Flag\\n';\r\n        if ((attributesMask & TextureAttribute_1.TextureAttribute.Diffuse) === TextureAttribute_1.TextureAttribute.Diffuse) {\r\n            prefix += '#define ' + TextureAttribute_1.TextureAttribute.DiffuseAlias + 'Flag\\n';\r\n            prefix += '#define ' + TextureAttribute_1.TextureAttribute.DiffuseAlias + 'Coord texCoords0\\n'; // FIXME implement UV mapping\r\n        }\r\n        if ((attributesMask & TextureAttribute_1.TextureAttribute.Specular) === TextureAttribute_1.TextureAttribute.Specular) {\r\n            prefix += '#define ' + TextureAttribute_1.TextureAttribute.SpecularAlias + 'Flag\\n';\r\n            prefix += '#define ' + TextureAttribute_1.TextureAttribute.SpecularAlias + 'Coord texCoords0\\n'; // FIXME implement UV mapping\r\n        }\r\n        if ((attributesMask & TextureAttribute_1.TextureAttribute.Normal) === TextureAttribute_1.TextureAttribute.Normal) {\r\n            prefix += '#define ' + TextureAttribute_1.TextureAttribute.NormalAlias + 'Flag\\n';\r\n            prefix += '#define ' + TextureAttribute_1.TextureAttribute.NormalAlias + 'Coord texCoords0\\n'; // FIXME implement UV mapping\r\n        }\r\n        if ((attributesMask & TextureAttribute_1.TextureAttribute.Emissive) === TextureAttribute_1.TextureAttribute.Emissive) {\r\n            prefix += '#define ' + TextureAttribute_1.TextureAttribute.EmissiveAlias + 'Flag\\n';\r\n            prefix += '#define ' + TextureAttribute_1.TextureAttribute.EmissiveAlias + 'Coord texCoords0\\n'; // FIXME implement UV mapping\r\n        }\r\n        if ((attributesMask & TextureAttribute_1.TextureAttribute.Reflection) === TextureAttribute_1.TextureAttribute.Reflection) {\r\n            prefix += '#define ' + TextureAttribute_1.TextureAttribute.ReflectionAlias + 'Flag\\n';\r\n            prefix += '#define ' + TextureAttribute_1.TextureAttribute.ReflectionAlias + 'Coord texCoords0\\n'; // FIXME implement UV mapping\r\n        }\r\n        if ((attributesMask & TextureAttribute_1.TextureAttribute.Ambient) === TextureAttribute_1.TextureAttribute.Ambient) {\r\n            prefix += '#define ' + TextureAttribute_1.TextureAttribute.AmbientAlias + 'Flag\\n';\r\n            prefix += '#define ' + TextureAttribute_1.TextureAttribute.AmbientAlias + 'Coord texCoords0\\n'; // FIXME implement UV mapping\r\n        }\r\n        if ((attributesMask & ColorAttribute_1.ColorAttribute3D.Diffuse) === ColorAttribute_1.ColorAttribute3D.Diffuse)\r\n            prefix += '#define ' + ColorAttribute_1.ColorAttribute3D.DiffuseAlias + 'Flag\\n';\r\n        if ((attributesMask & ColorAttribute_1.ColorAttribute3D.Specular) === ColorAttribute_1.ColorAttribute3D.Specular)\r\n            prefix += '#define ' + ColorAttribute_1.ColorAttribute3D.SpecularAlias + 'Flag\\n';\r\n        if ((attributesMask & ColorAttribute_1.ColorAttribute3D.Emissive) === ColorAttribute_1.ColorAttribute3D.Emissive)\r\n            prefix += '#define ' + ColorAttribute_1.ColorAttribute3D.EmissiveAlias + 'Flag\\n';\r\n        if ((attributesMask & ColorAttribute_1.ColorAttribute3D.Reflection) === ColorAttribute_1.ColorAttribute3D.Reflection)\r\n            prefix += '#define ' + ColorAttribute_1.ColorAttribute3D.ReflectionAlias + 'Flag\\n';\r\n        if ((attributesMask & FloatAttribute_1.FloatAttribute.Shininess) === FloatAttribute_1.FloatAttribute.Shininess)\r\n            prefix += '#define ' + FloatAttribute_1.FloatAttribute.ShininessAlias + 'Flag\\n';\r\n        if ((attributesMask & FloatAttribute_1.FloatAttribute.AlphaTest) === FloatAttribute_1.FloatAttribute.AlphaTest)\r\n            prefix += '#define ' + FloatAttribute_1.FloatAttribute.AlphaTestAlias + 'Flag\\n';\r\n        if (!!renderable.bones && config.numBones > 0)\r\n            prefix += '#define numBones ' + config.numBones + '\\n';\r\n        return prefix;\r\n    }\r\n    canRender(renderable) {\r\n        if (!!renderable.bones && renderable.bones.length > this.config.numBones)\r\n            return false;\r\n        const renderableMask = DefaultShader.combineAttributeMasks(renderable);\r\n        return (this.attributesMask === (renderableMask | DefaultShader.optionalAttributes) &&\r\n            this.vertexMask === renderable.meshPart.mesh.getVertexAttributes().getMaskWithSizePacked() &&\r\n            !!renderable.environment === this.lighting);\r\n    }\r\n    begin(camera, context) {\r\n        super.begin(camera, context);\r\n        for (const dirLight of this.directionalLights)\r\n            dirLight.set(0, 0, 0, 0, -1, 0);\r\n        for (const pointLight of this.pointLights)\r\n            pointLight.setFromValue(0, 0, 0, 0, 0, 0, 0);\r\n        for (const spotLight of this.spotLights)\r\n            spotLight.setFromValue(0, 0, 0, 0, 0, 0, 0, -1, 0, 0, 1, 0);\r\n        this.lightsSet = false;\r\n        //if (this.has(this.u_time)) this.setF(this.u_time, (this.time += 0.0167));\r\n    }\r\n    renderWithCombinedAttributes(renderable, combinedAttributes) {\r\n        if (!combinedAttributes.has(BlendingAttribute_1.BlendingAttribute.Type))\r\n            this.context.setBlending(false, GL20_1.GL20.GL_SRC_ALPHA, GL20_1.GL20.GL_ONE_MINUS_SRC_ALPHA);\r\n        this.bindMaterial(combinedAttributes);\r\n        if (this.lighting)\r\n            this.bindLights(renderable, combinedAttributes);\r\n        super.renderWithCombinedAttributes(renderable, combinedAttributes);\r\n    }\r\n    end() {\r\n        super.end();\r\n    }\r\n    bindMaterial(attributes) {\r\n        let cullFace = this.config.defaultCullFace === -1 ? DefaultShader.defaultCullFace : this.config.defaultCullFace;\r\n        const depthFunc = this.config.defaultDepthFunc === -1 ? DefaultShader.defaultDepthFunc : this.config.defaultDepthFunc;\r\n        const depthRangeNear = 0;\r\n        const depthRangeFar = 1;\r\n        const depthMask = true;\r\n        for (const attr of attributes.getAttributes()) {\r\n            const t = attr.type;\r\n            if (BlendingAttribute_1.BlendingAttribute.is(t)) {\r\n                this.context.setBlending(true, attr.sourceFunction, attr.destFunction);\r\n                this.setF(this.u_opacity, attr.opacity);\r\n            }\r\n            else if ((t & IntAttribute_1.IntAttribute.CullFace) === IntAttribute_1.IntAttribute.CullFace)\r\n                cullFace = attr.value;\r\n            else if ((t & FloatAttribute_1.FloatAttribute.AlphaTest) === FloatAttribute_1.FloatAttribute.AlphaTest)\r\n                this.setF(this.u_alphaTest, attr.value);\r\n            // else if ((t & DepthTestAttribute.Type) === DepthTestAttribute.Type) {\r\n            //     DepthTestAttribute dta = (DepthTestAttribute)attr;\r\n            //     depthFunc = dta.depthFunc;\r\n            //     depthRangeNear = dta.depthRangeNear;\r\n            //     depthRangeFar = dta.depthRangeFar;\r\n            //     depthMask = dta.depthMask;\r\n            // }\r\n            else if (!this.config.ignoreUnimplemented)\r\n                throw new Error('Unknown material attribute: ' + attr.toString());\r\n        }\r\n        this.context.setCullFace(cullFace);\r\n        this.context.setDepthTest(depthFunc, depthRangeNear, depthRangeFar);\r\n        this.context.setDepthMask(depthMask);\r\n    }\r\n    bindLights(renderable, attributes) {\r\n        const dla = attributes.get(DirectionalLightsAttribute_1.DirectionalLightsAttribute.Type);\r\n        const dirs = !dla ? null : dla.lights;\r\n        const pla = attributes.get(PointLightAttribute_1.PointLightsAttribute.Type);\r\n        const points = !pla ? null : pla.lights;\r\n        const sla = attributes.get(SpotLightAttribute_1.SpotLightsAttribute.Type);\r\n        const spots = !sla ? null : sla.lights;\r\n        if (this.dirLightsLoc >= 0) {\r\n            for (let i = 0; i < this.directionalLights.length; i++) {\r\n                if (!dirs || i >= dirs.length) {\r\n                    if (this.lightsSet &&\r\n                        this.directionalLights[i].color.r === 0 &&\r\n                        this.directionalLights[i].color.g === 0 &&\r\n                        this.directionalLights[i].color.b === 0)\r\n                        continue;\r\n                    this.directionalLights[i].color.set(0, 0, 0, 1);\r\n                }\r\n                else if (this.lightsSet && this.directionalLights[i].equals(dirs[i])) {\r\n                    continue;\r\n                }\r\n                else\r\n                    this.directionalLights[i].setFrom(dirs[i].color, dirs[i].direction);\r\n                const idx = this.dirLightsLoc + i * this.dirLightsSize;\r\n                this.program.setUniform3fWithLocation(this.lightLocs[idx + this.dirLightsColorOffset], this.directionalLights[i].color.r, this.directionalLights[i].color.g, this.directionalLights[i].color.b);\r\n                this.program.setUniform3fWithLocation(this.lightLocs[idx + this.dirLightsDirectionOffset], this.directionalLights[i].direction.x, this.directionalLights[i].direction.y, this.directionalLights[i].direction.z);\r\n                if (this.dirLightsSize <= 0)\r\n                    break;\r\n            }\r\n        }\r\n        if (this.pointLightsLoc >= 0) {\r\n            for (let i = 0; i < this.pointLights.length; i++) {\r\n                if (!points || i >= points.length) {\r\n                    if (this.lightsSet && this.pointLights[i].intensity === 0)\r\n                        continue;\r\n                    this.pointLights[i].intensity = 0;\r\n                }\r\n                else if (this.lightsSet && this.pointLights[i].equals(points[i]))\r\n                    continue;\r\n                else\r\n                    this.pointLights[i].setFrom(points[i]);\r\n                let idx = this.pointLightsLoc + i * this.pointLightsSize;\r\n                this.program.setUniform3fWithLocation(this.lightLocs[idx + this.pointLightsColorOffset], this.pointLights[i].color.r * this.pointLights[i].intensity, this.pointLights[i].color.g * this.pointLights[i].intensity, this.pointLights[i].color.b * this.pointLights[i].intensity);\r\n                this.program.setUniform3fWithLocation(this.lightLocs[idx + this.pointLightsPositionOffset], this.pointLights[i].position.x, this.pointLights[i].position.y, this.pointLights[i].position.z);\r\n                if (this.pointLightsIntensityOffset >= 0)\r\n                    this.program.setUniform1fWithLocation(this.lightLocs[idx + this.pointLightsIntensityOffset], this.pointLights[i].intensity);\r\n                if (this.pointLightsSize <= 0)\r\n                    break;\r\n            }\r\n        }\r\n        if (this.spotLightsLoc >= 0) {\r\n            for (let i = 0; i < this.spotLights.length; i++) {\r\n                if (!spots || i >= spots.length) {\r\n                    if (this.lightsSet && this.spotLights[i].intensity === 0)\r\n                        continue;\r\n                    this.spotLights[i].intensity = 0;\r\n                }\r\n                else if (this.lightsSet && this.spotLights[i].equals(spots[i]))\r\n                    continue;\r\n                else\r\n                    this.spotLights[i].setFrom(spots[i]);\r\n                let idx = this.spotLightsLoc + i * this.spotLightsSize;\r\n                this.program.setUniform3fWithLocation(this.lightLocs[idx + this.spotLightsColorOffset], this.spotLights[i].color.r * this.spotLights[i].intensity, this.spotLights[i].color.g * this.spotLights[i].intensity, this.spotLights[i].color.b * this.spotLights[i].intensity);\r\n                this.program.setUniform3fWithLocation(this.lightLocs[idx + this.spotLightsPositionOffset], this.spotLights[i].position.x, this.spotLights[i].position.y, this.spotLights[i].position.z);\r\n                this.program.setUniform3fWithLocation(this.lightLocs[idx + this.spotLightsDirectionOffset], this.spotLights[i].direction.x, this.spotLights[i].direction.y, this.spotLights[i].direction.z);\r\n                this.program.setUniform1fWithLocation(this.lightLocs[idx + this.spotLightsCutoffAngleOffset], this.spotLights[i].cutoffAngle);\r\n                this.program.setUniform1fWithLocation(this.lightLocs[idx + this.spotLightsExponentOffset], this.spotLights[i].exponent);\r\n                if (this.spotLightsIntensityOffset >= 0)\r\n                    this.program.setUniform1fWithLocation(this.lightLocs[idx + this.spotLightsIntensityOffset], this.spotLights[i].intensity);\r\n                if (this.spotLightsSize <= 0)\r\n                    break;\r\n            }\r\n        }\r\n        // if (attributes.has(ColorAttribute.Fog)) {\r\n        //     set(u_fogColor, (attributes.get(ColorAttribute.Fog) as ColorAttribute).color);\r\n        // }\r\n        // if (lights !== null && lights.shadowMap !== null) {\r\n        //     set(u_shadowMapProjViewTrans, lights.shadowMap.getProjViewTrans());\r\n        //     set(u_shadowTexture, lights.shadowMap.getDepthMap());\r\n        //     set(u_shadowPCFOffset, 1 / (2 * lights.shadowMap.getDepthMap().texture.getWidth()));\r\n        // }\r\n        this.lightsSet = true;\r\n    }\r\n    getLightLoc(inputID) {\r\n        const loc = this.loc(inputID);\r\n        const index = this.lightLocs.indexOf(loc);\r\n        if (!loc)\r\n            return -1;\r\n        if (index < 0) {\r\n            this.lightLocs.push(loc);\r\n            return this.lightLocs.length - 1;\r\n        }\r\n        else {\r\n            return index;\r\n        }\r\n    }\r\n    dispose() {\r\n        this.program.dispose();\r\n        super.dispose();\r\n    }\r\n    getDefaultCullFace() {\r\n        return this.config.defaultCullFace === -1 ? DefaultShader.defaultCullFace : this.config.defaultCullFace;\r\n    }\r\n    setDefaultCullFace(cullFace) {\r\n        this.config.defaultCullFace = cullFace;\r\n    }\r\n    getDefaultDepthFunc() {\r\n        return this.config.defaultDepthFunc === -1 ? DefaultShader.defaultDepthFunc : this.config.defaultDepthFunc;\r\n    }\r\n    setDefaultDepthFunc(depthFunc) {\r\n        this.config.defaultDepthFunc = depthFunc;\r\n    }\r\n}\r\nexports.DefaultShader = DefaultShader;\r\nDefaultShader.defaultVertexShader = `\r\n  #if defined(diffuseTextureFlag) || defined(specularTextureFlag) || defined(emissiveTextureFlag)\r\n  #define textureFlag\r\n  #endif\r\n\r\n  #if defined(specularTextureFlag) || defined(specularColorFlag)\r\n  #define specularFlag\r\n  #endif\r\n\r\n  #if defined(specularFlag) || defined(fogFlag)\r\n  #define cameraPositionFlag\r\n  #endif\r\n\r\n  attribute vec3 a_position;\r\n  uniform mat4 u_projViewTrans;\r\n\r\n  #if defined(colorFlag)\r\n  varying vec4 v_color;\r\n  attribute vec4 a_color;\r\n  #endif // colorFlag\r\n\r\n  #ifdef normalFlag\r\n  attribute vec3 a_normal;\r\n  uniform mat3 u_normalMatrix;\r\n  varying vec3 v_normal;\r\n  #endif // normalFlag\r\n\r\n  #ifdef textureFlag\r\n  attribute vec2 a_texCoords0;\r\n  #endif // textureFlag\r\n\r\n  #ifdef diffuseTextureFlag\r\n  uniform vec4 u_diffuseUVTransform;\r\n  varying vec2 v_diffuseUV;\r\n  #endif\r\n\r\n  #ifdef emissiveTextureFlag\r\n  uniform vec4 u_emissiveUVTransform;\r\n  varying vec2 v_emissiveUV;\r\n  #endif\r\n\r\n  #ifdef specularTextureFlag\r\n  uniform vec4 u_specularUVTransform;\r\n  varying vec2 v_specularUV;\r\n  #endif\r\n\r\n  #ifdef boneWeight0Flag\r\n  #define boneWeightsFlag\r\n  attribute vec2 a_boneWeight0;\r\n  #endif //boneWeight0Flag\r\n\r\n  #ifdef boneWeight1Flag\r\n  #ifndef boneWeightsFlag\r\n  #define boneWeightsFlag\r\n  #endif\r\n  attribute vec2 a_boneWeight1;\r\n  #endif //boneWeight1Flag\r\n\r\n  #ifdef boneWeight2Flag\r\n  #ifndef boneWeightsFlag\r\n  #define boneWeightsFlag\r\n  #endif\r\n  attribute vec2 a_boneWeight2;\r\n  #endif //boneWeight2Flag\r\n\r\n  #ifdef boneWeight3Flag\r\n  #ifndef boneWeightsFlag\r\n  #define boneWeightsFlag\r\n  #endif\r\n  attribute vec2 a_boneWeight3;\r\n  #endif //boneWeight3Flag\r\n\r\n  #ifdef boneWeight4Flag\r\n  #ifndef boneWeightsFlag\r\n  #define boneWeightsFlag\r\n  #endif\r\n  attribute vec2 a_boneWeight4;\r\n  #endif //boneWeight4Flag\r\n\r\n  #ifdef boneWeight5Flag\r\n  #ifndef boneWeightsFlag\r\n  #define boneWeightsFlag\r\n  #endif\r\n  attribute vec2 a_boneWeight5;\r\n  #endif //boneWeight5Flag\r\n\r\n  #ifdef boneWeight6Flag\r\n  #ifndef boneWeightsFlag\r\n  #define boneWeightsFlag\r\n  #endif\r\n  attribute vec2 a_boneWeight6;\r\n  #endif //boneWeight6Flag\r\n\r\n  #ifdef boneWeight7Flag\r\n  #ifndef boneWeightsFlag\r\n  #define boneWeightsFlag\r\n  #endif\r\n  attribute vec2 a_boneWeight7;\r\n  #endif //boneWeight7Flag\r\n\r\n  #if defined(numBones) && defined(boneWeightsFlag)\r\n  #if (numBones > 0) \r\n  #define skinningFlag\r\n  #endif\r\n  #endif\r\n\r\n  uniform mat4 u_worldTrans;\r\n\r\n  #if defined(numBones)\r\n  #if numBones > 0\r\n  uniform mat4 u_bones[numBones];\r\n  #endif //numBones\r\n  #endif\r\n\r\n  #ifdef shininessFlag\r\n  uniform float u_shininess;\r\n  #else\r\n  const float u_shininess = 20.0;\r\n  #endif // shininessFlag\r\n\r\n  #ifdef blendedFlag\r\n  uniform float u_opacity;\r\n  varying float v_opacity;\r\n\r\n  #ifdef alphaTestFlag\r\n  uniform float u_alphaTest;\r\n  varying float v_alphaTest;\r\n  #endif //alphaTestFlag\r\n  #endif // blendedFlag\r\n\r\n  #ifdef lightingFlag\r\n  varying vec3 v_lightDiffuse;\r\n\r\n  #ifdef ambientLightFlag\r\n  uniform vec3 u_ambientLight;\r\n  #endif // ambientLightFlag\r\n\r\n  #ifdef ambientCubemapFlag\r\n  uniform vec3 u_ambientCubemap[6];\r\n  #endif // ambientCubemapFlag \r\n\r\n  #ifdef sphericalHarmonicsFlag\r\n  uniform vec3 u_sphericalHarmonics[9];\r\n  #endif //sphericalHarmonicsFlag\r\n\r\n  #ifdef specularFlag\r\n  varying vec3 v_lightSpecular;\r\n  #endif // specularFlag\r\n\r\n  #ifdef cameraPositionFlag\r\n  uniform vec4 u_cameraPosition;\r\n  #endif // cameraPositionFlag\r\n\r\n  #ifdef fogFlag\r\n  varying float v_fog;\r\n  #endif // fogFlag\r\n\r\n\r\n  #if numDirectionalLights > 0\r\n  struct DirectionalLight\r\n  {\r\n    vec3 color;\r\n    vec3 direction;\r\n  };\r\n  uniform DirectionalLight u_dirLights[numDirectionalLights];\r\n  #endif // numDirectionalLights\r\n\r\n  #if numPointLights > 0\r\n  struct PointLight\r\n  {\r\n    vec3 color;\r\n    vec3 position;\r\n  };\r\n  uniform PointLight u_pointLights[numPointLights];\r\n  #endif // numPointLights\r\n\r\n  #if\tdefined(ambientLightFlag) || defined(ambientCubemapFlag) || defined(sphericalHarmonicsFlag)\r\n  #define ambientFlag\r\n  #endif //ambientFlag\r\n\r\n  #ifdef shadowMapFlag\r\n  uniform mat4 u_shadowMapProjViewTrans;\r\n  varying vec3 v_shadowMapUv;\r\n  #define separateAmbientFlag\r\n  #endif //shadowMapFlag\r\n\r\n  #if defined(ambientFlag) && defined(separateAmbientFlag)\r\n  varying vec3 v_ambientLight;\r\n  #endif //separateAmbientFlag\r\n\r\n  #endif // lightingFlag\r\n\r\n  void main() {\r\n    #ifdef diffuseTextureFlag\r\n      v_diffuseUV = u_diffuseUVTransform.xy + a_texCoords0 * u_diffuseUVTransform.zw;\r\n    #endif //diffuseTextureFlag\r\n    \r\n    #ifdef emissiveTextureFlag\r\n      v_emissiveUV = u_emissiveUVTransform.xy + a_texCoords0 * u_emissiveUVTransform.zw;\r\n    #endif //emissiveTextureFlag\r\n\r\n    #ifdef specularTextureFlag\r\n      v_specularUV = u_specularUVTransform.xy + a_texCoords0 * u_specularUVTransform.zw;\r\n    #endif //specularTextureFlag\r\n    \r\n    #if defined(colorFlag)\r\n      v_color = a_color;\r\n    #endif // colorFlag\r\n      \r\n    #ifdef blendedFlag\r\n      v_opacity = u_opacity;\r\n      #ifdef alphaTestFlag\r\n        v_alphaTest = u_alphaTest;\r\n      #endif //alphaTestFlag\r\n    #endif // blendedFlag\r\n    \r\n    #ifdef skinningFlag\r\n      mat4 skinning = mat4(0.0);\r\n      #ifdef boneWeight0Flag\r\n        skinning += (a_boneWeight0.y) * u_bones[int(a_boneWeight0.x)];\r\n      #endif //boneWeight0Flag\r\n      #ifdef boneWeight1Flag\t\t\t\t\r\n        skinning += (a_boneWeight1.y) * u_bones[int(a_boneWeight1.x)];\r\n      #endif //boneWeight1Flag\r\n      #ifdef boneWeight2Flag\t\t\r\n        skinning += (a_boneWeight2.y) * u_bones[int(a_boneWeight2.x)];\r\n      #endif //boneWeight2Flag\r\n      #ifdef boneWeight3Flag\r\n        skinning += (a_boneWeight3.y) * u_bones[int(a_boneWeight3.x)];\r\n      #endif //boneWeight3Flag\r\n      #ifdef boneWeight4Flag\r\n        skinning += (a_boneWeight4.y) * u_bones[int(a_boneWeight4.x)];\r\n      #endif //boneWeight4Flag\r\n      #ifdef boneWeight5Flag\r\n        skinning += (a_boneWeight5.y) * u_bones[int(a_boneWeight5.x)];\r\n      #endif //boneWeight5Flag\r\n      #ifdef boneWeight6Flag\r\n        skinning += (a_boneWeight6.y) * u_bones[int(a_boneWeight6.x)];\r\n      #endif //boneWeight6Flag\r\n      #ifdef boneWeight7Flag\r\n        skinning += (a_boneWeight7.y) * u_bones[int(a_boneWeight7.x)];\r\n      #endif //boneWeight7Flag\r\n    #endif //skinningFlag\r\n\r\n    #ifdef skinningFlag\r\n      vec4 pos = u_worldTrans * skinning * vec4(a_position, 1.0);\r\n    #else\r\n      vec4 pos = u_worldTrans * vec4(a_position, 1.0);\r\n    #endif\r\n      \r\n    gl_Position = u_projViewTrans * pos;\r\n      \r\n    #ifdef shadowMapFlag\r\n      vec4 spos = u_shadowMapProjViewTrans * pos;\r\n      v_shadowMapUv.xyz = (spos.xyz / spos.w) * 0.5 + 0.5;\r\n      v_shadowMapUv.z = min(v_shadowMapUv.z, 0.998);\r\n    #endif //shadowMapFlag\r\n    \r\n    #if defined(normalFlag)\r\n      #if defined(skinningFlag)\r\n        vec3 normal = normalize((u_worldTrans * skinning * vec4(a_normal, 0.0)).xyz);\r\n      #else\r\n        vec3 normal = normalize(u_normalMatrix * a_normal);\r\n      #endif\r\n      v_normal = normal;\r\n    #endif // normalFlag\r\n\r\n      #ifdef fogFlag\r\n          vec3 flen = u_cameraPosition.xyz - pos.xyz;\r\n          float fog = dot(flen, flen) * u_cameraPosition.w;\r\n          v_fog = min(fog, 1.0);\r\n      #endif\r\n\r\n    #ifdef lightingFlag\r\n      #if\tdefined(ambientLightFlag)\r\n            vec3 ambientLight = u_ambientLight;\r\n      #elif defined(ambientFlag)\r\n            vec3 ambientLight = vec3(0.0);\r\n      #endif\r\n        \r\n      #ifdef ambientCubemapFlag \t\t\r\n        vec3 squaredNormal = normal * normal;\r\n        vec3 isPositive  = step(0.0, normal);\r\n        ambientLight += squaredNormal.x * mix(u_ambientCubemap[0], u_ambientCubemap[1], isPositive.x) +\r\n            squaredNormal.y * mix(u_ambientCubemap[2], u_ambientCubemap[3], isPositive.y) +\r\n            squaredNormal.z * mix(u_ambientCubemap[4], u_ambientCubemap[5], isPositive.z);\r\n      #endif // ambientCubemapFlag\r\n\r\n      #ifdef sphericalHarmonicsFlag\r\n        ambientLight += u_sphericalHarmonics[0];\r\n        ambientLight += u_sphericalHarmonics[1] * normal.x;\r\n        ambientLight += u_sphericalHarmonics[2] * normal.y;\r\n        ambientLight += u_sphericalHarmonics[3] * normal.z;\r\n        ambientLight += u_sphericalHarmonics[4] * (normal.x * normal.z);\r\n        ambientLight += u_sphericalHarmonics[5] * (normal.z * normal.y);\r\n        ambientLight += u_sphericalHarmonics[6] * (normal.y * normal.x);\r\n        ambientLight += u_sphericalHarmonics[7] * (3.0 * normal.z * normal.z - 1.0);\r\n        ambientLight += u_sphericalHarmonics[8] * (normal.x * normal.x - normal.y * normal.y);\t\t\t\r\n      #endif // sphericalHarmonicsFlag\r\n\r\n      #ifdef ambientFlag\r\n        #ifdef separateAmbientFlag\r\n          v_ambientLight = ambientLight;\r\n          v_lightDiffuse = vec3(0.0);\r\n        #else\r\n          v_lightDiffuse = ambientLight;\r\n        #endif //separateAmbientFlag\r\n      #else\r\n            v_lightDiffuse = vec3(0.0);\r\n      #endif //ambientFlag\r\n\r\n        \r\n      #ifdef specularFlag\r\n        v_lightSpecular = vec3(0.0);\r\n        vec3 viewVec = normalize(u_cameraPosition.xyz - pos.xyz);\r\n      #endif // specularFlag\r\n        \r\n      #if (numDirectionalLights > 0) && defined(normalFlag)\r\n        for (int i = 0; i < numDirectionalLights; i++) {\r\n          vec3 lightDir = -u_dirLights[i].direction;\r\n          float NdotL = clamp(dot(normal, lightDir), 0.0, 1.0);\r\n          vec3 value = u_dirLights[i].color * NdotL;\r\n          v_lightDiffuse += value;\r\n          #ifdef specularFlag\r\n            float halfDotView = max(0.0, dot(normal, normalize(lightDir + viewVec)));\r\n            v_lightSpecular += value * pow(halfDotView, u_shininess);\r\n          #endif // specularFlag\r\n        }\r\n      #endif // numDirectionalLights\r\n\r\n      #if (numPointLights > 0) && defined(normalFlag)\r\n        for (int i = 0; i < numPointLights; i++) {\r\n          vec3 lightDir = u_pointLights[i].position - pos.xyz;\r\n          float dist2 = dot(lightDir, lightDir);\r\n          lightDir *= inversesqrt(dist2);\r\n          float NdotL = clamp(dot(normal, lightDir), 0.0, 1.0);\r\n          vec3 value = u_pointLights[i].color * (NdotL / (1.0 + dist2));\r\n          v_lightDiffuse += value;\r\n          #ifdef specularFlag\r\n            float halfDotView = max(0.0, dot(normal, normalize(lightDir + viewVec)));\r\n            v_lightSpecular += value * pow(halfDotView, u_shininess);\r\n          #endif // specularFlag\r\n        }\r\n      #endif // numPointLights\r\n    #endif // lightingFlag\r\n  }\r\n  `;\r\nDefaultShader.defaultFragmentShader = `\r\n  #ifdef GL_ES\r\n  #define LOWP lowp\r\n  #define MED mediump\r\n  #define HIGH highp\r\n  precision mediump float;\r\n  #else\r\n  #define MED\r\n  #define LOWP\r\n  #define HIGH\r\n  #endif\r\n\r\n  #if defined(specularTextureFlag) || defined(specularColorFlag)\r\n  #define specularFlag\r\n  #endif\r\n\r\n  #ifdef normalFlag\r\n  varying vec3 v_normal;\r\n  #endif //normalFlag\r\n\r\n  #if defined(colorFlag)\r\n  varying vec4 v_color;\r\n  #endif\r\n\r\n  #ifdef blendedFlag\r\n  varying float v_opacity;\r\n  #ifdef alphaTestFlag\r\n  varying float v_alphaTest;\r\n  #endif //alphaTestFlag\r\n  #endif //blendedFlag\r\n\r\n  #if defined(diffuseTextureFlag) || defined(specularTextureFlag) || defined(emissiveTextureFlag)\r\n  #define textureFlag\r\n  #endif\r\n\r\n  #ifdef diffuseTextureFlag\r\n  varying MED vec2 v_diffuseUV;\r\n  #endif\r\n\r\n  #ifdef specularTextureFlag\r\n  varying MED vec2 v_specularUV;\r\n  #endif\r\n\r\n  #ifdef emissiveTextureFlag\r\n  varying MED vec2 v_emissiveUV;\r\n  #endif\r\n\r\n  #ifdef diffuseColorFlag\r\n  uniform vec4 u_diffuseColor;\r\n  #endif\r\n\r\n  #ifdef diffuseTextureFlag\r\n  uniform sampler2D u_diffuseTexture;\r\n  #endif\r\n\r\n  #ifdef specularColorFlag\r\n  uniform vec4 u_specularColor;\r\n  #endif\r\n\r\n  #ifdef specularTextureFlag\r\n  uniform sampler2D u_specularTexture;\r\n  #endif\r\n\r\n  #ifdef normalTextureFlag\r\n  uniform sampler2D u_normalTexture;\r\n  #endif\r\n\r\n  #ifdef emissiveColorFlag\r\n  uniform vec4 u_emissiveColor;\r\n  #endif\r\n\r\n  #ifdef emissiveTextureFlag\r\n  uniform sampler2D u_emissiveTexture;\r\n  #endif\r\n\r\n  #ifdef lightingFlag\r\n  varying vec3 v_lightDiffuse;\r\n\r\n  #if\tdefined(ambientLightFlag) || defined(ambientCubemapFlag) || defined(sphericalHarmonicsFlag)\r\n  #define ambientFlag\r\n  #endif //ambientFlag\r\n\r\n  #ifdef specularFlag\r\n  varying vec3 v_lightSpecular;\r\n  #endif //specularFlag\r\n\r\n  #ifdef shadowMapFlag\r\n  uniform sampler2D u_shadowTexture;\r\n  uniform float u_shadowPCFOffset;\r\n  varying vec3 v_shadowMapUv;\r\n  #define separateAmbientFlag\r\n\r\n  float getShadowness(vec2 offset)\r\n  {\r\n      const vec4 bitShifts = vec4(1.0, 1.0 / 255.0, 1.0 / 65025.0, 1.0 / 16581375.0);\r\n      return step(v_shadowMapUv.z, dot(texture2D(u_shadowTexture, v_shadowMapUv.xy + offset), bitShifts));//+(1.0/255.0));\r\n  }\r\n\r\n  float getShadow()\r\n  {\r\n    return (//getShadowness(vec2(0,0)) +\r\n        getShadowness(vec2(u_shadowPCFOffset, u_shadowPCFOffset)) +\r\n        getShadowness(vec2(-u_shadowPCFOffset, u_shadowPCFOffset)) +\r\n        getShadowness(vec2(u_shadowPCFOffset, -u_shadowPCFOffset)) +\r\n        getShadowness(vec2(-u_shadowPCFOffset, -u_shadowPCFOffset))) * 0.25;\r\n  }\r\n  #endif //shadowMapFlag\r\n\r\n  #if defined(ambientFlag) && defined(separateAmbientFlag)\r\n  varying vec3 v_ambientLight;\r\n  #endif //separateAmbientFlag\r\n\r\n  #endif //lightingFlag\r\n\r\n  #ifdef fogFlag\r\n  uniform vec4 u_fogColor;\r\n  varying float v_fog;\r\n  #endif // fogFlag\r\n\r\n  void main() {\r\n    #if defined(normalFlag)\r\n      vec3 normal = v_normal;\r\n    #endif // normalFlag\r\n\r\n    #if defined(diffuseTextureFlag) && defined(diffuseColorFlag) && defined(colorFlag)\r\n      vec4 diffuse = texture2D(u_diffuseTexture, v_diffuseUV) * u_diffuseColor * v_color;\r\n    #elif defined(diffuseTextureFlag) && defined(diffuseColorFlag)\r\n      vec4 diffuse = texture2D(u_diffuseTexture, v_diffuseUV) * u_diffuseColor;\r\n    #elif defined(diffuseTextureFlag) && defined(colorFlag)\r\n      vec4 diffuse = texture2D(u_diffuseTexture, v_diffuseUV) * v_color;\r\n    #elif defined(diffuseTextureFlag)\r\n      vec4 diffuse = texture2D(u_diffuseTexture, v_diffuseUV);\r\n    #elif defined(diffuseColorFlag) && defined(colorFlag)\r\n      vec4 diffuse = u_diffuseColor * v_color;\r\n    #elif defined(diffuseColorFlag)\r\n      vec4 diffuse = u_diffuseColor;\r\n    #elif defined(colorFlag)\r\n      vec4 diffuse = v_color;\r\n    #else\r\n      vec4 diffuse = vec4(1.0);\r\n    #endif\r\n\r\n    #if defined(emissiveTextureFlag) && defined(emissiveColorFlag)\r\n      vec4 emissive = texture2D(u_emissiveTexture, v_emissiveUV) * u_emissiveColor;\r\n    #elif defined(emissiveTextureFlag)\r\n      vec4 emissive = texture2D(u_emissiveTexture, v_emissiveUV);\r\n    #elif defined(emissiveColorFlag)\r\n      vec4 emissive = u_emissiveColor;\r\n    #else\r\n      vec4 emissive = vec4(0.0);\r\n    #endif\r\n\r\n    #if (!defined(lightingFlag))\r\n      gl_FragColor.rgb = diffuse.rgb + emissive.rgb;\r\n    #elif (!defined(specularFlag))\r\n      #if defined(ambientFlag) && defined(separateAmbientFlag)\r\n        #ifdef shadowMapFlag\r\n          gl_FragColor.rgb = (diffuse.rgb * (v_ambientLight + getShadow() * v_lightDiffuse)) + emissive.rgb;\r\n          //gl_FragColor.rgb = texture2D(u_shadowTexture, v_shadowMapUv.xy);\r\n        #else\r\n          gl_FragColor.rgb = (diffuse.rgb * (v_ambientLight + v_lightDiffuse)) + emissive.rgb;\r\n        #endif //shadowMapFlag\r\n      #else\r\n        #ifdef shadowMapFlag\r\n          gl_FragColor.rgb = getShadow() * (diffuse.rgb * v_lightDiffuse) + emissive.rgb;\r\n        #else\r\n          gl_FragColor.rgb = (diffuse.rgb * v_lightDiffuse) + emissive.rgb;\r\n        #endif //shadowMapFlag\r\n      #endif\r\n    #else\r\n      #if defined(specularTextureFlag) && defined(specularColorFlag)\r\n        vec3 specular = texture2D(u_specularTexture, v_specularUV).rgb * u_specularColor.rgb * v_lightSpecular;\r\n      #elif defined(specularTextureFlag)\r\n        vec3 specular = texture2D(u_specularTexture, v_specularUV).rgb * v_lightSpecular;\r\n      #elif defined(specularColorFlag)\r\n        vec3 specular = u_specularColor.rgb * v_lightSpecular;\r\n      #else\r\n        vec3 specular = v_lightSpecular;\r\n      #endif\r\n\r\n      #if defined(ambientFlag) && defined(separateAmbientFlag)\r\n        #ifdef shadowMapFlag\r\n        gl_FragColor.rgb = (diffuse.rgb * (getShadow() * v_lightDiffuse + v_ambientLight)) + specular + emissive.rgb;\r\n          //gl_FragColor.rgb = texture2D(u_shadowTexture, v_shadowMapUv.xy);\r\n        #else\r\n          gl_FragColor.rgb = (diffuse.rgb * (v_lightDiffuse + v_ambientLight)) + specular + emissive.rgb;\r\n        #endif //shadowMapFlag\r\n      #else\r\n        #ifdef shadowMapFlag\r\n          gl_FragColor.rgb = getShadow() * ((diffuse.rgb * v_lightDiffuse) + specular) + emissive.rgb;\r\n        #else\r\n          gl_FragColor.rgb = (diffuse.rgb * v_lightDiffuse) + specular + emissive.rgb;\r\n        #endif //shadowMapFlag\r\n      #endif\r\n    #endif //lightingFlag\r\n\r\n    #ifdef fogFlag\r\n      gl_FragColor.rgb = mix(gl_FragColor.rgb, u_fogColor.rgb, v_fog);\r\n    #endif // end fogFlag\r\n\r\n    #ifdef blendedFlag\r\n      gl_FragColor.a = diffuse.a * v_opacity;\r\n      #ifdef alphaTestFlag\r\n        if (gl_FragColor.a <= v_alphaTest)\r\n          discard;\r\n      #endif\r\n    #else\r\n      gl_FragColor.a = 1.0;\r\n    #endif\r\n  }\r\n  `;\r\nDefaultShader.implementedFlags = BlendingAttribute_1.BlendingAttribute.Type |\r\n    TextureAttribute_1.TextureAttribute.Diffuse |\r\n    ColorAttribute_1.ColorAttribute3D.Diffuse |\r\n    ColorAttribute_1.ColorAttribute3D.Specular |\r\n    FloatAttribute_1.FloatAttribute.Shininess;\r\nDefaultShader.defaultCullFace = GL20_1.GL20.GL_BACK;\r\nDefaultShader.defaultDepthFunc = GL20_1.GL20.GL_LEQUAL;\r\n//private static optionalAttributes: number = IntAttribute.CullFace | DepthTestAttribute.Type;\r\nDefaultShader.optionalAttributes = IntAttribute_1.IntAttribute.CullFace;\r\nDefaultShader.tmpAttributes = new Attributes_1.Attributes();\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./BaseShader\"), exports);\r\n__exportStar(require(\"./DefaultShader\"), exports);\r\n__exportStar(require(\"./Shader3D\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AnimationController = exports.AnimationDesc = void 0;\r\nconst Utils_1 = require(\"../../Utils\");\r\nconst BaseAnimationController_1 = require(\"./BaseAnimationController\");\r\nclass AnimationDesc {\r\n    constructor() {\r\n        this.listener = null;\r\n        this.animation = null;\r\n        this.speed = 0;\r\n        this.time = 0;\r\n        this.offset = 0;\r\n        this.duration = 0;\r\n        this.loopCount = 0;\r\n    }\r\n    update(delta) {\r\n        if (this.loopCount !== 0 && !!this.animation) {\r\n            let loops;\r\n            const diff = this.speed * delta;\r\n            if (!Utils_1.MathUtils.isZero(this.duration)) {\r\n                this.time += diff;\r\n                if (this.speed < 0) {\r\n                    let invTime = this.duration - this.time;\r\n                    loops = Math.floor(Math.abs(invTime / this.duration));\r\n                    invTime = Math.abs(invTime % this.duration);\r\n                    this.time = this.duration - invTime;\r\n                }\r\n                else {\r\n                    loops = Math.floor(Math.abs(this.time / this.duration));\r\n                    this.time = Math.abs(this.time % this.duration);\r\n                }\r\n            }\r\n            else\r\n                loops = 1;\r\n            for (let i = 0; i < loops; i++) {\r\n                if (this.loopCount > 0)\r\n                    this.loopCount--;\r\n                if (this.loopCount !== 0 && !!this.listener)\r\n                    this.listener.onLoop(this);\r\n                if (this.loopCount === 0) {\r\n                    const result = (loops - 1 - i) * this.duration + (diff < 0 ? this.duration - this.time : this.time);\r\n                    this.time = diff < 0 ? 0 : this.duration;\r\n                    if (!!this.listener)\r\n                        this.listener.onEnd(this);\r\n                    return result;\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n        else\r\n            return delta;\r\n    }\r\n}\r\nexports.AnimationDesc = AnimationDesc;\r\nclass AnimationController extends BaseAnimationController_1.BaseAnimationController {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.animationPool = new Utils_1.Pool(() => {\r\n            return new AnimationDesc();\r\n        });\r\n        this.current = null;\r\n        this.queued = null;\r\n        this.queuedTransitionTime = 0;\r\n        this.previous = null;\r\n        this.transitionCurrentTime = 0;\r\n        this.transitionTargetTime = 0;\r\n        this.inAction = false;\r\n        this.paused = false;\r\n        this.allowSameAnimation = false;\r\n        this.justChangedAnimation = false;\r\n    }\r\n    obtainAnimation(anim, offset, duration, loopCount, speed, listener) {\r\n        if (!anim)\r\n            return null;\r\n        const result = this.animationPool.obtain();\r\n        result.animation = anim;\r\n        result.listener = listener;\r\n        result.loopCount = loopCount;\r\n        result.speed = speed;\r\n        result.offset = offset;\r\n        result.duration = duration < 0 ? anim.duration - offset : duration;\r\n        result.time = speed < 0 ? result.duration : 0;\r\n        return result;\r\n    }\r\n    obtain(id, offset, duration, loopCount, speed, listener) {\r\n        if (!id)\r\n            return null;\r\n        const anim = this.target.getAnimation(id);\r\n        if (!anim)\r\n            throw new Error('Unknown animation: ' + id);\r\n        return this.obtainAnimation(anim, offset, duration, loopCount, speed, listener);\r\n    }\r\n    obtainAnimationDesc(anim) {\r\n        return this.obtainAnimation(anim.animation, anim.offset, anim.duration, anim.loopCount, anim.speed, anim.listener);\r\n    }\r\n    update(delta) {\r\n        if (this.paused)\r\n            return;\r\n        if (!!this.previous && (this.transitionCurrentTime += delta) >= this.transitionTargetTime) {\r\n            this.removeAnimation(this.previous.animation);\r\n            this.justChangedAnimation = true;\r\n            this.animationPool.free(this.previous);\r\n            this.previous = null;\r\n        }\r\n        if (this.justChangedAnimation) {\r\n            this.target.calculateTransforms();\r\n            this.justChangedAnimation = false;\r\n        }\r\n        if (!this.current || this.current.loopCount === 0 || !this.current.animation)\r\n            return;\r\n        const remain = this.current.update(delta);\r\n        if (remain >= 0 && !!this.queued) {\r\n            this.inAction = false;\r\n            this.actionWithAnimationDesc(this.queued, this.queuedTransitionTime);\r\n            this.queued = null;\r\n            if (remain > 0)\r\n                this.update(remain);\r\n            return;\r\n        }\r\n        if (!!this.previous)\r\n            this.applyAnimations(this.previous.animation, this.previous.offset + this.previous.time, this.current.animation, this.current.offset + this.current.time, this.transitionCurrentTime / this.transitionTargetTime);\r\n        else\r\n            this.applyAnimation(this.current.animation, this.current.offset + this.current.time);\r\n    }\r\n    setAnimation(id, loopCount = 1, speed = 1, listener = null) {\r\n        return this.setAnimationWithOffset(id, 0, -1, loopCount, speed, listener);\r\n    }\r\n    setAnimationWithOffset(id, offset, duration, loopCount, speed, listener) {\r\n        return this.setAnimationWithAnimationDesc(this.obtain(id, offset, duration, loopCount, speed, listener));\r\n    }\r\n    setAnimationWithAnimation(anim, offset, duration, loopCount, speed, listener) {\r\n        return this.setAnimationWithAnimationDesc(this.obtainAnimation(anim, offset, duration, loopCount, speed, listener));\r\n    }\r\n    setAnimationWithAnimationDesc(anim) {\r\n        if (!this.current)\r\n            this.current = anim;\r\n        else {\r\n            if (!this.allowSameAnimation && !!anim && this.current.animation === anim.animation)\r\n                anim.time = this.current.time;\r\n            else\r\n                this.removeAnimation(this.current.animation);\r\n            this.animationPool.free(this.current);\r\n            this.current = anim;\r\n        }\r\n        this.justChangedAnimation = true;\r\n        return anim;\r\n    }\r\n    animate(id, loopCount = 0, speed = 1, listener = null, transitionTime) {\r\n        return this.animateWithOffset(id, 0, -1, loopCount, speed, listener, transitionTime);\r\n    }\r\n    animateWithOffset(id, offset, duration, loopCount, speed, listener, transitionTime) {\r\n        return this.animateWithAnimationDesc(this.obtain(id, offset, duration, loopCount, speed, listener), transitionTime);\r\n    }\r\n    animateWithAnimation(anim, offset, duration, loopCount, speed, listener, transitionTime) {\r\n        return this.animateWithAnimationDesc(this.obtainAnimation(anim, offset, duration, loopCount, speed, listener), transitionTime);\r\n    }\r\n    animateWithAnimationDesc(anim, transitionTime) {\r\n        if (!this.current || this.current.loopCount === 0)\r\n            this.current = anim;\r\n        else if (this.inAction)\r\n            this.queueWithAnimationDesc(anim, transitionTime);\r\n        else if (!this.allowSameAnimation && !!anim && this.current.animation === anim.animation) {\r\n            anim.time = this.current.time;\r\n            this.animationPool.free(this.current);\r\n            this.current = anim;\r\n        }\r\n        else {\r\n            if (!!this.previous) {\r\n                this.removeAnimation(this.previous.animation);\r\n                this.animationPool.free(this.previous);\r\n            }\r\n            this.previous = this.current;\r\n            this.current = anim;\r\n            this.transitionCurrentTime = 0;\r\n            this.transitionTargetTime = transitionTime;\r\n        }\r\n        return anim;\r\n    }\r\n    queue(id, loopCount, speed, listener, transitionTime) {\r\n        return this.queueWithOffset(id, 0, -1, loopCount, speed, listener, transitionTime);\r\n    }\r\n    queueWithOffset(id, offset, duration, loopCount, speed, listener, transitionTime) {\r\n        return this.queueWithAnimationDesc(this.obtain(id, offset, duration, loopCount, speed, listener), transitionTime);\r\n    }\r\n    queueWithAnimation(anim, offset, duration, loopCount, speed, listener, transitionTime) {\r\n        return this.queueWithAnimationDesc(this.obtainAnimation(anim, offset, duration, loopCount, speed, listener), transitionTime);\r\n    }\r\n    queueWithAnimationDesc(anim, transitionTime) {\r\n        if (!this.current || this.current.loopCount === 0)\r\n            this.animateWithAnimationDesc(anim, transitionTime);\r\n        else {\r\n            if (!!this.queued)\r\n                this.animationPool.free(this.queued);\r\n            this.queued = anim;\r\n            this.queuedTransitionTime = transitionTime;\r\n            if (this.current.loopCount < 0)\r\n                this.current.loopCount = 1;\r\n        }\r\n        return anim;\r\n    }\r\n    action(id, loopCount, speed, listener, transitionTime) {\r\n        return this.actionWithOffset(id, 0, -1, loopCount, speed, listener, transitionTime);\r\n    }\r\n    actionWithOffset(id, offset, duration, loopCount, speed, listener, transitionTime) {\r\n        return this.actionWithAnimationDesc(this.obtain(id, offset, duration, loopCount, speed, listener), transitionTime);\r\n    }\r\n    actionWithAnimation(anim, offset, duration, loopCount, speed, listener, transitionTime) {\r\n        return this.actionWithAnimationDesc(this.obtainAnimation(anim, offset, duration, loopCount, speed, listener), transitionTime);\r\n    }\r\n    actionWithAnimationDesc(anim, transitionTime) {\r\n        if (anim.loopCount < 0)\r\n            throw new Error('An action cannot be continuous');\r\n        if (!this.current || this.current.loopCount === 0)\r\n            this.animateWithAnimationDesc(anim, transitionTime);\r\n        else {\r\n            const toQueue = this.inAction ? null : this.obtainAnimationDesc(this.current);\r\n            this.inAction = false;\r\n            this.animateWithAnimationDesc(anim, transitionTime);\r\n            this.inAction = true;\r\n            if (!!toQueue)\r\n                this.queueWithAnimationDesc(toQueue, transitionTime);\r\n        }\r\n        return anim;\r\n    }\r\n}\r\nexports.AnimationController = AnimationController;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BaseAnimationController = exports.Transform = void 0;\r\nconst Quaternion_1 = require(\"../../Quaternion\");\r\nconst Utils_1 = require(\"../../Utils\");\r\nconst Vector3_1 = require(\"../../Vector3\");\r\nclass Transform {\r\n    constructor() {\r\n        this.translation = new Vector3_1.Vector3();\r\n        this.rotation = new Quaternion_1.Quaternion();\r\n        this.scale = new Vector3_1.Vector3(1, 1, 1);\r\n    }\r\n    idt() {\r\n        this.translation.set(0, 0, 0);\r\n        this.rotation.idt();\r\n        this.scale.set(1, 1, 1);\r\n        return this;\r\n    }\r\n    set(t, r, s) {\r\n        this.translation.setFrom(t);\r\n        this.rotation.setFrom(r);\r\n        this.scale.setFrom(s);\r\n        return this;\r\n    }\r\n    setFrom(other) {\r\n        return this.set(other.translation, other.rotation, other.scale);\r\n    }\r\n    lerpWithTranform(target, alpha) {\r\n        return this.lerp(target.translation, target.rotation, target.scale, alpha);\r\n    }\r\n    lerp(targetT, targetR, targetS, alpha) {\r\n        this.translation.lerp(targetT, alpha);\r\n        this.rotation.slerp(targetR, alpha);\r\n        this.scale.lerp(targetS, alpha);\r\n        return this;\r\n    }\r\n    toMatrix4(out) {\r\n        return out.setFromTranslationRotation(this.translation, this.rotation, this.scale);\r\n    }\r\n    reset() {\r\n        this.idt();\r\n    }\r\n    toString() {\r\n        return this.translation.toString() + ' - ' + this.rotation.toString() + ' - ' + this.scale.toString();\r\n    }\r\n}\r\nexports.Transform = Transform;\r\nclass BaseAnimationController {\r\n    constructor(target) {\r\n        this.transformPool = new Utils_1.Pool(() => {\r\n            return new Transform();\r\n        });\r\n        this.applying = false;\r\n        this.target = target;\r\n    }\r\n    begin() {\r\n        if (this.applying)\r\n            throw new Error('You must call end() after each call to being()');\r\n        this.applying = true;\r\n    }\r\n    apply(animation, time, weight) {\r\n        if (!this.applying)\r\n            throw new Error('You must call begin() before adding an animation');\r\n        BaseAnimationController.applyAnimation(BaseAnimationController.transforms, this.transformPool, weight, animation, time);\r\n    }\r\n    end() {\r\n        if (!this.applying)\r\n            throw new Error('You must call begin() first');\r\n        for (const [key, value] of BaseAnimationController.transforms) {\r\n            value.toMatrix4(key.localTransform);\r\n            this.transformPool.free(value);\r\n        }\r\n        BaseAnimationController.transforms.clear();\r\n        this.target.calculateTransforms();\r\n        this.applying = false;\r\n    }\r\n    applyAnimation(animation, time) {\r\n        if (this.applying)\r\n            throw new Error('Call end() first');\r\n        BaseAnimationController.applyAnimation(null, null, 1, animation, time);\r\n        this.target.calculateTransforms();\r\n    }\r\n    applyAnimations(anim1, time1, anim2, time2, weight) {\r\n        if (!anim2 || weight === 0)\r\n            this.applyAnimation(anim1, time1);\r\n        else if (!anim1 || weight === 1)\r\n            this.applyAnimation(anim2, time2);\r\n        else if (this.applying)\r\n            throw new Error('Call end() first');\r\n        else {\r\n            this.begin();\r\n            this.apply(anim1, time1, 1);\r\n            this.apply(anim2, time2, weight);\r\n            this.end();\r\n        }\r\n    }\r\n    static getFirstKeyframeIndexAtTime(arr, time) {\r\n        const lastIndex = arr.length - 1;\r\n        if (lastIndex <= 0 || time < arr[0].keytime || time > arr[lastIndex].keytime) {\r\n            return 0;\r\n        }\r\n        let minIndex = 0;\r\n        let maxIndex = lastIndex;\r\n        while (minIndex < maxIndex) {\r\n            let i = Math.floor((minIndex + maxIndex) / 2);\r\n            if (time > arr[i + 1].keytime) {\r\n                minIndex = i + 1;\r\n            }\r\n            else if (time < arr[i].keytime) {\r\n                maxIndex = i - 1;\r\n            }\r\n            else {\r\n                return i;\r\n            }\r\n        }\r\n        return minIndex;\r\n    }\r\n    static getTranslationAtTime(nodeAnim, time, out) {\r\n        if (!nodeAnim.translation)\r\n            return out.setFrom(nodeAnim.node.translation);\r\n        if (nodeAnim.translation.length === 1)\r\n            return out.setFrom(nodeAnim.translation[0].value);\r\n        let index = this.getFirstKeyframeIndexAtTime(nodeAnim.translation, time);\r\n        const firstKeyframe = nodeAnim.translation[index];\r\n        out.setFrom(firstKeyframe.value);\r\n        if (++index < nodeAnim.translation.length) {\r\n            const secondKeyframe = nodeAnim.translation[index];\r\n            const t = (time - firstKeyframe.keytime) / (secondKeyframe.keytime - firstKeyframe.keytime);\r\n            out.lerp(secondKeyframe.value, t);\r\n        }\r\n        return out;\r\n    }\r\n    static getRotationAtTime(nodeAnim, time, out) {\r\n        if (!nodeAnim.rotation)\r\n            return out.setFrom(nodeAnim.node.rotation);\r\n        if (nodeAnim.rotation.length === 1)\r\n            return out.setFrom(nodeAnim.rotation[0].value);\r\n        let index = this.getFirstKeyframeIndexAtTime(nodeAnim.rotation, time);\r\n        const firstKeyframe = nodeAnim.rotation[index];\r\n        out.setFrom(firstKeyframe.value);\r\n        if (++index < nodeAnim.rotation.length) {\r\n            const secondKeyframe = nodeAnim.rotation[index];\r\n            const t = (time - firstKeyframe.keytime) / (secondKeyframe.keytime - firstKeyframe.keytime);\r\n            out.slerp(secondKeyframe.value, t);\r\n        }\r\n        return out;\r\n    }\r\n    static getScalingAtTime(nodeAnim, time, out) {\r\n        if (!nodeAnim.scaling)\r\n            return out.setFrom(nodeAnim.node.scale);\r\n        if (nodeAnim.scaling.length === 1)\r\n            return out.setFrom(nodeAnim.scaling[0].value);\r\n        let index = this.getFirstKeyframeIndexAtTime(nodeAnim.scaling, time);\r\n        const firstKeyframe = nodeAnim.scaling[index];\r\n        out.setFrom(firstKeyframe.value);\r\n        if (++index < nodeAnim.scaling.length) {\r\n            const secondKeyframe = nodeAnim.scaling[index];\r\n            const t = (time - firstKeyframe.keytime) / (secondKeyframe.keytime - firstKeyframe.keytime);\r\n            out.lerp(secondKeyframe.value, t);\r\n        }\r\n        return out;\r\n    }\r\n    static getNodeAnimationTransform(nodeAnim, time) {\r\n        const transform = this.tmpT;\r\n        this.getTranslationAtTime(nodeAnim, time, transform.translation);\r\n        this.getRotationAtTime(nodeAnim, time, transform.rotation);\r\n        this.getScalingAtTime(nodeAnim, time, transform.scale);\r\n        return transform;\r\n    }\r\n    static applyNodeAnimationDirectly(nodeAnim, time) {\r\n        const node = nodeAnim.node;\r\n        node.isAnimated = true;\r\n        const transform = this.getNodeAnimationTransform(nodeAnim, time);\r\n        transform.toMatrix4(node.localTransform);\r\n    }\r\n    static applyNodeAnimationBlending(nodeAnim, out, pool, alpha, time) {\r\n        const node = nodeAnim.node;\r\n        node.isAnimated = true;\r\n        const transform = this.getNodeAnimationTransform(nodeAnim, time);\r\n        const t = out.get(node);\r\n        if (!!t) {\r\n            if (alpha > 0.999999)\r\n                t.setFrom(transform);\r\n            else\r\n                t.lerpWithTranform(transform, alpha);\r\n        }\r\n        else {\r\n            if (alpha > 0.999999)\r\n                out.set(node, pool.obtain().setFrom(transform));\r\n            else\r\n                out.set(node, pool.obtain().set(node.translation, node.rotation, node.scale).lerpWithTranform(transform, alpha));\r\n        }\r\n    }\r\n    static applyAnimation(out, pool, alpha, animation, time) {\r\n        if (!out) {\r\n            for (const nodeAnim of animation.nodeAnimations)\r\n                this.applyNodeAnimationDirectly(nodeAnim, time);\r\n        }\r\n        else {\r\n            for (const node of out.keys())\r\n                node.isAnimated = false;\r\n            for (const nodeAnim of animation.nodeAnimations)\r\n                this.applyNodeAnimationBlending(nodeAnim, out, pool, alpha, time);\r\n            for (const e of out.entries()) {\r\n                if (!e[0].isAnimated) {\r\n                    e[0].isAnimated = true;\r\n                    e[1].lerp(e[0].translation, e[0].rotation, e[0].scale, alpha);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    removeAnimation(animation) {\r\n        for (const nodeAnim of animation.nodeAnimations) {\r\n            nodeAnim.node.isAnimated = false;\r\n        }\r\n    }\r\n}\r\nexports.BaseAnimationController = BaseAnimationController;\r\nBaseAnimationController.transforms = new Map();\r\nBaseAnimationController.tmpT = new Transform();\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BoxShapeBuilder = void 0;\r\nconst Utils_1 = require(\"../../Utils\");\r\nconst Vector3_1 = require(\"../../Vector3\");\r\nconst VertexInfo_1 = require(\"./VertexInfo\");\r\nconst GL20_1 = require(\"../GL20\");\r\nconst VertexAttribute_1 = require(\"../attributes/VertexAttribute\");\r\nclass BoxShapeBuilder {\r\n    static obtainV3() {\r\n        return BoxShapeBuilder.vectorPool.obtain();\r\n    }\r\n    static freeAll() {\r\n        BoxShapeBuilder.vectorPool.flush();\r\n    }\r\n    static buildWithWidthHeight(builder, width, height, depth) {\r\n        this.buildWithRect(builder, 0, 0, 0, width, height, depth);\r\n    }\r\n    static buildWithVertexInfo(builder, corner000, corner010, corner100, corner110, corner001, corner011, corner101, corner111) {\r\n        const i000 = builder.vertex(corner000);\r\n        const i100 = builder.vertex(corner100);\r\n        const i110 = builder.vertex(corner110);\r\n        const i010 = builder.vertex(corner010);\r\n        const i001 = builder.vertex(corner001);\r\n        const i101 = builder.vertex(corner101);\r\n        const i011 = builder.vertex(corner011);\r\n        const i111 = builder.vertex(corner111);\r\n        const primitiveType = builder.getPrimitiveType();\r\n        if (primitiveType === GL20_1.GL20.GL_LINES) {\r\n            builder.rect(i000, i100, i110, i010);\r\n            builder.rect(i101, i001, i011, i111);\r\n            builder.index8Values(i000, i001, i010, i011, i110, i111, i100, i101);\r\n        }\r\n        else if (primitiveType === GL20_1.GL20.GL_POINTS) {\r\n            builder.rect(i000, i100, i110, i010);\r\n            builder.rect(i101, i001, i011, i111);\r\n        }\r\n        else {\r\n            // GL20.GL_TRIANGLES\r\n            builder.rect(i000, i100, i110, i010);\r\n            builder.rect(i101, i001, i011, i111);\r\n            builder.rect(i000, i010, i011, i001);\r\n            builder.rect(i101, i111, i110, i100);\r\n            builder.rect(i101, i100, i000, i001);\r\n            builder.rect(i110, i111, i011, i010);\r\n        }\r\n    }\r\n    static buildWithVectorCorner(builder, corner000, corner010, corner100, corner110, corner001, corner011, corner101, corner111) {\r\n        if ((builder.getAttributes().getMask() &\r\n            (VertexAttribute_1.Usage.Normal | VertexAttribute_1.Usage.BiNormal | VertexAttribute_1.Usage.Tangent | VertexAttribute_1.Usage.TextureCoordinates)) ===\r\n            0) {\r\n            this.buildWithVertexInfo(builder, this.vertTmp1.set(corner000, null, null, null), this.vertTmp2.set(corner010, null, null, null), this.vertTmp3.set(corner100, null, null, null), this.vertTmp4.set(corner110, null, null, null), this.vertTmp5.set(corner001, null, null, null), this.vertTmp6.set(corner011, null, null, null), this.vertTmp7.set(corner101, null, null, null), this.vertTmp8.set(corner111, null, null, null));\r\n        }\r\n        else {\r\n            let nor = this.tmpV1\r\n                .set(corner000.x, corner000.y, corner000.z)\r\n                .lerp(corner110, 0.5)\r\n                .sub(this.tmpV2.set(corner001.x, corner001.y, corner001.z).lerp(corner111, 0.5))\r\n                .normalize();\r\n            builder.rectWithVectorCorner(corner000, corner010, corner110, corner100, nor);\r\n            builder.rectWithVectorCorner(corner011, corner001, corner101, corner111, nor.scale(-1));\r\n            nor = this.tmpV1\r\n                .set(corner000.x, corner000.y, corner000.z)\r\n                .lerp(corner101, 0.5)\r\n                .sub(this.tmpV2.set(corner010.x, corner010.y, corner010.z).lerp(corner111, 0.5))\r\n                .normalize();\r\n            builder.rectWithVectorCorner(corner001, corner000, corner100, corner101, nor);\r\n            builder.rectWithVectorCorner(corner010, corner011, corner111, corner110, nor.scale(-1));\r\n            nor = this.tmpV1\r\n                .set(corner000.x, corner000.y, corner000.z)\r\n                .lerp(corner011, 0.5)\r\n                .sub(this.tmpV2.set(corner100.x, corner100.y, corner100.z).lerp(corner111, 0.5))\r\n                .normalize();\r\n            builder.rectWithVectorCorner(corner001, corner011, corner010, corner000, nor);\r\n            builder.rectWithVectorCorner(corner100, corner110, corner111, corner101, nor.scale(-1));\r\n        }\r\n    }\r\n    static buildWithRect(builder, x, y, z, width, height, depth) {\r\n        const hw = width * 0.5;\r\n        const hh = height * 0.5;\r\n        const hd = depth * 0.5;\r\n        const x0 = x - hw, y0 = y - hh, z0 = z - hd, x1 = x + hw, y1 = y + hh, z1 = z + hd;\r\n        this.buildWithVectorCorner(builder, //\r\n        this.obtainV3().set(x0, y0, z0), this.obtainV3().set(x0, y1, z0), this.obtainV3().set(x1, y0, z0), this.obtainV3().set(x1, y1, z0), this.obtainV3().set(x0, y0, z1), this.obtainV3().set(x0, y1, z1), this.obtainV3().set(x1, y0, z1), this.obtainV3().set(x1, y1, z1));\r\n        this.freeAll();\r\n    }\r\n}\r\nexports.BoxShapeBuilder = BoxShapeBuilder;\r\nBoxShapeBuilder.tmpV0 = new Vector3_1.Vector3();\r\nBoxShapeBuilder.tmpV1 = new Vector3_1.Vector3();\r\nBoxShapeBuilder.tmpV2 = new Vector3_1.Vector3();\r\nBoxShapeBuilder.tmpV3 = new Vector3_1.Vector3();\r\nBoxShapeBuilder.tmpV4 = new Vector3_1.Vector3();\r\nBoxShapeBuilder.tmpV5 = new Vector3_1.Vector3();\r\nBoxShapeBuilder.tmpV6 = new Vector3_1.Vector3();\r\nBoxShapeBuilder.tmpV7 = new Vector3_1.Vector3();\r\nBoxShapeBuilder.vertTmp0 = new VertexInfo_1.VertexInfo();\r\nBoxShapeBuilder.vertTmp1 = new VertexInfo_1.VertexInfo();\r\nBoxShapeBuilder.vertTmp2 = new VertexInfo_1.VertexInfo();\r\nBoxShapeBuilder.vertTmp3 = new VertexInfo_1.VertexInfo();\r\nBoxShapeBuilder.vertTmp4 = new VertexInfo_1.VertexInfo();\r\nBoxShapeBuilder.vertTmp5 = new VertexInfo_1.VertexInfo();\r\nBoxShapeBuilder.vertTmp6 = new VertexInfo_1.VertexInfo();\r\nBoxShapeBuilder.vertTmp7 = new VertexInfo_1.VertexInfo();\r\nBoxShapeBuilder.vertTmp8 = new VertexInfo_1.VertexInfo();\r\nBoxShapeBuilder.vectorPool = new Utils_1.FlushablePool(() => {\r\n    return new Vector3_1.Vector3();\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IndexBufferObject = void 0;\r\nconst GL20_1 = require(\"../GL20\");\r\nclass IndexBufferObject {\r\n    constructor(gl, maxIndices, isStatic = true) {\r\n        this.isDirty = true;\r\n        this.isBound = false;\r\n        this.indicesLength = 0;\r\n        this.gl = gl;\r\n        this.empty = maxIndices === 0;\r\n        if (this.empty) {\r\n            maxIndices = 1;\r\n        }\r\n        this.byteBuffer = new Uint16Array(maxIndices);\r\n        this.isDirect = true;\r\n        this.ownsBuffer = true;\r\n        this.indicesLength = 0;\r\n        this.bufferHandle = this.gl.createBuffer();\r\n        this.usage = isStatic ? GL20_1.GL20.GL_STATIC_DRAW : GL20_1.GL20.GL_DYNAMIC_DRAW;\r\n    }\r\n    //  public IndexBufferObjectWithBuffer (data: Uint8Array, isStatic: boolean = true) {\r\n    //      this.empty = data.length == 0;\r\n    //      this.byteBuffer = data;\r\n    //      this.isDirect = true;\r\n    //      this.buffer = this.byteBuffer.asShortBuffer();\r\n    //      this.ownsBuffer = false;\r\n    //      this.bufferHandle = this.gl.createBuffer();\r\n    //      this.usage = isStatic ? GL20.GL_STATIC_DRAW : GL20.GL_DYNAMIC_DRAW;\r\n    //  }\r\n    getNumIndices() {\r\n        return this.indicesLength;\r\n    }\r\n    getNumMaxIndices() {\r\n        return this.byteBuffer.length;\r\n    }\r\n    setIndices(indices, offset = 0, count = indices.length) {\r\n        this.isDirty = true;\r\n        this.byteBuffer.set(indices.slice(offset, offset + count), 0);\r\n        this.indicesLength = count;\r\n        if (this.isBound) {\r\n            this.gl.bufferData(GL20_1.GL20.GL_ELEMENT_ARRAY_BUFFER, this.byteBuffer, this.usage);\r\n            this.isDirty = false;\r\n        }\r\n    }\r\n    updateIndices(targetOffset, indices, offset, count) {\r\n        this.isDirty = true;\r\n        this.byteBuffer.set(indices.slice(offset, offset + count), targetOffset);\r\n        this.indicesLength = targetOffset + count;\r\n        if (this.isBound) {\r\n            this.gl.bufferData(GL20_1.GL20.GL_ELEMENT_ARRAY_BUFFER, this.byteBuffer.subarray(0, this.indicesLength), this.usage);\r\n            this.isDirty = false;\r\n        }\r\n    }\r\n    getBuffer() {\r\n        this.isDirty = true;\r\n        return this.byteBuffer;\r\n    }\r\n    bind() {\r\n        if (this.bufferHandle === 0)\r\n            throw new Error('No buffer allocated!');\r\n        this.gl.bindBuffer(GL20_1.GL20.GL_ELEMENT_ARRAY_BUFFER, this.bufferHandle);\r\n        if (this.isDirty) {\r\n            this.gl.bufferData(GL20_1.GL20.GL_ELEMENT_ARRAY_BUFFER, this.byteBuffer, this.usage);\r\n            this.isDirty = false;\r\n        }\r\n        this.isBound = true;\r\n    }\r\n    unbind() {\r\n        this.gl.bindBuffer(GL20_1.GL20.GL_ELEMENT_ARRAY_BUFFER, null);\r\n        this.isBound = false;\r\n    }\r\n    invalidate() {\r\n        this.bufferHandle = this.gl.createBuffer();\r\n        this.isDirty = true;\r\n    }\r\n    dispose() {\r\n        this.gl.bindBuffer(GL20_1.GL20.GL_ELEMENT_ARRAY_BUFFER, null);\r\n        this.gl.deleteBuffer(this.bufferHandle);\r\n        this.bufferHandle = new WebGLBuffer();\r\n    }\r\n}\r\nexports.IndexBufferObject = IndexBufferObject;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MeshBuilder = void 0;\r\nconst BoundingBox_1 = require(\"../../BoundingBox\");\r\nconst Matrix3_1 = require(\"../../Matrix3\");\r\nconst Matrix4_1 = require(\"../../Matrix4\");\r\nconst NumberUtils_1 = require(\"../../NumberUtils\");\r\nconst Shader_1 = require(\"../../Shader\");\r\nconst Utils_1 = require(\"../../Utils\");\r\nconst Vector3_1 = require(\"../../Vector3\");\r\nconst VertexAttribute_1 = require(\"../attributes/VertexAttribute\");\r\nconst VertexAttributes_1 = require(\"../attributes/VertexAttributes\");\r\nconst GL20_1 = require(\"../GL20\");\r\nconst Mesh_1 = require(\"../Mesh\");\r\nconst MeshPart_1 = require(\"../model/MeshPart\");\r\nconst BoxShapeBuilder_1 = require(\"./BoxShapeBuilder\");\r\nconst VertexInfo_1 = require(\"./VertexInfo\");\r\nclass MeshBuilder {\r\n    constructor(gl) {\r\n        this.gl = gl;\r\n        // private static tmpIndices: number[] = [];\r\n        // private static tmpVertices: number[] = [];\r\n        this.vertTmp1 = new VertexInfo_1.VertexInfo();\r\n        this.vertTmp2 = new VertexInfo_1.VertexInfo();\r\n        this.vertTmp3 = new VertexInfo_1.VertexInfo();\r\n        this.vertTmp4 = new VertexInfo_1.VertexInfo();\r\n        this.tempC1 = new Utils_1.Color();\r\n        this.vertices = [];\r\n        this.indices = [];\r\n        this.parts = [];\r\n        this.color = Utils_1.Color.WHITE;\r\n        this.hasColor = false;\r\n        this.uOffset = 0;\r\n        this.uScale = 1;\r\n        this.vOffset = 0;\r\n        this.vScale = 1;\r\n        this.hasUVTransform = false;\r\n        this.vertexTransformationEnabled = false;\r\n        this.positionTransform = new Matrix4_1.Matrix4();\r\n        this.normalTransform = new Matrix3_1.Matrix3();\r\n        this.bounds = new BoundingBox_1.BoundingBox();\r\n        this.lastIndex = -1;\r\n        //   public addMeshByData(\r\n        //     vertices: number[],\r\n        //     indices: number[],\r\n        //     indexOffset: number,\r\n        //     numIndices: number\r\n        //   ) {\r\n        //     if (MeshBuilder.indicesMap === null)\r\n        //       MeshBuilder.indicesMap = new IntIntMap(numIndices);\r\n        //     else {\r\n        //       MeshBuilder.indicesMap.clear();\r\n        //       MeshBuilder.indicesMap.ensureCapacity(numIndices);\r\n        //     }\r\n        //     this.ensureIndices(numIndices);\r\n        //     const numVertices = vertices.length / this.stride;\r\n        //     this.ensureVertices(numVertices < numIndices ? numVertices : numIndices);\r\n        //     for (let i = 0; i < numIndices; i++) {\r\n        //       const sidx = indices[indexOffset + i] & 0xffff;\r\n        //       const didx = MeshBuilder.indicesMap.get(sidx, -1);\r\n        //       if (didx < 0) {\r\n        //         this.addVertex(vertices, sidx * this.stride);\r\n        //         MeshBuilder.indicesMap.put(sidx, (didx = lastIndex));\r\n        //       }\r\n        //       this.index(didx);\r\n        //     }\r\n        //   }\r\n        this.tmpNormal = new Vector3_1.Vector3();\r\n    }\r\n    static createAttributes(usage) {\r\n        const attrs = [];\r\n        if ((usage & VertexAttribute_1.Usage.Position) === VertexAttribute_1.Usage.Position)\r\n            attrs.push(VertexAttribute_1.VertexAttribute3D.Position());\r\n        if ((usage & VertexAttribute_1.Usage.ColorUnpacked) === VertexAttribute_1.Usage.ColorUnpacked)\r\n            attrs.push(VertexAttribute_1.VertexAttribute3D.ColorUnpacked());\r\n        if ((usage & VertexAttribute_1.Usage.ColorPacked) === VertexAttribute_1.Usage.ColorPacked)\r\n            attrs.push(VertexAttribute_1.VertexAttribute3D.ColorPacked());\r\n        if ((usage & VertexAttribute_1.Usage.Normal) === VertexAttribute_1.Usage.Normal)\r\n            attrs.push(VertexAttribute_1.VertexAttribute3D.Normal());\r\n        if ((usage & VertexAttribute_1.Usage.TextureCoordinates) === VertexAttribute_1.Usage.TextureCoordinates)\r\n            attrs.push(new VertexAttribute_1.VertexAttribute3D(VertexAttribute_1.Usage.TextureCoordinates, 2, GL20_1.GL20.GL_FLOAT, false, Shader_1.Shader.TEXCOORDS + '0'));\r\n        return new VertexAttributes_1.VertexAttributes(attrs);\r\n    }\r\n    begin(attributes, primitiveType = -1) {\r\n        if (!!this.attributes)\r\n            throw new Error('Call end() first');\r\n        this.attributes = attributes;\r\n        this.parts.length = 0;\r\n        this.vindex = 0;\r\n        this.lastIndex = -1;\r\n        this.istart = 0;\r\n        this.meshPart = null;\r\n        this.stride = attributes.vertexSize / 4;\r\n        if (!this._vertex || this.vertex.length < this.stride)\r\n            this._vertex = new Array(this.stride);\r\n        let a = attributes.findByUsage(VertexAttribute_1.Usage.Position);\r\n        if (!a)\r\n            throw new Error('Cannot build mesh without position attribute');\r\n        this.posOffset = a.offset / 4;\r\n        this.posSize = a.numComponents;\r\n        a = attributes.findByUsage(VertexAttribute_1.Usage.Normal);\r\n        this.norOffset = !a ? -1 : a.offset / 4;\r\n        a = attributes.findByUsage(VertexAttribute_1.Usage.BiNormal);\r\n        this.biNorOffset = !a ? -1 : a.offset / 4;\r\n        a = attributes.findByUsage(VertexAttribute_1.Usage.Tangent);\r\n        this.tangentOffset = !a ? -1 : a.offset / 4;\r\n        a = attributes.findByUsage(VertexAttribute_1.Usage.ColorUnpacked);\r\n        this.colOffset = !a ? -1 : a.offset / 4;\r\n        this.colSize = !a ? 0 : a.numComponents;\r\n        a = attributes.findByUsage(VertexAttribute_1.Usage.ColorPacked);\r\n        this.cpOffset = !a ? -1 : a.offset / 4;\r\n        a = attributes.findByUsage(VertexAttribute_1.Usage.TextureCoordinates);\r\n        this.uvOffset = !a ? -1 : a.offset / 4;\r\n        this.setColor(null);\r\n        this.setVertexTransform(null);\r\n        this.setUVRangeByRegion(null);\r\n        this.primitiveType = primitiveType;\r\n        this.bounds.inf();\r\n    }\r\n    setColor(color) {\r\n        this.hasColor = !!color;\r\n        const newColor = !this.hasColor ? Utils_1.Color.WHITE : color;\r\n        this.color.set(newColor.r, newColor.g, newColor.b, newColor.a);\r\n    }\r\n    getAttributes() {\r\n        return this.attributes;\r\n    }\r\n    getLastIndex() {\r\n        return this.lastIndex;\r\n    }\r\n    endpart() {\r\n        if (!!this.meshPart) {\r\n            this.bounds.getCenter(this.meshPart.center);\r\n            this.bounds.getDimensions(this.meshPart.halfExtents).scale(0.5);\r\n            this.meshPart.radius = this.meshPart.halfExtents.length();\r\n            this.bounds.inf();\r\n            this.meshPart.offset = this.istart;\r\n            this.meshPart.size = this.indices.length - this.istart;\r\n            this.istart = this.indices.length;\r\n            this.meshPart = null;\r\n        }\r\n    }\r\n    part(id, primitiveType, meshPart = null) {\r\n        if (!this.attributes)\r\n            throw new Error('Call begin() first');\r\n        if (!meshPart)\r\n            meshPart = new MeshPart_1.MeshPart();\r\n        this.endpart();\r\n        this.meshPart = meshPart;\r\n        this.meshPart.id = id;\r\n        this.primitiveType = this.meshPart.primitiveType = primitiveType;\r\n        this.parts.push(this.meshPart);\r\n        this.setColor(null);\r\n        this.setVertexTransform(null);\r\n        this.setUVRangeByRegion(null);\r\n        return this.meshPart;\r\n    }\r\n    end(mesh = null) {\r\n        if (!mesh) {\r\n            mesh = new Mesh_1.Mesh3D(this.gl, true, true, Math.min(this.vertices.length / this.stride, MeshBuilder.MAX_VERTICES), this.indices.length, this.attributes);\r\n        }\r\n        this.endpart();\r\n        if (!this.attributes)\r\n            throw new Error('Call begin() first');\r\n        if (!this.attributes.equals(mesh.getVertexAttributes()))\r\n            throw new Error(\"Mesh attributes don't match\");\r\n        if (mesh.getMaxVertices() * this.stride < this.vertices.length)\r\n            throw new Error(\"Mesh can't hold enough vertices: \" + mesh.getMaxVertices() + ' * ' + this.stride + ' < ' + this.vertices.length);\r\n        if (mesh.getMaxIndices() < this.indices.length)\r\n            throw new Error(\"Mesh can't hold enough indices: \" + mesh.getMaxIndices() + ' < ' + this.indices.length);\r\n        mesh.setVertices(this.vertices, 0, this.vertices.length);\r\n        mesh.setIndices(this.indices, 0, this.indices.length);\r\n        for (const p of this.parts)\r\n            p.mesh = mesh;\r\n        this.parts.length = 0;\r\n        this.attributes = null;\r\n        this.vertices.length = 0;\r\n        this.indices.length = 0;\r\n        return mesh;\r\n    }\r\n    clear() {\r\n        this.vertices.length = 0;\r\n        this.indices.length = 0;\r\n        this.parts.length = 0;\r\n        this.vindex = 0;\r\n        this.lastIndex = -1;\r\n        this.istart = 0;\r\n        this.meshPart = null;\r\n    }\r\n    getFloatsPerVertex() {\r\n        return this.stride;\r\n    }\r\n    setUVRange(u1, v1, u2, v2) {\r\n        this.uOffset = u1;\r\n        this.vOffset = v1;\r\n        this.uScale = u2 - u1;\r\n        this.vScale = v2 - v1;\r\n        this.hasUVTransform = !(Utils_1.MathUtils.isZero(u1) &&\r\n            Utils_1.MathUtils.isZero(v1) &&\r\n            Utils_1.MathUtils.isEqual(u2, 1) &&\r\n            Utils_1.MathUtils.isEqual(v2, 1));\r\n    }\r\n    setUVRangeByRegion(region) {\r\n        if (!region) {\r\n            this.hasUVTransform = false;\r\n            this.uOffset = this.vOffset = 0;\r\n            this.uScale = this.vScale = 1;\r\n        }\r\n        else {\r\n            this.hasUVTransform = true;\r\n            this.setUVRange(region.u, region.v, region.u2, region.v2);\r\n        }\r\n    }\r\n    setVertexTransform(transform) {\r\n        this.vertexTransformationEnabled = !!transform;\r\n        if (this.vertexTransformationEnabled) {\r\n            this.positionTransform.set(transform.values);\r\n            this.normalTransform.setByMatrix4(transform).inv().transpose();\r\n        }\r\n        else {\r\n            this.positionTransform.idt();\r\n            this.normalTransform.idt();\r\n        }\r\n    }\r\n    static transformPosition(values, offset, size, transform) {\r\n        if (size > 2) {\r\n            this.vTmp.set(values[offset], values[offset + 1], values[offset + 2]).multiply(transform);\r\n            values[offset] = this.vTmp.x;\r\n            values[offset + 1] = this.vTmp.y;\r\n            values[offset + 2] = this.vTmp.z;\r\n        }\r\n        else if (size > 1) {\r\n            this.vTmp.set(values[offset], values[offset + 1], 0).multiply(transform);\r\n            values[offset] = this.vTmp.x;\r\n            values[offset + 1] = this.vTmp.y;\r\n        }\r\n        else\r\n            values[offset] = this.vTmp.set(values[offset], 0, 0).multiply(transform).x;\r\n    }\r\n    static transformNormal(values, offset, size, transform) {\r\n        if (size > 2) {\r\n            this.vTmp\r\n                .set(values[offset], values[offset + 1], values[offset + 2])\r\n                .multiplyMat3(transform)\r\n                .normalize();\r\n            values[offset] = this.vTmp.x;\r\n            values[offset + 1] = this.vTmp.y;\r\n            values[offset + 2] = this.vTmp.z;\r\n        }\r\n        else if (size > 1) {\r\n            this.vTmp\r\n                .set(values[offset], values[offset + 1], 0)\r\n                .multiplyMat3(transform)\r\n                .normalize();\r\n            values[offset] = this.vTmp.x;\r\n            values[offset + 1] = this.vTmp.y;\r\n        }\r\n        else\r\n            values[offset] = this.vTmp.set(values[offset], 0, 0).multiplyMat3(transform).normalize().x;\r\n    }\r\n    addVertex(values, offset) {\r\n        const o = this.vertices.length;\r\n        Utils_1.Utils.arrayCopy(values, offset, this.vertices, this.vertices.length, this.stride);\r\n        //this.vertices.addAll(values, offset, this.stride);\r\n        this.lastIndex = this.vindex++;\r\n        if (this.vertexTransformationEnabled) {\r\n            MeshBuilder.transformPosition(this.vertices, o + this.posOffset, this.posSize, this.positionTransform);\r\n            if (this.norOffset >= 0)\r\n                MeshBuilder.transformNormal(this.vertices, o + this.norOffset, 3, this.normalTransform);\r\n            if (this.biNorOffset >= 0)\r\n                MeshBuilder.transformNormal(this.vertices, o + this.biNorOffset, 3, this.normalTransform);\r\n            if (this.tangentOffset >= 0)\r\n                MeshBuilder.transformNormal(this.vertices, o + this.tangentOffset, 3, this.normalTransform);\r\n        }\r\n        const x = this.vertices[o + this.posOffset];\r\n        const y = this.posSize > 1 ? this.vertices[o + this.posOffset + 1] : 0;\r\n        const z = this.posSize > 2 ? this.vertices[o + this.posOffset + 2] : 0;\r\n        this.bounds.ext(x, y, z);\r\n        if (this.hasColor) {\r\n            if (this.colOffset >= 0) {\r\n                this.vertices[o + this.colOffset] *= this.color.r;\r\n                this.vertices[o + this.colOffset + 1] *= this.color.g;\r\n                this.vertices[o + this.colOffset + 2] *= this.color.b;\r\n                if (this.colSize > 3)\r\n                    this.vertices[o + this.colOffset + 3] *= this.color.a;\r\n            }\r\n            else if (this.cpOffset >= 0) {\r\n                Utils_1.Color.rgba8888ToColor(this.tempC1, this.vertices[o + this.cpOffset]);\r\n                const col = this.tempC1.mul(this.color.r, this.color.g, this.color.b, this.color.a);\r\n                NumberUtils_1.NumberUtil.colorToFloat(col.r, col.g, col.b, col.a);\r\n                this.vertices[o + this.cpOffset] = NumberUtils_1.NumberUtil.colorToFloat(col.r, col.g, col.b, col.a);\r\n            }\r\n        }\r\n        if (this.hasUVTransform && this.uvOffset >= 0) {\r\n            this.vertices[o + this.uvOffset] = this.uOffset + this.uScale * this.vertices[o + this.uvOffset];\r\n            this.vertices[o + this.uvOffset + 1] = this.vOffset + this.vScale * this.vertices[o + this.uvOffset + 1];\r\n        }\r\n    }\r\n    //   public addMeshByMestPart(meshpart: MeshPart) {\r\n    //     this.addMeshByMesh(meshpart.mesh, meshpart.offset, meshpart.size);\r\n    //   }\r\n    //   public addMeshByMesh(\r\n    //     mesh: Mesh,\r\n    //     indexOffset: number = 0,\r\n    //     numIndices: number = mesh.getNumIndices()\r\n    //   ) {\r\n    //     if (!this.attributes.equals(mesh.getVertexAttributes()))\r\n    //       throw new Error(\"Vertex attributes do not match\");\r\n    //     if (numIndices <= 0) return;\r\n    //     const numFloats = mesh.getNumVertices() * this.stride;\r\n    //     MeshBuilder.tmpVertices.length = 0;\r\n    //     MeshBuilder.tmpVertices.ensureCapacity(numFloats);\r\n    //     MeshBuilder.tmpVertices.length = numFloats;\r\n    //     mesh.getVertices(MeshBuilder.tmpVertices);\r\n    //     MeshBuilder.tmpIndices.clear();\r\n    //     MeshBuilder.tmpIndices.ensureCapacity(numIndices);\r\n    //     MeshBuilder.tmpIndices.length = numIndices;\r\n    //     mesh.getIndices(indexOffset, numIndices, MeshBuilder.tmpIndices, 0);\r\n    //     this.addMeshByData(MeshBuilder.tmpVertices, MeshBuilder.tmpIndices, 0, numIndices);\r\n    //   }\r\n    box(width, height, depth) {\r\n        BoxShapeBuilder_1.BoxShapeBuilder.buildWithWidthHeight(this, width, height, depth);\r\n    }\r\n    vertexWithData(pos, nor, col, uv) {\r\n        if (this.vindex > MeshBuilder.MAX_INDEX)\r\n            throw new Error('Too many vertices used');\r\n        this._vertex[this.posOffset] = pos.x;\r\n        if (this.posSize > 1)\r\n            this._vertex[this.posOffset + 1] = pos.y;\r\n        if (this.posSize > 2)\r\n            this._vertex[this.posOffset + 2] = pos.z;\r\n        if (this.norOffset >= 0) {\r\n            if (!nor)\r\n                nor = this.tmpNormal.set(pos.x, pos.y, pos.z).normalize();\r\n            this._vertex[this.norOffset] = nor.x;\r\n            this._vertex[this.norOffset + 1] = nor.y;\r\n            this._vertex[this.norOffset + 2] = nor.z;\r\n        }\r\n        if (this.colOffset >= 0) {\r\n            if (!col)\r\n                col = Utils_1.Color.WHITE;\r\n            this._vertex[this.colOffset] = col.r;\r\n            this._vertex[this.colOffset + 1] = col.g;\r\n            this._vertex[this.colOffset + 2] = col.b;\r\n            if (this.colSize > 3)\r\n                this._vertex[this.colOffset + 3] = col.a;\r\n        }\r\n        else if (this.cpOffset > 0) {\r\n            if (!col)\r\n                col = Utils_1.Color.WHITE;\r\n            this._vertex[this.cpOffset] = NumberUtils_1.NumberUtil.colorToFloat(col.r, col.g, col.b, col.a); // FIXME cache packed color?\r\n        }\r\n        if (!!uv && this.uvOffset >= 0) {\r\n            this._vertex[this.uvOffset] = uv.x;\r\n            this._vertex[this.uvOffset + 1] = uv.y;\r\n        }\r\n        this.addVertex(this._vertex, 0);\r\n        return this.lastIndex;\r\n    }\r\n    vertex(info) {\r\n        return this.vertexWithData(info.hasPosition ? info.position : null, info.hasNormal ? info.normal : null, info.hasColor ? info.color : null, info.hasUV ? info.uv : null);\r\n    }\r\n    index(value) {\r\n        this.indices.push(value);\r\n    }\r\n    index2Values(value1, value2, value3) {\r\n        this.indices.push(value1);\r\n        this.indices.push(value2);\r\n    }\r\n    index3Values(value1, value2, value3) {\r\n        this.indices.push(value1);\r\n        this.indices.push(value2);\r\n        this.indices.push(value3);\r\n    }\r\n    index4Values(value1, value2, value3, value4) {\r\n        this.indices.push(value1);\r\n        this.indices.push(value2);\r\n        this.indices.push(value3);\r\n        this.indices.push(value4);\r\n    }\r\n    index6Values(value1, value2, value3, value4, value5, value6) {\r\n        this.indices.push(value1);\r\n        this.indices.push(value2);\r\n        this.indices.push(value3);\r\n        this.indices.push(value4);\r\n        this.indices.push(value5);\r\n        this.indices.push(value6);\r\n    }\r\n    index8Values(value1, value2, value3, value4, value5, value6, value7, value8) {\r\n        this.indices.push(value1);\r\n        this.indices.push(value2);\r\n        this.indices.push(value3);\r\n        this.indices.push(value4);\r\n        this.indices.push(value5);\r\n        this.indices.push(value6);\r\n        this.indices.push(value7);\r\n        this.indices.push(value8);\r\n    }\r\n    rect(corner00, corner10, corner11, corner01) {\r\n        if (this.primitiveType === GL20_1.GL20.GL_TRIANGLES) {\r\n            this.index6Values(corner00, corner10, corner11, corner11, corner01, corner00);\r\n        }\r\n        else if (this.primitiveType === GL20_1.GL20.GL_LINES) {\r\n            this.index8Values(corner00, corner10, corner10, corner11, corner11, corner01, corner01, corner00);\r\n        }\r\n        else if (this.primitiveType === GL20_1.GL20.GL_POINTS) {\r\n            this.index4Values(corner00, corner10, corner11, corner01);\r\n        }\r\n        else\r\n            throw new Error('Incorrect primitive type');\r\n    }\r\n    rectWithVertexInfo(corner00, corner10, corner11, corner01) {\r\n        this.rect(this.vertex(corner00), this.vertex(corner10), this.vertex(corner11), this.vertex(corner01));\r\n    }\r\n    rectWithVectorCorner(corner00, corner10, corner11, corner01, normal) {\r\n        this.rectWithVertexInfo(this.vertTmp1.set(corner00, normal, null, null).setUV(0, 1), this.vertTmp2.set(corner10, normal, null, null).setUV(1, 1), this.vertTmp3.set(corner11, normal, null, null).setUV(1, 0), this.vertTmp4.set(corner01, normal, null, null).setUV(0, 0));\r\n    }\r\n    rectWithValue(x00, y00, z00, x10, y10, z10, x11, y11, z11, x01, y01, z01, normalX, normalY, normalZ) {\r\n        this.rectWithVertexInfo(this.vertTmp1.set(null, null, null, null).setPos(x00, y00, z00).setNor(normalX, normalY, normalZ).setUV(0, 1), this.vertTmp2.set(null, null, null, null).setPos(x10, y10, z10).setNor(normalX, normalY, normalZ).setUV(1, 1), this.vertTmp3.set(null, null, null, null).setPos(x11, y11, z11).setNor(normalX, normalY, normalZ).setUV(1, 0), this.vertTmp4.set(null, null, null, null).setPos(x01, y01, z01).setNor(normalX, normalY, normalZ).setUV(0, 0));\r\n    }\r\n    getVertexTransform(out) {\r\n        return out.set(this.positionTransform.values);\r\n    }\r\n    getPrimitiveType() {\r\n        return this.primitiveType;\r\n    }\r\n}\r\nexports.MeshBuilder = MeshBuilder;\r\nMeshBuilder.MAX_VERTICES = 1 << 16;\r\nMeshBuilder.MAX_INDEX = MeshBuilder.MAX_VERTICES - 1;\r\nMeshBuilder.vTmp = new Vector3_1.Vector3();\r\nMeshBuilder.indicesMap = null;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ModelBuilder = void 0;\r\nconst Matrix4_1 = require(\"../../Matrix4\");\r\nconst GL20_1 = require(\"../GL20\");\r\nconst Model_1 = require(\"../model/Model\");\r\nconst Node_1 = require(\"../model/Node\");\r\nconst NodePart_1 = require(\"../model/NodePart\");\r\nconst MeshBuilder_1 = require(\"./MeshBuilder\");\r\nconst SHORT_MAX_VALUE = 32767;\r\nclass ModelBuilder {\r\n    constructor(gl) {\r\n        this.gl = gl;\r\n        this.builders = [];\r\n        this.tmpTransform = new Matrix4_1.Matrix4();\r\n    }\r\n    getBuilder(attributes) {\r\n        for (const mb of this.builders)\r\n            if (mb.getAttributes().equals(attributes) && mb.getLastIndex() < SHORT_MAX_VALUE / 2)\r\n                return mb;\r\n        const result = new MeshBuilder_1.MeshBuilder(this.gl);\r\n        result.begin(attributes);\r\n        this.builders.push(result);\r\n        return result;\r\n    }\r\n    begin() {\r\n        if (!!this.model)\r\n            throw new Error('Call end() first');\r\n        this.node = null;\r\n        this.model = new Model_1.Model(this.gl);\r\n        this.builders.length = 0;\r\n    }\r\n    end() {\r\n        if (!this.model)\r\n            throw new Error('Call begin() first');\r\n        const result = this.model;\r\n        this.endnode();\r\n        this.model = null;\r\n        for (const mb of this.builders)\r\n            mb.end();\r\n        this.builders.length = 0;\r\n        ModelBuilder.rebuildReferencesWithModel(result);\r\n        return result;\r\n    }\r\n    createNode() {\r\n        const node = new Node_1.Node();\r\n        this.addNode(node);\r\n        node.id = 'node' + this.model.nodes.length;\r\n        return node;\r\n    }\r\n    addNode(node) {\r\n        if (!this.model)\r\n            throw new Error('Call begin() first');\r\n        this.endnode();\r\n        this.model.nodes.push(node);\r\n        this.node = node;\r\n        return node;\r\n    }\r\n    endnode() {\r\n        if (!!this.node) {\r\n            this.node = null;\r\n        }\r\n    }\r\n    manage(disposable) {\r\n        if (!this.model)\r\n            throw new Error('Call begin() first');\r\n        this.model.manageDisposable(disposable);\r\n    }\r\n    partByMeshPart(meshpart, material) {\r\n        if (!this.node)\r\n            this.createNode();\r\n        this.node.parts.push(new NodePart_1.NodePart(meshpart, material));\r\n    }\r\n    createBox(width, height, depth, material, attributes) {\r\n        this.begin();\r\n        this.part('box', GL20_1.GL20.GL_TRIANGLES, attributes, material).box(width, height, depth);\r\n        return this.end();\r\n    }\r\n    part(id, primitiveType, attributes, material) {\r\n        const builder = this.getBuilder(MeshBuilder_1.MeshBuilder.createAttributes(attributes));\r\n        if (!this.node)\r\n            this.createNode();\r\n        this.node.parts.push(new NodePart_1.NodePart(builder.part(id, primitiveType), material));\r\n        return builder;\r\n    }\r\n    static rebuildReferencesWithModel(model) {\r\n        model.materials.length = 0;\r\n        model.meshes.length = 0;\r\n        model.meshParts.length = 0;\r\n        for (const node of model.nodes)\r\n            ModelBuilder.rebuildReferences(model, node);\r\n    }\r\n    static rebuildReferences(model, node) {\r\n        for (const mpm of node.parts) {\r\n            if (!model.materials.includes(mpm.material))\r\n                model.materials.push(mpm.material);\r\n            if (!model.meshParts.includes(mpm.meshPart)) {\r\n                model.meshParts.push(mpm.meshPart);\r\n                if (!model.meshes.includes(mpm.meshPart.mesh))\r\n                    model.meshes.push(mpm.meshPart.mesh);\r\n                model.manageDisposable(mpm.meshPart.mesh);\r\n            }\r\n        }\r\n        for (const child of node.getChildren())\r\n            this.rebuildReferences(model, child);\r\n    }\r\n}\r\nexports.ModelBuilder = ModelBuilder;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FileTextureProvider = void 0;\r\nconst Texture_1 = require(\"../../Texture\");\r\nclass FileTextureProvider {\r\n    constructor(minFilter = Texture_1.TextureFilter.Linear, magFilter = Texture_1.TextureFilter.Linear, uWrap = Texture_1.TextureWrap.Repeat, vWrap = Texture_1.TextureWrap.Repeat, useMipMaps = false) {\r\n        this.minFilter = minFilter;\r\n        this.magFilter = magFilter;\r\n        this.uWrap = uWrap;\r\n        this.vWrap = vWrap;\r\n        this.useMipMaps = useMipMaps;\r\n    }\r\n    load(gl, fileName) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const result = yield Texture_1.Texture.load(gl, fileName);\r\n            result.setFilters(this.minFilter, this.magFilter);\r\n            result.setWraps(this.uWrap, this.vWrap);\r\n            return result;\r\n        });\r\n    }\r\n}\r\nexports.FileTextureProvider = FileTextureProvider;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.VertexBufferObject = void 0;\r\nconst GL20_1 = require(\"../GL20\");\r\nclass VertexBufferObject {\r\n    constructor(gl, isStatic, numVertices, attributes) {\r\n        this.gl = gl;\r\n        this.verticesLength = 0;\r\n        this.isDirty = false;\r\n        this.isBound = false;\r\n        this.bufferHandle = this.gl.createBuffer();\r\n        const data = new Float32Array(attributes.vertexSize * numVertices);\r\n        this.setBuffer(data, true, attributes);\r\n        this.setUsage(isStatic ? GL20_1.GL20.GL_STATIC_DRAW : GL20_1.GL20.GL_DYNAMIC_DRAW);\r\n    }\r\n    getAttributes() {\r\n        return this.attributes;\r\n    }\r\n    getNumVertices() {\r\n        return this.buffer.length / this.attributes.vertexSize;\r\n    }\r\n    getNumMaxVertices() {\r\n        return this.buffer.length;\r\n    }\r\n    getBuffer() {\r\n        this.isDirty = true;\r\n        return this.buffer;\r\n    }\r\n    setBuffer(data, ownsBuffer, value) {\r\n        if (this.isBound)\r\n            throw new Error('Cannot change attributes while VBO is bound');\r\n        this.attributes = value;\r\n        this.ownsBuffer = ownsBuffer;\r\n        this.buffer = data;\r\n    }\r\n    bufferChanged() {\r\n        if (this.isBound) {\r\n            this.gl.bufferData(GL20_1.GL20.GL_ARRAY_BUFFER, this.buffer.subarray(0, this.verticesLength), this.usage);\r\n            this.isDirty = false;\r\n        }\r\n    }\r\n    setVertices(vertices, offset, count) {\r\n        this.isDirty = true;\r\n        this.buffer.set(vertices.slice(offset, offset + count), 0);\r\n        if (this.verticesLength < count) {\r\n            this.verticesLength = count;\r\n        }\r\n        this.bufferChanged();\r\n    }\r\n    updateVertices(targetOffset, vertices, sourceOffset, count) {\r\n        this.isDirty = true;\r\n        this.buffer.set(vertices.slice(sourceOffset, sourceOffset + count), targetOffset);\r\n        this.verticesLength = targetOffset + count;\r\n        this.bufferChanged();\r\n    }\r\n    getUsage() {\r\n        return this.usage;\r\n    }\r\n    setUsage(value) {\r\n        if (this.isBound)\r\n            throw new Error('Cannot change usage while VBO is bound');\r\n        this.usage = value;\r\n    }\r\n    bind(shader, locations = null) {\r\n        this.gl.bindBuffer(GL20_1.GL20.GL_ARRAY_BUFFER, this.bufferHandle);\r\n        if (this.isDirty) {\r\n            this.gl.bufferData(GL20_1.GL20.GL_ARRAY_BUFFER, this.buffer.subarray(0, this.verticesLength), this.usage);\r\n            this.isDirty = false;\r\n        }\r\n        const numAttributes = this.attributes.size();\r\n        if (!locations) {\r\n            for (let i = 0; i < numAttributes; i++) {\r\n                const attribute = this.attributes.get(i);\r\n                const location = shader.getAttributeLocation(attribute.alias);\r\n                if (location < 0)\r\n                    continue;\r\n                this.gl.enableVertexAttribArray(location);\r\n                this.gl.vertexAttribPointer(location, attribute.numComponents, attribute.type, attribute.normalized, this.attributes.vertexSize, attribute.offset);\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0; i < numAttributes; i++) {\r\n                const attribute = this.attributes.get(i);\r\n                const location = locations[i];\r\n                if (location < 0)\r\n                    continue;\r\n                this.gl.enableVertexAttribArray(location);\r\n                this.gl.vertexAttribPointer(location, attribute.numComponents, attribute.type, attribute.normalized, this.attributes.vertexSize, attribute.offset);\r\n            }\r\n        }\r\n        this.isBound = true;\r\n    }\r\n    unbind(shader, locations = null) {\r\n        const numAttributes = this.attributes.size();\r\n        if (!locations) {\r\n            for (let i = 0; i < numAttributes; i++) {\r\n                const name = this.attributes.get(i).alias;\r\n                const location = shader.getAttributeLocation(name);\r\n                if (location >= 0)\r\n                    this.gl.disableVertexAttribArray(location);\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0; i < numAttributes; i++) {\r\n                const location = locations[i];\r\n                if (location >= 0)\r\n                    this.gl.disableVertexAttribArray(location);\r\n            }\r\n        }\r\n        this.gl.bindBuffer(GL20_1.GL20.GL_ARRAY_BUFFER, null);\r\n        this.isBound = false;\r\n    }\r\n    invalidate() {\r\n        this.bufferHandle = this.gl.createBuffer();\r\n        this.isDirty = true;\r\n    }\r\n    dispose() {\r\n        this.gl.bindBuffer(GL20_1.GL20.GL_ARRAY_BUFFER, null);\r\n        this.gl.deleteBuffer(this.bufferHandle);\r\n    }\r\n}\r\nexports.VertexBufferObject = VertexBufferObject;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.VertexInfo = void 0;\r\nconst Utils_1 = require(\"../../Utils\");\r\nconst Vector2_1 = require(\"../../Vector2\");\r\nconst Vector3_1 = require(\"../../Vector3\");\r\nclass VertexInfo {\r\n    constructor() {\r\n        this.position = new Vector3_1.Vector3();\r\n        this.normal = new Vector3_1.Vector3(0, 1, 0);\r\n        this.color = new Utils_1.Color(1, 1, 1, 1);\r\n        this.uv = new Vector2_1.Vector2();\r\n    }\r\n    reset() {\r\n        this.position.set(0, 0, 0);\r\n        this.normal.set(0, 1, 0);\r\n        this.color.set(1, 1, 1, 1);\r\n        this.uv.set(0, 0);\r\n    }\r\n    set(pos, nor, col, uv) {\r\n        this.reset();\r\n        this.hasPosition = !!pos;\r\n        if (this.hasPosition)\r\n            this.position.set(pos.x, pos.y, pos.z);\r\n        this.hasNormal = !!nor;\r\n        if (this.hasNormal)\r\n            this.normal.set(nor.x, nor.y, nor.z);\r\n        this.hasColor = !!col;\r\n        if (this.hasColor)\r\n            this.color.set(col.r, col.g, col.b, col.a);\r\n        this.hasUV = !!uv;\r\n        if (this.hasUV)\r\n            this.uv.set(uv.x, uv.y);\r\n        return this;\r\n    }\r\n    setWithVertextInfo(other) {\r\n        if (!other)\r\n            return this.set(null, null, null, null);\r\n        this.hasPosition = other.hasPosition;\r\n        this.position.set(other.position.x, other.position.y, other.position.z);\r\n        this.hasNormal = other.hasNormal;\r\n        this.normal.set(other.normal.x, other.normal.y, other.normal.z);\r\n        this.hasColor = other.hasColor;\r\n        this.color.set(other.color.r, other.color.g, other.color.b, other.color.a);\r\n        this.hasUV = other.hasUV;\r\n        this.uv.set(other.uv.x, other.uv.y);\r\n        return this;\r\n    }\r\n    setPos(x, y, z) {\r\n        this.position.set(x, y, z);\r\n        this.hasPosition = true;\r\n        return this;\r\n    }\r\n    setNor(x, y, z) {\r\n        this.normal.set(x, y, z);\r\n        this.hasNormal = true;\r\n        return this;\r\n    }\r\n    setCol(r, g, b, a) {\r\n        this.color.set(r, g, b, a);\r\n        this.hasColor = true;\r\n        return this;\r\n    }\r\n    setUV(u, v) {\r\n        this.uv.set(u, v);\r\n        this.hasUV = true;\r\n        return this;\r\n    }\r\n    lerp(target, alpha) {\r\n        if (this.hasPosition && target.hasPosition)\r\n            this.position.lerp(target.position, alpha);\r\n        if (this.hasNormal && target.hasNormal)\r\n            this.normal.lerp(target.normal, alpha);\r\n        if (this.hasColor && target.hasColor)\r\n            this.color.lerp(target.color, alpha);\r\n        if (this.hasUV && target.hasUV)\r\n            this.uv.lerp(target.uv, alpha);\r\n        return this;\r\n    }\r\n}\r\nexports.VertexInfo = VertexInfo;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./AnimationController\"), exports);\r\n__exportStar(require(\"./BaseAnimationController\"), exports);\r\n__exportStar(require(\"./BoxShapeBuilder\"), exports);\r\n__exportStar(require(\"./IndexBufferObject\"), exports);\r\n__exportStar(require(\"./MeshBuilder\"), exports);\r\n__exportStar(require(\"./ModelBuilder\"), exports);\r\n__exportStar(require(\"./TextureProvider\"), exports);\r\n__exportStar(require(\"./VertexBufferObject\"), exports);\r\n__exportStar(require(\"./VertexData\"), exports);\r\n__exportStar(require(\"./VertexInfo\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Affine2 = void 0;\r\nconst Matrix3_1 = require(\"./Matrix3\");\r\nconst Matrix4_1 = require(\"./Matrix4\");\r\nclass Affine2 {\r\n    constructor() {\r\n        this.m00 = 1;\r\n        this.m01 = 0;\r\n        this.m02 = 0;\r\n        this.m10 = 0;\r\n        this.m11 = 1;\r\n        this.m12 = 0;\r\n    }\r\n    idt() {\r\n        this.m00 = 1;\r\n        this.m01 = 0;\r\n        this.m02 = 0;\r\n        this.m10 = 0;\r\n        this.m11 = 1;\r\n        this.m12 = 0;\r\n        return this;\r\n    }\r\n    set(other) {\r\n        this.m00 = other.m00;\r\n        this.m01 = other.m01;\r\n        this.m02 = other.m02;\r\n        this.m10 = other.m10;\r\n        this.m11 = other.m11;\r\n        this.m12 = other.m12;\r\n        return this;\r\n    }\r\n    setMatrix3(matrix) {\r\n        const other = matrix.val;\r\n        this.m00 = other[Matrix3_1.Matrix3.M00];\r\n        this.m01 = other[Matrix3_1.Matrix3.M01];\r\n        this.m02 = other[Matrix3_1.Matrix3.M02];\r\n        this.m10 = other[Matrix3_1.Matrix3.M10];\r\n        this.m11 = other[Matrix3_1.Matrix3.M11];\r\n        this.m12 = other[Matrix3_1.Matrix3.M12];\r\n        return this;\r\n    }\r\n    setMatrix4(matrix) {\r\n        const other = matrix.values;\r\n        this.m00 = other[Matrix4_1.Matrix4.M00];\r\n        this.m01 = other[Matrix4_1.Matrix4.M01];\r\n        this.m02 = other[Matrix4_1.Matrix4.M03];\r\n        this.m10 = other[Matrix4_1.Matrix4.M10];\r\n        this.m11 = other[Matrix4_1.Matrix4.M11];\r\n        this.m12 = other[Matrix4_1.Matrix4.M13];\r\n        return this;\r\n    }\r\n    setToTranslation(x, y) {\r\n        this.m00 = 1;\r\n        this.m01 = 0;\r\n        this.m02 = x;\r\n        this.m10 = 0;\r\n        this.m11 = 1;\r\n        this.m12 = y;\r\n        return this;\r\n    }\r\n    setToScaling(scaleX, scaleY) {\r\n        this.m00 = scaleX;\r\n        this.m01 = 0;\r\n        this.m02 = 0;\r\n        this.m10 = 0;\r\n        this.m11 = scaleY;\r\n        this.m12 = 0;\r\n        return this;\r\n    }\r\n    setToRotation(degrees) {\r\n        const cos = Math.cos(degrees * (180 / Math.PI));\r\n        const sin = Math.sin(degrees * (180 / Math.PI));\r\n        this.m00 = cos;\r\n        this.m01 = -sin;\r\n        this.m02 = 0;\r\n        this.m10 = sin;\r\n        this.m11 = cos;\r\n        this.m12 = 0;\r\n        return this;\r\n    }\r\n    setToRotationRad(radians) {\r\n        const cos = Math.cos(radians);\r\n        const sin = Math.sin(radians);\r\n        this.m00 = cos;\r\n        this.m01 = -sin;\r\n        this.m02 = 0;\r\n        this.m10 = sin;\r\n        this.m11 = cos;\r\n        this.m12 = 0;\r\n        return this;\r\n    }\r\n    setToShearing(shearX, shearY) {\r\n        this.m00 = 1;\r\n        this.m01 = shearX;\r\n        this.m02 = 0;\r\n        this.m10 = shearY;\r\n        this.m11 = 1;\r\n        this.m12 = 0;\r\n        return this;\r\n    }\r\n    setToTrnRotScl(x, y, degrees, scaleX, scaleY) {\r\n        this.m02 = x;\r\n        this.m12 = y;\r\n        if (degrees === 0) {\r\n            this.m00 = scaleX;\r\n            this.m01 = 0;\r\n            this.m10 = 0;\r\n            this.m11 = scaleY;\r\n        }\r\n        else {\r\n            const sin = Math.sin(degrees * (180 / Math.PI));\r\n            const cos = Math.cos(degrees * (180 / Math.PI));\r\n            this.m00 = cos * scaleX;\r\n            this.m01 = -sin * scaleY;\r\n            this.m10 = sin * scaleX;\r\n            this.m11 = cos * scaleY;\r\n        }\r\n        return this;\r\n    }\r\n    setToTrnRotRadScl(x, y, radians, scaleX, scaleY) {\r\n        this.m02 = x;\r\n        this.m12 = y;\r\n        if (radians === 0) {\r\n            this.m00 = scaleX;\r\n            this.m01 = 0;\r\n            this.m10 = 0;\r\n            this.m11 = scaleY;\r\n        }\r\n        else {\r\n            const sin = Math.sin(radians);\r\n            const cos = Math.cos(radians);\r\n            this.m00 = cos * scaleX;\r\n            this.m01 = -sin * scaleY;\r\n            this.m10 = sin * scaleX;\r\n            this.m11 = cos * scaleY;\r\n        }\r\n        return this;\r\n    }\r\n    setToTrnScl(x, y, scaleX, scaleY) {\r\n        this.m00 = scaleX;\r\n        this.m01 = 0;\r\n        this.m02 = x;\r\n        this.m10 = 0;\r\n        this.m11 = scaleY;\r\n        this.m12 = y;\r\n        return this;\r\n    }\r\n    setToProduct(l, r) {\r\n        this.m00 = l.m00 * r.m00 + l.m01 * r.m10;\r\n        this.m01 = l.m00 * r.m01 + l.m01 * r.m11;\r\n        this.m02 = l.m00 * r.m02 + l.m01 * r.m12 + l.m02;\r\n        this.m10 = l.m10 * r.m00 + l.m11 * r.m10;\r\n        this.m11 = l.m10 * r.m01 + l.m11 * r.m11;\r\n        this.m12 = l.m10 * r.m02 + l.m11 * r.m12 + l.m12;\r\n        return this;\r\n    }\r\n    inv() {\r\n        const det = this.det();\r\n        if (det === 0)\r\n            throw new Error(\"Can't invert a singular affine matrix\");\r\n        const invDet = 1 / det;\r\n        const tmp00 = this.m11;\r\n        const tmp01 = -this.m01;\r\n        const tmp02 = this.m01 * this.m12 - this.m11 * this.m02;\r\n        const tmp10 = -this.m10;\r\n        const tmp11 = this.m00;\r\n        const tmp12 = this.m10 * this.m02 - this.m00 * this.m12;\r\n        this.m00 = invDet * tmp00;\r\n        this.m01 = invDet * tmp01;\r\n        this.m02 = invDet * tmp02;\r\n        this.m10 = invDet * tmp10;\r\n        this.m11 = invDet * tmp11;\r\n        this.m12 = invDet * tmp12;\r\n        return this;\r\n    }\r\n    mul(other) {\r\n        const tmp00 = this.m00 * other.m00 + this.m01 * other.m10;\r\n        const tmp01 = this.m00 * other.m01 + this.m01 * other.m11;\r\n        const tmp02 = this.m00 * other.m02 + this.m01 * other.m12 + this.m02;\r\n        const tmp10 = this.m10 * other.m00 + this.m11 * other.m10;\r\n        const tmp11 = this.m10 * other.m01 + this.m11 * other.m11;\r\n        const tmp12 = this.m10 * other.m02 + this.m11 * other.m12 + this.m12;\r\n        this.m00 = tmp00;\r\n        this.m01 = tmp01;\r\n        this.m02 = tmp02;\r\n        this.m10 = tmp10;\r\n        this.m11 = tmp11;\r\n        this.m12 = tmp12;\r\n        return this;\r\n    }\r\n    preMul(other) {\r\n        const tmp00 = other.m00 * this.m00 + other.m01 * this.m10;\r\n        const tmp01 = other.m00 * this.m01 + other.m01 * this.m11;\r\n        const tmp02 = other.m00 * this.m02 + other.m01 * this.m12 + other.m02;\r\n        const tmp10 = other.m10 * this.m00 + other.m11 * this.m10;\r\n        const tmp11 = other.m10 * this.m01 + other.m11 * this.m11;\r\n        const tmp12 = other.m10 * this.m02 + other.m11 * this.m12 + other.m12;\r\n        this.m00 = tmp00;\r\n        this.m01 = tmp01;\r\n        this.m02 = tmp02;\r\n        this.m10 = tmp10;\r\n        this.m11 = tmp11;\r\n        this.m12 = tmp12;\r\n        return this;\r\n    }\r\n    translate(x, y) {\r\n        this.m02 += this.m00 * x + this.m01 * y;\r\n        this.m12 += this.m10 * x + this.m11 * y;\r\n        return this;\r\n    }\r\n    preTranslate(x, y) {\r\n        this.m02 += x;\r\n        this.m12 += y;\r\n        return this;\r\n    }\r\n    scale(scaleX, scaleY) {\r\n        this.m00 *= scaleX;\r\n        this.m01 *= scaleY;\r\n        this.m10 *= scaleX;\r\n        this.m11 *= scaleY;\r\n        return this;\r\n    }\r\n    preScale(scaleX, scaleY) {\r\n        this.m00 *= scaleX;\r\n        this.m01 *= scaleX;\r\n        this.m02 *= scaleX;\r\n        this.m10 *= scaleY;\r\n        this.m11 *= scaleY;\r\n        this.m12 *= scaleY;\r\n        return this;\r\n    }\r\n    rotate(degrees) {\r\n        if (degrees === 0)\r\n            return this;\r\n        const cos = Math.cos(degrees * (180 / Math.PI));\r\n        const sin = Math.sin(degrees * (180 / Math.PI));\r\n        const tmp00 = this.m00 * cos + this.m01 * sin;\r\n        const tmp01 = this.m00 * -sin + this.m01 * cos;\r\n        const tmp10 = this.m10 * cos + this.m11 * sin;\r\n        const tmp11 = this.m10 * -sin + this.m11 * cos;\r\n        this.m00 = tmp00;\r\n        this.m01 = tmp01;\r\n        this.m10 = tmp10;\r\n        this.m11 = tmp11;\r\n        return this;\r\n    }\r\n    rotateRad(radians) {\r\n        if (radians === 0)\r\n            return this;\r\n        const cos = Math.cos(radians);\r\n        const sin = Math.sin(radians);\r\n        const tmp00 = this.m00 * cos + this.m01 * sin;\r\n        const tmp01 = this.m00 * -sin + this.m01 * cos;\r\n        const tmp10 = this.m10 * cos + this.m11 * sin;\r\n        const tmp11 = this.m10 * -sin + this.m11 * cos;\r\n        this.m00 = tmp00;\r\n        this.m01 = tmp01;\r\n        this.m10 = tmp10;\r\n        this.m11 = tmp11;\r\n        return this;\r\n    }\r\n    preRotate(degrees) {\r\n        if (degrees === 0)\r\n            return this;\r\n        const cos = Math.cos(degrees * (180 / Math.PI));\r\n        const sin = Math.sin(degrees * (180 / Math.PI));\r\n        const tmp00 = cos * this.m00 - sin * this.m10;\r\n        const tmp01 = cos * this.m01 - sin * this.m11;\r\n        const tmp02 = cos * this.m02 - sin * this.m12;\r\n        const tmp10 = sin * this.m00 + cos * this.m10;\r\n        const tmp11 = sin * this.m01 + cos * this.m11;\r\n        const tmp12 = sin * this.m02 + cos * this.m12;\r\n        this.m00 = tmp00;\r\n        this.m01 = tmp01;\r\n        this.m02 = tmp02;\r\n        this.m10 = tmp10;\r\n        this.m11 = tmp11;\r\n        this.m12 = tmp12;\r\n        return this;\r\n    }\r\n    preRotateRad(radians) {\r\n        if (radians === 0)\r\n            return this;\r\n        const cos = Math.cos(radians);\r\n        const sin = Math.sin(radians);\r\n        const tmp00 = cos * this.m00 - sin * this.m10;\r\n        const tmp01 = cos * this.m01 - sin * this.m11;\r\n        const tmp02 = cos * this.m02 - sin * this.m12;\r\n        const tmp10 = sin * this.m00 + cos * this.m10;\r\n        const tmp11 = sin * this.m01 + cos * this.m11;\r\n        const tmp12 = sin * this.m02 + cos * this.m12;\r\n        this.m00 = tmp00;\r\n        this.m01 = tmp01;\r\n        this.m02 = tmp02;\r\n        this.m10 = tmp10;\r\n        this.m11 = tmp11;\r\n        this.m12 = tmp12;\r\n        return this;\r\n    }\r\n    shear(shearX, shearY) {\r\n        let tmp0 = this.m00 + shearY * this.m01;\r\n        let tmp1 = this.m01 + shearX * this.m00;\r\n        this.m00 = tmp0;\r\n        this.m01 = tmp1;\r\n        tmp0 = this.m10 + shearY * this.m11;\r\n        tmp1 = this.m11 + shearX * this.m10;\r\n        this.m10 = tmp0;\r\n        this.m11 = tmp1;\r\n        return this;\r\n    }\r\n    preShear(shearX, shearY) {\r\n        const tmp00 = this.m00 + shearX * this.m10;\r\n        const tmp01 = this.m01 + shearX * this.m11;\r\n        const tmp02 = this.m02 + shearX * this.m12;\r\n        const tmp10 = this.m10 + shearY * this.m00;\r\n        const tmp11 = this.m11 + shearY * this.m01;\r\n        const tmp12 = this.m12 + shearY * this.m02;\r\n        this.m00 = tmp00;\r\n        this.m01 = tmp01;\r\n        this.m02 = tmp02;\r\n        this.m10 = tmp10;\r\n        this.m11 = tmp11;\r\n        this.m12 = tmp12;\r\n        return this;\r\n    }\r\n    det() {\r\n        return this.m00 * this.m11 - this.m01 * this.m10;\r\n    }\r\n    getTranslation(position) {\r\n        position.x = this.m02;\r\n        position.y = this.m12;\r\n        return position;\r\n    }\r\n    isTranslation() {\r\n        return this.m00 === 1 && this.m11 === 1 && this.m01 === 0 && this.m10 === 0;\r\n    }\r\n    isIdt() {\r\n        return this.m00 === 1 && this.m02 === 0 && this.m12 === 0 && this.m11 === 1 && this.m01 === 0 && this.m10 === 0;\r\n    }\r\n    applyTo(point) {\r\n        const x = point.x;\r\n        const y = point.y;\r\n        point.x = this.m00 * x + this.m01 * y + this.m02;\r\n        point.y = this.m10 * x + this.m11 * y + this.m12;\r\n    }\r\n}\r\nexports.Affine2 = Affine2;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Animation = exports.PlayMode = void 0;\r\nvar PlayMode;\r\n(function (PlayMode) {\r\n    PlayMode[PlayMode[\"NORMAL\"] = 0] = \"NORMAL\";\r\n    PlayMode[PlayMode[\"LOOP\"] = 1] = \"LOOP\";\r\n    PlayMode[PlayMode[\"LOOP_PINGPONG\"] = 2] = \"LOOP_PINGPONG\";\r\n    PlayMode[PlayMode[\"REVERSED\"] = 3] = \"REVERSED\";\r\n    PlayMode[PlayMode[\"LOOP_REVERSED\"] = 4] = \"LOOP_REVERSED\";\r\n})(PlayMode = exports.PlayMode || (exports.PlayMode = {}));\r\nclass Animation {\r\n    constructor(keyFrames, frameDurations) {\r\n        this.totalDuration = 0;\r\n        this.keyFrames = keyFrames;\r\n        if (!Array.isArray(frameDurations)) {\r\n            frameDurations = [frameDurations];\r\n        }\r\n        const lastDuration = frameDurations[frameDurations.length - 1] || 0;\r\n        while (frameDurations.length < keyFrames.length) {\r\n            frameDurations.push(lastDuration);\r\n        }\r\n        for (let fD of frameDurations) {\r\n            this.totalDuration += fD;\r\n        }\r\n        this.frameDurations = frameDurations;\r\n    }\r\n    getFrameNumber(stateTimeRemainder, reverse = false) {\r\n        const { frameDurations } = this;\r\n        let fN = reverse ? frameDurations.length - 1 : 0;\r\n        while (true) {\r\n            stateTimeRemainder -= frameDurations[fN];\r\n            if (stateTimeRemainder < 0) {\r\n                break;\r\n            }\r\n            reverse ? fN-- : fN++;\r\n        }\r\n        return fN;\r\n    }\r\n    getKeyFrame(stateTime, mode) {\r\n        const { keyFrames, frameDurations, totalDuration } = this;\r\n        const runIndex = Math.floor(stateTime / totalDuration);\r\n        const stateTimeRemainder = stateTime % totalDuration;\r\n        let frameNumber = 0;\r\n        switch (mode) {\r\n            case PlayMode.NORMAL:\r\n                frameNumber = runIndex === 0 ? this.getFrameNumber(stateTimeRemainder) : frameDurations.length - 1;\r\n                break;\r\n            case PlayMode.LOOP:\r\n                frameNumber = this.getFrameNumber(stateTimeRemainder);\r\n                break;\r\n            case PlayMode.LOOP_PINGPONG:\r\n                frameNumber = this.getFrameNumber(stateTimeRemainder, runIndex % 2 === 1);\r\n                break;\r\n            case PlayMode.REVERSED:\r\n                frameNumber = runIndex === 0 ? this.getFrameNumber(stateTimeRemainder, true) : 0;\r\n                break;\r\n            case PlayMode.LOOP_REVERSED:\r\n                frameNumber = this.getFrameNumber(stateTimeRemainder, true);\r\n                break;\r\n            default:\r\n        }\r\n        return keyFrames[frameNumber];\r\n    }\r\n}\r\nexports.Animation = Animation;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AssetManager = void 0;\r\nconst BitmapFont_1 = require(\"./BitmapFont\");\r\nconst Texture_1 = require(\"./Texture\");\r\nconst TextureAtlas_1 = require(\"./TextureAtlas\");\r\nclass AssetManager {\r\n    constructor(gl) {\r\n        this.promises = [];\r\n        this.atlases = new Map();\r\n        this.textures = new Map();\r\n        this.jsonData = new Map();\r\n        this.binaryData = new Map();\r\n        this.done = 0;\r\n        this.listeners = [];\r\n        this.fonts = new Map();\r\n        this.gl = gl;\r\n    }\r\n    addListener(handler) {\r\n        this.listeners.push(handler);\r\n    }\r\n    reportDone() {\r\n        this.done++;\r\n        for (const handler of this.listeners) {\r\n            handler((this.done / this.getTotal()) * 100, this.done >= this.getTotal());\r\n        }\r\n    }\r\n    loadAtlas(path, name) {\r\n        const promise = TextureAtlas_1.TextureAtlas.load(this.gl, path, {}).then(atlas => {\r\n            this.atlases.set(name, atlas);\r\n            this.reportDone();\r\n            return atlas;\r\n        });\r\n        this.promises.push(promise);\r\n        return promise;\r\n    }\r\n    getAtlas(name) {\r\n        return this.atlases.get(name);\r\n    }\r\n    loadJsonData(path, name) {\r\n        const promise = fetch(path)\r\n            .then(res => res.json())\r\n            .then(json => {\r\n            this.jsonData.set(name, json);\r\n            this.reportDone();\r\n            return json;\r\n        });\r\n        this.promises.push(promise);\r\n        return promise;\r\n    }\r\n    getJsonData(name) {\r\n        return this.jsonData.get(name);\r\n    }\r\n    loadBinaryData(path, name) {\r\n        const promise = fetch(path)\r\n            .then(res => res.arrayBuffer())\r\n            .then(buffer => {\r\n            this.binaryData.set(name, buffer);\r\n            this.reportDone();\r\n            return buffer;\r\n        });\r\n        this.promises.push(promise);\r\n        return promise;\r\n    }\r\n    getBinaryData(name) {\r\n        return this.binaryData.get(name);\r\n    }\r\n    loadFont(path, name, flip = false) {\r\n        const promise = BitmapFont_1.BitmapFont.load(this.gl, path, flip).then(font => {\r\n            this.fonts.set(name, font);\r\n            this.reportDone();\r\n            return font;\r\n        });\r\n        this.promises.push(promise);\r\n        return promise;\r\n    }\r\n    getFont(name) {\r\n        return this.fonts.get(name);\r\n    }\r\n    loadTexture(path, name) {\r\n        const promise = Texture_1.Texture.load(this.gl, path).then(texture => {\r\n            this.textures.set(name, texture);\r\n            this.reportDone();\r\n            return texture;\r\n        });\r\n        this.promises.push(promise);\r\n        return promise;\r\n    }\r\n    getTexture(name) {\r\n        return this.textures.get(name);\r\n    }\r\n    finishLoading() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield Promise.all(this.promises);\r\n        });\r\n    }\r\n    getDone() {\r\n        return this.done;\r\n    }\r\n    getTotal() {\r\n        return this.promises.length;\r\n    }\r\n    disposeAll() {\r\n        const atlasKeys = [...this.atlases.keys()];\r\n        atlasKeys.forEach(key => {\r\n            this.atlases.get(key).dispose();\r\n            this.atlases.delete(key);\r\n        });\r\n        const localTextureKeys = [...this.textures.keys()];\r\n        localTextureKeys.forEach(key => {\r\n            this.textures.get(key).dispose();\r\n            this.textures.delete(key);\r\n        });\r\n        const fontMapKeys = [...this.fonts.keys()];\r\n        fontMapKeys.forEach(key => {\r\n            this.fonts.get(key).dispose();\r\n            this.fonts.delete(key);\r\n        });\r\n    }\r\n}\r\nexports.AssetManager = AssetManager;\r\nexports.default = AssetManager;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BitmapFont = void 0;\r\nconst BitmapFontCache_1 = require(\"./BitmapFontCache\");\r\nconst BitmapFontData_1 = require(\"./BitmapFontData\");\r\nconst Utils_1 = require(\"./Utils\");\r\nclass BitmapFont {\r\n    /** Constructs a new BitmapFont from the given {@link BitmapFontData} and array of {@link TextureRegion}. If the TextureRegion\r\n     * is null or empty, the image path(s) will be read from the BitmapFontData. The dispose() method will not dispose the texture\r\n     * of the region(s) if the regions array is != null and not empty.\r\n     * @param integer If true, rendering positions will be at integer values to avoid filtering artifacts. */\r\n    constructor(data, regions, integer) {\r\n        this.load = (data) => {\r\n            const glyphValues = Object.values(data.glyphs);\r\n            for (let i = 0; i < glyphValues.length; i++) {\r\n                const page = glyphValues[i];\r\n                if (!page)\r\n                    continue;\r\n                for (let j = 0; j < page.length; j++) {\r\n                    const glyph = page[j];\r\n                    if (glyph) {\r\n                        data.setGlyphRegion(glyph, this.regions[glyph.page]);\r\n                    }\r\n                }\r\n            }\r\n            if (data.missingGlyph != null)\r\n                data.setGlyphRegion(data.missingGlyph, this.regions[data.missingGlyph.page]);\r\n        };\r\n        /** Draws text at the specified position.\r\n         * @see BitmapFontCache#addText(CharSequence, float, float, int, int, float, int, boolean, String) */\r\n        this.draw = (batch, str, x, y, targetWidth, halign = Utils_1.Align.left, wrap = true, start = 0, end = str.length, truncate) => {\r\n            this.cache.clear();\r\n            this.cache.addText(str, x, y, start, end, targetWidth, halign, wrap, truncate);\r\n            this.cache.draw(batch);\r\n        };\r\n        /** Returns the color of text drawn with this font. */\r\n        this.getColor = () => {\r\n            return this.cache.getColor();\r\n        };\r\n        /** A convenience method for setting the font color. The color can also be set by modifying {@link #getColor()}. */\r\n        // setColor = (r: number, g: number, b: number, a: number) => {\r\n        //    this.cache.getColor().set(r, g, b, a);\r\n        // };\r\n        this.getScaleX = () => {\r\n            return this.data.scaleX;\r\n        };\r\n        this.getScaleY = () => {\r\n            return this.data.scaleY;\r\n        };\r\n        /** Returns the array of TextureRegions that represents each texture page of glyphs.\r\n         * @return the array of texture regions; modifying it may produce undesirable results */\r\n        this.getRegions = () => {\r\n            return this.regions;\r\n        };\r\n        /** Returns the texture page at the given index.\r\n         * @return the texture page at the given index */\r\n        this.getRegion = (index) => {\r\n            return this.regions[index];\r\n        };\r\n        /** Returns the line height, which is the distance from one line of text to the next. */\r\n        this.getLineHeight = () => {\r\n            return this.data.lineHeight;\r\n        };\r\n        /** Returns the x-advance of the space character. */\r\n        this.getSpaceXadvance = () => {\r\n            return this.data.spaceXadvance;\r\n        };\r\n        /** Returns the x-height, which is the distance from the top of most lowercase characters to the baseline. */\r\n        this.getXHeight = () => {\r\n            return this.data.xHeight;\r\n        };\r\n        /** Returns the cap height, which is the distance from the top of most uppercase characters to the baseline. Since the drawing\r\n         * position is the cap height of the first line, the cap height can be used to get the location of the baseline. */\r\n        this.getCapHeight = () => {\r\n            return this.data.capHeight;\r\n        };\r\n        /** Returns the ascent, which is the distance from the cap height to the top of the tallest glyph. */\r\n        this.getAscent = () => {\r\n            return this.data.ascent;\r\n        };\r\n        /** Returns the descent, which is the distance from the bottom of the glyph that extends the lowest to the baseline. This\r\n         * number is negative. */\r\n        this.getDescent = () => {\r\n            return this.data.descent;\r\n        };\r\n        /** Returns true if this BitmapFont has been flipped for use with a y-down coordinate system. */\r\n        this.isFlipped = () => {\r\n            return this.flipped;\r\n        };\r\n        /** Disposes the texture used by this BitmapFont's region IF this BitmapFont created the texture. */\r\n        this.dispose = () => {\r\n            if (this.ownsTexture) {\r\n                for (let i = 0; i < this.regions.length; i++) {\r\n                    this.regions[i].texture.dispose();\r\n                }\r\n            }\r\n        };\r\n        /** Makes the specified glyphs fixed width. This can be useful to make the numbers in a font fixed width. Eg, when horizontally\r\n         * centering a score or loading percentage text, it will not jump around as different numbers are shown. */\r\n        this.setFixedWidthGlyphs = (glyphs) => {\r\n            const data = this.data;\r\n            let maxAdvance = 0;\r\n            for (let index = 0, end = glyphs.length; index < end; index++) {\r\n                const g = data.getGlyph(glyphs.charAt(index));\r\n                if (g != null && g.xadvance > maxAdvance)\r\n                    maxAdvance = g.xadvance;\r\n            }\r\n            for (let index = 0, end = glyphs.length; index < end; index++) {\r\n                const g = data.getGlyph(glyphs.charAt(index));\r\n                if (!g)\r\n                    continue;\r\n                g.xoffset += (maxAdvance - g.xadvance) / 2;\r\n                g.xadvance = maxAdvance;\r\n                g.kerning = [];\r\n                g.kerning = null;\r\n                g.fixedWidth = true;\r\n            }\r\n        };\r\n        /** Specifies whether to use integer positions. Default is to use them so filtering doesn't kick in as badly. */\r\n        this.setUseIntegerPositions = (integer) => {\r\n            this.integer = integer;\r\n            this.cache.setUseIntegerPositions(integer);\r\n        };\r\n        /** Checks whether this font uses integer positions for drawing. */\r\n        this.usesIntegerPositions = () => {\r\n            return this.integer;\r\n        };\r\n        /** For expert usage -- returns the BitmapFontCache used by this font, for rendering to a sprite batch. This can be used, for\r\n         * example, to manipulate glyph colors within a specific index.\r\n         * @return the bitmap font cache used by this font */\r\n        this.getCache = () => {\r\n            return this.cache;\r\n        };\r\n        /** Gets the underlying {@link BitmapFontData} for this BitmapFont. */\r\n        this.getData = () => {\r\n            return this.data;\r\n        };\r\n        /** @return whether the texture is owned by the font, font disposes the texture itself if true */\r\n        this.getOwnsTexture = () => {\r\n            return this.ownsTexture;\r\n        };\r\n        /** Sets whether the font owns the texture. In case it does, the font will also dispose of the texture when {@link #dispose()}\r\n         * is called. Use with care!\r\n         * @param ownsTexture whether the font owns the texture */\r\n        this.setOwnsTexture = (ownsTexture) => {\r\n            this.ownsTexture = ownsTexture;\r\n        };\r\n        /** Creates a new BitmapFontCache for this font. Using this method allows the font to provide the BitmapFontCache\r\n         * implementation to customize rendering.\r\n         * <p>\r\n         * Note this method is called by the BitmapFont constructors. If a subclass overrides this method, it will be called before the\r\n         * subclass constructors. */\r\n        this.newFontCache = () => {\r\n            return new BitmapFontCache_1.BitmapFontCache(this, this.integer);\r\n        };\r\n        this.regions = regions;\r\n        this.flipped = data.flipped;\r\n        this.data = data;\r\n        this.integer = integer;\r\n        if (this.regions.length === 0) {\r\n            console.log('No texture region were found');\r\n            return;\r\n        }\r\n        else {\r\n            this.ownsTexture = false;\r\n        }\r\n        this.cache = this.newFontCache();\r\n        this.load(data);\r\n    }\r\n}\r\nexports.BitmapFont = BitmapFont;\r\n_a = BitmapFont;\r\nBitmapFont.load = (gl, fontFile, flip = false, interger = false) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const fontData = new BitmapFontData_1.BitmapFontData(fontFile, flip);\r\n    yield fontData.loadFont(gl);\r\n    return new BitmapFont(fontData, fontData.regions, interger);\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BitmapFontCache = void 0;\r\nconst GlyphLayout_1 = require(\"./GlyphLayout\");\r\nconst NumberUtils_1 = require(\"./NumberUtils\");\r\nconst Utils_1 = require(\"./Utils\");\r\nclass BitmapFontCache {\r\n    /** @param integer If true, rendering positions will be at integer values to avoid filtering artifacts. */\r\n    constructor(font, integer) {\r\n        this.tempColor = new Utils_1.Color(1, 1, 1, 1);\r\n        this.drawingTexts = [];\r\n        this.layouts = [];\r\n        this.pooledLayouts = [];\r\n        this.color = new Utils_1.Color(1, 1, 1, 1);\r\n        /** Sets the position of the text, relative to the position when the cached text was created.\r\n         * @param x The x coordinate\r\n         * @param y The y coordinate */\r\n        this.setPosition = (x, y) => {\r\n            this.translate(x - this.x, y - this.y);\r\n        };\r\n        /** Sets the position of the text, relative to its current position.\r\n         * @param xAmount The amount in x to move the text\r\n         * @param yAmount The amount in y to move the text */\r\n        this.translate = (xAmount, yAmount) => {\r\n            if (xAmount === 0 && yAmount === 0)\r\n                return;\r\n            if (this.integer) {\r\n                xAmount = Math.round(xAmount);\r\n                yAmount = Math.round(yAmount);\r\n            }\r\n            this.x += xAmount;\r\n            this.y += yAmount;\r\n            const pageVertices = this.pageVertices;\r\n            for (let i = 0, n = pageVertices.length; i < n; i++) {\r\n                const vertices = pageVertices[i];\r\n                for (let ii = 0, nn = this.idx[i]; ii < nn; ii += 5) {\r\n                    vertices[ii] += xAmount;\r\n                    vertices[ii + 1] += yAmount;\r\n                }\r\n            }\r\n        };\r\n        /** Tints all text currently in the cache. Does not affect subsequently added text. */\r\n        // public tint = (tint: Color) => {\r\n        //    const newTint: number = tint.toFloatBits();\r\n        //    if (this.currentTint == newTint) return;\r\n        //    this.currentTint = newTint;\r\n        //    const pageVertices: number[][] = this.pageVertices;\r\n        //    const tempColor: Color = this.tempColor;\r\n        //    const tempGlyphCount: number[] = this.tempGlyphCount;\r\n        //    for (let i = 0; i < tempGlyphCount.length; i++) {\r\n        //       tempGlyphCount[i] = 0;\r\n        //    }\r\n        //    for (let i = 0, n = this.layouts.length; i < n; i++) {\r\n        //       const layout: GlyphLayout = this.layouts[i];\r\n        //       const colors: number[] = layout.colors;\r\n        //       let colorsIndex = 0,\r\n        //          nextColorGlyphIndex = 0,\r\n        //          glyphIndex = 0;\r\n        //       let lastColorFloatBits = 0;\r\n        //       for (let ii = 0, nn = layout.runs.length; ii < nn; ii++) {\r\n        //          const run: GlyphRun = layout.runs[ii];\r\n        //          const glyphs: Glyph[] = run.glyphs;\r\n        //          for (let iii = 0, nnn = run.glyphs.length; iii < nnn; iii++) {\r\n        //             if (glyphIndex++ === nextColorGlyphIndex) {\r\n        //                Color.abgr8888ToColor(tempColor, colors[++colorsIndex]);\r\n        //                lastColorFloatBits = tempColor.mul(tint).toFloatBits();\r\n        //                nextColorGlyphIndex = ++colorsIndex < colors.length ? colors[colorsIndex] : -1;\r\n        //             }\r\n        //             const page: number = glyphs[iii].page;\r\n        //             const offset = tempGlyphCount[page] * 20 + 2;\r\n        //             tempGlyphCount[page]++;\r\n        //             const vertices: number[] = pageVertices[page];\r\n        //             vertices[offset] = lastColorFloatBits;\r\n        //             vertices[offset + 5] = lastColorFloatBits;\r\n        //             vertices[offset + 10] = lastColorFloatBits;\r\n        //             vertices[offset + 15] = lastColorFloatBits;\r\n        //          }\r\n        //       }\r\n        //    }\r\n        // };\r\n        /** Sets the alpha component of all text currently in the cache. Does not affect subsequently added text. */\r\n        // public setAlphas = (alpha: number) => {\r\n        //    const alphaBits: number = (254 * alpha) << 24;\r\n        //    let prev = 0,\r\n        //       newColor = 0;\r\n        //    for (let j = 0, length = this.pageVertices.length; j < length; j++) {\r\n        //       const vertices: number[] = this.pageVertices[j];\r\n        //       for (let i = 2, n = this.idx[j]; i < n; i += 5) {\r\n        //          const c: number = vertices[i];\r\n        //          if (c == prev && i != 2) {\r\n        //             vertices[i] = newColor;\r\n        //          } else {\r\n        //             prev = c;\r\n        //             let rgba = NumberUtils.floatToIntColor(c);\r\n        //             rgba = (rgba & 0x00ffffff) | alphaBits;\r\n        //             newColor = NumberUtils.intToFloatColor(rgba);\r\n        //             vertices[i] = newColor;\r\n        //          }\r\n        //       }\r\n        //    }\r\n        // };\r\n        this.setColors = (r, g, b, a) => {\r\n            const intBits = (255 << 24) | ((255 * b) << 16) | ((255 * g) << 8) | (255 * r);\r\n            const value = NumberUtils_1.NumberUtil.intToFloatColor(intBits);\r\n            for (let j = 0, length = this.pageVertices.length; j < length; j++) {\r\n                const vertices = this.pageVertices[j];\r\n                for (let i = 2, n = this.idx[j]; i < n; i += 5)\r\n                    vertices[i] = value;\r\n            }\r\n        };\r\n        /** Returns the color used for subsequently added text. Modifying the color affects text subsequently added to the cache, but\r\n         * does not affect existing text currently in the cache. */\r\n        this.getColor = () => {\r\n            return this.color;\r\n        };\r\n        /** A convenience method for setting the cache color. The color can also be set by modifying {@link #getColor()}. */\r\n        this.setColor = (r, g, b, a) => {\r\n            this.color.set(r, g, b, a);\r\n        };\r\n        /** Removes all glyphs in the cache. */\r\n        this.clear = () => {\r\n            this.x = 0;\r\n            this.y = 0;\r\n            Utils_1.Pools.freeAll('GlyphLayout', this.pooledLayouts);\r\n            this.pooledLayouts.length = 0;\r\n            this.layouts.length = 0;\r\n            for (let i = 0, n = this.idx.length; i < n; i++) {\r\n                if (this.pageGlyphIndices != null)\r\n                    this.pageGlyphIndices[i].length = 0;\r\n                this.idx[i] = 0;\r\n            }\r\n        };\r\n        this.requireGlyphs = (layout) => {\r\n            if (this.pageVertices.length === 1) {\r\n                // Simple if we just have one page.\r\n                this.requirePageGlyphs(0, layout.glyphCount);\r\n            }\r\n            else {\r\n                const tempGlyphCount = this.tempGlyphCount;\r\n                for (let i = 0; i < tempGlyphCount.length; i++) {\r\n                    tempGlyphCount[i] = 0;\r\n                }\r\n                // Determine # of glyphs in each page.\r\n                for (let i = 0, n = layout.runs.length; i < n; i++) {\r\n                    const glyphs = layout.runs[i].glyphs;\r\n                    const glyphItems = glyphs;\r\n                    for (let ii = 0, nn = glyphs.length; ii < nn; ii++)\r\n                        tempGlyphCount[glyphItems[ii].page]++;\r\n                }\r\n                // Require that many for each page.\r\n                for (let i = 0, n = tempGlyphCount.length; i < n; i++)\r\n                    this.requirePageGlyphs(i, tempGlyphCount[i]);\r\n            }\r\n        };\r\n        this.requirePageGlyphs = (page, glyphCount) => {\r\n            // if (this.pageGlyphIndices != null) {\r\n            //    if (glyphCount > this.pageGlyphIndices[page].length)\r\n            //       this.pageGlyphIndices[page].ensureCapacity(glyphCount - this.pageGlyphIndices[page].length);\r\n            // }\r\n            const vertexCount = this.idx[page] + glyphCount * 20;\r\n            const vertices = this.pageVertices[page];\r\n            if (!vertices) {\r\n                this.pageVertices[page] = new Array(vertexCount);\r\n            }\r\n            else if (vertices.length < vertexCount) {\r\n                const newVertices = new Array(vertexCount);\r\n                Utils_1.Utils.arrayCopy(vertices, 0, newVertices, 0, this.idx[page]);\r\n                this.pageVertices[page] = newVertices;\r\n            }\r\n        };\r\n        this.setPageCount = (pageCount) => {\r\n            const newPageVertices = new Array(pageCount).fill([]);\r\n            Utils_1.Utils.arrayCopy(this.pageVertices, 0, newPageVertices, 0, this.pageVertices.length);\r\n            this.pageVertices = [...newPageVertices];\r\n            const newIdx = new Array(pageCount);\r\n            Utils_1.Utils.arrayCopy(this.idx, 0, newIdx, 0, this.idx.length);\r\n            this.idx = newIdx;\r\n            const newPageGlyphIndices = new Array(pageCount);\r\n            let pageGlyphIndicesLength = 0;\r\n            if (this.pageGlyphIndices != null) {\r\n                pageGlyphIndicesLength = this.pageGlyphIndices.length;\r\n                Utils_1.Utils.arrayCopy(this.pageGlyphIndices, 0, newPageGlyphIndices, 0, this.pageGlyphIndices.length);\r\n            }\r\n            for (let i = pageGlyphIndicesLength; i < pageCount; i++)\r\n                newPageGlyphIndices[i] = [];\r\n            this.pageGlyphIndices = newPageGlyphIndices;\r\n            this.tempGlyphCount = new Array(pageCount);\r\n        };\r\n        this.addToCache = (layout, x, y) => {\r\n            const runCount = layout.runs.length;\r\n            if (runCount === 0)\r\n                return;\r\n            // Check if the number of font pages has changed.\r\n            if (this.pageVertices.length < this.font.regions.length)\r\n                this.setPageCount(this.font.regions.length);\r\n            this.layouts.push(layout);\r\n            this.requireGlyphs(layout);\r\n            const colors = layout.colors;\r\n            let colorsIndex = 0, nextColorGlyphIndex = 0, glyphIndex = 0;\r\n            let lastColorFloatBits = 0;\r\n            this.drawingTexts.length = 0;\r\n            for (let i = 0; i < runCount; i++) {\r\n                const run = layout.runs[i];\r\n                const glyphs = run.glyphs;\r\n                const xAdvances = run.xAdvances;\r\n                let gx = x + run.x, gy = y + run.y;\r\n                for (let ii = 0, nn = run.glyphs.length; ii < nn; ii++) {\r\n                    if (glyphIndex++ === nextColorGlyphIndex) {\r\n                        lastColorFloatBits = NumberUtils_1.NumberUtil.intToFloatColor(colors[++colorsIndex]);\r\n                        nextColorGlyphIndex = ++colorsIndex < colors.length ? colors[colorsIndex] : -1;\r\n                    }\r\n                    gx += xAdvances[ii];\r\n                    this.drawingTexts.push(glyphs[ii].id);\r\n                    this.addGlyph(glyphs[ii], gx, gy, lastColorFloatBits);\r\n                }\r\n            }\r\n            const whiteIntBits = (255 << 24) | (255 << 16) | (255 << 8) | 255;\r\n            this.currentTint = NumberUtils_1.NumberUtil.intToFloatColor(whiteIntBits); // Cached glyphs have changed, reset the current tint.\r\n        };\r\n        this.addGlyph = (glyph, x, y, color) => {\r\n            let scaleX = this.font.data.scaleX, scaleY = this.font.data.scaleY;\r\n            x += glyph.xoffset * scaleX;\r\n            y += glyph.yoffset * scaleY;\r\n            let width = glyph.width * scaleX, height = glyph.height * scaleY;\r\n            let u = glyph.u, u2 = glyph.u2, v = glyph.v, v2 = glyph.v2;\r\n            if (this.integer) {\r\n                x = Math.round(x);\r\n                y = Math.round(y);\r\n                width = Math.round(width);\r\n                height = Math.round(height);\r\n            }\r\n            let x2 = x + width, y2 = y + height;\r\n            const page = glyph.page;\r\n            let idx = this.idx[page];\r\n            this.idx[page] += 20;\r\n            if (this.pageGlyphIndices != null)\r\n                this.pageGlyphIndices[page].push(this.glyphCount++);\r\n            const vertices = this.pageVertices[page];\r\n            vertices[idx++] = x;\r\n            vertices[idx++] = y;\r\n            vertices[idx++] = color;\r\n            vertices[idx++] = u;\r\n            vertices[idx++] = v;\r\n            vertices[idx++] = x;\r\n            vertices[idx++] = y2;\r\n            vertices[idx++] = color;\r\n            vertices[idx++] = u;\r\n            vertices[idx++] = v2;\r\n            vertices[idx++] = x2;\r\n            vertices[idx++] = y2;\r\n            vertices[idx++] = color;\r\n            vertices[idx++] = u2;\r\n            vertices[idx++] = v2;\r\n            vertices[idx++] = x2;\r\n            vertices[idx++] = y;\r\n            vertices[idx++] = color;\r\n            vertices[idx++] = u2;\r\n            vertices[idx] = v;\r\n        };\r\n        // public GlyphLayout setText (CharSequence str, float x, float y) {\r\n        // \tclear();\r\n        // \treturn addText(str, x, y, 0, str.length(), 0, Align.left, false);\r\n        // }\r\n        // public GlyphLayout setText (CharSequence str, float x, float y, float targetWidth, int halign, boolean wrap) {\r\n        // \tclear();\r\n        // \treturn addText(str, x, y, 0, str.length(), targetWidth, halign, wrap);\r\n        // }\r\n        // public GlyphLayout setText (CharSequence str, float x, float y, int start, int end, float targetWidth, int halign,\r\n        // \tboolean wrap) {\r\n        // \tclear();\r\n        // \treturn addText(str, x, y, start, end, targetWidth, halign, wrap);\r\n        // }\r\n        this.setText = (str, x, y, start, end, targetWidth, halign, wrap, truncate) => {\r\n            this.clear();\r\n            return this.addText(str, x, y, start, end, targetWidth, halign, wrap, truncate);\r\n        };\r\n        this.setTextToCache = (layout, x, y) => {\r\n            this.clear();\r\n            this.addTextToCache(layout, x, y);\r\n        };\r\n        // public GlyphLayout addText (CharSequence str, float x, float y) {\r\n        // \treturn addText(str, x, y, 0, str.length(), 0, Align.left, false, null);\r\n        // }\r\n        // public GlyphLayout addText (CharSequence str, float x, float y, float targetWidth, int halign, boolean wrap) {\r\n        // \treturn addText(str, x, y, 0, str.length(), targetWidth, halign, wrap, null);\r\n        // }\r\n        // public GlyphLayout addText (CharSequence str, float x, float y, int start, int end, float targetWidth, int halign,\r\n        // \tboolean wrap) {\r\n        // \treturn addText(str, x, y, start, end, targetWidth, halign, wrap, null);\r\n        // }\r\n        this.addText = (str, x, y, start, end, targetWidth, halign, wrap, truncate) => {\r\n            const layout = Utils_1.Pools.obtain('GlyphLayout');\r\n            this.pooledLayouts.push(layout);\r\n            layout.setText(this.font, str, start, end, this.color, targetWidth, halign, wrap, truncate);\r\n            this.addTextToCache(layout, x, y);\r\n            return layout;\r\n        };\r\n        this.addTextToCache = (layout, x, y) => {\r\n            this.addToCache(layout, x, y + this.font.data.ascent);\r\n        };\r\n        /** Returns the x position of the cached string, relative to the position when the string was cached. */\r\n        this.getX = () => {\r\n            return this.x;\r\n        };\r\n        /** Returns the y position of the cached string, relative to the position when the string was cached. */\r\n        this.getY = () => {\r\n            return this.y;\r\n        };\r\n        this.getFont = () => {\r\n            return this.font;\r\n        };\r\n        this.setUseIntegerPositions = (use) => {\r\n            this.integer = use;\r\n        };\r\n        /** @return whether this font uses integer positions for drawing. */\r\n        this.usesIntegerPositions = () => {\r\n            return this.integer;\r\n        };\r\n        this.getVertices = (page) => {\r\n            return this.pageVertices[page];\r\n        };\r\n        this.getVertexCount = (page) => {\r\n            return this.idx[page];\r\n        };\r\n        this.getLayouts = () => {\r\n            return this.layouts;\r\n        };\r\n        this.font = font;\r\n        this.integer = integer;\r\n        const pageCount = font.regions.length;\r\n        if (pageCount === 0)\r\n            console.log('The specified font must contain at least one texture page.');\r\n        this.pageVertices = new Array(pageCount).fill([]);\r\n        this.idx = new Array(pageCount);\r\n        if (pageCount > 1) {\r\n            // Contains the indices of the glyph in the cache as they are added.\r\n            this.pageGlyphIndices = new Array(pageCount);\r\n            for (let i = 0, n = this.pageGlyphIndices.length; i < n; i++)\r\n                this.pageGlyphIndices[i] = [];\r\n        }\r\n        this.tempGlyphCount = new Array(pageCount);\r\n        Utils_1.Pools.get('GlyphLayout', () => new GlyphLayout_1.GlyphLayout(font, '', 0, 0, Utils_1.Color.WHITE, 0, Utils_1.Align.left, false));\r\n    }\r\n    draw(batch) {\r\n        const regions = this.font.getRegions();\r\n        for (let i = 0; i < this.pageVertices.length; i++) {\r\n            if (this.idx[i] > 0) {\r\n                const vertices = this.pageVertices[i];\r\n                for (let j = 0; j < this.idx[i] / 20; j++) {\r\n                    const offset = 20 * j;\r\n                    const region = regions.find(item => { var _a; return item.id === ((_a = this.drawingTexts) === null || _a === void 0 ? void 0 : _a[j]); });\r\n                    if (region) {\r\n                        region.draw(batch, vertices[0 + offset], vertices[1 + offset], vertices[10 + offset] - vertices[0 + offset], vertices[11 + offset] - vertices[1 + offset]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.BitmapFontCache = BitmapFontCache;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BitmapFontData = void 0;\r\nconst Glyph_1 = require(\"./Glyph\");\r\nconst Texture_1 = require(\"./Texture\");\r\nconst TextureRegion_1 = require(\"./TextureRegion\");\r\nconst Utils_1 = require(\"./Utils\");\r\nconst CHARACTER_MAX_VALUE = 65535;\r\nclass BitmapFontData {\r\n    /** Creates an empty BitmapFontData for configuration before calling {@link #load(FileHandle, boolean)}, to subclass, or to\r\n     * populate yourself, e.g. using stb-truetype or FreeType. */\r\n    constructor(fontFile, flip) {\r\n        /** The distance from the top of most uppercase characters to the baseline. Since the drawing position is the cap height of\r\n         * the first line, the cap height can be used to get the location of the baseline. */\r\n        this.capHeight = 1;\r\n        /** Multiplier for the line height of blank lines. down * blankLineHeight is used as the distance to move down for a blank\r\n         * line. */\r\n        this.blankLineScale = 1;\r\n        this.scaleX = 1;\r\n        this.scaleY = 1;\r\n        this.glyphs = {};\r\n        /** The x-height, which is the distance from the top of most lowercase characters to the baseline. */\r\n        this.xHeight = 1;\r\n        this.xChars = ['x', 'e', 'a', 'o', 'n', 's', 'r', 'c', 'u', 'm', 'v', 'w', 'z'];\r\n        this.capChars = [\r\n            'M',\r\n            'N',\r\n            'B',\r\n            'D',\r\n            'C',\r\n            'E',\r\n            'F',\r\n            'K',\r\n            'A',\r\n            'G',\r\n            'H',\r\n            'I',\r\n            'J',\r\n            'L',\r\n            'O',\r\n            'P',\r\n            'Q',\r\n            'R',\r\n            'S',\r\n            'T',\r\n            'U',\r\n            'V',\r\n            'W',\r\n            'X',\r\n            'Y',\r\n            'Z'\r\n        ];\r\n        this.loadFont = (gl) => __awaiter(this, void 0, void 0, function* () {\r\n            if (this.imagePaths != null)\r\n                return;\r\n            let i = 0;\r\n            let fileContent;\r\n            const res = yield fetch(this.fontFile);\r\n            fileContent = yield res.text();\r\n            const lines = fileContent.split(/\\r?\\n/).map((s) => s.trim());\r\n            try {\r\n                let line = lines[i];\r\n                if (typeof line !== 'string')\r\n                    throw new Error('File is empty.');\r\n                line = line.substring(line.indexOf('padding=') + 8);\r\n                const padding = line.substring(0, line.indexOf(' ')).split(',', 4);\r\n                if (padding.length !== 4)\r\n                    throw new Error('Invalid padding.');\r\n                this.padTop = parseInt(padding[0]);\r\n                this.padRight = parseInt(padding[1]);\r\n                this.padBottom = parseInt(padding[2]);\r\n                this.padLeft = parseInt(padding[3]);\r\n                const padY = this.padTop + this.padBottom;\r\n                i++;\r\n                line = lines[i];\r\n                if (typeof line !== 'string')\r\n                    throw new Error('Missing common header.');\r\n                const common = line.split(' ', 9); // At most we want the 6th element; i.e. \"page=N\"\r\n                // At least lineHeight and base are required.\r\n                if (common.length < 3)\r\n                    throw new Error('Invalid common header.');\r\n                if (!common[1].startsWith('lineHeight='))\r\n                    throw new Error('Missing: lineHeight');\r\n                this.lineHeight = parseInt(common[1].substring(11));\r\n                if (!common[2].startsWith('base='))\r\n                    throw new Error('Missing: base');\r\n                const baseLine = parseInt(common[2].substring(5));\r\n                let pageCount = 1;\r\n                if (common.length >= 6 && common[5] != null && common[5].startsWith('pages=')) {\r\n                    try {\r\n                        pageCount = Math.max(1, parseInt(common[5].substring(6)));\r\n                    }\r\n                    catch (_a) {\r\n                        // Use one page.\r\n                    }\r\n                }\r\n                this.imagePaths = new Array(pageCount);\r\n                const imagePaths = [];\r\n                // Read each page definition.\r\n                for (let p = 0; p < pageCount; p++) {\r\n                    // Read each \"page\" info line.\r\n                    i++;\r\n                    line = lines[i];\r\n                    if (typeof line !== 'string')\r\n                        throw new Error('Missing additional page definitions.');\r\n                    // Expect ID to mean \"index\".\r\n                    const idMatches = line.match(new RegExp('.*id=(\\\\d+)'));\r\n                    if (idMatches && idMatches.length > 1) {\r\n                        const id = idMatches[1];\r\n                        try {\r\n                            const pageID = parseInt(id);\r\n                            if (pageID !== p)\r\n                                throw new Error('Page IDs must be indices starting at 0: ' + id);\r\n                        }\r\n                        catch (_b) { }\r\n                    }\r\n                    const fileMatches = line.match(new RegExp('.*file=\"?([^\"]+)\"?'));\r\n                    if (!fileMatches || fileMatches.length <= 1)\r\n                        throw new Error('Missing: file');\r\n                    const fileName = fileMatches[1];\r\n                    imagePaths[p] = fileName;\r\n                    // this.imagePaths[p] = fontFile.parent().child(fileName).path().replaceAll(\"\\\\\\\\\", \"/\");\r\n                }\r\n                this.descent = 0;\r\n                while (true) {\r\n                    i++;\r\n                    line = lines[i];\r\n                    if (!line)\r\n                        break; // EOF\r\n                    if (line.startsWith('kernings '))\r\n                        break; // Starting kernings block.\r\n                    if (line.startsWith('metrics '))\r\n                        break; // Starting metrics block.\r\n                    if (!line.startsWith('char '))\r\n                        continue;\r\n                    const glyph = new Glyph_1.Glyph();\r\n                    const tokens = new StringTokenizer(line, '=');\r\n                    tokens.nextToken();\r\n                    tokens.nextToken();\r\n                    const ch = parseInt(tokens.nextToken());\r\n                    if (ch > 0 && ch > CHARACTER_MAX_VALUE)\r\n                        continue;\r\n                    glyph.id = ch + '';\r\n                    tokens.nextToken();\r\n                    glyph.srcX = parseInt(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    glyph.srcY = parseInt(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    glyph.width = parseInt(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    glyph.height = parseInt(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    glyph.xoffset = parseInt(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    if (this.flipped)\r\n                        glyph.yoffset = parseInt(tokens.nextToken());\r\n                    else\r\n                        glyph.yoffset = -(glyph.height + parseInt(tokens.nextToken()));\r\n                    tokens.nextToken();\r\n                    glyph.xadvance = parseInt(tokens.nextToken());\r\n                    // Check for page safely, it could be omitted or invalid.\r\n                    if (tokens.hasMoreTokens())\r\n                        tokens.nextToken();\r\n                    if (tokens.hasMoreTokens()) {\r\n                        try {\r\n                            glyph.page = parseInt(tokens.nextToken());\r\n                        }\r\n                        catch (_c) { }\r\n                    }\r\n                    if (glyph.width > 0 && glyph.height > 0)\r\n                        this.descent = Math.min(baseLine + glyph.yoffset, this.descent);\r\n                    if (ch <= 0) {\r\n                        this.missingGlyph = glyph;\r\n                    }\r\n                    else if (ch <= CHARACTER_MAX_VALUE) {\r\n                        this.setGlyph(ch, glyph);\r\n                    }\r\n                }\r\n                this.descent += this.padBottom;\r\n                while (true) {\r\n                    i++;\r\n                    line = lines[i];\r\n                    if (typeof line !== 'string')\r\n                        break;\r\n                    if (!line.startsWith('kerning '))\r\n                        break;\r\n                    const tokens = new StringTokenizer(line, '=');\r\n                    tokens.nextToken();\r\n                    tokens.nextToken();\r\n                    let first = parseInt(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    let second = parseInt(tokens.nextToken());\r\n                    if (first < 0 || first > CHARACTER_MAX_VALUE || second < 0 || second > CHARACTER_MAX_VALUE)\r\n                        continue;\r\n                    const glyph = this.getGlyph(first + '');\r\n                    tokens.nextToken();\r\n                    const amount = parseInt(tokens.nextToken());\r\n                    if (glyph) {\r\n                        // Kernings may exist for glyph pairs not contained in the font.\r\n                        glyph.setKerning(second, amount);\r\n                    }\r\n                }\r\n                let hasMetricsOverride = false;\r\n                let overrideAscent = 0;\r\n                let overrideDescent = 0;\r\n                let overrideDown = 0;\r\n                let overrideCapHeight = 0;\r\n                let overrideLineHeight = 0;\r\n                let overrideSpaceXAdvance = 0;\r\n                let overrideXHeight = 0;\r\n                // Metrics override\r\n                if (line != null && line.startsWith('metrics ')) {\r\n                    hasMetricsOverride = true;\r\n                    const tokens = new StringTokenizer(line, '=');\r\n                    tokens.nextToken();\r\n                    tokens.nextToken();\r\n                    overrideAscent = parseFloat(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    overrideDescent = parseFloat(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    overrideDown = parseFloat(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    overrideCapHeight = parseFloat(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    overrideLineHeight = parseFloat(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    overrideSpaceXAdvance = parseFloat(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    overrideXHeight = parseFloat(tokens.nextToken());\r\n                }\r\n                let spaceGlyph = this.getGlyph('32');\r\n                if (!spaceGlyph) {\r\n                    spaceGlyph = new Glyph_1.Glyph();\r\n                    spaceGlyph.id = '32';\r\n                    let xadvanceGlyph = this.getGlyph('l');\r\n                    if (!xadvanceGlyph)\r\n                        xadvanceGlyph = this.getFirstGlyph();\r\n                    spaceGlyph.xadvance = xadvanceGlyph.xadvance;\r\n                    this.setGlyph(32, spaceGlyph); // space character ascii code\r\n                }\r\n                if (spaceGlyph.width === 0) {\r\n                    spaceGlyph.width = this.padLeft + spaceGlyph.xadvance + this.padRight;\r\n                    spaceGlyph.xoffset = -this.padLeft;\r\n                }\r\n                this.spaceXadvance = spaceGlyph.xadvance;\r\n                let xGlyph;\r\n                for (let i = 0; i < this.xChars.length; i++) {\r\n                    xGlyph = this.getGlyph(this.xChars[i]);\r\n                    if (xGlyph)\r\n                        break;\r\n                }\r\n                if (!xGlyph)\r\n                    xGlyph = this.getFirstGlyph();\r\n                this.xHeight = xGlyph.height - padY;\r\n                let capGlyph;\r\n                for (let i = 0; i < this.capChars.length; i++) {\r\n                    capGlyph = this.getGlyph(this.capChars[i]);\r\n                    if (capGlyph)\r\n                        break;\r\n                }\r\n                if (!capGlyph) {\r\n                    const glyphValues = Object.values(this.glyphs);\r\n                    for (let i = 0; i < glyphValues.length; i++) {\r\n                        const page = glyphValues[i];\r\n                        if (!page)\r\n                            continue;\r\n                        for (let j = 0; j < page.length; j++) {\r\n                            if (!page[j] || page[j].height === 0 || page[j].width === 0)\r\n                                continue;\r\n                            this.capHeight = Math.max(this.capHeight, page[j].height);\r\n                        }\r\n                    }\r\n                }\r\n                else\r\n                    this.capHeight = capGlyph.height;\r\n                this.capHeight -= padY;\r\n                this.ascent = baseLine - this.capHeight;\r\n                this.down = -this.lineHeight;\r\n                if (this.flipped) {\r\n                    this.ascent = -this.ascent;\r\n                    this.down = -this.down;\r\n                }\r\n                if (hasMetricsOverride) {\r\n                    this.ascent = overrideAscent;\r\n                    this.descent = overrideDescent;\r\n                    this.down = overrideDown;\r\n                    this.capHeight = overrideCapHeight;\r\n                    this.lineHeight = overrideLineHeight;\r\n                    this.spaceXadvance = overrideSpaceXAdvance;\r\n                    this.xHeight = overrideXHeight;\r\n                }\r\n                // Generate texture regions\r\n                const regionsData = [];\r\n                const glyphValues = Object.values(this.glyphs);\r\n                for (let i = 0; i < glyphValues.length; i++) {\r\n                    const values = Object.values(glyphValues[i]);\r\n                    for (let j = 0; j < values.length; j++) {\r\n                        const region = {\r\n                            id: values[j].id,\r\n                            left: values[j].srcX,\r\n                            top: values[j].srcY,\r\n                            width: values[j].width,\r\n                            height: values[j].height,\r\n                            xoffset: values[j].xoffset,\r\n                            yoffset: values[j].yoffset,\r\n                            xadvance: values[j].xadvance,\r\n                            page: imagePaths[values[j].page],\r\n                            pageId: values[j].page\r\n                        };\r\n                        regionsData.push(region);\r\n                    }\r\n                }\r\n                const pages = [];\r\n                for (let i = 0; i < pageCount; i++) {\r\n                    const texture = yield Texture_1.Texture.load(gl, (0, Utils_1.concatAndResolveUrl)(this.fontFile, `../${imagePaths[i]}`));\r\n                    const invTexWidth = 1 / texture.width;\r\n                    const invTexHeight = 1 / texture.height;\r\n                    pages.push({\r\n                        texture,\r\n                        invTexWidth,\r\n                        invTexHeight\r\n                    });\r\n                }\r\n                this.regions = [];\r\n                for (let regionData of regionsData) {\r\n                    const left = regionData.left;\r\n                    const top = regionData.top;\r\n                    const width = regionData.width;\r\n                    const height = regionData.height;\r\n                    const { texture, invTexWidth, invTexHeight } = pages[regionData.pageId];\r\n                    const region = new TextureRegion_1.TextureRegion(texture, left, top, width, height, regionData, invTexWidth, invTexHeight);\r\n                    region.originalWidth = width;\r\n                    region.originalHeight = height;\r\n                    region.offsetX = 0;\r\n                    region.offsetY = 0;\r\n                    this.regions.push(region);\r\n                }\r\n            }\r\n            catch (ex) {\r\n                console.error(ex);\r\n            }\r\n        });\r\n        this.setGlyphRegion = (glyph, region) => {\r\n            const texture = region.texture;\r\n            const invTexWidth = 1 / texture.width;\r\n            const invTexHeight = 1 / texture.height;\r\n            let offsetX = 0, offsetY = 0;\r\n            const u = region.u;\r\n            const v = region.v;\r\n            const regionWidth = region.originalWidth;\r\n            const regionHeight = region.originalHeight;\r\n            // if (region instanceof AtlasRegion) {\r\n            //    // Compensate for whitespace stripped from left and top edges.\r\n            //    AtlasRegion atlasRegion = (AtlasRegion)region;\r\n            //    offsetX = atlasRegion.offsetX;\r\n            //    offsetY = atlasRegion.originalHeight - atlasRegion.packedHeight - atlasRegion.offsetY;\r\n            // }\r\n            let x = glyph.srcX;\r\n            let x2 = glyph.srcX + glyph.width;\r\n            let y = glyph.srcY;\r\n            let y2 = glyph.srcY + glyph.height;\r\n            // Shift glyph for left and top edge stripped whitespace. Clip glyph for right and bottom edge stripped whitespace.\r\n            // Note if the font region has padding, whitespace stripping must not be used.\r\n            if (offsetX > 0) {\r\n                x -= offsetX;\r\n                if (x < 0) {\r\n                    glyph.width += x;\r\n                    glyph.xoffset -= x;\r\n                    x = 0;\r\n                }\r\n                x2 -= offsetX;\r\n                if (x2 > regionWidth) {\r\n                    glyph.width -= x2 - regionWidth;\r\n                    x2 = regionWidth;\r\n                }\r\n            }\r\n            if (offsetY > 0) {\r\n                y -= offsetY;\r\n                if (y < 0) {\r\n                    glyph.height += y;\r\n                    if (glyph.height < 0)\r\n                        glyph.height = 0;\r\n                    y = 0;\r\n                }\r\n                y2 -= offsetY;\r\n                if (y2 > regionHeight) {\r\n                    const amount = y2 - regionHeight;\r\n                    glyph.height -= amount;\r\n                    glyph.yoffset += amount;\r\n                    y2 = regionHeight;\r\n                }\r\n            }\r\n            glyph.u = u + x * invTexWidth;\r\n            glyph.u2 = u + x2 * invTexWidth;\r\n            if (this.flipped) {\r\n                glyph.v = v + y * invTexHeight;\r\n                glyph.v2 = v + y2 * invTexHeight;\r\n            }\r\n            else {\r\n                glyph.v2 = v + y * invTexHeight;\r\n                glyph.v = v + y2 * invTexHeight;\r\n            }\r\n        };\r\n        /** Sets the line height, which is the distance from one line of text to the next. */\r\n        this.setLineHeight = (height) => {\r\n            this.lineHeight = height * this.scaleY;\r\n            this.down = this.flipped ? this.lineHeight : -this.lineHeight;\r\n        };\r\n        this.setGlyph = (ch, glyph) => {\r\n            let page = this.glyphs[ch / Glyph_1.PAGE_SIZE];\r\n            if (!page) {\r\n                page = new Array(Glyph_1.PAGE_SIZE);\r\n                this.glyphs[ch / Glyph_1.PAGE_SIZE] = page;\r\n                // this.glyphs[ch / PAGE_SIZE] = page = new Glyph[PAGE_SIZE];\r\n            }\r\n            page[ch & (Glyph_1.PAGE_SIZE - 1)] = glyph;\r\n        };\r\n        this.getFirstGlyph = () => {\r\n            const glyphValues = Object.values(this.glyphs);\r\n            for (let i = 0; i < glyphValues.length; i++) {\r\n                const page = glyphValues[i];\r\n                if (!page)\r\n                    continue;\r\n                for (let j = 0; j < page.length; j++) {\r\n                    const glyph = page[j];\r\n                    if (!glyph || glyph.height === 0 || glyph.width === 0)\r\n                        continue;\r\n                    return glyph;\r\n                }\r\n            }\r\n        };\r\n        /** Returns true if the font has the glyph, or if the font has a {@link #missingGlyph}. */\r\n        this.hasGlyph = (ch) => {\r\n            if (this.missingGlyph)\r\n                return true;\r\n            return this.getGlyph(ch) != null;\r\n        };\r\n        /** Returns the glyph for the specified character, or null if no such glyph exists. Note that\r\n         * {@link #getGlyphs(GlyphRun, CharSequence, int, int, Glyph)} should be be used to shape a string of characters into a list\r\n         * of glyphs. */\r\n        this.getGlyph = (ch) => {\r\n            const page = this.glyphs[ch.charCodeAt(0) / Glyph_1.PAGE_SIZE];\r\n            if (page != null)\r\n                return page[ch.charCodeAt(0) & (Glyph_1.PAGE_SIZE - 1)];\r\n            return undefined;\r\n        };\r\n        /** Using the specified string, populates the glyphs and positions of the specified glyph run.\r\n         * @param str Characters to convert to glyphs. Will not contain newline or color tags. May contain \"[[\" for an escaped left\r\n         *           square bracket.\r\n         * @param lastGlyph The glyph immediately before this run, or null if this is run is the first on a line of text. Used tp\r\n         *           apply kerning between the specified glyph and the first glyph in this run. */\r\n        this.getGlyphs = (run, str, start, end, lastGlyph) => {\r\n            const max = end - start;\r\n            if (max === 0)\r\n                return;\r\n            let markupEnabled = this.markupEnabled;\r\n            const scaleX = this.scaleX;\r\n            const glyphs = run.glyphs;\r\n            const xAdvances = run.xAdvances;\r\n            // Guess at number of glyphs needed.\r\n            // glyphs.ensureCapacity(max);\r\n            // run.xAdvances.ensureCapacity(max + 1);\r\n            do {\r\n                const ch = str.charAt(start++);\r\n                if (ch === '\\r')\r\n                    continue; // Ignore.\r\n                let glyph = this.getGlyph(ch);\r\n                if (!glyph) {\r\n                    if (!this.missingGlyph)\r\n                        continue;\r\n                    glyph = this.missingGlyph;\r\n                }\r\n                glyphs.push(glyph);\r\n                xAdvances.push(!lastGlyph // First glyph on line, adjust the position so it isn't drawn left of 0.\r\n                    ? glyph.fixedWidth\r\n                        ? 0\r\n                        : -glyph.xoffset * scaleX - this.padLeft\r\n                    : (lastGlyph.xadvance + lastGlyph.getKerning(ch)) * scaleX);\r\n                lastGlyph = glyph;\r\n                // \"[[\" is an escaped left square bracket, skip second character.\r\n                if (markupEnabled && ch === '[' && start < end && str.charAt(start) === '[')\r\n                    start++;\r\n            } while (start < end);\r\n            if (lastGlyph) {\r\n                const lastGlyphWidth = lastGlyph.fixedWidth\r\n                    ? lastGlyph.xadvance * scaleX\r\n                    : (lastGlyph.width + lastGlyph.xoffset) * scaleX - this.padRight;\r\n                xAdvances.push(lastGlyphWidth);\r\n            }\r\n        };\r\n        /** Returns the first valid glyph index to use to wrap to the next line, starting at the specified start index and\r\n         * (typically) moving toward the beginning of the glyphs array. */\r\n        this.getWrapIndex = (glyphs, start) => {\r\n            let i = start - 1;\r\n            const glyphsItems = glyphs;\r\n            let ch = glyphsItems[i].id;\r\n            if (this.isWhitespace(ch + ''))\r\n                return i;\r\n            if (this.isBreakChar(ch + ''))\r\n                i--;\r\n            for (; i > 0; i--) {\r\n                ch = glyphsItems[i].id;\r\n                if (this.isWhitespace(ch + '') || this.isBreakChar(ch + '')) {\r\n                    return i + 1;\r\n                }\r\n            }\r\n            return 0;\r\n        };\r\n        this.isBreakChar = (c) => {\r\n            if (!this.breakChars)\r\n                return false;\r\n            const character = String.fromCharCode(parseInt(c));\r\n            for (let i = 0; i < this.breakChars.length; i++) {\r\n                if (character === this.breakChars[i])\r\n                    return true;\r\n            }\r\n            return false;\r\n        };\r\n        this.isWhitespace = (c) => {\r\n            const character = String.fromCharCode(parseInt(c));\r\n            switch (character) {\r\n                case '\\n':\r\n                case '\\r':\r\n                case '\\t':\r\n                case ' ':\r\n                    return true;\r\n                default:\r\n                    return false;\r\n            }\r\n        };\r\n        /** Returns the image path for the texture page at the given index (the \"id\" in the BMFont file). */\r\n        this.getImagePath = (index) => {\r\n            return this.imagePaths[index];\r\n        };\r\n        this.getImagePaths = () => {\r\n            return this.imagePaths;\r\n        };\r\n        /** Scales the font by the specified amounts on both axes\r\n         * <p>\r\n         * Note that smoother scaling can be achieved if the texture backing the BitmapFont is using {@link TextureFilter#Linear}.\r\n         * The default is Nearest, so use a BitmapFont constructor that takes a {@link TextureRegion}.\r\n         * @throws IllegalArgumentException if scaleX or scaleY is zero. */\r\n        this.setScale = (scaleX, scaleY) => {\r\n            if (scaleX === 0 || scaleY === 0)\r\n                return;\r\n            const x = scaleX / this.scaleX;\r\n            const y = scaleY / this.scaleY;\r\n            this.lineHeight *= y;\r\n            this.spaceXadvance *= x;\r\n            this.xHeight *= y;\r\n            this.capHeight *= y;\r\n            this.ascent *= y;\r\n            this.descent *= y;\r\n            this.down *= y;\r\n            this.padLeft *= x;\r\n            this.padRight *= x;\r\n            this.padTop *= y;\r\n            this.padBottom *= y;\r\n            this.scaleX = scaleX;\r\n            this.scaleY = scaleY;\r\n        };\r\n        /** Sets the font's scale relative to the current scale.\r\n         * @see #setScale(float, float)\r\n         * @throws IllegalArgumentException if the resulting scale is zero. */\r\n        this.scale = (amount) => {\r\n            this.setScale(this.scaleX + amount, this.scaleY + amount);\r\n        };\r\n        this.fontFile = fontFile;\r\n        this.flipped = flip;\r\n    }\r\n    /** Scales the font by the specified amount in both directions.\r\n     * @see #setScale(float, float)\r\n     * @throws IllegalArgumentException if scaleX or scaleY is zero. */\r\n    setXYScale(scaleXY) {\r\n        this.setScale(scaleXY, scaleXY);\r\n    }\r\n}\r\nexports.BitmapFontData = BitmapFontData;\r\nclass StringTokenizer {\r\n    constructor(str, delimitter) {\r\n        this.strArray = [];\r\n        this.currentIndex = 0;\r\n        const strings = str.split(/\\s+/);\r\n        for (let i = 0; i < strings.length; i++) {\r\n            const st = strings[i];\r\n            this.strArray.push(...st.split(delimitter));\r\n        }\r\n    }\r\n    hasMoreTokens() {\r\n        return this.currentIndex >= this.strArray.length;\r\n    }\r\n    nextToken() {\r\n        return this.strArray[this.currentIndex++];\r\n    }\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BoundingBox = void 0;\r\nconst Vector3_1 = require(\"./Vector3\");\r\nclass BoundingBox {\r\n    /** Constructs a new bounding box with the minimum and maximum vector set to zeros. */\r\n    constructor() {\r\n        this.min = new Vector3_1.Vector3();\r\n        this.max = new Vector3_1.Vector3();\r\n        this.cnt = new Vector3_1.Vector3();\r\n        this.dim = new Vector3_1.Vector3();\r\n        this.clr();\r\n    }\r\n    getCenter(out) {\r\n        return out.setFrom(this.cnt);\r\n    }\r\n    getCenterX() {\r\n        return this.cnt.x;\r\n    }\r\n    getCenterY() {\r\n        return this.cnt.y;\r\n    }\r\n    getCenterZ() {\r\n        return this.cnt.z;\r\n    }\r\n    getCorner000(out) {\r\n        return out.set(this.min.x, this.min.y, this.min.z);\r\n    }\r\n    getCorner001(out) {\r\n        return out.set(this.min.x, this.min.y, this.max.z);\r\n    }\r\n    getCorner010(out) {\r\n        return out.set(this.min.x, this.max.y, this.min.z);\r\n    }\r\n    getCorner011(out) {\r\n        return out.set(this.min.x, this.max.y, this.max.z);\r\n    }\r\n    getCorner100(out) {\r\n        return out.set(this.max.x, this.min.y, this.min.z);\r\n    }\r\n    getCorner101(out) {\r\n        return out.set(this.max.x, this.min.y, this.max.z);\r\n    }\r\n    getCorner110(out) {\r\n        return out.set(this.max.x, this.max.y, this.min.z);\r\n    }\r\n    getCorner111(out) {\r\n        return out.set(this.max.x, this.max.y, this.max.z);\r\n    }\r\n    /** @param out The {@link Vector3} to receive the dimensions of this bounding box on all three axis.\r\n     * @return The vector specified with the out argument */\r\n    getDimensions(out) {\r\n        return out.setFrom(this.dim);\r\n    }\r\n    getWidth() {\r\n        return this.dim.x;\r\n    }\r\n    getHeight() {\r\n        return this.dim.y;\r\n    }\r\n    getDepth() {\r\n        return this.dim.z;\r\n    }\r\n    /** @param out The {@link Vector3} to receive the minimum values.\r\n     * @return The vector specified with the out argument */\r\n    getMin(out) {\r\n        return out.setFrom(this.min);\r\n    }\r\n    /** @param out The {@link Vector3} to receive the maximum values.\r\n     * @return The vector specified with the out argument */\r\n    getMax(out) {\r\n        return out.setFrom(this.max);\r\n    }\r\n    /** Sets the given bounding box.\r\n     *\r\n     * @param bounds The bounds.\r\n     * @return This bounding box for chaining. */\r\n    setFromBounds(bounds) {\r\n        return this.set(bounds.min, bounds.max);\r\n    }\r\n    /** Sets the given minimum and maximum vector.\r\n     *\r\n     * @param minimum The minimum vector\r\n     * @param maximum The maximum vector\r\n     * @return This bounding box for chaining. */\r\n    set(minimum, maximum) {\r\n        this.min.set(minimum.x < maximum.x ? minimum.x : maximum.x, minimum.y < maximum.y ? minimum.y : maximum.y, minimum.z < maximum.z ? minimum.z : maximum.z);\r\n        this.max.set(minimum.x > maximum.x ? minimum.x : maximum.x, minimum.y > maximum.y ? minimum.y : maximum.y, minimum.z > maximum.z ? minimum.z : maximum.z);\r\n        this.update();\r\n        return this;\r\n    }\r\n    update() {\r\n        this.cnt.setFrom(this.min).add(this.max).scale(0.5);\r\n        this.dim.setFrom(this.max).sub(this.min);\r\n    }\r\n    /** Sets the bounding box minimum and maximum vector from the given points.\r\n     *\r\n     * @param points The points.\r\n     * @return This bounding box for chaining. */\r\n    setFromPoints(points) {\r\n        this.inf();\r\n        for (let l_point of points)\r\n            this.extPoint(l_point);\r\n        return this;\r\n    }\r\n    /** Sets the minimum and maximum vector to positive and negative infinity.\r\n     *\r\n     * @return This bounding box for chaining. */\r\n    inf() {\r\n        this.min.set(Infinity, Infinity, Infinity);\r\n        this.max.set(-Infinity, -Infinity, -Infinity);\r\n        this.cnt.set(0, 0, 0);\r\n        this.dim.set(0, 0, 0);\r\n        return this;\r\n    }\r\n    /** Extends the bounding box to incorporate the given {@link Vector3}.\r\n     * @param point The vector\r\n     * @return This bounding box for chaining. */\r\n    extPoint(point) {\r\n        return this.set(this.min.set(Math.min(this.min.x, point.x), Math.min(this.min.y, point.y), Math.min(this.min.z, point.z)), this.max.set(Math.max(this.max.x, point.x), Math.max(this.max.y, point.y), Math.max(this.max.z, point.z)));\r\n    }\r\n    /** Sets the minimum and maximum vector to zeros.\r\n     * @return This bounding box for chaining. */\r\n    clr() {\r\n        return this.set(this.min.set(0, 0, 0), this.max.set(0, 0, 0));\r\n    }\r\n    /** Returns whether this bounding box is valid. This means that {@link #max} is greater than or equal to {@link #min}.\r\n     * @return True in case the bounding box is valid, false otherwise */\r\n    isValid() {\r\n        return this.min.x <= this.max.x && this.min.y <= this.max.y && this.min.z <= this.max.z;\r\n    }\r\n    /** Extends this bounding box by the given bounding box.\r\n     *\r\n     * @param a_bounds The bounding box\r\n     * @return This bounding box for chaining. */\r\n    extBounds(a_bounds) {\r\n        return this.set(this.min.set(Math.min(this.min.x, a_bounds.min.x), Math.min(this.min.y, a_bounds.min.y), Math.min(this.min.z, a_bounds.min.z)), this.max.set(Math.max(this.max.x, a_bounds.max.x), Math.max(this.max.y, a_bounds.max.y), Math.max(this.max.z, a_bounds.max.z)));\r\n    }\r\n    /** Extends this bounding box by the given sphere.\r\n     *\r\n     * @param center Sphere center\r\n     * @param radius Sphere radius\r\n     * @return This bounding box for chaining. */\r\n    extSphere(center, radius) {\r\n        return this.set(this.min.set(Math.min(this.min.x, center.x - radius), Math.min(this.min.y, center.y - radius), Math.min(this.min.z, center.z - radius)), this.max.set(Math.max(this.max.x, center.x + radius), Math.max(this.max.y, center.y + radius), Math.max(this.max.z, center.z + radius)));\r\n    }\r\n    /** Extends this bounding box by the given transformed bounding box.\r\n     *\r\n     * @param bounds The bounding box\r\n     * @param transform The transformation matrix to apply to bounds, before using it to extend this bounding box.\r\n     * @return This bounding box for chaining. */\r\n    extTransformedBox(bounds, transform) {\r\n        this.extPoint(BoundingBox.tmpVector.set(bounds.min.x, bounds.min.y, bounds.min.z).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(bounds.min.x, bounds.min.y, bounds.max.z).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(bounds.min.x, bounds.max.y, bounds.min.z).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(bounds.min.x, bounds.max.y, bounds.max.z).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(bounds.max.x, bounds.min.y, bounds.min.z).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(bounds.max.x, bounds.min.y, bounds.max.z).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(bounds.max.x, bounds.max.y, bounds.min.z).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(bounds.max.x, bounds.max.y, bounds.max.z).multiply(transform));\r\n        return this;\r\n    }\r\n    /** Multiplies the bounding box by the given matrix. This is achieved by multiplying the 8 corner points and then calculating\r\n     * the minimum and maximum vectors from the transformed points.\r\n     *\r\n     * @param transform The matrix\r\n     * @return This bounding box for chaining. */\r\n    mul(transform) {\r\n        let x0 = this.min.x, y0 = this.min.y, z0 = this.min.z, x1 = this.max.x, y1 = this.max.y, z1 = this.max.z;\r\n        this.inf();\r\n        this.extPoint(BoundingBox.tmpVector.set(x0, y0, z0).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(x0, y0, z1).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(x0, y1, z0).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(x0, y1, z1).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(x1, y0, z0).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(x1, y0, z1).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(x1, y1, z0).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(x1, y1, z1).multiply(transform));\r\n        return this;\r\n    }\r\n    /** Returns whether the given bounding box is contained in this bounding box.\r\n     * @param b The bounding box\r\n     * @return Whether the given bounding box is contained */\r\n    containsBounds(b) {\r\n        return (!this.isValid() ||\r\n            (this.min.x <= b.min.x &&\r\n                this.min.y <= b.min.y &&\r\n                this.min.z <= b.min.z &&\r\n                this.max.x >= b.max.x &&\r\n                this.max.y >= b.max.y &&\r\n                this.max.z >= b.max.z));\r\n    }\r\n    /** Returns whether the given bounding box is intersecting this bounding box (at least one point in).\r\n     * @param b The bounding box\r\n     * @return Whether the given bounding box is intersected */\r\n    intersects(b) {\r\n        if (!this.isValid())\r\n            return false;\r\n        // test using SAT (separating axis theorem)\r\n        const lx = Math.abs(this.cnt.x - b.cnt.x);\r\n        const sumx = this.dim.x / 2.0 + b.dim.x / 2.0;\r\n        const ly = Math.abs(this.cnt.y - b.cnt.y);\r\n        const sumy = this.dim.y / 2.0 + b.dim.y / 2.0;\r\n        const lz = Math.abs(this.cnt.z - b.cnt.z);\r\n        const sumz = this.dim.z / 2.0 + b.dim.z / 2.0;\r\n        return lx <= sumx && ly <= sumy && lz <= sumz;\r\n    }\r\n    /** Returns whether the given vector is contained in this bounding box.\r\n     * @param v The vector\r\n     * @return Whether the vector is contained or not. */\r\n    containsPoint(v) {\r\n        return (this.min.x <= v.x &&\r\n            this.max.x >= v.x &&\r\n            this.min.y <= v.y &&\r\n            this.max.y >= v.y &&\r\n            this.min.z <= v.z &&\r\n            this.max.z >= v.z);\r\n    }\r\n    /** Extends the bounding box by the given vector.\r\n     *\r\n     * @param x The x-coordinate\r\n     * @param y The y-coordinate\r\n     * @param z The z-coordinate\r\n     * @return This bounding box for chaining. */\r\n    ext(x, y, z) {\r\n        return this.set(this.min.set(Math.min(this.min.x, x), Math.min(this.min.y, y), Math.min(this.min.z, z)), this.max.set(Math.max(this.max.x, x), Math.max(this.max.y, y), Math.max(this.max.z, z)));\r\n    }\r\n}\r\nexports.BoundingBox = BoundingBox;\r\nBoundingBox.tmpVector = new Vector3_1.Vector3();\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OrthoCamera = void 0;\r\nconst Matrix4_1 = require(\"./Matrix4\");\r\nconst Vector3_1 = require(\"./Vector3\");\r\nclass OrthoCamera {\r\n    constructor(viewportWidth, viewportHeight, screenWidth, screenHeight) {\r\n        this.position = new Vector3_1.Vector3(0, 0, 0);\r\n        this.direction = new Vector3_1.Vector3(0, 0, -1);\r\n        this.up = new Vector3_1.Vector3(0, 1, 0);\r\n        this.near = 0;\r\n        this.far = 100;\r\n        this.zoom = 1;\r\n        this.viewportWidth = 0;\r\n        this.viewportHeight = 0;\r\n        this.projectionView = new Matrix4_1.Matrix4();\r\n        this.inverseProjectionView = new Matrix4_1.Matrix4();\r\n        this.projection = new Matrix4_1.Matrix4();\r\n        this.view = new Matrix4_1.Matrix4();\r\n        this.yDown = false;\r\n        this.tmp3 = new Vector3_1.Vector3();\r\n        this.resize(viewportWidth, viewportHeight, screenWidth, screenHeight);\r\n    }\r\n    getYDown() {\r\n        return this.yDown;\r\n    }\r\n    setYDown(yDown) {\r\n        this.yDown = yDown;\r\n        if (yDown) {\r\n            this.up.set(0, -1, 0);\r\n            this.direction.set(0, 0, 1);\r\n        }\r\n        else {\r\n            this.up.set(0, 1, 0);\r\n            this.direction.set(0, 0, -1);\r\n        }\r\n        this.update();\r\n    }\r\n    resize(viewportWidth, viewportHeight, screenWidth, screenHeight) {\r\n        this.viewportWidth = viewportWidth;\r\n        this.viewportHeight = viewportHeight;\r\n        this.screenWidth = screenWidth;\r\n        this.screenHeight = screenHeight;\r\n        this.update();\r\n    }\r\n    setPosition(cameraX, cameraY) {\r\n        this.position.set(cameraX, cameraY, this.position.z);\r\n    }\r\n    update() {\r\n        let projection = this.projection;\r\n        let view = this.view;\r\n        let projectionView = this.projectionView;\r\n        let inverseProjectionView = this.inverseProjectionView;\r\n        let zoom = this.zoom, viewportWidth = this.viewportWidth, viewportHeight = this.viewportHeight;\r\n        projection.ortho(zoom * (-viewportWidth / 2), zoom * (viewportWidth / 2), zoom * (-viewportHeight / 2), zoom * (viewportHeight / 2), this.near, this.far);\r\n        view.lookAt(this.position, this.direction, this.up);\r\n        projectionView.set(projection.values);\r\n        projectionView.multiply(view);\r\n        inverseProjectionView.set(projectionView.values).invert();\r\n        this.combined = projectionView.values;\r\n    }\r\n    screenToWorld(screenCoords, screenWidth, screenHeight) {\r\n        screenWidth = screenWidth || this.screenWidth;\r\n        screenHeight = screenHeight || this.screenHeight;\r\n        let x = screenCoords.x, y = screenHeight - screenCoords.y - 1;\r\n        screenCoords.x = (2 * x) / screenWidth - 1;\r\n        screenCoords.y = (2 * y) / screenHeight - 1;\r\n        screenCoords.z = 2 * screenCoords.z - 1;\r\n        screenCoords.project(this.inverseProjectionView);\r\n        return screenCoords;\r\n    }\r\n    worldToScreen(worldCoords, screenWidth, screenHeight) {\r\n        screenWidth = screenWidth || this.screenWidth;\r\n        screenHeight = screenHeight || this.screenHeight;\r\n        worldCoords.project(this.projectionView);\r\n        worldCoords.x = (screenWidth * (worldCoords.x + 1)) / 2;\r\n        worldCoords.y = (screenHeight * (worldCoords.y + 1)) / 2;\r\n        worldCoords.z = (worldCoords.z + 1) / 2;\r\n        return worldCoords;\r\n    }\r\n    unprojectVector2(worldCoord, screenCoord) {\r\n        this.tmp3.set(screenCoord.x, screenCoord.y, 0);\r\n        this.screenToWorld(this.tmp3);\r\n        worldCoord.set(this.tmp3.x, this.tmp3.y);\r\n    }\r\n    setViewport(viewportWidth, viewportHeight) {\r\n        this.viewportWidth = viewportWidth;\r\n        this.viewportHeight = viewportHeight;\r\n    }\r\n}\r\nexports.OrthoCamera = OrthoCamera;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Game = void 0;\r\nclass Game {\r\n    setScreen(screen) {\r\n        if (this.currentScreen && this.currentScreen.dispose) {\r\n            this.currentScreen.dispose();\r\n        }\r\n        this.currentScreen = screen;\r\n        if (this.currentScreen && this.currentScreen.init) {\r\n            this.currentScreen.init(this);\r\n        }\r\n    }\r\n    update(delta) {\r\n        if (this.currentScreen && this.currentScreen.update) {\r\n            this.currentScreen.update(delta, this);\r\n        }\r\n    }\r\n}\r\nexports.Game = Game;\r\nGame.shared = new Game();\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Glyph = exports.PAGES = exports.PAGE_SIZE = exports.LOG2_PAGE_SIZE = void 0;\r\nexports.LOG2_PAGE_SIZE = 9;\r\nexports.PAGE_SIZE = 1 << exports.LOG2_PAGE_SIZE;\r\nexports.PAGES = 0x10000 / exports.PAGE_SIZE;\r\nclass Glyph {\r\n    constructor() {\r\n        /** The index to the texture page that holds this glyph. */\r\n        this.page = 0;\r\n    }\r\n    getKerning(ch) {\r\n        if (this.kerning) {\r\n            const page = this.kerning[ch.charCodeAt(0) >>> exports.LOG2_PAGE_SIZE];\r\n            if (page != null)\r\n                return page[ch.charCodeAt(0) & (exports.PAGE_SIZE - 1)];\r\n        }\r\n        return 0;\r\n    }\r\n    setKerning(ch, value) {\r\n        if (!this.kerning) {\r\n            this.kerning = [];\r\n        }\r\n        let page = this.kerning[ch >>> exports.LOG2_PAGE_SIZE];\r\n        if (!page) {\r\n            this.kerning[ch >>> exports.LOG2_PAGE_SIZE] = page = new Uint32Array(new ArrayBuffer(exports.PAGE_SIZE));\r\n        }\r\n        page[(ch & exports.PAGE_SIZE) - 1] = value;\r\n    }\r\n}\r\nexports.Glyph = Glyph;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GlyphLayout = void 0;\r\nconst GlyphRun_1 = require(\"./GlyphRun\");\r\nconst Utils_1 = require(\"./Utils\");\r\nclass GlyphLayout {\r\n    constructor(font, str, start = 0, end = (str === null || str === void 0 ? void 0 : str.length) || 0, color = Utils_1.Color.WHITE, targetWidth = 0, hAlign = Utils_1.Align.left, wrap = true, truncate) {\r\n        this.epsilon = 0.0001;\r\n        this.glyphRunPool = Utils_1.Pools.get('GlyphRun', () => new GlyphRun_1.GlyphRun());\r\n        this.colorStack = new Array(4);\r\n        this.runs = [];\r\n        this.colors = [];\r\n        this.setText = (font, str, start, end, color, targetWidth, hAlign, wrap, truncate) => {\r\n            this.reset();\r\n            const fontData = font.data;\r\n            if (start === end) {\r\n                // Empty string.\r\n                this.height = fontData.capHeight;\r\n                return;\r\n            }\r\n            // Avoid wrapping one line per character, which is very inefficient.\r\n            if (wrap)\r\n                targetWidth = Math.max(targetWidth, fontData.spaceXadvance * 3);\r\n            const wrapOrTruncate = wrap || truncate != null;\r\n            let currentColor = color.toIntBits();\r\n            let nextColor = currentColor;\r\n            this.colors.shift();\r\n            const markupEnabled = fontData.markupEnabled;\r\n            if (markupEnabled)\r\n                this.colorStack.push(currentColor);\r\n            let isLastRun = false;\r\n            let y = 0;\r\n            let down = fontData.down;\r\n            let lineRun = null; // Collects glyphs for the current line.\r\n            let lastGlyph = null; // Last glyph of the previous run on the same line, used for kerning between runs.\r\n            let runStart = start;\r\n            while (true) {\r\n                let runEnd;\r\n                let newline = false;\r\n                if (start === end) {\r\n                    // End of text.\r\n                    if (runStart === end)\r\n                        break; // No run to process, we're done.\r\n                    runEnd = end; // Process the final run.\r\n                    isLastRun = true;\r\n                }\r\n                else {\r\n                    // Each run is delimited by newline or left square bracket.\r\n                    switch (str.charAt(start++)) {\r\n                        case '\\n': // End of line.\r\n                            runEnd = start - 1;\r\n                            newline = true;\r\n                            break;\r\n                        // Fall through.\r\n                        default:\r\n                            continue;\r\n                    }\r\n                }\r\n                // eslint-disable-next-line no-labels\r\n                runEnded: {\r\n                    // Store the run that has ended.\r\n                    const run = this.glyphRunPool.obtain();\r\n                    run.x = 0;\r\n                    run.y = y;\r\n                    fontData.getGlyphs(run, str, runStart, runEnd, lastGlyph);\r\n                    this.glyphCount += run.glyphs.length;\r\n                    if (nextColor !== currentColor) {\r\n                        // Can only be different if markupEnabled.\r\n                        if (this.colors[this.colors.length - 2] === this.glyphCount) {\r\n                            // Consecutive color changes, or after an empty run, or at the beginning of the string.\r\n                            this.colors[this.colors.length - 1] = nextColor;\r\n                        }\r\n                        else {\r\n                            this.colors.push(this.glyphCount);\r\n                            this.colors.push(nextColor);\r\n                        }\r\n                        currentColor = nextColor;\r\n                    }\r\n                    if (run.glyphs.length === 0) {\r\n                        this.glyphRunPool.free(run);\r\n                        // eslint-disable-next-line no-labels\r\n                        if (!lineRun)\r\n                            break runEnded; // Otherwise wrap and truncate must still be processed for lineRun.\r\n                    }\r\n                    else if (!lineRun) {\r\n                        lineRun = run;\r\n                        this.runs.push(lineRun);\r\n                    }\r\n                    else {\r\n                        lineRun.appendRun(run);\r\n                        this.glyphRunPool.free(run);\r\n                    }\r\n                    if (newline || isLastRun) {\r\n                        this.setLastGlyphXAdvance(fontData, lineRun);\r\n                        lastGlyph = null;\r\n                    }\r\n                    else\r\n                        lastGlyph = lineRun.glyphs[lineRun.glyphs.length - 1];\r\n                    if (!wrapOrTruncate || lineRun.glyphs.length === 0) {\r\n                        // eslint-disable-next-line no-labels\r\n                        break runEnded; // No wrap or truncate, or no glyphs.\r\n                    }\r\n                    if (newline || isLastRun) {\r\n                        // Wrap or truncate. First xadvance is the first glyph's X offset relative to the drawing position.\r\n                        let runWidth = lineRun.xAdvances[0] + lineRun.xAdvances[1]; // At least the first glyph will fit.\r\n                        for (let i = 2; i < lineRun.xAdvances.length; i++) {\r\n                            const glyph = lineRun.glyphs[i - 1];\r\n                            let glyphWidth = this.getGlyphWidth(glyph, fontData);\r\n                            if (runWidth + glyphWidth - this.epsilon <= targetWidth) {\r\n                                // Glyph fits.\r\n                                runWidth += lineRun.xAdvances[i];\r\n                                continue;\r\n                            }\r\n                            if (truncate != null) {\r\n                                // Truncate.\r\n                                this.truncate(fontData, lineRun, targetWidth, truncate);\r\n                                break;\r\n                            }\r\n                            // Wrap.\r\n                            let wrapIndex = fontData.getWrapIndex(lineRun.glyphs, i);\r\n                            if ((wrapIndex === 0 && lineRun.x === 0) || // Require at least one glyph per line.\r\n                                wrapIndex >= lineRun.glyphs.length) {\r\n                                // Wrap at least the glyph that didn't fit.\r\n                                wrapIndex = i - 1;\r\n                            }\r\n                            lineRun = this.wrap(fontData, lineRun, wrapIndex);\r\n                            // eslint-disable-next-line no-labels\r\n                            if (!lineRun)\r\n                                break runEnded; // All wrapped glyphs were whitespace.\r\n                            this.runs.push(lineRun);\r\n                            y += down;\r\n                            lineRun.x = 0;\r\n                            lineRun.y = y;\r\n                            // Start the wrap loop again, another wrap might be necessary.\r\n                            runWidth = lineRun.xAdvances[0] + lineRun.xAdvances[1]; // At least the first glyph will fit.\r\n                            i = 1;\r\n                        }\r\n                    }\r\n                }\r\n                if (newline) {\r\n                    lineRun = null;\r\n                    lastGlyph = null;\r\n                    // Next run will be on the next line.\r\n                    if (runEnd === runStart)\r\n                        // Blank line.\r\n                        y += down * fontData.blankLineScale;\r\n                    else\r\n                        y += down;\r\n                }\r\n                runStart = start;\r\n            }\r\n            this.height = fontData.capHeight + Math.abs(y);\r\n            this.calculateWidths(fontData);\r\n            this.alignRuns(targetWidth, hAlign);\r\n            // Clear the color stack.\r\n            if (markupEnabled)\r\n                this.colorStack.length = 0;\r\n        };\r\n        this.calculateWidths = (fontData) => {\r\n            var _a;\r\n            let width = 0;\r\n            const runsItems = [...this.runs];\r\n            for (let i = 0, n = this.runs.length; i < n; i++) {\r\n                const run = runsItems[i];\r\n                const xAdvances = run.xAdvances;\r\n                let runWidth = run.x + xAdvances[0];\r\n                let max = 0; // run.x is needed to ensure floats are rounded same as above.\r\n                const glyphs = run.glyphs;\r\n                for (let ii = 0; ii < run.glyphs.length;) {\r\n                    const glyph = glyphs[ii];\r\n                    const glyphWidth = this.getGlyphWidth(glyph, fontData);\r\n                    max = Math.max(max, runWidth + glyphWidth); // A glyph can extend past the right edge of subsequent glyphs.\r\n                    ii++;\r\n                    runWidth += (_a = xAdvances[ii]) !== null && _a !== void 0 ? _a : 0;\r\n                }\r\n                run.width = Math.max(runWidth, max) - run.x;\r\n                width = Math.max(width, run.x + (isNaN(run.width) ? runWidth : run.width));\r\n            }\r\n            this.width = width;\r\n        };\r\n        this.alignRuns = (targetWidth, halign) => {\r\n            if ((halign & Utils_1.Align.left) === 0) {\r\n                // Not left aligned, so must be center or right aligned.\r\n                const center = (halign & Utils_1.Align.center) !== 0;\r\n                const runsItems = [...this.runs];\r\n                for (let i = 0, n = this.runs.length; i < n; i++) {\r\n                    const run = runsItems[i];\r\n                    run.x += center ? 0.5 * (targetWidth - run.width) : targetWidth - run.width;\r\n                }\r\n            }\r\n        };\r\n        /** @param truncate May be empty string. */\r\n        this.truncate = (fontData, run, targetWidth, truncate) => {\r\n            let glyphCount = run.glyphs.length;\r\n            // Determine truncate string size.\r\n            const truncateRun = this.glyphRunPool.obtain();\r\n            fontData.getGlyphs(truncateRun, truncate, 0, truncate.length, null);\r\n            let truncateWidth = 0;\r\n            if (truncateRun.xAdvances.length > 0) {\r\n                this.setLastGlyphXAdvance(fontData, truncateRun);\r\n                const xAdvances = truncateRun.xAdvances;\r\n                // Skip first for tight bounds.\r\n                for (let i = 1; i < truncateRun.xAdvances.length; i++) {\r\n                    truncateWidth += xAdvances[i];\r\n                }\r\n            }\r\n            targetWidth -= truncateWidth;\r\n            // Determine visible glyphs.\r\n            let count = 0;\r\n            let width = run.x;\r\n            const xAdvances = run.xAdvances;\r\n            while (count < run.xAdvances.length) {\r\n                const xAdvance = xAdvances[count];\r\n                width += xAdvance;\r\n                if (width > targetWidth)\r\n                    break;\r\n                count++;\r\n            }\r\n            if (count > 1) {\r\n                // Some run glyphs fit, append truncate glyphs.\r\n                if (count - 1 >= 0 && run.glyphs.length > count - 1) {\r\n                    for (let i = count - 1; i < run.glyphs.length; i++) {\r\n                        run.glyphs.splice(i, 1);\r\n                    }\r\n                }\r\n                if (count >= 0 && run.xAdvances.length > count) {\r\n                    for (let i = count; i < run.xAdvances.length; i++) {\r\n                        run.xAdvances.splice(i, 1);\r\n                    }\r\n                }\r\n                this.setLastGlyphXAdvance(fontData, run);\r\n                if (truncateRun.xAdvances.length > 0) {\r\n                    Utils_1.Utils.arrayCopy(truncateRun.xAdvances, 1, run.xAdvances, run.xAdvances.length, truncateRun.xAdvances.length - 1);\r\n                }\r\n            }\r\n            else {\r\n                // No run glyphs fit, use only truncate glyphs.\r\n                run.glyphs.length = 0;\r\n                run.xAdvances.length = 0;\r\n                // run.xAdvances.addAll(truncateRun.xAdvances);\r\n                Utils_1.Utils.arrayCopy(truncateRun.xAdvances, 0, run.xAdvances, run.xAdvances.length, truncateRun.xAdvances.length);\r\n            }\r\n            const droppedGlyphCount = glyphCount - run.glyphs.length;\r\n            if (droppedGlyphCount > 0) {\r\n                this.glyphCount -= droppedGlyphCount;\r\n                if (fontData.markupEnabled) {\r\n                    while (this.colors.length > 2 && this.colors[this.colors.length - 2] >= this.glyphCount)\r\n                        this.colors.length -= 2;\r\n                }\r\n            }\r\n            Utils_1.Utils.arrayCopy(truncateRun.glyphs, 0, run.glyphs, run.glyphs.length, truncateRun.glyphs.length);\r\n            this.glyphCount += truncate.length;\r\n            this.glyphRunPool.free(truncateRun);\r\n        };\r\n        /** Sets the xadvance of the last glyph to use its width instead of xadvance. */\r\n        this.setLastGlyphXAdvance = (fontData, run) => {\r\n            const last = run.glyphs[run.glyphs.length - 1];\r\n            if (!last.fixedWidth)\r\n                run.xAdvances[run.xAdvances.length - 1] = this.getGlyphWidth(last, fontData);\r\n        };\r\n        /** Returns the distance from the glyph's drawing position to the right edge of the glyph. */\r\n        this.getGlyphWidth = (glyph, fontData) => {\r\n            return (glyph.width + glyph.xoffset) * fontData.scaleX - fontData.padRight;\r\n        };\r\n        /** Returns an X offset for the first glyph so when drawn, none of it is left of the line's drawing position. */\r\n        this.getLineOffset = (glyphs, fontData) => {\r\n            return -glyphs[0].xoffset * fontData.scaleX - fontData.padLeft;\r\n        };\r\n        this.reset = () => {\r\n            this.glyphRunPool.freeAll(this.runs);\r\n            this.runs.length = 0;\r\n            this.colors.length = 0;\r\n            this.glyphCount = 0;\r\n            this.width = 0;\r\n            this.height = 0;\r\n        };\r\n        if (font && str) {\r\n            this.setText(font, str, start, end, color, targetWidth, hAlign, wrap, truncate);\r\n        }\r\n    }\r\n    /** Breaks a run into two runs at the specified wrapIndex.\r\n     * @return May be null if second run is all whitespace. */\r\n    wrap(fontData, first, wrapIndex) {\r\n        const glyphCount = first.glyphs.length;\r\n        let glyphs2 = first.glyphs; // Starts with all the glyphs.\r\n        let xAdvances2 = first.xAdvances; // Starts with all the xadvances.\r\n        // Skip whitespace before the wrap index.\r\n        let firstEnd = wrapIndex;\r\n        for (; firstEnd > 0; firstEnd--)\r\n            if (!fontData.isWhitespace(glyphs2[firstEnd - 1].id))\r\n                break;\r\n        // Skip whitespace after the wrap index.\r\n        let secondStart = wrapIndex;\r\n        for (; secondStart < glyphCount; secondStart++)\r\n            if (!fontData.isWhitespace(glyphs2[secondStart].id))\r\n                break;\r\n        // Copy wrapped glyphs and xadvances to second run.\r\n        // The second run will contain the remaining glyph data, so swap instances rather than copying.\r\n        let second;\r\n        if (secondStart < glyphCount) {\r\n            second = this.glyphRunPool.obtain();\r\n            const glyphs1 = second.glyphs; // Starts empty.\r\n            Utils_1.Utils.arrayCopy(glyphs2, 0, glyphs1, glyphs1.length, firstEnd);\r\n            // glyphs2.removeRange(0, secondStart - 1);\r\n            glyphs2.splice(0, secondStart - 1 + 1);\r\n            first.glyphs = glyphs1;\r\n            second.glyphs = glyphs2;\r\n            const xAdvances1 = second.xAdvances; // Starts empty.\r\n            Utils_1.Utils.arrayCopy(xAdvances2, 0, xAdvances1, xAdvances1.length, firstEnd + 1);\r\n            // xAdvances2.removeRange(1, secondStart); // Leave first entry to be overwritten by next line.\r\n            xAdvances2.splice(1, secondStart); // Leave first entry to be overwritten by next line.\r\n            xAdvances2[0] = this.getLineOffset(glyphs2, fontData);\r\n            first.xAdvances = xAdvances1;\r\n            second.xAdvances = xAdvances2;\r\n            const firstGlyphCount = first.glyphs.length; // After wrapping it.\r\n            const secondGlyphCount = second.glyphs.length;\r\n            const droppedGlyphCount = glyphCount - firstGlyphCount - secondGlyphCount;\r\n            this.glyphCount -= droppedGlyphCount;\r\n            if (fontData.markupEnabled && droppedGlyphCount > 0) {\r\n                const reductionThreshold = this.glyphCount - secondGlyphCount;\r\n                for (let i = this.colors.length - 2; i >= 2; i -= 2) {\r\n                    // i >= 1 because first 2 values always determine the base color.\r\n                    const colorChangeIndex = this.colors[i];\r\n                    if (colorChangeIndex <= reductionThreshold)\r\n                        break;\r\n                    this.colors[i] = colorChangeIndex - droppedGlyphCount;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            // Second run is empty, just trim whitespace glyphs from end of first run.\r\n            glyphs2 = glyphs2.slice(0, firstEnd);\r\n            xAdvances2 = xAdvances2.slice(0, firstEnd + 1);\r\n            const droppedGlyphCount = secondStart - firstEnd;\r\n            if (droppedGlyphCount > 0) {\r\n                this.glyphCount -= droppedGlyphCount;\r\n                if (fontData.markupEnabled && this.colors[this.colors.length - 2] > this.glyphCount) {\r\n                    // Many color changes can be hidden in the dropped whitespace, so keep only the very last color entry.\r\n                    const lastColor = this.colors[this.colors.length - 1];\r\n                    while (this.colors[this.colors.length - 2] > this.glyphCount)\r\n                        this.colors.length -= 2;\r\n                    this.colors[this.colors.length - 2] = this.glyphCount; // Update color change index.\r\n                    this.colors[this.colors.length - 1] = lastColor; // Update color entry.\r\n                }\r\n            }\r\n        }\r\n        if (firstEnd === 0) {\r\n            // If the first run is now empty, remove it.\r\n            this.glyphRunPool.free(first);\r\n            this.runs.pop();\r\n        }\r\n        else\r\n            this.setLastGlyphXAdvance(fontData, first);\r\n        return second;\r\n    }\r\n}\r\nexports.GlyphLayout = GlyphLayout;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GlyphRun = void 0;\r\nclass GlyphRun {\r\n    constructor() {\r\n        this.glyphs = [];\r\n        this.xAdvances = [];\r\n        this.appendRun = (run) => {\r\n            this.glyphs.concat(run.glyphs);\r\n            // Remove the width of the last glyph. The first xadvance of the appended run has kerning for the last glyph of this run.\r\n            if (!this.xAdvances.length)\r\n                this.xAdvances.length--;\r\n            this.xAdvances.concat(run.xAdvances);\r\n        };\r\n        this.reset = () => {\r\n            this.glyphs.length = 0;\r\n            this.xAdvances.length = 0;\r\n        };\r\n    }\r\n}\r\nexports.GlyphRun = GlyphRun;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InputHandler = exports.InputEvent = void 0;\r\nconst events_1 = require(\"events\");\r\nconst Vector2_1 = require(\"./Vector2\");\r\nvar InputEvent;\r\n(function (InputEvent) {\r\n    InputEvent[\"TouchStart\"] = \"touchStart\";\r\n    InputEvent[\"TouchEnd\"] = \"touchEnd\";\r\n    InputEvent[\"TouchMove\"] = \"touchMove\";\r\n})(InputEvent = exports.InputEvent || (exports.InputEvent = {}));\r\nconst eventMaps = {\r\n    [InputEvent.TouchStart]: 'mousedown',\r\n    [InputEvent.TouchEnd]: 'mouseup',\r\n    [InputEvent.TouchMove]: 'mousemove'\r\n};\r\nconst getMouseEvent = (inputEvent, touch) => {\r\n    const mevt = new MouseEvent(eventMaps[inputEvent], {\r\n        clientX: touch.x,\r\n        clientY: touch.y\r\n    });\r\n    mevt.id = touch.id;\r\n    return mevt;\r\n};\r\nclass InputHandler {\r\n    constructor(canvas) {\r\n        this.screenCoord = new Vector2_1.Vector2();\r\n        this.worldCoord = new Vector2_1.Vector2();\r\n        this.canvas = canvas;\r\n        this.lastX = 0;\r\n        this.lastY = 0;\r\n        this.touched = false;\r\n        this.touches = [];\r\n        const emitter = (this.emitter = new events_1.EventEmitter());\r\n        this.mouseDownHandler = evt => {\r\n            this.touched = true;\r\n            this.handleMove(evt);\r\n            emitter.emit(InputEvent.TouchStart, this.getX(), this.getY());\r\n        };\r\n        this.mouseUpHandler = evt => {\r\n            this.touched = false;\r\n            emitter.emit(InputEvent.TouchEnd, this.getX(), this.getY());\r\n        };\r\n        this.mouseMoveHandler = evt => {\r\n            this.handleMove(evt);\r\n            emitter.emit(InputEvent.TouchMove, this.getX(), this.getY());\r\n        };\r\n        this.touchStartHandler = (evt) => {\r\n            evt.preventDefault();\r\n            for (const changeTouch of evt.changedTouches) {\r\n                const touch = {\r\n                    x: changeTouch.clientX,\r\n                    y: changeTouch.clientY,\r\n                    id: changeTouch.identifier\r\n                };\r\n                this.touches.push(touch);\r\n                const mevt = getMouseEvent(InputEvent.TouchStart, touch);\r\n                this.canvas.dispatchEvent(mevt);\r\n            }\r\n        };\r\n        this.touchEndHandler = (evt) => {\r\n            evt.preventDefault();\r\n            for (const changeTouch of evt.changedTouches) {\r\n                const touch = this.touches.find(element => element.id === changeTouch.identifier);\r\n                if (!touch)\r\n                    continue;\r\n                const mevt = getMouseEvent(InputEvent.TouchEnd, touch);\r\n                this.canvas.dispatchEvent(mevt);\r\n                const index = this.touches.indexOf(touch);\r\n                this.touches.splice(index, 1);\r\n            }\r\n        };\r\n        this.touchMoveHandler = (evt) => {\r\n            evt.preventDefault();\r\n            for (const changeTouch of evt.changedTouches) {\r\n                for (const touch of this.touches) {\r\n                    if (touch.id === changeTouch.identifier) {\r\n                        touch.x = changeTouch.clientX;\r\n                        touch.y = changeTouch.clientY;\r\n                        const mevt = getMouseEvent(InputEvent.TouchMove, touch);\r\n                        this.canvas.dispatchEvent(mevt);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        this.canvas.addEventListener('mousedown', this.mouseDownHandler, false);\r\n        this.canvas.addEventListener('mouseup', this.mouseUpHandler, false);\r\n        this.canvas.addEventListener('mousemove', this.mouseMoveHandler, false);\r\n        this.canvas.addEventListener('touchstart', this.touchStartHandler, false);\r\n        this.canvas.addEventListener('touchend', this.touchEndHandler, false);\r\n        this.canvas.addEventListener('touchmove', this.touchMoveHandler, false);\r\n    }\r\n    cleanup() {\r\n        this.canvas.removeEventListener('mousedown', this.mouseDownHandler);\r\n        this.canvas.removeEventListener('mouseup', this.mouseUpHandler);\r\n        this.canvas.removeEventListener('mousemove', this.mouseMoveHandler);\r\n        this.canvas.removeEventListener('touchstart', this.touchStartHandler);\r\n        this.canvas.removeEventListener('touchend', this.touchEndHandler);\r\n        this.canvas.removeEventListener('touchmove', this.touchMoveHandler);\r\n    }\r\n    addEventListener(event, listener) {\r\n        this.emitter.addListener(event, listener);\r\n    }\r\n    handleMove(evt) {\r\n        const rect = this.canvas.getBoundingClientRect();\r\n        const x = evt.clientX - rect.left;\r\n        const y = evt.clientY - rect.top;\r\n        this.lastX = x;\r\n        this.lastY = y;\r\n    }\r\n    getX(index = 0) {\r\n        var _a;\r\n        const touchedX = (_a = this.touches[index]) === null || _a === void 0 ? void 0 : _a.x;\r\n        return touchedX === undefined ? this.lastX : touchedX;\r\n    }\r\n    getY(index = 0) {\r\n        var _a;\r\n        const touchedY = (_a = this.touches[index]) === null || _a === void 0 ? void 0 : _a.y;\r\n        return touchedY === undefined ? this.lastY : touchedY;\r\n    }\r\n    isTouched() {\r\n        if (this.touches.length > 0)\r\n            return true;\r\n        else {\r\n            return this.touched;\r\n        }\r\n    }\r\n    getTouchedWorldCoord(camera) {\r\n        this.screenCoord.set(this.getX(), this.getY());\r\n        camera.unprojectVector2(this.worldCoord, this.screenCoord);\r\n        return this.worldCoord;\r\n    }\r\n}\r\nexports.InputHandler = InputHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Matrix3 = void 0;\r\nconst Matrix4_1 = require(\"./Matrix4\");\r\nconst Utils_1 = require(\"./Utils\");\r\nclass Matrix3 {\r\n    constructor(matrix = null) {\r\n        this.val = new Array(9);\r\n        this.tmp = new Array(9);\r\n        if (matrix) {\r\n            this.setByMatrix3(matrix);\r\n        }\r\n        else {\r\n            this.idt();\r\n        }\r\n    }\r\n    idt() {\r\n        const val = this.val;\r\n        val[Matrix3.M00] = 1;\r\n        val[Matrix3.M10] = 0;\r\n        val[Matrix3.M20] = 0;\r\n        val[Matrix3.M01] = 0;\r\n        val[Matrix3.M11] = 1;\r\n        val[Matrix3.M21] = 0;\r\n        val[Matrix3.M02] = 0;\r\n        val[Matrix3.M12] = 0;\r\n        val[Matrix3.M22] = 1;\r\n        return this;\r\n    }\r\n    mulWithMatrix3(m) {\r\n        const val = this.val;\r\n        const v00 = val[Matrix3.M00] * m.val[Matrix3.M00] +\r\n            val[Matrix3.M01] * m.val[Matrix3.M10] +\r\n            val[Matrix3.M02] * m.val[Matrix3.M20];\r\n        const v01 = val[Matrix3.M00] * m.val[Matrix3.M01] +\r\n            val[Matrix3.M01] * m.val[Matrix3.M11] +\r\n            val[Matrix3.M02] * m.val[Matrix3.M21];\r\n        const v02 = val[Matrix3.M00] * m.val[Matrix3.M02] +\r\n            val[Matrix3.M01] * m.val[Matrix3.M12] +\r\n            val[Matrix3.M02] * m.val[Matrix3.M22];\r\n        const v10 = val[Matrix3.M10] * m.val[Matrix3.M00] +\r\n            val[Matrix3.M11] * m.val[Matrix3.M10] +\r\n            val[Matrix3.M12] * m.val[Matrix3.M20];\r\n        const v11 = val[Matrix3.M10] * m.val[Matrix3.M01] +\r\n            val[Matrix3.M11] * m.val[Matrix3.M11] +\r\n            val[Matrix3.M12] * m.val[Matrix3.M21];\r\n        const v12 = val[Matrix3.M10] * m.val[Matrix3.M02] +\r\n            val[Matrix3.M11] * m.val[Matrix3.M12] +\r\n            val[Matrix3.M12] * m.val[Matrix3.M22];\r\n        const v20 = val[Matrix3.M20] * m.val[Matrix3.M00] +\r\n            val[Matrix3.M21] * m.val[Matrix3.M10] +\r\n            val[Matrix3.M22] * m.val[Matrix3.M20];\r\n        const v21 = val[Matrix3.M20] * m.val[Matrix3.M01] +\r\n            val[Matrix3.M21] * m.val[Matrix3.M11] +\r\n            val[Matrix3.M22] * m.val[Matrix3.M21];\r\n        const v22 = val[Matrix3.M20] * m.val[Matrix3.M02] +\r\n            val[Matrix3.M21] * m.val[Matrix3.M12] +\r\n            val[Matrix3.M22] * m.val[Matrix3.M22];\r\n        val[Matrix3.M00] = v00;\r\n        val[Matrix3.M10] = v10;\r\n        val[Matrix3.M20] = v20;\r\n        val[Matrix3.M01] = v01;\r\n        val[Matrix3.M11] = v11;\r\n        val[Matrix3.M21] = v21;\r\n        val[Matrix3.M02] = v02;\r\n        val[Matrix3.M12] = v12;\r\n        val[Matrix3.M22] = v22;\r\n        return this;\r\n    }\r\n    mulLeft(m) {\r\n        const val = this.val;\r\n        const v00 = m.val[Matrix3.M00] * val[Matrix3.M00] +\r\n            m.val[Matrix3.M01] * val[Matrix3.M10] +\r\n            m.val[Matrix3.M02] * val[Matrix3.M20];\r\n        const v01 = m.val[Matrix3.M00] * val[Matrix3.M01] +\r\n            m.val[Matrix3.M01] * val[Matrix3.M11] +\r\n            m.val[Matrix3.M02] * val[Matrix3.M21];\r\n        const v02 = m.val[Matrix3.M00] * val[Matrix3.M02] +\r\n            m.val[Matrix3.M01] * val[Matrix3.M12] +\r\n            m.val[Matrix3.M02] * val[Matrix3.M22];\r\n        const v10 = m.val[Matrix3.M10] * val[Matrix3.M00] +\r\n            m.val[Matrix3.M11] * val[Matrix3.M10] +\r\n            m.val[Matrix3.M12] * val[Matrix3.M20];\r\n        const v11 = m.val[Matrix3.M10] * val[Matrix3.M01] +\r\n            m.val[Matrix3.M11] * val[Matrix3.M11] +\r\n            m.val[Matrix3.M12] * val[Matrix3.M21];\r\n        const v12 = m.val[Matrix3.M10] * val[Matrix3.M02] +\r\n            m.val[Matrix3.M11] * val[Matrix3.M12] +\r\n            m.val[Matrix3.M12] * val[Matrix3.M22];\r\n        const v20 = m.val[Matrix3.M20] * val[Matrix3.M00] +\r\n            m.val[Matrix3.M21] * val[Matrix3.M10] +\r\n            m.val[Matrix3.M22] * val[Matrix3.M20];\r\n        const v21 = m.val[Matrix3.M20] * val[Matrix3.M01] +\r\n            m.val[Matrix3.M21] * val[Matrix3.M11] +\r\n            m.val[Matrix3.M22] * val[Matrix3.M21];\r\n        const v22 = m.val[Matrix3.M20] * val[Matrix3.M02] +\r\n            m.val[Matrix3.M21] * val[Matrix3.M12] +\r\n            m.val[Matrix3.M22] * val[Matrix3.M22];\r\n        val[Matrix3.M00] = v00;\r\n        val[Matrix3.M10] = v10;\r\n        val[Matrix3.M20] = v20;\r\n        val[Matrix3.M01] = v01;\r\n        val[Matrix3.M11] = v11;\r\n        val[Matrix3.M21] = v21;\r\n        val[Matrix3.M02] = v02;\r\n        val[Matrix3.M12] = v12;\r\n        val[Matrix3.M22] = v22;\r\n        return this;\r\n    }\r\n    setToRotation(degrees) {\r\n        return this.setToRotationRad(Utils_1.MathUtils.degreesToRadians * degrees);\r\n    }\r\n    setToRotationRad(radians) {\r\n        const cos = Math.cos(radians);\r\n        const sin = Math.sin(radians);\r\n        const val = this.val;\r\n        val[Matrix3.M00] = cos;\r\n        val[Matrix3.M10] = sin;\r\n        val[Matrix3.M20] = 0;\r\n        val[Matrix3.M01] = -sin;\r\n        val[Matrix3.M11] = cos;\r\n        val[Matrix3.M21] = 0;\r\n        val[Matrix3.M02] = 0;\r\n        val[Matrix3.M12] = 0;\r\n        val[Matrix3.M22] = 1;\r\n        return this;\r\n    }\r\n    setToRotationWithAxis(axis, degrees) {\r\n        const cos = Math.cos(degrees);\r\n        const sin = Math.sin(degrees);\r\n        const val = this.val;\r\n        const oc = 1.0 - cos;\r\n        val[Matrix3.M00] = oc * axis.x * axis.x + cos;\r\n        val[Matrix3.M01] = oc * axis.x * axis.y - axis.z * sin;\r\n        val[Matrix3.M02] = oc * axis.z * axis.x + axis.y * sin;\r\n        val[Matrix3.M10] = oc * axis.x * axis.y + axis.z * sin;\r\n        val[Matrix3.M11] = oc * axis.y * axis.y + cos;\r\n        val[Matrix3.M12] = oc * axis.y * axis.z - axis.x * sin;\r\n        val[Matrix3.M20] = oc * axis.z * axis.x - axis.y * sin;\r\n        val[Matrix3.M21] = oc * axis.y * axis.z + axis.x * sin;\r\n        val[Matrix3.M22] = oc * axis.z * axis.z + cos;\r\n        return this;\r\n    }\r\n    setToTranslation(x, y) {\r\n        const val = this.val;\r\n        val[Matrix3.M00] = 1;\r\n        val[Matrix3.M10] = 0;\r\n        val[Matrix3.M20] = 0;\r\n        val[Matrix3.M01] = 0;\r\n        val[Matrix3.M11] = 1;\r\n        val[Matrix3.M21] = 0;\r\n        val[Matrix3.M02] = x;\r\n        val[Matrix3.M12] = y;\r\n        val[Matrix3.M22] = 1;\r\n        return this;\r\n    }\r\n    setToScaling(scaleX, scaleY) {\r\n        const val = this.val;\r\n        val[Matrix3.M00] = scaleX;\r\n        val[Matrix3.M10] = 0;\r\n        val[Matrix3.M20] = 0;\r\n        val[Matrix3.M01] = 0;\r\n        val[Matrix3.M11] = scaleY;\r\n        val[Matrix3.M21] = 0;\r\n        val[Matrix3.M02] = 0;\r\n        val[Matrix3.M12] = 0;\r\n        val[Matrix3.M22] = 1;\r\n        return this;\r\n    }\r\n    toString() {\r\n        const val = this.val;\r\n        return ('[' +\r\n            val[Matrix3.M00] +\r\n            '|' +\r\n            val[Matrix3.M01] +\r\n            '|' +\r\n            val[Matrix3.M02] +\r\n            ']\\n' +\r\n            '[' +\r\n            val[Matrix3.M10] +\r\n            '|' +\r\n            val[Matrix3.M11] +\r\n            '|' +\r\n            val[Matrix3.M12] +\r\n            ']\\n' +\r\n            '[' +\r\n            val[Matrix3.M20] +\r\n            '|' +\r\n            val[Matrix3.M21] +\r\n            '|' +\r\n            val[Matrix3.M22] +\r\n            ']');\r\n    }\r\n    det() {\r\n        const val = this.val;\r\n        return (val[Matrix3.M00] * val[Matrix3.M11] * val[Matrix3.M22] +\r\n            val[Matrix3.M01] * val[Matrix3.M12] * val[Matrix3.M20] +\r\n            val[Matrix3.M02] * val[Matrix3.M10] * val[Matrix3.M21] -\r\n            val[Matrix3.M00] * val[Matrix3.M12] * val[Matrix3.M21] -\r\n            val[Matrix3.M01] * val[Matrix3.M10] * val[Matrix3.M22] -\r\n            val[Matrix3.M02] * val[Matrix3.M11] * val[Matrix3.M20]);\r\n    }\r\n    inv() {\r\n        const det = this.det();\r\n        if (det === 0)\r\n            throw new Error(\"Can't invert a singular matrix\");\r\n        const inv_det = 1.0 / det;\r\n        const tmp = this.tmp, val = this.val;\r\n        tmp[Matrix3.M00] = val[Matrix3.M11] * val[Matrix3.M22] - val[Matrix3.M21] * val[Matrix3.M12];\r\n        tmp[Matrix3.M10] = val[Matrix3.M20] * val[Matrix3.M12] - val[Matrix3.M10] * val[Matrix3.M22];\r\n        tmp[Matrix3.M20] = val[Matrix3.M10] * val[Matrix3.M21] - val[Matrix3.M20] * val[Matrix3.M11];\r\n        tmp[Matrix3.M01] = val[Matrix3.M21] * val[Matrix3.M02] - val[Matrix3.M01] * val[Matrix3.M22];\r\n        tmp[Matrix3.M11] = val[Matrix3.M00] * val[Matrix3.M22] - val[Matrix3.M20] * val[Matrix3.M02];\r\n        tmp[Matrix3.M21] = val[Matrix3.M20] * val[Matrix3.M01] - val[Matrix3.M00] * val[Matrix3.M21];\r\n        tmp[Matrix3.M02] = val[Matrix3.M01] * val[Matrix3.M12] - val[Matrix3.M11] * val[Matrix3.M02];\r\n        tmp[Matrix3.M12] = val[Matrix3.M10] * val[Matrix3.M02] - val[Matrix3.M00] * val[Matrix3.M12];\r\n        tmp[Matrix3.M22] = val[Matrix3.M00] * val[Matrix3.M11] - val[Matrix3.M10] * val[Matrix3.M01];\r\n        val[Matrix3.M00] = inv_det * tmp[Matrix3.M00];\r\n        val[Matrix3.M10] = inv_det * tmp[Matrix3.M10];\r\n        val[Matrix3.M20] = inv_det * tmp[Matrix3.M20];\r\n        val[Matrix3.M01] = inv_det * tmp[Matrix3.M01];\r\n        val[Matrix3.M11] = inv_det * tmp[Matrix3.M11];\r\n        val[Matrix3.M21] = inv_det * tmp[Matrix3.M21];\r\n        val[Matrix3.M02] = inv_det * tmp[Matrix3.M02];\r\n        val[Matrix3.M12] = inv_det * tmp[Matrix3.M12];\r\n        val[Matrix3.M22] = inv_det * tmp[Matrix3.M22];\r\n        return this;\r\n    }\r\n    setByMatrix3(mat) {\r\n        for (const v of mat.val) {\r\n            this.val.push(v);\r\n        }\r\n        return this;\r\n    }\r\n    setByMatrix4(mat) {\r\n        const val = this.val;\r\n        val[Matrix3.M00] = mat.values[Matrix4_1.Matrix4.M00];\r\n        val[Matrix3.M10] = mat.values[Matrix4_1.Matrix4.M10];\r\n        val[Matrix3.M20] = mat.values[Matrix4_1.Matrix4.M20];\r\n        val[Matrix3.M01] = mat.values[Matrix4_1.Matrix4.M01];\r\n        val[Matrix3.M11] = mat.values[Matrix4_1.Matrix4.M11];\r\n        val[Matrix3.M21] = mat.values[Matrix4_1.Matrix4.M21];\r\n        val[Matrix3.M02] = mat.values[Matrix4_1.Matrix4.M02];\r\n        val[Matrix3.M12] = mat.values[Matrix4_1.Matrix4.M12];\r\n        val[Matrix3.M22] = mat.values[Matrix4_1.Matrix4.M22];\r\n        return this;\r\n    }\r\n    trnByVector2(vector) {\r\n        const val = this.val;\r\n        val[Matrix3.M02] += vector.x;\r\n        val[Matrix3.M12] += vector.y;\r\n        return this;\r\n    }\r\n    trnByMatrix3(x, y) {\r\n        const val = this.val;\r\n        val[Matrix3.M02] += x;\r\n        val[Matrix3.M12] += y;\r\n        return this;\r\n    }\r\n    trnByVector3(vector) {\r\n        const val = this.val;\r\n        val[Matrix3.M02] += vector.x;\r\n        val[Matrix3.M12] += vector.y;\r\n        return this;\r\n    }\r\n    translate(x, y) {\r\n        const val = this.val;\r\n        this.tmp[Matrix3.M00] = 1;\r\n        this.tmp[Matrix3.M10] = 0;\r\n        this.tmp[Matrix3.M20] = 0;\r\n        this.tmp[Matrix3.M01] = 0;\r\n        this.tmp[Matrix3.M11] = 1;\r\n        this.tmp[Matrix3.M21] = 0;\r\n        this.tmp[Matrix3.M02] = x;\r\n        this.tmp[Matrix3.M12] = y;\r\n        this.tmp[Matrix3.M22] = 1;\r\n        Matrix3.mul(val, this.tmp);\r\n        return this;\r\n    }\r\n    rotate(degrees) {\r\n        return this.rotateRad(Utils_1.MathUtils.degreesToRadians * degrees);\r\n    }\r\n    rotateRad(radians) {\r\n        if (radians === 0)\r\n            return this;\r\n        const cos = Math.cos(radians);\r\n        const sin = Math.sin(radians);\r\n        const tmp = this.tmp;\r\n        tmp[Matrix3.M00] = cos;\r\n        tmp[Matrix3.M10] = sin;\r\n        tmp[Matrix3.M20] = 0;\r\n        tmp[Matrix3.M01] = -sin;\r\n        tmp[Matrix3.M11] = cos;\r\n        tmp[Matrix3.M21] = 0;\r\n        tmp[Matrix3.M02] = 0;\r\n        tmp[Matrix3.M12] = 0;\r\n        tmp[Matrix3.M22] = 1;\r\n        Matrix3.mul(this.val, tmp);\r\n        return this;\r\n    }\r\n    scale(scaleX, scaleY) {\r\n        const tmp = this.tmp;\r\n        tmp[Matrix3.M00] = scaleX;\r\n        tmp[Matrix3.M10] = 0;\r\n        tmp[Matrix3.M20] = 0;\r\n        tmp[Matrix3.M01] = 0;\r\n        tmp[Matrix3.M11] = scaleY;\r\n        tmp[Matrix3.M21] = 0;\r\n        tmp[Matrix3.M02] = 0;\r\n        tmp[Matrix3.M12] = 0;\r\n        tmp[Matrix3.M22] = 1;\r\n        Matrix3.mul(this.val, tmp);\r\n        return this;\r\n    }\r\n    getValues() {\r\n        return this.val;\r\n    }\r\n    getTranslation(position) {\r\n        position.x = this.val[Matrix3.M02];\r\n        position.y = this.val[Matrix3.M12];\r\n        return position;\r\n    }\r\n    getScale(scale) {\r\n        const val = this.val;\r\n        scale.x = Math.sqrt(val[Matrix3.M00] * val[Matrix3.M00] + val[Matrix3.M01] * val[Matrix3.M01]);\r\n        scale.y = Math.sqrt(val[Matrix3.M10] * val[Matrix3.M10] + val[Matrix3.M11] * val[Matrix3.M11]);\r\n        return scale;\r\n    }\r\n    getRotation() {\r\n        return Utils_1.MathUtils.radiansToDegrees * Math.atan2(this.val[Matrix3.M10], this.val[Matrix3.M00]);\r\n    }\r\n    getRotationRad() {\r\n        return Math.atan2(this.val[Matrix3.M10], this.val[Matrix3.M00]);\r\n    }\r\n    sclByNumber(scale) {\r\n        this.val[Matrix3.M00] *= scale;\r\n        this.val[Matrix3.M11] *= scale;\r\n        return this;\r\n    }\r\n    sclByVector2(scale) {\r\n        this.val[Matrix3.M00] *= scale.x;\r\n        this.val[Matrix3.M11] *= scale.y;\r\n        return this;\r\n    }\r\n    scl(scale) {\r\n        this.val[Matrix3.M00] *= scale.x;\r\n        this.val[Matrix3.M11] *= scale.y;\r\n        return this;\r\n    }\r\n    transpose() {\r\n        const val = this.val;\r\n        const v01 = val[Matrix3.M10];\r\n        const v02 = val[Matrix3.M20];\r\n        const v10 = val[Matrix3.M01];\r\n        const v12 = val[Matrix3.M21];\r\n        const v20 = val[Matrix3.M02];\r\n        const v21 = val[Matrix3.M12];\r\n        val[Matrix3.M01] = v01;\r\n        val[Matrix3.M02] = v02;\r\n        val[Matrix3.M10] = v10;\r\n        val[Matrix3.M12] = v12;\r\n        val[Matrix3.M20] = v20;\r\n        val[Matrix3.M21] = v21;\r\n        return this;\r\n    }\r\n    static mul(mata, matb) {\r\n        const v00 = mata[Matrix3.M00] * matb[Matrix3.M00] +\r\n            mata[Matrix3.M01] * matb[Matrix3.M10] +\r\n            mata[Matrix3.M02] * matb[Matrix3.M20];\r\n        const v01 = mata[Matrix3.M00] * matb[Matrix3.M01] +\r\n            mata[Matrix3.M01] * matb[Matrix3.M11] +\r\n            mata[Matrix3.M02] * matb[Matrix3.M21];\r\n        const v02 = mata[Matrix3.M00] * matb[Matrix3.M02] +\r\n            mata[Matrix3.M01] * matb[Matrix3.M12] +\r\n            mata[Matrix3.M02] * matb[Matrix3.M22];\r\n        const v10 = mata[Matrix3.M10] * matb[Matrix3.M00] +\r\n            mata[Matrix3.M11] * matb[Matrix3.M10] +\r\n            mata[Matrix3.M12] * matb[Matrix3.M20];\r\n        const v11 = mata[Matrix3.M10] * matb[Matrix3.M01] +\r\n            mata[Matrix3.M11] * matb[Matrix3.M11] +\r\n            mata[Matrix3.M12] * matb[Matrix3.M21];\r\n        const v12 = mata[Matrix3.M10] * matb[Matrix3.M02] +\r\n            mata[Matrix3.M11] * matb[Matrix3.M12] +\r\n            mata[Matrix3.M12] * matb[Matrix3.M22];\r\n        const v20 = mata[Matrix3.M20] * matb[Matrix3.M00] +\r\n            mata[Matrix3.M21] * matb[Matrix3.M10] +\r\n            mata[Matrix3.M22] * matb[Matrix3.M20];\r\n        const v21 = mata[Matrix3.M20] * matb[Matrix3.M01] +\r\n            mata[Matrix3.M21] * matb[Matrix3.M11] +\r\n            mata[Matrix3.M22] * matb[Matrix3.M21];\r\n        const v22 = mata[Matrix3.M20] * matb[Matrix3.M02] +\r\n            mata[Matrix3.M21] * matb[Matrix3.M12] +\r\n            mata[Matrix3.M22] * matb[Matrix3.M22];\r\n        mata[Matrix3.M00] = v00;\r\n        mata[Matrix3.M10] = v10;\r\n        mata[Matrix3.M20] = v20;\r\n        mata[Matrix3.M01] = v01;\r\n        mata[Matrix3.M11] = v11;\r\n        mata[Matrix3.M21] = v21;\r\n        mata[Matrix3.M02] = v02;\r\n        mata[Matrix3.M12] = v12;\r\n        mata[Matrix3.M22] = v22;\r\n    }\r\n}\r\nexports.Matrix3 = Matrix3;\r\nMatrix3.M00 = 0;\r\nMatrix3.M01 = 3;\r\nMatrix3.M02 = 6;\r\nMatrix3.M10 = 1;\r\nMatrix3.M11 = 4;\r\nMatrix3.M12 = 7;\r\nMatrix3.M20 = 2;\r\nMatrix3.M21 = 5;\r\nMatrix3.M22 = 8;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Matrix4 = void 0;\r\nconst Quaternion_1 = require(\"./Quaternion\");\r\nconst Utils_1 = require(\"./Utils\");\r\nconst Vector3_1 = require(\"./Vector3\");\r\nclass Matrix4 {\r\n    constructor() {\r\n        this.temp = new Float32Array(16);\r\n        this.values = new Float32Array(16);\r\n        let v = this.values;\r\n        v[Matrix4.M00] = 1;\r\n        v[Matrix4.M11] = 1;\r\n        v[Matrix4.M22] = 1;\r\n        v[Matrix4.M33] = 1;\r\n    }\r\n    set(values) {\r\n        this.values.set(values);\r\n        return this;\r\n    }\r\n    setFromQuaternion(quaternion) {\r\n        const xs = quaternion.x * 2, ys = quaternion.y * 2, zs = quaternion.z * 2;\r\n        const wx = quaternion.w * xs, wy = quaternion.w * ys, wz = quaternion.w * zs;\r\n        const xx = quaternion.x * xs, xy = quaternion.x * ys, xz = quaternion.x * zs;\r\n        const yy = quaternion.y * ys, yz = quaternion.y * zs, zz = quaternion.z * zs;\r\n        const val = this.values;\r\n        val[Matrix4.M00] = 1 - (yy + zz);\r\n        val[Matrix4.M01] = xy - wz;\r\n        val[Matrix4.M02] = xz + wy;\r\n        val[Matrix4.M03] = 0;\r\n        val[Matrix4.M10] = xy + wz;\r\n        val[Matrix4.M11] = 1 - (xx + zz);\r\n        val[Matrix4.M12] = yz - wx;\r\n        val[Matrix4.M13] = 0;\r\n        val[Matrix4.M20] = xz - wy;\r\n        val[Matrix4.M21] = yz + wx;\r\n        val[Matrix4.M22] = 1 - (xx + yy);\r\n        val[Matrix4.M23] = 0;\r\n        val[Matrix4.M30] = 0;\r\n        val[Matrix4.M31] = 0;\r\n        val[Matrix4.M32] = 0;\r\n        val[Matrix4.M33] = 1;\r\n        return this;\r\n    }\r\n    setFromTranslationRotation(position, orientation, scale) {\r\n        const xs = orientation.x * 2, ys = orientation.y * 2, zs = orientation.z * 2;\r\n        const wx = orientation.w * xs, wy = orientation.w * ys, wz = orientation.w * zs;\r\n        const xx = orientation.x * xs, xy = orientation.x * ys, xz = orientation.x * zs;\r\n        const yy = orientation.y * ys, yz = orientation.y * zs, zz = orientation.z * zs;\r\n        let val = this.values;\r\n        val[Matrix4.M00] = scale.x * (1.0 - (yy + zz));\r\n        val[Matrix4.M01] = scale.y * (xy - wz);\r\n        val[Matrix4.M02] = scale.z * (xz + wy);\r\n        val[Matrix4.M03] = position.x;\r\n        val[Matrix4.M10] = scale.x * (xy + wz);\r\n        val[Matrix4.M11] = scale.y * (1.0 - (xx + zz));\r\n        val[Matrix4.M12] = scale.z * (yz - wx);\r\n        val[Matrix4.M13] = position.y;\r\n        val[Matrix4.M20] = scale.x * (xz - wy);\r\n        val[Matrix4.M21] = scale.y * (yz + wx);\r\n        val[Matrix4.M22] = scale.z * (1.0 - (xx + yy));\r\n        val[Matrix4.M23] = position.z;\r\n        val[Matrix4.M30] = 0;\r\n        val[Matrix4.M31] = 0;\r\n        val[Matrix4.M32] = 0;\r\n        val[Matrix4.M33] = 1;\r\n        return this;\r\n    }\r\n    transpose() {\r\n        let t = this.temp;\r\n        let v = this.values;\r\n        t[Matrix4.M00] = v[Matrix4.M00];\r\n        t[Matrix4.M01] = v[Matrix4.M10];\r\n        t[Matrix4.M02] = v[Matrix4.M20];\r\n        t[Matrix4.M03] = v[Matrix4.M30];\r\n        t[Matrix4.M10] = v[Matrix4.M01];\r\n        t[Matrix4.M11] = v[Matrix4.M11];\r\n        t[Matrix4.M12] = v[Matrix4.M21];\r\n        t[Matrix4.M13] = v[Matrix4.M31];\r\n        t[Matrix4.M20] = v[Matrix4.M02];\r\n        t[Matrix4.M21] = v[Matrix4.M12];\r\n        t[Matrix4.M22] = v[Matrix4.M22];\r\n        t[Matrix4.M23] = v[Matrix4.M32];\r\n        t[Matrix4.M30] = v[Matrix4.M03];\r\n        t[Matrix4.M31] = v[Matrix4.M13];\r\n        t[Matrix4.M32] = v[Matrix4.M23];\r\n        t[Matrix4.M33] = v[Matrix4.M33];\r\n        return this.set(t);\r\n    }\r\n    identity() {\r\n        let v = this.values;\r\n        v[Matrix4.M00] = 1;\r\n        v[Matrix4.M01] = 0;\r\n        v[Matrix4.M02] = 0;\r\n        v[Matrix4.M03] = 0;\r\n        v[Matrix4.M10] = 0;\r\n        v[Matrix4.M11] = 1;\r\n        v[Matrix4.M12] = 0;\r\n        v[Matrix4.M13] = 0;\r\n        v[Matrix4.M20] = 0;\r\n        v[Matrix4.M21] = 0;\r\n        v[Matrix4.M22] = 1;\r\n        v[Matrix4.M23] = 0;\r\n        v[Matrix4.M30] = 0;\r\n        v[Matrix4.M31] = 0;\r\n        v[Matrix4.M32] = 0;\r\n        v[Matrix4.M33] = 1;\r\n        return this;\r\n    }\r\n    invert() {\r\n        let v = this.values;\r\n        let t = this.temp;\r\n        let l_det = v[Matrix4.M30] * v[Matrix4.M21] * v[Matrix4.M12] * v[Matrix4.M03] -\r\n            v[Matrix4.M20] * v[Matrix4.M31] * v[Matrix4.M12] * v[Matrix4.M03] -\r\n            v[Matrix4.M30] * v[Matrix4.M11] * v[Matrix4.M22] * v[Matrix4.M03] +\r\n            v[Matrix4.M10] * v[Matrix4.M31] * v[Matrix4.M22] * v[Matrix4.M03] +\r\n            v[Matrix4.M20] * v[Matrix4.M11] * v[Matrix4.M32] * v[Matrix4.M03] -\r\n            v[Matrix4.M10] * v[Matrix4.M21] * v[Matrix4.M32] * v[Matrix4.M03] -\r\n            v[Matrix4.M30] * v[Matrix4.M21] * v[Matrix4.M02] * v[Matrix4.M13] +\r\n            v[Matrix4.M20] * v[Matrix4.M31] * v[Matrix4.M02] * v[Matrix4.M13] +\r\n            v[Matrix4.M30] * v[Matrix4.M01] * v[Matrix4.M22] * v[Matrix4.M13] -\r\n            v[Matrix4.M00] * v[Matrix4.M31] * v[Matrix4.M22] * v[Matrix4.M13] -\r\n            v[Matrix4.M20] * v[Matrix4.M01] * v[Matrix4.M32] * v[Matrix4.M13] +\r\n            v[Matrix4.M00] * v[Matrix4.M21] * v[Matrix4.M32] * v[Matrix4.M13] +\r\n            v[Matrix4.M30] * v[Matrix4.M11] * v[Matrix4.M02] * v[Matrix4.M23] -\r\n            v[Matrix4.M10] * v[Matrix4.M31] * v[Matrix4.M02] * v[Matrix4.M23] -\r\n            v[Matrix4.M30] * v[Matrix4.M01] * v[Matrix4.M12] * v[Matrix4.M23] +\r\n            v[Matrix4.M00] * v[Matrix4.M31] * v[Matrix4.M12] * v[Matrix4.M23] +\r\n            v[Matrix4.M10] * v[Matrix4.M01] * v[Matrix4.M32] * v[Matrix4.M23] -\r\n            v[Matrix4.M00] * v[Matrix4.M11] * v[Matrix4.M32] * v[Matrix4.M23] -\r\n            v[Matrix4.M20] * v[Matrix4.M11] * v[Matrix4.M02] * v[Matrix4.M33] +\r\n            v[Matrix4.M10] * v[Matrix4.M21] * v[Matrix4.M02] * v[Matrix4.M33] +\r\n            v[Matrix4.M20] * v[Matrix4.M01] * v[Matrix4.M12] * v[Matrix4.M33] -\r\n            v[Matrix4.M00] * v[Matrix4.M21] * v[Matrix4.M12] * v[Matrix4.M33] -\r\n            v[Matrix4.M10] * v[Matrix4.M01] * v[Matrix4.M22] * v[Matrix4.M33] +\r\n            v[Matrix4.M00] * v[Matrix4.M11] * v[Matrix4.M22] * v[Matrix4.M33];\r\n        if (l_det === 0)\r\n            throw new Error('non-invertible matrix');\r\n        let inv_det = 1.0 / l_det;\r\n        t[Matrix4.M00] =\r\n            v[Matrix4.M12] * v[Matrix4.M23] * v[Matrix4.M31] -\r\n                v[Matrix4.M13] * v[Matrix4.M22] * v[Matrix4.M31] +\r\n                v[Matrix4.M13] * v[Matrix4.M21] * v[Matrix4.M32] -\r\n                v[Matrix4.M11] * v[Matrix4.M23] * v[Matrix4.M32] -\r\n                v[Matrix4.M12] * v[Matrix4.M21] * v[Matrix4.M33] +\r\n                v[Matrix4.M11] * v[Matrix4.M22] * v[Matrix4.M33];\r\n        t[Matrix4.M01] =\r\n            v[Matrix4.M03] * v[Matrix4.M22] * v[Matrix4.M31] -\r\n                v[Matrix4.M02] * v[Matrix4.M23] * v[Matrix4.M31] -\r\n                v[Matrix4.M03] * v[Matrix4.M21] * v[Matrix4.M32] +\r\n                v[Matrix4.M01] * v[Matrix4.M23] * v[Matrix4.M32] +\r\n                v[Matrix4.M02] * v[Matrix4.M21] * v[Matrix4.M33] -\r\n                v[Matrix4.M01] * v[Matrix4.M22] * v[Matrix4.M33];\r\n        t[Matrix4.M02] =\r\n            v[Matrix4.M02] * v[Matrix4.M13] * v[Matrix4.M31] -\r\n                v[Matrix4.M03] * v[Matrix4.M12] * v[Matrix4.M31] +\r\n                v[Matrix4.M03] * v[Matrix4.M11] * v[Matrix4.M32] -\r\n                v[Matrix4.M01] * v[Matrix4.M13] * v[Matrix4.M32] -\r\n                v[Matrix4.M02] * v[Matrix4.M11] * v[Matrix4.M33] +\r\n                v[Matrix4.M01] * v[Matrix4.M12] * v[Matrix4.M33];\r\n        t[Matrix4.M03] =\r\n            v[Matrix4.M03] * v[Matrix4.M12] * v[Matrix4.M21] -\r\n                v[Matrix4.M02] * v[Matrix4.M13] * v[Matrix4.M21] -\r\n                v[Matrix4.M03] * v[Matrix4.M11] * v[Matrix4.M22] +\r\n                v[Matrix4.M01] * v[Matrix4.M13] * v[Matrix4.M22] +\r\n                v[Matrix4.M02] * v[Matrix4.M11] * v[Matrix4.M23] -\r\n                v[Matrix4.M01] * v[Matrix4.M12] * v[Matrix4.M23];\r\n        t[Matrix4.M10] =\r\n            v[Matrix4.M13] * v[Matrix4.M22] * v[Matrix4.M30] -\r\n                v[Matrix4.M12] * v[Matrix4.M23] * v[Matrix4.M30] -\r\n                v[Matrix4.M13] * v[Matrix4.M20] * v[Matrix4.M32] +\r\n                v[Matrix4.M10] * v[Matrix4.M23] * v[Matrix4.M32] +\r\n                v[Matrix4.M12] * v[Matrix4.M20] * v[Matrix4.M33] -\r\n                v[Matrix4.M10] * v[Matrix4.M22] * v[Matrix4.M33];\r\n        t[Matrix4.M11] =\r\n            v[Matrix4.M02] * v[Matrix4.M23] * v[Matrix4.M30] -\r\n                v[Matrix4.M03] * v[Matrix4.M22] * v[Matrix4.M30] +\r\n                v[Matrix4.M03] * v[Matrix4.M20] * v[Matrix4.M32] -\r\n                v[Matrix4.M00] * v[Matrix4.M23] * v[Matrix4.M32] -\r\n                v[Matrix4.M02] * v[Matrix4.M20] * v[Matrix4.M33] +\r\n                v[Matrix4.M00] * v[Matrix4.M22] * v[Matrix4.M33];\r\n        t[Matrix4.M12] =\r\n            v[Matrix4.M03] * v[Matrix4.M12] * v[Matrix4.M30] -\r\n                v[Matrix4.M02] * v[Matrix4.M13] * v[Matrix4.M30] -\r\n                v[Matrix4.M03] * v[Matrix4.M10] * v[Matrix4.M32] +\r\n                v[Matrix4.M00] * v[Matrix4.M13] * v[Matrix4.M32] +\r\n                v[Matrix4.M02] * v[Matrix4.M10] * v[Matrix4.M33] -\r\n                v[Matrix4.M00] * v[Matrix4.M12] * v[Matrix4.M33];\r\n        t[Matrix4.M13] =\r\n            v[Matrix4.M02] * v[Matrix4.M13] * v[Matrix4.M20] -\r\n                v[Matrix4.M03] * v[Matrix4.M12] * v[Matrix4.M20] +\r\n                v[Matrix4.M03] * v[Matrix4.M10] * v[Matrix4.M22] -\r\n                v[Matrix4.M00] * v[Matrix4.M13] * v[Matrix4.M22] -\r\n                v[Matrix4.M02] * v[Matrix4.M10] * v[Matrix4.M23] +\r\n                v[Matrix4.M00] * v[Matrix4.M12] * v[Matrix4.M23];\r\n        t[Matrix4.M20] =\r\n            v[Matrix4.M11] * v[Matrix4.M23] * v[Matrix4.M30] -\r\n                v[Matrix4.M13] * v[Matrix4.M21] * v[Matrix4.M30] +\r\n                v[Matrix4.M13] * v[Matrix4.M20] * v[Matrix4.M31] -\r\n                v[Matrix4.M10] * v[Matrix4.M23] * v[Matrix4.M31] -\r\n                v[Matrix4.M11] * v[Matrix4.M20] * v[Matrix4.M33] +\r\n                v[Matrix4.M10] * v[Matrix4.M21] * v[Matrix4.M33];\r\n        t[Matrix4.M21] =\r\n            v[Matrix4.M03] * v[Matrix4.M21] * v[Matrix4.M30] -\r\n                v[Matrix4.M01] * v[Matrix4.M23] * v[Matrix4.M30] -\r\n                v[Matrix4.M03] * v[Matrix4.M20] * v[Matrix4.M31] +\r\n                v[Matrix4.M00] * v[Matrix4.M23] * v[Matrix4.M31] +\r\n                v[Matrix4.M01] * v[Matrix4.M20] * v[Matrix4.M33] -\r\n                v[Matrix4.M00] * v[Matrix4.M21] * v[Matrix4.M33];\r\n        t[Matrix4.M22] =\r\n            v[Matrix4.M01] * v[Matrix4.M13] * v[Matrix4.M30] -\r\n                v[Matrix4.M03] * v[Matrix4.M11] * v[Matrix4.M30] +\r\n                v[Matrix4.M03] * v[Matrix4.M10] * v[Matrix4.M31] -\r\n                v[Matrix4.M00] * v[Matrix4.M13] * v[Matrix4.M31] -\r\n                v[Matrix4.M01] * v[Matrix4.M10] * v[Matrix4.M33] +\r\n                v[Matrix4.M00] * v[Matrix4.M11] * v[Matrix4.M33];\r\n        t[Matrix4.M23] =\r\n            v[Matrix4.M03] * v[Matrix4.M11] * v[Matrix4.M20] -\r\n                v[Matrix4.M01] * v[Matrix4.M13] * v[Matrix4.M20] -\r\n                v[Matrix4.M03] * v[Matrix4.M10] * v[Matrix4.M21] +\r\n                v[Matrix4.M00] * v[Matrix4.M13] * v[Matrix4.M21] +\r\n                v[Matrix4.M01] * v[Matrix4.M10] * v[Matrix4.M23] -\r\n                v[Matrix4.M00] * v[Matrix4.M11] * v[Matrix4.M23];\r\n        t[Matrix4.M30] =\r\n            v[Matrix4.M12] * v[Matrix4.M21] * v[Matrix4.M30] -\r\n                v[Matrix4.M11] * v[Matrix4.M22] * v[Matrix4.M30] -\r\n                v[Matrix4.M12] * v[Matrix4.M20] * v[Matrix4.M31] +\r\n                v[Matrix4.M10] * v[Matrix4.M22] * v[Matrix4.M31] +\r\n                v[Matrix4.M11] * v[Matrix4.M20] * v[Matrix4.M32] -\r\n                v[Matrix4.M10] * v[Matrix4.M21] * v[Matrix4.M32];\r\n        t[Matrix4.M31] =\r\n            v[Matrix4.M01] * v[Matrix4.M22] * v[Matrix4.M30] -\r\n                v[Matrix4.M02] * v[Matrix4.M21] * v[Matrix4.M30] +\r\n                v[Matrix4.M02] * v[Matrix4.M20] * v[Matrix4.M31] -\r\n                v[Matrix4.M00] * v[Matrix4.M22] * v[Matrix4.M31] -\r\n                v[Matrix4.M01] * v[Matrix4.M20] * v[Matrix4.M32] +\r\n                v[Matrix4.M00] * v[Matrix4.M21] * v[Matrix4.M32];\r\n        t[Matrix4.M32] =\r\n            v[Matrix4.M02] * v[Matrix4.M11] * v[Matrix4.M30] -\r\n                v[Matrix4.M01] * v[Matrix4.M12] * v[Matrix4.M30] -\r\n                v[Matrix4.M02] * v[Matrix4.M10] * v[Matrix4.M31] +\r\n                v[Matrix4.M00] * v[Matrix4.M12] * v[Matrix4.M31] +\r\n                v[Matrix4.M01] * v[Matrix4.M10] * v[Matrix4.M32] -\r\n                v[Matrix4.M00] * v[Matrix4.M11] * v[Matrix4.M32];\r\n        t[Matrix4.M33] =\r\n            v[Matrix4.M01] * v[Matrix4.M12] * v[Matrix4.M20] -\r\n                v[Matrix4.M02] * v[Matrix4.M11] * v[Matrix4.M20] +\r\n                v[Matrix4.M02] * v[Matrix4.M10] * v[Matrix4.M21] -\r\n                v[Matrix4.M00] * v[Matrix4.M12] * v[Matrix4.M21] -\r\n                v[Matrix4.M01] * v[Matrix4.M10] * v[Matrix4.M22] +\r\n                v[Matrix4.M00] * v[Matrix4.M11] * v[Matrix4.M22];\r\n        v[Matrix4.M00] = t[Matrix4.M00] * inv_det;\r\n        v[Matrix4.M01] = t[Matrix4.M01] * inv_det;\r\n        v[Matrix4.M02] = t[Matrix4.M02] * inv_det;\r\n        v[Matrix4.M03] = t[Matrix4.M03] * inv_det;\r\n        v[Matrix4.M10] = t[Matrix4.M10] * inv_det;\r\n        v[Matrix4.M11] = t[Matrix4.M11] * inv_det;\r\n        v[Matrix4.M12] = t[Matrix4.M12] * inv_det;\r\n        v[Matrix4.M13] = t[Matrix4.M13] * inv_det;\r\n        v[Matrix4.M20] = t[Matrix4.M20] * inv_det;\r\n        v[Matrix4.M21] = t[Matrix4.M21] * inv_det;\r\n        v[Matrix4.M22] = t[Matrix4.M22] * inv_det;\r\n        v[Matrix4.M23] = t[Matrix4.M23] * inv_det;\r\n        v[Matrix4.M30] = t[Matrix4.M30] * inv_det;\r\n        v[Matrix4.M31] = t[Matrix4.M31] * inv_det;\r\n        v[Matrix4.M32] = t[Matrix4.M32] * inv_det;\r\n        v[Matrix4.M33] = t[Matrix4.M33] * inv_det;\r\n        return this;\r\n    }\r\n    determinant() {\r\n        let v = this.values;\r\n        return (v[Matrix4.M30] * v[Matrix4.M21] * v[Matrix4.M12] * v[Matrix4.M03] -\r\n            v[Matrix4.M20] * v[Matrix4.M31] * v[Matrix4.M12] * v[Matrix4.M03] -\r\n            v[Matrix4.M30] * v[Matrix4.M11] * v[Matrix4.M22] * v[Matrix4.M03] +\r\n            v[Matrix4.M10] * v[Matrix4.M31] * v[Matrix4.M22] * v[Matrix4.M03] +\r\n            v[Matrix4.M20] * v[Matrix4.M11] * v[Matrix4.M32] * v[Matrix4.M03] -\r\n            v[Matrix4.M10] * v[Matrix4.M21] * v[Matrix4.M32] * v[Matrix4.M03] -\r\n            v[Matrix4.M30] * v[Matrix4.M21] * v[Matrix4.M02] * v[Matrix4.M13] +\r\n            v[Matrix4.M20] * v[Matrix4.M31] * v[Matrix4.M02] * v[Matrix4.M13] +\r\n            v[Matrix4.M30] * v[Matrix4.M01] * v[Matrix4.M22] * v[Matrix4.M13] -\r\n            v[Matrix4.M00] * v[Matrix4.M31] * v[Matrix4.M22] * v[Matrix4.M13] -\r\n            v[Matrix4.M20] * v[Matrix4.M01] * v[Matrix4.M32] * v[Matrix4.M13] +\r\n            v[Matrix4.M00] * v[Matrix4.M21] * v[Matrix4.M32] * v[Matrix4.M13] +\r\n            v[Matrix4.M30] * v[Matrix4.M11] * v[Matrix4.M02] * v[Matrix4.M23] -\r\n            v[Matrix4.M10] * v[Matrix4.M31] * v[Matrix4.M02] * v[Matrix4.M23] -\r\n            v[Matrix4.M30] * v[Matrix4.M01] * v[Matrix4.M12] * v[Matrix4.M23] +\r\n            v[Matrix4.M00] * v[Matrix4.M31] * v[Matrix4.M12] * v[Matrix4.M23] +\r\n            v[Matrix4.M10] * v[Matrix4.M01] * v[Matrix4.M32] * v[Matrix4.M23] -\r\n            v[Matrix4.M00] * v[Matrix4.M11] * v[Matrix4.M32] * v[Matrix4.M23] -\r\n            v[Matrix4.M20] * v[Matrix4.M11] * v[Matrix4.M02] * v[Matrix4.M33] +\r\n            v[Matrix4.M10] * v[Matrix4.M21] * v[Matrix4.M02] * v[Matrix4.M33] +\r\n            v[Matrix4.M20] * v[Matrix4.M01] * v[Matrix4.M12] * v[Matrix4.M33] -\r\n            v[Matrix4.M00] * v[Matrix4.M21] * v[Matrix4.M12] * v[Matrix4.M33] -\r\n            v[Matrix4.M10] * v[Matrix4.M01] * v[Matrix4.M22] * v[Matrix4.M33] +\r\n            v[Matrix4.M00] * v[Matrix4.M11] * v[Matrix4.M22] * v[Matrix4.M33]);\r\n    }\r\n    translate(x, y, z) {\r\n        let v = this.values;\r\n        v[Matrix4.M03] += x;\r\n        v[Matrix4.M13] += y;\r\n        v[Matrix4.M23] += z;\r\n        return this;\r\n    }\r\n    setTranslation(x, y, z) {\r\n        let v = this.values;\r\n        v[Matrix4.M03] = x;\r\n        v[Matrix4.M13] = y;\r\n        v[Matrix4.M23] = z;\r\n        return this;\r\n    }\r\n    getTranslation(position) {\r\n        let v = this.values;\r\n        position.x = v[Matrix4.M03];\r\n        position.y = v[Matrix4.M13];\r\n        position.z = v[Matrix4.M23];\r\n        return position;\r\n    }\r\n    hasRotationOrScaling() {\r\n        let val = this.values;\r\n        return !(Utils_1.MathUtils.isEqual(val[Matrix4.M00], 1) &&\r\n            Utils_1.MathUtils.isEqual(val[Matrix4.M11], 1) &&\r\n            Utils_1.MathUtils.isEqual(val[Matrix4.M22], 1) &&\r\n            Utils_1.MathUtils.isZero(val[Matrix4.M01]) &&\r\n            Utils_1.MathUtils.isZero(val[Matrix4.M02]) &&\r\n            Utils_1.MathUtils.isZero(val[Matrix4.M10]) &&\r\n            Utils_1.MathUtils.isZero(val[Matrix4.M12]) &&\r\n            Utils_1.MathUtils.isZero(val[Matrix4.M20]) &&\r\n            Utils_1.MathUtils.isZero(val[Matrix4.M21]));\r\n    }\r\n    det3x3() {\r\n        let val = this.values;\r\n        return (val[Matrix4.M00] * val[Matrix4.M11] * val[Matrix4.M22] +\r\n            val[Matrix4.M01] * val[Matrix4.M12] * val[Matrix4.M20] +\r\n            val[Matrix4.M02] * val[Matrix4.M10] * val[Matrix4.M21] -\r\n            val[Matrix4.M00] * val[Matrix4.M12] * val[Matrix4.M21] -\r\n            val[Matrix4.M01] * val[Matrix4.M10] * val[Matrix4.M22] -\r\n            val[Matrix4.M02] * val[Matrix4.M11] * val[Matrix4.M20]);\r\n    }\r\n    copy() {\r\n        return new Matrix4().set(this.values);\r\n    }\r\n    projection(near, far, fovy, aspectRatio) {\r\n        this.identity();\r\n        let l_fd = 1.0 / Math.tan((fovy * (Math.PI / 180)) / 2.0);\r\n        let l_a1 = (far + near) / (near - far);\r\n        let l_a2 = (2 * far * near) / (near - far);\r\n        let v = this.values;\r\n        v[Matrix4.M00] = l_fd / aspectRatio;\r\n        v[Matrix4.M10] = 0;\r\n        v[Matrix4.M20] = 0;\r\n        v[Matrix4.M30] = 0;\r\n        v[Matrix4.M01] = 0;\r\n        v[Matrix4.M11] = l_fd;\r\n        v[Matrix4.M21] = 0;\r\n        v[Matrix4.M31] = 0;\r\n        v[Matrix4.M02] = 0;\r\n        v[Matrix4.M12] = 0;\r\n        v[Matrix4.M22] = l_a1;\r\n        v[Matrix4.M32] = -1;\r\n        v[Matrix4.M03] = 0;\r\n        v[Matrix4.M13] = 0;\r\n        v[Matrix4.M23] = l_a2;\r\n        v[Matrix4.M33] = 0;\r\n        return this;\r\n    }\r\n    ortho2d(x, y, width, height) {\r\n        return this.ortho(x, x + width, y, y + height, 0, 1);\r\n    }\r\n    ortho(left, right, bottom, top, near, far) {\r\n        this.identity();\r\n        let x_orth = 2 / (right - left);\r\n        let y_orth = 2 / (top - bottom);\r\n        let z_orth = -2 / (far - near);\r\n        let tx = -(right + left) / (right - left);\r\n        let ty = -(top + bottom) / (top - bottom);\r\n        let tz = -(far + near) / (far - near);\r\n        let v = this.values;\r\n        v[Matrix4.M00] = x_orth;\r\n        v[Matrix4.M10] = 0;\r\n        v[Matrix4.M20] = 0;\r\n        v[Matrix4.M30] = 0;\r\n        v[Matrix4.M01] = 0;\r\n        v[Matrix4.M11] = y_orth;\r\n        v[Matrix4.M21] = 0;\r\n        v[Matrix4.M31] = 0;\r\n        v[Matrix4.M02] = 0;\r\n        v[Matrix4.M12] = 0;\r\n        v[Matrix4.M22] = z_orth;\r\n        v[Matrix4.M32] = 0;\r\n        v[Matrix4.M03] = tx;\r\n        v[Matrix4.M13] = ty;\r\n        v[Matrix4.M23] = tz;\r\n        v[Matrix4.M33] = 1;\r\n        return this;\r\n    }\r\n    multiply(matrix) {\r\n        let t = this.temp;\r\n        let v = this.values;\r\n        let m = matrix.values;\r\n        t[Matrix4.M00] =\r\n            v[Matrix4.M00] * m[Matrix4.M00] +\r\n                v[Matrix4.M01] * m[Matrix4.M10] +\r\n                v[Matrix4.M02] * m[Matrix4.M20] +\r\n                v[Matrix4.M03] * m[Matrix4.M30];\r\n        t[Matrix4.M01] =\r\n            v[Matrix4.M00] * m[Matrix4.M01] +\r\n                v[Matrix4.M01] * m[Matrix4.M11] +\r\n                v[Matrix4.M02] * m[Matrix4.M21] +\r\n                v[Matrix4.M03] * m[Matrix4.M31];\r\n        t[Matrix4.M02] =\r\n            v[Matrix4.M00] * m[Matrix4.M02] +\r\n                v[Matrix4.M01] * m[Matrix4.M12] +\r\n                v[Matrix4.M02] * m[Matrix4.M22] +\r\n                v[Matrix4.M03] * m[Matrix4.M32];\r\n        t[Matrix4.M03] =\r\n            v[Matrix4.M00] * m[Matrix4.M03] +\r\n                v[Matrix4.M01] * m[Matrix4.M13] +\r\n                v[Matrix4.M02] * m[Matrix4.M23] +\r\n                v[Matrix4.M03] * m[Matrix4.M33];\r\n        t[Matrix4.M10] =\r\n            v[Matrix4.M10] * m[Matrix4.M00] +\r\n                v[Matrix4.M11] * m[Matrix4.M10] +\r\n                v[Matrix4.M12] * m[Matrix4.M20] +\r\n                v[Matrix4.M13] * m[Matrix4.M30];\r\n        t[Matrix4.M11] =\r\n            v[Matrix4.M10] * m[Matrix4.M01] +\r\n                v[Matrix4.M11] * m[Matrix4.M11] +\r\n                v[Matrix4.M12] * m[Matrix4.M21] +\r\n                v[Matrix4.M13] * m[Matrix4.M31];\r\n        t[Matrix4.M12] =\r\n            v[Matrix4.M10] * m[Matrix4.M02] +\r\n                v[Matrix4.M11] * m[Matrix4.M12] +\r\n                v[Matrix4.M12] * m[Matrix4.M22] +\r\n                v[Matrix4.M13] * m[Matrix4.M32];\r\n        t[Matrix4.M13] =\r\n            v[Matrix4.M10] * m[Matrix4.M03] +\r\n                v[Matrix4.M11] * m[Matrix4.M13] +\r\n                v[Matrix4.M12] * m[Matrix4.M23] +\r\n                v[Matrix4.M13] * m[Matrix4.M33];\r\n        t[Matrix4.M20] =\r\n            v[Matrix4.M20] * m[Matrix4.M00] +\r\n                v[Matrix4.M21] * m[Matrix4.M10] +\r\n                v[Matrix4.M22] * m[Matrix4.M20] +\r\n                v[Matrix4.M23] * m[Matrix4.M30];\r\n        t[Matrix4.M21] =\r\n            v[Matrix4.M20] * m[Matrix4.M01] +\r\n                v[Matrix4.M21] * m[Matrix4.M11] +\r\n                v[Matrix4.M22] * m[Matrix4.M21] +\r\n                v[Matrix4.M23] * m[Matrix4.M31];\r\n        t[Matrix4.M22] =\r\n            v[Matrix4.M20] * m[Matrix4.M02] +\r\n                v[Matrix4.M21] * m[Matrix4.M12] +\r\n                v[Matrix4.M22] * m[Matrix4.M22] +\r\n                v[Matrix4.M23] * m[Matrix4.M32];\r\n        t[Matrix4.M23] =\r\n            v[Matrix4.M20] * m[Matrix4.M03] +\r\n                v[Matrix4.M21] * m[Matrix4.M13] +\r\n                v[Matrix4.M22] * m[Matrix4.M23] +\r\n                v[Matrix4.M23] * m[Matrix4.M33];\r\n        t[Matrix4.M30] =\r\n            v[Matrix4.M30] * m[Matrix4.M00] +\r\n                v[Matrix4.M31] * m[Matrix4.M10] +\r\n                v[Matrix4.M32] * m[Matrix4.M20] +\r\n                v[Matrix4.M33] * m[Matrix4.M30];\r\n        t[Matrix4.M31] =\r\n            v[Matrix4.M30] * m[Matrix4.M01] +\r\n                v[Matrix4.M31] * m[Matrix4.M11] +\r\n                v[Matrix4.M32] * m[Matrix4.M21] +\r\n                v[Matrix4.M33] * m[Matrix4.M31];\r\n        t[Matrix4.M32] =\r\n            v[Matrix4.M30] * m[Matrix4.M02] +\r\n                v[Matrix4.M31] * m[Matrix4.M12] +\r\n                v[Matrix4.M32] * m[Matrix4.M22] +\r\n                v[Matrix4.M33] * m[Matrix4.M32];\r\n        t[Matrix4.M33] =\r\n            v[Matrix4.M30] * m[Matrix4.M03] +\r\n                v[Matrix4.M31] * m[Matrix4.M13] +\r\n                v[Matrix4.M32] * m[Matrix4.M23] +\r\n                v[Matrix4.M33] * m[Matrix4.M33];\r\n        return this.set(this.temp);\r\n    }\r\n    multiplyLeft(matrix) {\r\n        let t = this.temp;\r\n        let v = this.values;\r\n        let m = matrix.values;\r\n        t[Matrix4.M00] =\r\n            m[Matrix4.M00] * v[Matrix4.M00] +\r\n                m[Matrix4.M01] * v[Matrix4.M10] +\r\n                m[Matrix4.M02] * v[Matrix4.M20] +\r\n                m[Matrix4.M03] * v[Matrix4.M30];\r\n        t[Matrix4.M01] =\r\n            m[Matrix4.M00] * v[Matrix4.M01] +\r\n                m[Matrix4.M01] * v[Matrix4.M11] +\r\n                m[Matrix4.M02] * v[Matrix4.M21] +\r\n                m[Matrix4.M03] * v[Matrix4.M31];\r\n        t[Matrix4.M02] =\r\n            m[Matrix4.M00] * v[Matrix4.M02] +\r\n                m[Matrix4.M01] * v[Matrix4.M12] +\r\n                m[Matrix4.M02] * v[Matrix4.M22] +\r\n                m[Matrix4.M03] * v[Matrix4.M32];\r\n        t[Matrix4.M03] =\r\n            m[Matrix4.M00] * v[Matrix4.M03] +\r\n                m[Matrix4.M01] * v[Matrix4.M13] +\r\n                m[Matrix4.M02] * v[Matrix4.M23] +\r\n                m[Matrix4.M03] * v[Matrix4.M33];\r\n        t[Matrix4.M10] =\r\n            m[Matrix4.M10] * v[Matrix4.M00] +\r\n                m[Matrix4.M11] * v[Matrix4.M10] +\r\n                m[Matrix4.M12] * v[Matrix4.M20] +\r\n                m[Matrix4.M13] * v[Matrix4.M30];\r\n        t[Matrix4.M11] =\r\n            m[Matrix4.M10] * v[Matrix4.M01] +\r\n                m[Matrix4.M11] * v[Matrix4.M11] +\r\n                m[Matrix4.M12] * v[Matrix4.M21] +\r\n                m[Matrix4.M13] * v[Matrix4.M31];\r\n        t[Matrix4.M12] =\r\n            m[Matrix4.M10] * v[Matrix4.M02] +\r\n                m[Matrix4.M11] * v[Matrix4.M12] +\r\n                m[Matrix4.M12] * v[Matrix4.M22] +\r\n                m[Matrix4.M13] * v[Matrix4.M32];\r\n        t[Matrix4.M13] =\r\n            m[Matrix4.M10] * v[Matrix4.M03] +\r\n                m[Matrix4.M11] * v[Matrix4.M13] +\r\n                m[Matrix4.M12] * v[Matrix4.M23] +\r\n                m[Matrix4.M13] * v[Matrix4.M33];\r\n        t[Matrix4.M20] =\r\n            m[Matrix4.M20] * v[Matrix4.M00] +\r\n                m[Matrix4.M21] * v[Matrix4.M10] +\r\n                m[Matrix4.M22] * v[Matrix4.M20] +\r\n                m[Matrix4.M23] * v[Matrix4.M30];\r\n        t[Matrix4.M21] =\r\n            m[Matrix4.M20] * v[Matrix4.M01] +\r\n                m[Matrix4.M21] * v[Matrix4.M11] +\r\n                m[Matrix4.M22] * v[Matrix4.M21] +\r\n                m[Matrix4.M23] * v[Matrix4.M31];\r\n        t[Matrix4.M22] =\r\n            m[Matrix4.M20] * v[Matrix4.M02] +\r\n                m[Matrix4.M21] * v[Matrix4.M12] +\r\n                m[Matrix4.M22] * v[Matrix4.M22] +\r\n                m[Matrix4.M23] * v[Matrix4.M32];\r\n        t[Matrix4.M23] =\r\n            m[Matrix4.M20] * v[Matrix4.M03] +\r\n                m[Matrix4.M21] * v[Matrix4.M13] +\r\n                m[Matrix4.M22] * v[Matrix4.M23] +\r\n                m[Matrix4.M23] * v[Matrix4.M33];\r\n        t[Matrix4.M30] =\r\n            m[Matrix4.M30] * v[Matrix4.M00] +\r\n                m[Matrix4.M31] * v[Matrix4.M10] +\r\n                m[Matrix4.M32] * v[Matrix4.M20] +\r\n                m[Matrix4.M33] * v[Matrix4.M30];\r\n        t[Matrix4.M31] =\r\n            m[Matrix4.M30] * v[Matrix4.M01] +\r\n                m[Matrix4.M31] * v[Matrix4.M11] +\r\n                m[Matrix4.M32] * v[Matrix4.M21] +\r\n                m[Matrix4.M33] * v[Matrix4.M31];\r\n        t[Matrix4.M32] =\r\n            m[Matrix4.M30] * v[Matrix4.M02] +\r\n                m[Matrix4.M31] * v[Matrix4.M12] +\r\n                m[Matrix4.M32] * v[Matrix4.M22] +\r\n                m[Matrix4.M33] * v[Matrix4.M32];\r\n        t[Matrix4.M33] =\r\n            m[Matrix4.M30] * v[Matrix4.M03] +\r\n                m[Matrix4.M31] * v[Matrix4.M13] +\r\n                m[Matrix4.M32] * v[Matrix4.M23] +\r\n                m[Matrix4.M33] * v[Matrix4.M33];\r\n        return this.set(this.temp);\r\n    }\r\n    idt() {\r\n        const val = this.values;\r\n        val[Matrix4.M00] = 1;\r\n        val[Matrix4.M01] = 0;\r\n        val[Matrix4.M02] = 0;\r\n        val[Matrix4.M03] = 0;\r\n        val[Matrix4.M10] = 0;\r\n        val[Matrix4.M11] = 1;\r\n        val[Matrix4.M12] = 0;\r\n        val[Matrix4.M13] = 0;\r\n        val[Matrix4.M20] = 0;\r\n        val[Matrix4.M21] = 0;\r\n        val[Matrix4.M22] = 1;\r\n        val[Matrix4.M23] = 0;\r\n        val[Matrix4.M30] = 0;\r\n        val[Matrix4.M31] = 0;\r\n        val[Matrix4.M32] = 0;\r\n        val[Matrix4.M33] = 1;\r\n        return this;\r\n    }\r\n    lookAt(position, direction, up) {\r\n        Matrix4.initTemps();\r\n        let xAxis = Matrix4.xAxis, yAxis = Matrix4.yAxis, zAxis = Matrix4.zAxis;\r\n        zAxis.setFrom(direction).normalize();\r\n        xAxis.setFrom(direction).normalize();\r\n        xAxis.cross(up).normalize();\r\n        yAxis.setFrom(xAxis).cross(zAxis).normalize();\r\n        this.identity();\r\n        let val = this.values;\r\n        val[Matrix4.M00] = xAxis.x;\r\n        val[Matrix4.M01] = xAxis.y;\r\n        val[Matrix4.M02] = xAxis.z;\r\n        val[Matrix4.M10] = yAxis.x;\r\n        val[Matrix4.M11] = yAxis.y;\r\n        val[Matrix4.M12] = yAxis.z;\r\n        val[Matrix4.M20] = -zAxis.x;\r\n        val[Matrix4.M21] = -zAxis.y;\r\n        val[Matrix4.M22] = -zAxis.z;\r\n        Matrix4.tmpMatrix.identity();\r\n        Matrix4.tmpMatrix.values[Matrix4.M03] = -position.x;\r\n        Matrix4.tmpMatrix.values[Matrix4.M13] = -position.y;\r\n        Matrix4.tmpMatrix.values[Matrix4.M23] = -position.z;\r\n        this.multiply(Matrix4.tmpMatrix);\r\n        return this;\r\n    }\r\n    setToLookAt(position, target, up) {\r\n        if (Matrix4.tempVec === null)\r\n            Matrix4.tempVec = new Vector3_1.Vector3();\r\n        let vec = Matrix4.tempVec;\r\n        vec.setFrom(target).sub(position);\r\n        this.lookAt(position, Matrix4.tempVec, up);\r\n        return this;\r\n    }\r\n    rotate(rotation) {\r\n        const x = rotation.x, y = rotation.y, z = rotation.z, w = rotation.w;\r\n        const xx = x * x;\r\n        const xy = x * y;\r\n        const xz = x * z;\r\n        const xw = x * w;\r\n        const yy = y * y;\r\n        const yz = y * z;\r\n        const yw = y * w;\r\n        const zz = z * z;\r\n        const zw = z * w;\r\n        const r00 = 1 - 2 * (yy + zz);\r\n        const r01 = 2 * (xy - zw);\r\n        const r02 = 2 * (xz + yw);\r\n        const r10 = 2 * (xy + zw);\r\n        const r11 = 1 - 2 * (xx + zz);\r\n        const r12 = 2 * (yz - xw);\r\n        const r20 = 2 * (xz - yw);\r\n        const r21 = 2 * (yz + xw);\r\n        const r22 = 1 - 2 * (xx + yy);\r\n        const val = this.values;\r\n        const m00 = val[Matrix4.M00] * r00 + val[Matrix4.M01] * r10 + val[Matrix4.M02] * r20;\r\n        const m01 = val[Matrix4.M00] * r01 + val[Matrix4.M01] * r11 + val[Matrix4.M02] * r21;\r\n        const m02 = val[Matrix4.M00] * r02 + val[Matrix4.M01] * r12 + val[Matrix4.M02] * r22;\r\n        const m10 = val[Matrix4.M10] * r00 + val[Matrix4.M11] * r10 + val[Matrix4.M12] * r20;\r\n        const m11 = val[Matrix4.M10] * r01 + val[Matrix4.M11] * r11 + val[Matrix4.M12] * r21;\r\n        const m12 = val[Matrix4.M10] * r02 + val[Matrix4.M11] * r12 + val[Matrix4.M12] * r22;\r\n        const m20 = val[Matrix4.M20] * r00 + val[Matrix4.M21] * r10 + val[Matrix4.M22] * r20;\r\n        const m21 = val[Matrix4.M20] * r01 + val[Matrix4.M21] * r11 + val[Matrix4.M22] * r21;\r\n        const m22 = val[Matrix4.M20] * r02 + val[Matrix4.M21] * r12 + val[Matrix4.M22] * r22;\r\n        const m30 = val[Matrix4.M30] * r00 + val[Matrix4.M31] * r10 + val[Matrix4.M32] * r20;\r\n        const m31 = val[Matrix4.M30] * r01 + val[Matrix4.M31] * r11 + val[Matrix4.M32] * r21;\r\n        const m32 = val[Matrix4.M30] * r02 + val[Matrix4.M31] * r12 + val[Matrix4.M32] * r22;\r\n        val[Matrix4.M00] = m00;\r\n        val[Matrix4.M10] = m10;\r\n        val[Matrix4.M20] = m20;\r\n        val[Matrix4.M30] = m30;\r\n        val[Matrix4.M01] = m01;\r\n        val[Matrix4.M11] = m11;\r\n        val[Matrix4.M21] = m21;\r\n        val[Matrix4.M31] = m31;\r\n        val[Matrix4.M02] = m02;\r\n        val[Matrix4.M12] = m12;\r\n        val[Matrix4.M22] = m22;\r\n        val[Matrix4.M32] = m32;\r\n        return this;\r\n    }\r\n    scale(scaleX, scaleY, scaleZ) {\r\n        const val = this.values;\r\n        val[Matrix4.M00] *= scaleX;\r\n        val[Matrix4.M01] *= scaleY;\r\n        val[Matrix4.M02] *= scaleZ;\r\n        val[Matrix4.M10] *= scaleX;\r\n        val[Matrix4.M11] *= scaleY;\r\n        val[Matrix4.M12] *= scaleZ;\r\n        val[Matrix4.M20] *= scaleX;\r\n        val[Matrix4.M21] *= scaleY;\r\n        val[Matrix4.M22] *= scaleZ;\r\n        val[Matrix4.M30] *= scaleX;\r\n        val[Matrix4.M31] *= scaleY;\r\n        val[Matrix4.M32] *= scaleZ;\r\n        return this;\r\n    }\r\n    setToRotation(axis, degrees) {\r\n        if (degrees === 0) {\r\n            this.idt();\r\n            return this;\r\n        }\r\n        return this.setFromQuaternion(Matrix4.quat.setFromAxis(axis.x, axis.y, axis.z, degrees));\r\n    }\r\n    static initTemps() {\r\n        if (Matrix4.xAxis === null)\r\n            Matrix4.xAxis = new Vector3_1.Vector3();\r\n        if (Matrix4.yAxis === null)\r\n            Matrix4.yAxis = new Vector3_1.Vector3();\r\n        if (Matrix4.zAxis === null)\r\n            Matrix4.zAxis = new Vector3_1.Vector3();\r\n    }\r\n    static matrix4_proj(mat, vec) {\r\n        const inv_w = 1.0 / (vec[0] * mat[Matrix4.M30] + vec[1] * mat[Matrix4.M31] + vec[2] * mat[Matrix4.M32] + mat[Matrix4.M33]);\r\n        const x = (vec[0] * mat[Matrix4.M00] + vec[1] * mat[Matrix4.M01] + vec[2] * mat[Matrix4.M02] + mat[Matrix4.M03]) * inv_w;\r\n        const y = (vec[0] * mat[Matrix4.M10] + vec[1] * mat[Matrix4.M11] + vec[2] * mat[Matrix4.M12] + mat[Matrix4.M13]) * inv_w;\r\n        const z = (vec[0] * mat[Matrix4.M20] + vec[1] * mat[Matrix4.M21] + vec[2] * mat[Matrix4.M22] + mat[Matrix4.M23]) * inv_w;\r\n        vec[0] = x;\r\n        vec[1] = y;\r\n        vec[2] = z;\r\n    }\r\n    static prj(mat, vecs, offset, numVecs, stride) {\r\n        const vec = Matrix4.tmpArrayForVec;\r\n        for (let i = 0; i < numVecs; i++) {\r\n            const start = offset + i * stride;\r\n            let idx = 0;\r\n            vec[idx] = vecs[start + idx++];\r\n            vec[idx] = vecs[start + idx++];\r\n            vec[idx] = vecs[start + idx++];\r\n            idx = 0;\r\n            Matrix4.matrix4_proj(mat.values, vec);\r\n            vecs[i * stride + idx] = vec[idx++];\r\n            vecs[i * stride + idx] = vec[idx++];\r\n            vecs[i * stride + idx] = vec[idx++];\r\n        }\r\n    }\r\n}\r\nexports.Matrix4 = Matrix4;\r\nMatrix4.M00 = 0;\r\nMatrix4.M01 = 4;\r\nMatrix4.M02 = 8;\r\nMatrix4.M03 = 12;\r\nMatrix4.M10 = 1;\r\nMatrix4.M11 = 5;\r\nMatrix4.M12 = 9;\r\nMatrix4.M13 = 13;\r\nMatrix4.M20 = 2;\r\nMatrix4.M21 = 6;\r\nMatrix4.M22 = 10;\r\nMatrix4.M23 = 14;\r\nMatrix4.M30 = 3;\r\nMatrix4.M31 = 7;\r\nMatrix4.M32 = 11;\r\nMatrix4.M33 = 15;\r\nMatrix4.xAxis = null;\r\nMatrix4.yAxis = null;\r\nMatrix4.zAxis = null;\r\nMatrix4.tempVec = null;\r\nMatrix4.tmpMatrix = new Matrix4();\r\nMatrix4.quat = new Quaternion_1.Quaternion();\r\nMatrix4.tmpArrayForVec = [];\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Color2Attribute = exports.ColorAttribute = exports.TexCoordAttribute = exports.Position3Attribute = exports.Position2Attribute = exports.VertexAttribute = exports.VertexAttributeType = exports.Mesh = void 0;\r\nconst Shader_1 = require(\"./Shader\");\r\nclass Mesh {\r\n    constructor(context, attributes, maxVertices, maxIndices) {\r\n        this.attributes = attributes;\r\n        this.verticesLength = 0;\r\n        this.dirtyVertices = false;\r\n        this.indicesLength = 0;\r\n        this.dirtyIndices = false;\r\n        this.elementsPerVertex = 0;\r\n        this.context = context;\r\n        this.elementsPerVertex = 0;\r\n        for (let i = 0; i < attributes.length; i++) {\r\n            this.elementsPerVertex += attributes[i].numElements;\r\n        }\r\n        this.vertices = new Float32Array(maxVertices * this.elementsPerVertex);\r\n        this.indices = new Uint16Array(maxIndices);\r\n    }\r\n    getAttributes() {\r\n        return this.attributes;\r\n    }\r\n    maxVertices() {\r\n        return this.vertices.length / this.elementsPerVertex;\r\n    }\r\n    numVertices() {\r\n        return this.verticesLength / this.elementsPerVertex;\r\n    }\r\n    setVerticesLength(length) {\r\n        this.dirtyVertices = true;\r\n        this.verticesLength = length;\r\n    }\r\n    getVertices() {\r\n        return this.vertices;\r\n    }\r\n    maxIndices() {\r\n        return this.indices.length;\r\n    }\r\n    numIndices() {\r\n        return this.indicesLength;\r\n    }\r\n    setIndicesLength(length) {\r\n        this.dirtyIndices = true;\r\n        this.indicesLength = length;\r\n    }\r\n    getIndices() {\r\n        return this.indices;\r\n    }\r\n    getVertexSizeInFloats() {\r\n        let size = 0;\r\n        for (var i = 0; i < this.attributes.length; i++) {\r\n            let attribute = this.attributes[i];\r\n            size += attribute.numElements;\r\n        }\r\n        return size;\r\n    }\r\n    setVertices(vertices) {\r\n        this.dirtyVertices = true;\r\n        if (vertices.length > this.vertices.length)\r\n            throw Error(\"Mesh can't store more than \" + this.maxVertices() + ' vertices');\r\n        this.vertices.set(vertices, 0);\r\n        this.verticesLength = vertices.length;\r\n    }\r\n    setIndices(indices) {\r\n        this.dirtyIndices = true;\r\n        if (indices.length > this.indices.length)\r\n            throw Error(\"Mesh can't store more than \" + this.maxIndices() + ' indices');\r\n        this.indices.set(indices, 0);\r\n        this.indicesLength = indices.length;\r\n    }\r\n    draw(shader, primitiveType) {\r\n        this.drawWithOffset(shader, primitiveType, 0, this.indicesLength > 0 ? this.indicesLength : this.verticesLength / this.elementsPerVertex);\r\n    }\r\n    drawWithOffset(shader, primitiveType, offset, count) {\r\n        let gl = this.context;\r\n        if (this.dirtyVertices || this.dirtyIndices)\r\n            this.update();\r\n        this.bind(shader);\r\n        if (this.indicesLength > 0) {\r\n            gl.drawElements(primitiveType, count, gl.UNSIGNED_SHORT, offset * 2);\r\n        }\r\n        else {\r\n            gl.drawArrays(primitiveType, offset, count);\r\n        }\r\n        this.unbind(shader);\r\n    }\r\n    bind(shader) {\r\n        let gl = this.context;\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.verticesBuffer);\r\n        let offset = 0;\r\n        for (let i = 0; i < this.attributes.length; i++) {\r\n            let attrib = this.attributes[i];\r\n            let location = shader.getAttributeLocation(attrib.name);\r\n            gl.enableVertexAttribArray(location);\r\n            gl.vertexAttribPointer(location, attrib.numElements, gl.FLOAT, false, this.elementsPerVertex * 4, offset * 4);\r\n            offset += attrib.numElements;\r\n        }\r\n        if (this.indicesLength > 0)\r\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\r\n    }\r\n    unbind(shader) {\r\n        let gl = this.context;\r\n        for (let i = 0; i < this.attributes.length; i++) {\r\n            let attrib = this.attributes[i];\r\n            let location = shader.getAttributeLocation(attrib.name);\r\n            gl.disableVertexAttribArray(location);\r\n        }\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n        if (this.indicesLength > 0)\r\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\r\n    }\r\n    update() {\r\n        let gl = this.context;\r\n        if (this.dirtyVertices) {\r\n            if (!this.verticesBuffer) {\r\n                this.verticesBuffer = gl.createBuffer();\r\n            }\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.verticesBuffer);\r\n            gl.bufferData(gl.ARRAY_BUFFER, this.vertices.subarray(0, this.verticesLength), gl.DYNAMIC_DRAW);\r\n            this.dirtyVertices = false;\r\n        }\r\n        if (this.dirtyIndices) {\r\n            if (!this.indicesBuffer) {\r\n                this.indicesBuffer = gl.createBuffer();\r\n            }\r\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\r\n            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indices.subarray(0, this.indicesLength), gl.DYNAMIC_DRAW);\r\n            this.dirtyIndices = false;\r\n        }\r\n    }\r\n    restore() {\r\n        this.verticesBuffer = null;\r\n        this.indicesBuffer = null;\r\n        this.update();\r\n    }\r\n    dispose() {\r\n        let gl = this.context;\r\n        gl.deleteBuffer(this.verticesBuffer);\r\n        gl.deleteBuffer(this.indicesBuffer);\r\n    }\r\n}\r\nexports.Mesh = Mesh;\r\nvar VertexAttributeType;\r\n(function (VertexAttributeType) {\r\n    VertexAttributeType[VertexAttributeType[\"Float\"] = 0] = \"Float\";\r\n})(VertexAttributeType = exports.VertexAttributeType || (exports.VertexAttributeType = {}));\r\nclass VertexAttribute {\r\n    constructor(name, type, numElements) {\r\n        this.name = name;\r\n        this.type = type;\r\n        this.numElements = numElements;\r\n    }\r\n}\r\nexports.VertexAttribute = VertexAttribute;\r\nclass Position2Attribute extends VertexAttribute {\r\n    constructor() {\r\n        super(Shader_1.Shader.POSITION, VertexAttributeType.Float, 2);\r\n    }\r\n}\r\nexports.Position2Attribute = Position2Attribute;\r\nclass Position3Attribute extends VertexAttribute {\r\n    constructor() {\r\n        super(Shader_1.Shader.POSITION, VertexAttributeType.Float, 3);\r\n    }\r\n}\r\nexports.Position3Attribute = Position3Attribute;\r\nclass TexCoordAttribute extends VertexAttribute {\r\n    constructor(unit = 0) {\r\n        super(Shader_1.Shader.TEXCOORDS + (unit === 0 ? '' : unit), VertexAttributeType.Float, 2);\r\n    }\r\n}\r\nexports.TexCoordAttribute = TexCoordAttribute;\r\nclass ColorAttribute extends VertexAttribute {\r\n    constructor() {\r\n        super(Shader_1.Shader.COLOR, VertexAttributeType.Float, 4);\r\n    }\r\n}\r\nexports.ColorAttribute = ColorAttribute;\r\nclass Color2Attribute extends VertexAttribute {\r\n    constructor() {\r\n        super(Shader_1.Shader.COLOR2, VertexAttributeType.Float, 4);\r\n    }\r\n}\r\nexports.Color2Attribute = Color2Attribute;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberUtil = void 0;\r\nconst int8 = new Int8Array(4);\r\nconst int32 = new Int32Array(int8.buffer, 0, 1);\r\nconst float32 = new Float32Array(int8.buffer, 0, 1);\r\nclass NumberUtil {\r\n    static intBitsToFloat(i) {\r\n        int32[0] = i;\r\n        return float32[0];\r\n    }\r\n    static floatToIntBits(f) {\r\n        float32[0] = f;\r\n        return int32[0];\r\n    }\r\n    static intToFloatColor(value) {\r\n        return NumberUtil.intBitsToFloat(value & 0xfeffffff);\r\n    }\r\n    static colorToFloat(r, g, b, a) {\r\n        const bits = (r << 24) | (g << 16) | (b << 8) | a;\r\n        return NumberUtil.intToFloatColor(bits);\r\n    }\r\n    static isPowerOfTwo(n) {\r\n        return (n & (n - 1)) === 0;\r\n    }\r\n    static nextPowerOfTwo(n) {\r\n        n--;\r\n        n |= n >> 1;\r\n        n |= n >> 2;\r\n        n |= n >> 4;\r\n        n |= n >> 8;\r\n        n |= n >> 16;\r\n        return n + 1;\r\n    }\r\n}\r\nexports.NumberUtil = NumberUtil;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PolygonBatch = void 0;\r\nconst Utils_1 = require(\"./Utils\");\r\nconst Mesh_1 = require(\"./Mesh\");\r\nconst Shader_1 = require(\"./Shader\");\r\n// prettier-ignore\r\nconst quad = [\r\n    0, 0, 1, 1, 1, 1, 0, 0,\r\n    0, 0, 1, 1, 1, 1, 0, 0,\r\n    0, 0, 1, 1, 1, 1, 0, 0,\r\n    0, 0, 1, 1, 1, 1, 0, 0,\r\n];\r\nconst WHITE = new Utils_1.Color(1, 1, 1, 1);\r\nclass PolygonBatch {\r\n    constructor(context, twoColorTint = true, maxVertices = 10920) {\r\n        this.isDrawing = false;\r\n        this.shader = null;\r\n        this.lastTexture = null;\r\n        this.verticesLength = 0;\r\n        this.indicesLength = 0;\r\n        this.projectionValues = new Float32Array(16);\r\n        this.color = WHITE;\r\n        this.twoColorTint = true;\r\n        this.yDown = false;\r\n        if (maxVertices > 10920)\r\n            throw new Error(\"Can't have more than 10920 triangles per batch: \" + maxVertices);\r\n        this.context = context;\r\n        let attributes = twoColorTint\r\n            ? [new Mesh_1.Position2Attribute(), new Mesh_1.ColorAttribute(), new Mesh_1.TexCoordAttribute(), new Mesh_1.Color2Attribute()]\r\n            : [new Mesh_1.Position2Attribute(), new Mesh_1.ColorAttribute(), new Mesh_1.TexCoordAttribute()];\r\n        this.mesh = new Mesh_1.Mesh(context, attributes, maxVertices, maxVertices * 3);\r\n        this.shader = Shader_1.Shader.newTwoColoredTextured(context);\r\n        let gl = this.context;\r\n        this.srcColorBlend = gl.SRC_ALPHA;\r\n        this.srcAlphaBlend = gl.ONE;\r\n        this.dstBlend = gl.ONE_MINUS_SRC_ALPHA;\r\n        this.twoColorTint = twoColorTint;\r\n    }\r\n    setColor(color) {\r\n        this.color = color;\r\n    }\r\n    setShader(shader) {\r\n        this.shader.dispose();\r\n        this.shader = shader;\r\n    }\r\n    setProjection(projectionValues) {\r\n        this.projectionValues = projectionValues;\r\n    }\r\n    begin() {\r\n        if (this.isDrawing)\r\n            throw new Error('PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()');\r\n        this.drawCalls = 0;\r\n        const shader = this.shader;\r\n        this.lastTexture = null;\r\n        this.isDrawing = true;\r\n        shader.bind();\r\n        shader.setUniform4x4f(Shader_1.Shader.MVP_MATRIX, this.projectionValues);\r\n        shader.setUniformi('u_texture', 0);\r\n        let gl = this.context;\r\n        gl.enable(gl.BLEND);\r\n        gl.blendFuncSeparate(this.srcColorBlend, this.dstBlend, this.srcAlphaBlend, this.dstBlend);\r\n    }\r\n    setBlendMode(srcColorBlend, srcAlphaBlend, dstBlend) {\r\n        if (this.srcColorBlend === srcColorBlend && this.srcAlphaBlend === srcAlphaBlend && this.dstBlend === dstBlend)\r\n            return;\r\n        this.srcColorBlend = srcColorBlend;\r\n        this.srcAlphaBlend = srcAlphaBlend;\r\n        this.dstBlend = dstBlend;\r\n        if (this.isDrawing) {\r\n            this.flush();\r\n            let gl = this.context;\r\n            gl.blendFuncSeparate(srcColorBlend, dstBlend, srcAlphaBlend, dstBlend);\r\n        }\r\n    }\r\n    drawVerticesWithOffset(texture, vertices, offset, count) {\r\n        const newVertices = [];\r\n        for (let i = 0; i < count; i++) {\r\n            newVertices[i] = vertices[i + offset];\r\n        }\r\n        this.drawVertices(texture, newVertices, PolygonBatch.QUAD_TRIANGLES);\r\n    }\r\n    drawVertices(texture, vertices, indices = PolygonBatch.QUAD_TRIANGLES) {\r\n        if (texture !== this.lastTexture) {\r\n            this.flush();\r\n            this.lastTexture = texture;\r\n        }\r\n        else if (this.verticesLength + vertices.length > this.mesh.getVertices().length ||\r\n            this.indicesLength + indices.length > this.mesh.getIndices().length) {\r\n            this.flush();\r\n        }\r\n        let indexStart = this.mesh.numVertices();\r\n        this.mesh.getVertices().set(vertices, this.verticesLength);\r\n        this.verticesLength += vertices.length;\r\n        this.mesh.setVerticesLength(this.verticesLength);\r\n        let indicesArray = this.mesh.getIndices();\r\n        for (let i = this.indicesLength, j = 0; j < indices.length; i++, j++)\r\n            indicesArray[i] = indices[j] + indexStart;\r\n        this.indicesLength += indices.length;\r\n        this.mesh.setIndicesLength(this.indicesLength);\r\n    }\r\n    drawTransformed(texture, width, height, transform, ou1 = 0, ov1 = 1, ou2 = 1, ov2 = 0, rotate = false) {\r\n        if (this.yDown) {\r\n            const tmpV1 = ov1;\r\n            ov1 = ov2;\r\n            ov2 = tmpV1;\r\n        }\r\n        let u1 = ou1;\r\n        let v1 = ov1;\r\n        let u2 = ou2;\r\n        let v2 = ov2;\r\n        let u3 = u2;\r\n        let v3 = v1;\r\n        let u4 = u1;\r\n        let v4 = v2;\r\n        if (rotate) {\r\n            if (this.yDown) {\r\n                u1 = ou1;\r\n                v1 = ov2;\r\n                u2 = ou2;\r\n                v2 = ov1;\r\n                u3 = ou1;\r\n                v3 = ov1;\r\n                u4 = ou2;\r\n                v4 = ov2;\r\n            }\r\n            else {\r\n                u1 = ou2;\r\n                v1 = ov1;\r\n                u2 = ou1;\r\n                v2 = ov2;\r\n                u3 = ou2;\r\n                v3 = ov2;\r\n                u4 = ou1;\r\n                v4 = ov1;\r\n            }\r\n        }\r\n        const x1 = transform.m02;\r\n        const y1 = transform.m12;\r\n        const x2 = transform.m01 * height + transform.m02;\r\n        const y2 = transform.m11 * height + transform.m12;\r\n        const x3 = transform.m00 * width + transform.m01 * height + transform.m02;\r\n        const y3 = transform.m10 * width + transform.m11 * height + transform.m12;\r\n        const x4 = transform.m00 * width + transform.m02;\r\n        const y4 = transform.m10 * width + transform.m12;\r\n        const color = this.color;\r\n        let i = 0;\r\n        quad[i++] = x1;\r\n        quad[i++] = y1;\r\n        quad[i++] = color.r;\r\n        quad[i++] = color.g;\r\n        quad[i++] = color.b;\r\n        quad[i++] = color.a;\r\n        quad[i++] = u1;\r\n        quad[i++] = v1;\r\n        if (this.twoColorTint) {\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n        }\r\n        quad[i++] = x2;\r\n        quad[i++] = y2;\r\n        quad[i++] = color.r;\r\n        quad[i++] = color.g;\r\n        quad[i++] = color.b;\r\n        quad[i++] = color.a;\r\n        quad[i++] = u4;\r\n        quad[i++] = v4;\r\n        if (this.twoColorTint) {\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n        }\r\n        quad[i++] = x3;\r\n        quad[i++] = y3;\r\n        quad[i++] = color.r;\r\n        quad[i++] = color.g;\r\n        quad[i++] = color.b;\r\n        quad[i++] = color.a;\r\n        quad[i++] = u2;\r\n        quad[i++] = v2;\r\n        if (this.twoColorTint) {\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n        }\r\n        quad[i++] = x4;\r\n        quad[i++] = y4;\r\n        quad[i++] = color.r;\r\n        quad[i++] = color.g;\r\n        quad[i++] = color.b;\r\n        quad[i++] = color.a;\r\n        quad[i++] = u3;\r\n        quad[i++] = v3;\r\n        if (this.twoColorTint) {\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i] = 0;\r\n        }\r\n        this.drawVertices(texture, quad, PolygonBatch.QUAD_TRIANGLES);\r\n    }\r\n    flush() {\r\n        if (this.verticesLength === 0)\r\n            return;\r\n        this.lastTexture.bind();\r\n        this.mesh.draw(this.shader, this.context.TRIANGLES);\r\n        this.verticesLength = 0;\r\n        this.indicesLength = 0;\r\n        this.mesh.setVerticesLength(0);\r\n        this.mesh.setIndicesLength(0);\r\n        this.drawCalls++;\r\n    }\r\n    end() {\r\n        if (!this.isDrawing)\r\n            throw new Error('PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()');\r\n        if (this.verticesLength > 0 || this.indicesLength > 0)\r\n            this.flush();\r\n        this.shader.unbind();\r\n        this.lastTexture = null;\r\n        this.isDrawing = false;\r\n        PolygonBatch.totalDrawCalls += this.drawCalls;\r\n        let gl = this.context;\r\n        gl.disable(gl.BLEND);\r\n    }\r\n    static resetTotalDrawCalls() {\r\n        PolygonBatch.totalDrawCalls = 0;\r\n    }\r\n    getDrawCalls() {\r\n        return this.drawCalls;\r\n    }\r\n    dispose() {\r\n        this.mesh.dispose();\r\n    }\r\n    setYDown(yDown) {\r\n        this.yDown = yDown;\r\n    }\r\n    draw(texture, x, y, width, height, originX = 0, originY = 0, rotation = 0, scaleX = 1, scaleY = 1, ou1 = 0, ov1 = 1, ou2 = 1, ov2 = 0, rotate = false) {\r\n        const color = this.color;\r\n        if (this.yDown) {\r\n            const tmpV1 = ov1;\r\n            ov1 = ov2;\r\n            ov2 = tmpV1;\r\n        }\r\n        width = width === 0 ? width : width || texture.width;\r\n        height = height === 0 ? height : height || texture.height;\r\n        x = x || 0;\r\n        y = y || 0;\r\n        let x1 = -originX;\r\n        let x2 = width - originX;\r\n        let x3 = width - originX;\r\n        let x4 = -originX;\r\n        let y1 = -originY;\r\n        let y2 = -originY;\r\n        let y3 = height - originY;\r\n        let y4 = height - originY;\r\n        if (scaleX !== 1) {\r\n            x1 = x1 * scaleX;\r\n            x2 = x2 * scaleX;\r\n            x3 = x3 * scaleX;\r\n            x4 = x4 * scaleX;\r\n        }\r\n        if (scaleY !== 1) {\r\n            y1 = y1 * scaleY;\r\n            y2 = y2 * scaleY;\r\n            y3 = y3 * scaleY;\r\n            y4 = y4 * scaleY;\r\n        }\r\n        if (rotation !== 0) {\r\n            var cos = Math.cos(rotation);\r\n            var sin = Math.sin(rotation);\r\n            var rotatedX1 = cos * x1 - sin * y1;\r\n            var rotatedY1 = sin * x1 + cos * y1;\r\n            var rotatedX2 = cos * x2 - sin * y2;\r\n            var rotatedY2 = sin * x2 + cos * y2;\r\n            var rotatedX3 = cos * x3 - sin * y3;\r\n            var rotatedY3 = sin * x3 + cos * y3;\r\n            var rotatedX4 = cos * x4 - sin * y4;\r\n            var rotatedY4 = sin * x4 + cos * y4;\r\n            x1 = rotatedX1;\r\n            x2 = rotatedX2;\r\n            x3 = rotatedX3;\r\n            x4 = rotatedX4;\r\n            y1 = rotatedY1;\r\n            y2 = rotatedY2;\r\n            y3 = rotatedY3;\r\n            y4 = rotatedY4;\r\n        }\r\n        x1 += x + originX;\r\n        x2 += x + originX;\r\n        x3 += x + originX;\r\n        x4 += x + originX;\r\n        y1 += y + originY;\r\n        y2 += y + originY;\r\n        y3 += y + originY;\r\n        y4 += y + originY;\r\n        let u1 = ou1;\r\n        let v1 = ov1;\r\n        let u2 = ou2;\r\n        let v2 = ov2;\r\n        let u3 = u2;\r\n        let v3 = v1;\r\n        let u4 = u1;\r\n        let v4 = v2;\r\n        if (rotate) {\r\n            if (this.yDown) {\r\n                u1 = ou1;\r\n                v1 = ov2;\r\n                u2 = ou2;\r\n                v2 = ov1;\r\n                u3 = ou1;\r\n                v3 = ov1;\r\n                u4 = ou2;\r\n                v4 = ov2;\r\n            }\r\n            else {\r\n                u1 = ou2;\r\n                v1 = ov1;\r\n                u2 = ou1;\r\n                v2 = ov2;\r\n                u3 = ou2;\r\n                v3 = ov2;\r\n                u4 = ou1;\r\n                v4 = ov1;\r\n            }\r\n        }\r\n        let i = 0;\r\n        quad[i++] = x1;\r\n        quad[i++] = y1;\r\n        quad[i++] = color.r;\r\n        quad[i++] = color.g;\r\n        quad[i++] = color.b;\r\n        quad[i++] = color.a;\r\n        quad[i++] = u1;\r\n        quad[i++] = v1;\r\n        if (this.twoColorTint) {\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n        }\r\n        quad[i++] = x2;\r\n        quad[i++] = y2;\r\n        quad[i++] = color.r;\r\n        quad[i++] = color.g;\r\n        quad[i++] = color.b;\r\n        quad[i++] = color.a;\r\n        quad[i++] = u3;\r\n        quad[i++] = v3;\r\n        if (this.twoColorTint) {\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n        }\r\n        quad[i++] = x3;\r\n        quad[i++] = y3;\r\n        quad[i++] = color.r;\r\n        quad[i++] = color.g;\r\n        quad[i++] = color.b;\r\n        quad[i++] = color.a;\r\n        quad[i++] = u2;\r\n        quad[i++] = v2;\r\n        if (this.twoColorTint) {\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n        }\r\n        quad[i++] = x4;\r\n        quad[i++] = y4;\r\n        quad[i++] = color.r;\r\n        quad[i++] = color.g;\r\n        quad[i++] = color.b;\r\n        quad[i++] = color.a;\r\n        quad[i++] = u4;\r\n        quad[i++] = v4;\r\n        if (this.twoColorTint) {\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i] = 0;\r\n        }\r\n        this.drawVertices(texture, quad, PolygonBatch.QUAD_TRIANGLES);\r\n    }\r\n}\r\nexports.PolygonBatch = PolygonBatch;\r\nPolygonBatch.QUAD_TRIANGLES = [0, 1, 2, 2, 3, 0];\r\nPolygonBatch.totalDrawCalls = 0;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Quaternion = void 0;\r\nconst Matrix4_1 = require(\"./Matrix4\");\r\nconst Utils_1 = require(\"./Utils\");\r\nconst Vector3_1 = require(\"./Vector3\");\r\nconst Matrix3_1 = require(\"./Matrix3\");\r\nclass Quaternion {\r\n    constructor(x = 0, y = 0, z = 0, w = 1) {\r\n        this.set(x, y, z, w);\r\n    }\r\n    set(x, y, z, w) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n        return this;\r\n    }\r\n    setFrom(quaternion) {\r\n        return this.set(quaternion.x, quaternion.y, quaternion.z, quaternion.w);\r\n    }\r\n    static len(x, y, z, w) {\r\n        return Math.sqrt(x * x + y * y + z * z + w * w);\r\n    }\r\n    len() {\r\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\r\n    }\r\n    toString() {\r\n        return '[' + this.x + '|' + this.y + '|' + this.z + '|' + this.w + ']';\r\n    }\r\n    setEulerAngles(yaw, pitch, roll) {\r\n        return this.setEulerAnglesRad(yaw * Utils_1.MathUtils.degreesToRadians, pitch * Utils_1.MathUtils.degreesToRadians, roll * Utils_1.MathUtils.degreesToRadians);\r\n    }\r\n    setEulerAnglesRad(yaw, pitch, roll) {\r\n        const hr = roll * 0.5;\r\n        const shr = Math.sin(hr);\r\n        const chr = Math.cos(hr);\r\n        const hp = pitch * 0.5;\r\n        const shp = Math.sin(hp);\r\n        const chp = Math.cos(hp);\r\n        const hy = yaw * 0.5;\r\n        const shy = Math.sin(hy);\r\n        const chy = Math.cos(hy);\r\n        const chy_shp = chy * shp;\r\n        const shy_chp = shy * chp;\r\n        const chy_chp = chy * chp;\r\n        const shy_shp = shy * shp;\r\n        this.x = chy_shp * chr + shy_chp * shr; // cos(yaw/2) * sin(pitch/2) * cos(roll/2) + sin(yaw/2) * cos(pitch/2) * sin(roll/2)\r\n        this.y = shy_chp * chr - chy_shp * shr; // sin(yaw/2) * cos(pitch/2) * cos(roll/2) - cos(yaw/2) * sin(pitch/2) * sin(roll/2)\r\n        this.z = chy_chp * shr - shy_shp * chr; // cos(yaw/2) * cos(pitch/2) * sin(roll/2) - sin(yaw/2) * sin(pitch/2) * cos(roll/2)\r\n        this.w = chy_chp * chr + shy_shp * shr; // cos(yaw/2) * cos(pitch/2) * cos(roll/2) + sin(yaw/2) * sin(pitch/2) * sin(roll/2)\r\n        return this;\r\n    }\r\n    getGimbalPole() {\r\n        const t = this.y * this.x + this.z * this.w;\r\n        return t > 0.499 ? 1 : t < -0.499 ? -1 : 0;\r\n    }\r\n    getRollRad() {\r\n        const pole = this.getGimbalPole();\r\n        return pole === 0\r\n            ? Math.atan2(2 * (this.w * this.z + this.y * this.x), 1 - 2 * (this.x * this.x + this.z * this.z))\r\n            : pole * 2 * Math.atan2(this.y, this.w);\r\n    }\r\n    getRoll() {\r\n        return this.getRollRad() * Utils_1.MathUtils.radiansToDegrees;\r\n    }\r\n    getPitchRad() {\r\n        const pole = this.getGimbalPole();\r\n        return pole === 0\r\n            ? Math.asin(Utils_1.MathUtils.clamp(2 * (this.w * this.x - this.z * this.y), -1, 1))\r\n            : pole * Utils_1.MathUtils.PI * 0.5;\r\n    }\r\n    getPitch() {\r\n        return this.getPitchRad() * Utils_1.MathUtils.radiansToDegrees;\r\n    }\r\n    getYawRad() {\r\n        return this.getGimbalPole() === 0\r\n            ? Math.atan2(2 * (this.y * this.w + this.x * this.z), 1 - 2 * (this.y * this.y + this.x * this.x))\r\n            : 0;\r\n    }\r\n    getYaw() {\r\n        return this.getYawRad() * Utils_1.MathUtils.radiansToDegrees;\r\n    }\r\n    static len2(x, y, z, w) {\r\n        return x * x + y * y + z * z + w * w;\r\n    }\r\n    len2() {\r\n        return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n    }\r\n    nor() {\r\n        let len = this.len2();\r\n        if (len !== 0 && !Utils_1.MathUtils.isEqual(len, 1)) {\r\n            len = Math.sqrt(len);\r\n            this.w /= len;\r\n            this.x /= len;\r\n            this.y /= len;\r\n            this.z /= len;\r\n        }\r\n        return this;\r\n    }\r\n    conjugate() {\r\n        this.x = -this.x;\r\n        this.y = -this.y;\r\n        this.z = -this.z;\r\n        return this;\r\n    }\r\n    transform(v) {\r\n        Quaternion.tmp2.set(this.x, this.y, this.z, this.w);\r\n        Quaternion.tmp2.conjugate();\r\n        const quaternion = Quaternion.tmp1.set(v.x, v.y, v.z, 0);\r\n        Quaternion.tmp2\r\n            .mulLeft(quaternion.x, quaternion.y, quaternion.z, quaternion.w)\r\n            .mulLeft(this.x, this.y, this.z, this.w);\r\n        v.x = Quaternion.tmp2.x;\r\n        v.y = Quaternion.tmp2.y;\r\n        v.z = Quaternion.tmp2.z;\r\n        return v;\r\n    }\r\n    mul(x, y, z, w) {\r\n        const newX = this.w * x + this.x * w + this.y * z - this.z * y;\r\n        const newY = this.w * y + this.y * w + this.z * x - this.x * z;\r\n        const newZ = this.w * z + this.z * w + this.x * y - this.y * x;\r\n        const newW = this.w * w - this.x * x - this.y * y - this.z * z;\r\n        this.x = newX;\r\n        this.y = newY;\r\n        this.z = newZ;\r\n        this.w = newW;\r\n        return this;\r\n    }\r\n    mulLeft(x, y, z, w) {\r\n        const newX = w * this.x + x * this.w + y * this.z - z * this.y;\r\n        const newY = w * this.y + y * this.w + z * this.x - x * this.z;\r\n        const newZ = w * this.z + z * this.w + x * this.y - y * this.x;\r\n        const newW = w * this.w - x * this.x - y * this.y - z * this.z;\r\n        this.x = newX;\r\n        this.y = newY;\r\n        this.z = newZ;\r\n        this.w = newW;\r\n        return this;\r\n    }\r\n    add(qx, qy, qz, qw) {\r\n        this.x += qx;\r\n        this.y += qy;\r\n        this.z += qz;\r\n        this.w += qw;\r\n        return this;\r\n    }\r\n    toMatrix(matrix) {\r\n        const xx = this.x * this.x;\r\n        const xy = this.x * this.y;\r\n        const xz = this.x * this.z;\r\n        const xw = this.x * this.w;\r\n        const yy = this.y * this.y;\r\n        const yz = this.y * this.z;\r\n        const yw = this.y * this.w;\r\n        const zz = this.z * this.z;\r\n        const zw = this.z * this.w;\r\n        matrix[Matrix4_1.Matrix4.M00] = 1 - 2 * (yy + zz);\r\n        matrix[Matrix4_1.Matrix4.M01] = 2 * (xy - zw);\r\n        matrix[Matrix4_1.Matrix4.M02] = 2 * (xz + yw);\r\n        matrix[Matrix4_1.Matrix4.M03] = 0;\r\n        matrix[Matrix4_1.Matrix4.M10] = 2 * (xy + zw);\r\n        matrix[Matrix4_1.Matrix4.M11] = 1 - 2 * (xx + zz);\r\n        matrix[Matrix4_1.Matrix4.M12] = 2 * (yz - xw);\r\n        matrix[Matrix4_1.Matrix4.M13] = 0;\r\n        matrix[Matrix4_1.Matrix4.M20] = 2 * (xz - yw);\r\n        matrix[Matrix4_1.Matrix4.M21] = 2 * (yz + xw);\r\n        matrix[Matrix4_1.Matrix4.M22] = 1 - 2 * (xx + yy);\r\n        matrix[Matrix4_1.Matrix4.M23] = 0;\r\n        matrix[Matrix4_1.Matrix4.M30] = 0;\r\n        matrix[Matrix4_1.Matrix4.M31] = 0;\r\n        matrix[Matrix4_1.Matrix4.M32] = 0;\r\n        matrix[Matrix4_1.Matrix4.M33] = 1;\r\n    }\r\n    idt() {\r\n        return this.set(0, 0, 0, 1);\r\n    }\r\n    isIdentity() {\r\n        return (Utils_1.MathUtils.isZero(this.x) && Utils_1.MathUtils.isZero(this.y) && Utils_1.MathUtils.isZero(this.z) && Utils_1.MathUtils.isEqual(this.w, 1));\r\n    }\r\n    setFromAxis(x, y, z, degrees) {\r\n        return this.setFromAxisRad(x, y, z, degrees * Utils_1.MathUtils.degreesToRadians);\r\n    }\r\n    setFromAxisRad(x, y, z, radians) {\r\n        let d = new Vector3_1.Vector3(x, y, z).length();\r\n        if (d === 0)\r\n            return this.idt();\r\n        d = 1 / d;\r\n        const l_ang = radians < 0 ? Utils_1.MathUtils.PI2 - (-radians % Utils_1.MathUtils.PI2) : radians % Utils_1.MathUtils.PI2;\r\n        const l_sin = Math.sin(l_ang / 2);\r\n        const l_cos = Math.cos(l_ang / 2);\r\n        return this.set(d * x * l_sin, d * y * l_sin, d * z * l_sin, l_cos).nor();\r\n    }\r\n    setFromMatrix4(matrix, normalizeAxes = false) {\r\n        return this.setFromAxes(matrix.values[Matrix4_1.Matrix4.M00], matrix.values[Matrix4_1.Matrix4.M01], matrix.values[Matrix4_1.Matrix4.M02], matrix.values[Matrix4_1.Matrix4.M10], matrix.values[Matrix4_1.Matrix4.M11], matrix.values[Matrix4_1.Matrix4.M12], matrix.values[Matrix4_1.Matrix4.M20], matrix.values[Matrix4_1.Matrix4.M21], matrix.values[Matrix4_1.Matrix4.M22], normalizeAxes);\r\n    }\r\n    setFromMatrix3(matrix, normalizeAxes) {\r\n        return this.setFromAxes(matrix.val[Matrix3_1.Matrix3.M00], matrix.val[Matrix3_1.Matrix3.M01], matrix.val[Matrix3_1.Matrix3.M02], matrix.val[Matrix3_1.Matrix3.M10], matrix.val[Matrix3_1.Matrix3.M11], matrix.val[Matrix3_1.Matrix3.M12], matrix.val[Matrix3_1.Matrix3.M20], matrix.val[Matrix3_1.Matrix3.M21], matrix.val[Matrix3_1.Matrix3.M22], normalizeAxes);\r\n    }\r\n    setFromAxes(xx, xy, xz, yx, yy, yz, zx, zy, zz, normalizeAxes = false) {\r\n        if (normalizeAxes) {\r\n            const lx = 1 / new Vector3_1.Vector3(xx, xy, xz).length();\r\n            const ly = 1 / new Vector3_1.Vector3(yx, yy, yz).length();\r\n            const lz = 1 / new Vector3_1.Vector3(zx, zy, zz).length();\r\n            xx *= lx;\r\n            xy *= lx;\r\n            xz *= lx;\r\n            yx *= ly;\r\n            yy *= ly;\r\n            yz *= ly;\r\n            zx *= lz;\r\n            zy *= lz;\r\n            zz *= lz;\r\n        }\r\n        const t = xx + yy + zz;\r\n        if (t >= 0) {\r\n            let s = Math.sqrt(t + 1);\r\n            this.w = 0.5 * s;\r\n            s = 0.5 / s;\r\n            this.x = (zy - yz) * s;\r\n            this.y = (xz - zx) * s;\r\n            this.z = (yx - xy) * s;\r\n        }\r\n        else if (xx > yy && xx > zz) {\r\n            let s = Math.sqrt(1.0 + xx - yy - zz); // |s|>=1\r\n            this.x = s * 0.5; // |x| >= .5\r\n            s = 0.5 / s;\r\n            this.y = (yx + xy) * s;\r\n            this.z = (xz + zx) * s;\r\n            this.w = (zy - yz) * s;\r\n        }\r\n        else if (yy > zz) {\r\n            let s = Math.sqrt(1.0 + yy - xx - zz); // |s|>=1\r\n            this.y = s * 0.5; // |y| >= .5\r\n            s = 0.5 / s;\r\n            this.x = (yx + xy) * s;\r\n            this.z = (zy + yz) * s;\r\n            this.w = (xz - zx) * s;\r\n        }\r\n        else {\r\n            let s = Math.sqrt(1.0 + zz - xx - yy); // |s|>=1\r\n            this.z = s * 0.5; // |z| >= .5\r\n            s = 0.5 / s;\r\n            this.x = (xz + zx) * s;\r\n            this.y = (zy + yz) * s;\r\n            this.w = (yx - xy) * s;\r\n        }\r\n        return this;\r\n    }\r\n    setFromCross(v1, v2) {\r\n        const dot = Utils_1.MathUtils.clamp(v1.dot(v2), -1, 1);\r\n        const angle = Math.acos(dot);\r\n        return this.setFromAxisRad(v1.y * v2.z - v1.z * v2.y, v1.z * v2.x - v1.x * v2.z, v1.x * v2.y - v1.y * v2.x, angle);\r\n    }\r\n    slerp(end, alpha) {\r\n        const d = this.x * end.x + this.y * end.y + this.z * end.z + this.w * end.w;\r\n        const absDot = d < 0 ? -d : d;\r\n        let scale0 = 1 - alpha;\r\n        let scale1 = alpha;\r\n        if (1 - absDot > 0.1) {\r\n            const angle = Math.acos(absDot);\r\n            const invSinTheta = 1 / Math.sin(angle);\r\n            scale0 = Math.sin((1 - alpha) * angle) * invSinTheta;\r\n            scale1 = Math.sin(alpha * angle) * invSinTheta;\r\n        }\r\n        if (d < 0)\r\n            scale1 = -scale1;\r\n        this.x = scale0 * this.x + scale1 * end.x;\r\n        this.y = scale0 * this.y + scale1 * end.y;\r\n        this.z = scale0 * this.z + scale1 * end.z;\r\n        this.w = scale0 * this.w + scale1 * end.w;\r\n        return this;\r\n    }\r\n    slerpWithQuaternions(q) {\r\n        const w = 1.0 / q.length;\r\n        this.set(q[0].x, q[0].y, q[0].z, q[0].w).exp(w);\r\n        for (let i = 1; i < q.length; i++) {\r\n            const quat = Quaternion.tmp1.set(q[i].x, q[i].y, q[i].z, q[i].w).exp(w);\r\n            this.mul(quat.x, quat.y, quat.z, quat.w);\r\n        }\r\n        this.nor();\r\n        return this;\r\n    }\r\n    exp(alpha) {\r\n        const norm = this.len();\r\n        const normExp = Math.pow(norm, alpha);\r\n        const theta = Math.acos(this.w / norm);\r\n        let coeff = 0;\r\n        if (Math.abs(theta) < 0.001)\r\n            coeff = (normExp * alpha) / norm;\r\n        else\r\n            coeff = (normExp * Math.sin(alpha * theta)) / (norm * Math.sin(theta));\r\n        this.w = normExp * Math.cos(alpha * theta);\r\n        this.x *= coeff;\r\n        this.y *= coeff;\r\n        this.z *= coeff;\r\n        this.nor();\r\n        return this;\r\n    }\r\n    static dot(x1, y1, z1, w1, x2, y2, z2, w2) {\r\n        return x1 * x2 + y1 * y2 + z1 * z2 + w1 * w2;\r\n    }\r\n    dot(x, y, z, w) {\r\n        return this.x * x + this.y * y + this.z * z + this.w * w;\r\n    }\r\n    mulByScalar(scalar) {\r\n        this.x *= scalar;\r\n        this.y *= scalar;\r\n        this.z *= scalar;\r\n        this.w *= scalar;\r\n        return this;\r\n    }\r\n    getAxisAngle(axis) {\r\n        return this.getAxisAngleRad(axis.x, axis.y, axis.z) * Utils_1.MathUtils.radiansToDegrees;\r\n    }\r\n    getAxisAngleRad(x, y, z) {\r\n        if (this.w > 1)\r\n            this.nor();\r\n        const angle = 2.0 * Math.acos(this.w);\r\n        const s = Math.sqrt(1 - this.w * this.w);\r\n        if (s < Utils_1.MathUtils.FLOAT_ROUNDING_ERROR) {\r\n            x = this.x;\r\n            y = this.y;\r\n            z = this.z;\r\n        }\r\n        else {\r\n            x = this.x / s;\r\n            y = this.y / s;\r\n            z = this.z / s;\r\n        }\r\n        return angle;\r\n    }\r\n    getAngleRad() {\r\n        return 2.0 * Math.acos(this.w > 1 ? this.w / this.len() : this.w);\r\n    }\r\n    getAngle() {\r\n        return this.getAngleRad() * Utils_1.MathUtils.radiansToDegrees;\r\n    }\r\n}\r\nexports.Quaternion = Quaternion;\r\nQuaternion.tmp1 = new Quaternion(0, 0, 0, 0);\r\nQuaternion.tmp2 = new Quaternion(0, 0, 0, 0);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Shader = void 0;\r\nclass Shader {\r\n    constructor(context, vertexShader, fragmentShader) {\r\n        this.vertexShader = vertexShader;\r\n        this.fragmentShader = fragmentShader;\r\n        this.vs = null;\r\n        this.fs = null;\r\n        this.program = null;\r\n        this.tmp2x2 = new Float32Array(2 * 2);\r\n        this.tmp3x3 = new Float32Array(3 * 3);\r\n        this.tmp4x4 = new Float32Array(4 * 4);\r\n        this.vsSource = vertexShader;\r\n        this.fsSource = fragmentShader;\r\n        this.context = context;\r\n        this.compile();\r\n    }\r\n    getProgram() {\r\n        return this.program;\r\n    }\r\n    getVertexShader() {\r\n        return this.vertexShader;\r\n    }\r\n    getFragmentShader() {\r\n        return this.fragmentShader;\r\n    }\r\n    getVertexShaderSource() {\r\n        return this.vsSource;\r\n    }\r\n    getFragmentSource() {\r\n        return this.fsSource;\r\n    }\r\n    compile() {\r\n        let gl = this.context;\r\n        try {\r\n            this.vs = this.compileShader(gl.VERTEX_SHADER, this.vertexShader);\r\n            this.fs = this.compileShader(gl.FRAGMENT_SHADER, this.fragmentShader);\r\n            this.program = this.compileProgram(this.vs, this.fs);\r\n        }\r\n        catch (e) {\r\n            this.dispose();\r\n            throw e;\r\n        }\r\n    }\r\n    compileShader(type, source) {\r\n        let gl = this.context;\r\n        let shader = gl.createShader(type);\r\n        gl.shaderSource(shader, source);\r\n        gl.compileShader(shader);\r\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n            let error = \"Couldn't compile shader: \" + gl.getShaderInfoLog(shader);\r\n            gl.deleteShader(shader);\r\n            if (!gl.isContextLost())\r\n                throw new Error(error);\r\n        }\r\n        return shader;\r\n    }\r\n    compileProgram(vs, fs) {\r\n        let gl = this.context;\r\n        let program = gl.createProgram();\r\n        gl.attachShader(program, vs);\r\n        gl.attachShader(program, fs);\r\n        gl.linkProgram(program);\r\n        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\r\n            let error = \"Couldn't compile shader program: \" + gl.getProgramInfoLog(program);\r\n            gl.deleteProgram(program);\r\n            if (!gl.isContextLost())\r\n                throw new Error(error);\r\n        }\r\n        return program;\r\n    }\r\n    restore() {\r\n        this.compile();\r\n    }\r\n    bind() {\r\n        this.context.useProgram(this.program);\r\n    }\r\n    unbind() {\r\n        this.context.useProgram(null);\r\n    }\r\n    setUniformi(uniform, value) {\r\n        this.context.uniform1i(this.getUniformLocation(uniform), value);\r\n    }\r\n    setUniformf(uniform, value) {\r\n        this.context.uniform1f(this.getUniformLocation(uniform), value);\r\n    }\r\n    setUniform2f(uniform, value, value2) {\r\n        this.context.uniform2f(this.getUniformLocation(uniform), value, value2);\r\n    }\r\n    setUniform3f(uniform, value, value2, value3) {\r\n        this.context.uniform3f(this.getUniformLocation(uniform), value, value2, value3);\r\n    }\r\n    setUniform1fWithLocation(location, value) {\r\n        this.context.uniform1f(location, value);\r\n    }\r\n    setUniform3fWithLocation(location, value, value2, value3) {\r\n        this.context.uniform3f(location, value, value2, value3);\r\n    }\r\n    setUniform4f(uniform, value, value2, value3, value4) {\r\n        this.context.uniform4f(this.getUniformLocation(uniform), value, value2, value3, value4);\r\n    }\r\n    setUniform2x2f(uniform, value) {\r\n        this.tmp2x2.set(value);\r\n        this.context.uniformMatrix2fv(this.getUniformLocation(uniform), false, this.tmp2x2);\r\n    }\r\n    setUniform3x3f(uniform, value) {\r\n        this.tmp3x3.set(value);\r\n        this.context.uniformMatrix3fv(this.getUniformLocation(uniform), false, this.tmp3x3);\r\n    }\r\n    setUniform4x4f(uniform, value) {\r\n        this.tmp4x4.set(value);\r\n        this.context.uniformMatrix4fv(this.getUniformLocation(uniform), false, this.tmp4x4);\r\n    }\r\n    setUniform4x4fWithLocation(location, value) {\r\n        this.context.uniformMatrix4fv(location, false, value);\r\n    }\r\n    setUniform3fv(uniform, value) {\r\n        this.context.uniform3fv(this.getUniformLocation(uniform), value);\r\n    }\r\n    getUniformLocation(uniform, pedantic = true) {\r\n        let location = this.context.getUniformLocation(this.program, uniform);\r\n        if (pedantic && !location && !this.context.isContextLost())\r\n            throw new Error(`Couldn't find location for uniform ${uniform}`);\r\n        return location;\r\n    }\r\n    getAttributeLocation(attribute) {\r\n        let location = this.context.getAttribLocation(this.program, attribute);\r\n        //if (location === -1 && !gl.isContextLost()) throw new Error(`Couldn't find location for attribute ${attribute}`);\r\n        return location;\r\n    }\r\n    dispose() {\r\n        if (this.vs) {\r\n            this.context.deleteShader(this.vs);\r\n            this.vs = null;\r\n        }\r\n        if (this.fs) {\r\n            this.context.deleteShader(this.fs);\r\n            this.fs = null;\r\n        }\r\n        if (this.program) {\r\n            this.context.deleteProgram(this.program);\r\n            this.program = null;\r\n        }\r\n    }\r\n    static newColoredTextured(context) {\r\n        let vs = `\r\n         attribute vec4 ${Shader.POSITION};\r\n         attribute vec4 ${Shader.COLOR};\r\n         attribute vec2 ${Shader.TEXCOORDS};\r\n         uniform mat4 ${Shader.MVP_MATRIX};\r\n         varying vec4 v_color;\r\n         varying vec2 v_texCoords;\r\n \r\n         void main () {\r\n           v_color = ${Shader.COLOR};\r\n           v_texCoords = ${Shader.TEXCOORDS};\r\n           gl_Position = ${Shader.MVP_MATRIX} * ${Shader.POSITION};\r\n         }\r\n       `;\r\n        let fs = `\r\n         #ifdef GL_ES\r\n           #define LOWP lowp\r\n           precision mediump float;\r\n         #else\r\n           #define LOWP\r\n         #endif\r\n         varying LOWP vec4 v_color;\r\n         varying vec2 v_texCoords;\r\n         uniform sampler2D u_texture;\r\n \r\n         void main () {\r\n           gl_FragColor = v_color * texture2D(u_texture, v_texCoords);\r\n         }\r\n       `;\r\n        return new Shader(context, vs, fs);\r\n    }\r\n    static newTwoColoredTextured(context) {\r\n        let vs = `\r\n         attribute vec4 ${Shader.POSITION};\r\n         attribute vec4 ${Shader.COLOR};\r\n         attribute vec4 ${Shader.COLOR2};\r\n         attribute vec2 ${Shader.TEXCOORDS};\r\n         uniform mat4 ${Shader.MVP_MATRIX};\r\n         varying vec4 v_light;\r\n         varying vec4 v_dark;\r\n         varying vec2 v_texCoords;\r\n \r\n         void main () {\r\n           v_light = ${Shader.COLOR};\r\n           v_dark = ${Shader.COLOR2};\r\n           v_texCoords = ${Shader.TEXCOORDS};\r\n           gl_Position = ${Shader.MVP_MATRIX} * ${Shader.POSITION};\r\n         }\r\n       `;\r\n        let fs = `\r\n         #ifdef GL_ES\r\n           #define LOWP lowp\r\n           precision mediump float;\r\n         #else\r\n           #define LOWP\r\n         #endif\r\n         varying LOWP vec4 v_light;\r\n         varying LOWP vec4 v_dark;\r\n         varying vec2 v_texCoords;\r\n         uniform sampler2D u_texture;\r\n \r\n         void main () {\r\n           vec4 texColor = texture2D(u_texture, v_texCoords);\r\n           gl_FragColor.a = texColor.a * v_light.a;\r\n           gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\r\n         }\r\n       `;\r\n        return new Shader(context, vs, fs);\r\n    }\r\n    static newColored(context) {\r\n        let vs = `\r\n         attribute vec4 ${Shader.POSITION};\r\n         attribute vec4 ${Shader.COLOR};\r\n         uniform mat4 ${Shader.MVP_MATRIX};\r\n         varying vec4 v_color;\r\n \r\n         void main () {\r\n           v_color = ${Shader.COLOR};\r\n           gl_Position = ${Shader.MVP_MATRIX} * ${Shader.POSITION};\r\n         }\r\n       `;\r\n        let fs = `\r\n         #ifdef GL_ES\r\n           #define LOWP lowp\r\n           precision mediump float;\r\n         #else\r\n           #define LOWP\r\n         #endif\r\n         varying LOWP vec4 v_color;\r\n \r\n         void main () {\r\n           gl_FragColor = v_color;\r\n         }\r\n       `;\r\n        return new Shader(context, vs, fs);\r\n    }\r\n}\r\nexports.Shader = Shader;\r\nShader.MVP_MATRIX = 'u_projTrans';\r\nShader.POSITION = 'a_position';\r\nShader.COLOR = 'a_color';\r\nShader.COLOR2 = 'a_color2';\r\nShader.TEXCOORDS = 'a_texCoords';\r\nShader.SAMPLER = 'u_texture';\r\nShader.NORMAL = 'a_normal';\r\nShader.TANGENT = 'a_tangent';\r\nShader.BINORMAL = 'a_binormal';\r\nShader.BONEWEIGHT = 'a_boneWeight';\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ShapeRenderer = exports.ShapeType = void 0;\r\nconst Mesh_1 = require(\"./Mesh\");\r\nconst Shader_1 = require(\"./Shader\");\r\nconst Utils_1 = require(\"./Utils\");\r\nconst Vector2_1 = require(\"./Vector2\");\r\nvar ShapeType;\r\n(function (ShapeType) {\r\n    ShapeType[ShapeType[\"Point\"] = 0] = \"Point\";\r\n    ShapeType[ShapeType[\"Line\"] = 1] = \"Line\";\r\n    ShapeType[ShapeType[\"Filled\"] = 4] = \"Filled\";\r\n})(ShapeType = exports.ShapeType || (exports.ShapeType = {}));\r\nclass ShapeRenderer {\r\n    constructor(context, maxVertices = 10920) {\r\n        this.isDrawing = false;\r\n        this.shapeType = ShapeType.Filled;\r\n        this.color = new Utils_1.Color(1, 1, 1, 1);\r\n        this.vertexIndex = 0;\r\n        this.tmp = new Vector2_1.Vector2();\r\n        this.projectionValues = new Float32Array(16);\r\n        if (maxVertices > 10920)\r\n            throw new Error(\"Can't have more than 10920 triangles per batch: \" + maxVertices);\r\n        this.context = context;\r\n        this.mesh = new Mesh_1.Mesh(context, [new Mesh_1.Position2Attribute(), new Mesh_1.ColorAttribute()], maxVertices, 0);\r\n        let gl = this.context;\r\n        this.srcColorBlend = gl.SRC_ALPHA;\r\n        this.srcAlphaBlend = gl.ONE;\r\n        this.dstBlend = gl.ONE_MINUS_SRC_ALPHA;\r\n        this.shader = Shader_1.Shader.newColored(gl);\r\n    }\r\n    setProjection(projectionValues) {\r\n        this.projectionValues = projectionValues;\r\n    }\r\n    begin() {\r\n        if (this.isDrawing)\r\n            throw new Error('ShapeRenderer.begin() has already been called');\r\n        this.vertexIndex = 0;\r\n        this.isDrawing = true;\r\n        this.shader.bind();\r\n        this.shader.setUniform4x4f(Shader_1.Shader.MVP_MATRIX, this.projectionValues);\r\n        let gl = this.context;\r\n        gl.enable(gl.BLEND);\r\n        gl.blendFuncSeparate(this.srcColorBlend, this.dstBlend, this.srcAlphaBlend, this.dstBlend);\r\n    }\r\n    setBlendMode(srcColorBlend, srcAlphaBlend, dstBlend) {\r\n        this.srcColorBlend = srcColorBlend;\r\n        this.srcAlphaBlend = srcAlphaBlend;\r\n        this.dstBlend = dstBlend;\r\n        if (this.isDrawing) {\r\n            this.flush();\r\n            let gl = this.context;\r\n            gl.blendFuncSeparate(srcColorBlend, dstBlend, srcAlphaBlend, dstBlend);\r\n        }\r\n    }\r\n    setColor(color) {\r\n        this.color.setFromColor(color);\r\n    }\r\n    setColorWith(r, g, b, a) {\r\n        this.color.set(r, g, b, a);\r\n    }\r\n    point(x, y, color = null) {\r\n        this.check(ShapeType.Point, 1);\r\n        if (color === null)\r\n            color = this.color;\r\n        this.vertex(x, y, color);\r\n    }\r\n    line(x, y, x2, y2, color = null) {\r\n        this.check(ShapeType.Line, 2);\r\n        if (color === null)\r\n            color = this.color;\r\n        this.vertex(x, y, color);\r\n        this.vertex(x2, y2, color);\r\n    }\r\n    triangle(filled, x, y, x2, y2, x3, y3, color = null, color2 = null, color3 = null) {\r\n        this.check(filled ? ShapeType.Filled : ShapeType.Line, 3);\r\n        if (color === null)\r\n            color = this.color;\r\n        if (color2 === null)\r\n            color2 = this.color;\r\n        if (color3 === null)\r\n            color3 = this.color;\r\n        if (filled) {\r\n            this.vertex(x, y, color);\r\n            this.vertex(x2, y2, color2);\r\n            this.vertex(x3, y3, color3);\r\n        }\r\n        else {\r\n            this.vertex(x, y, color);\r\n            this.vertex(x2, y2, color2);\r\n            this.vertex(x2, y2, color);\r\n            this.vertex(x3, y3, color2);\r\n            this.vertex(x3, y3, color);\r\n            this.vertex(x, y, color2);\r\n        }\r\n    }\r\n    quad(filled, x, y, x2, y2, x3, y3, x4, y4, color = null, color2 = null, color3 = null, color4 = null) {\r\n        this.check(filled ? ShapeType.Filled : ShapeType.Line, 3);\r\n        if (color === null)\r\n            color = this.color;\r\n        if (color2 === null)\r\n            color2 = this.color;\r\n        if (color3 === null)\r\n            color3 = this.color;\r\n        if (color4 === null)\r\n            color4 = this.color;\r\n        if (filled) {\r\n            this.vertex(x, y, color);\r\n            this.vertex(x2, y2, color2);\r\n            this.vertex(x3, y3, color3);\r\n            this.vertex(x3, y3, color3);\r\n            this.vertex(x4, y4, color4);\r\n            this.vertex(x, y, color);\r\n        }\r\n        else {\r\n            this.vertex(x, y, color);\r\n            this.vertex(x2, y2, color2);\r\n            this.vertex(x2, y2, color2);\r\n            this.vertex(x3, y3, color3);\r\n            this.vertex(x3, y3, color3);\r\n            this.vertex(x4, y4, color4);\r\n            this.vertex(x4, y4, color4);\r\n            this.vertex(x, y, color);\r\n        }\r\n    }\r\n    rect(filled, x, y, width, height, color = null) {\r\n        this.quad(filled, x, y, x + width, y, x + width, y + height, x, y + height, color, color, color, color);\r\n    }\r\n    rectLine(filled, x1, y1, x2, y2, width, color = null) {\r\n        this.check(filled ? ShapeType.Filled : ShapeType.Line, 8);\r\n        if (color === null)\r\n            color = this.color;\r\n        let t = this.tmp.set(y2 - y1, x1 - x2);\r\n        t.nor();\r\n        width *= 0.5;\r\n        let tx = t.x * width;\r\n        let ty = t.y * width;\r\n        if (!filled) {\r\n            this.vertex(x1 + tx, y1 + ty, color);\r\n            this.vertex(x1 - tx, y1 - ty, color);\r\n            this.vertex(x2 + tx, y2 + ty, color);\r\n            this.vertex(x2 - tx, y2 - ty, color);\r\n            this.vertex(x2 + tx, y2 + ty, color);\r\n            this.vertex(x1 + tx, y1 + ty, color);\r\n            this.vertex(x2 - tx, y2 - ty, color);\r\n            this.vertex(x1 - tx, y1 - ty, color);\r\n        }\r\n        else {\r\n            this.vertex(x1 + tx, y1 + ty, color);\r\n            this.vertex(x1 - tx, y1 - ty, color);\r\n            this.vertex(x2 + tx, y2 + ty, color);\r\n            this.vertex(x2 - tx, y2 - ty, color);\r\n            this.vertex(x2 + tx, y2 + ty, color);\r\n            this.vertex(x1 - tx, y1 - ty, color);\r\n        }\r\n    }\r\n    x(x, y, size) {\r\n        this.line(x - size, y - size, x + size, y + size);\r\n        this.line(x - size, y + size, x + size, y - size);\r\n    }\r\n    polygon(polygonVertices, offset, count, color = null) {\r\n        if (count < 3)\r\n            throw new Error('Polygon must contain at least 3 vertices');\r\n        this.check(ShapeType.Line, count * 2);\r\n        if (color === null)\r\n            color = this.color;\r\n        offset <<= 1;\r\n        count <<= 1;\r\n        let firstX = polygonVertices[offset];\r\n        let firstY = polygonVertices[offset + 1];\r\n        let last = offset + count;\r\n        for (let i = offset, n = offset + count - 2; i < n; i += 2) {\r\n            let x1 = polygonVertices[i];\r\n            let y1 = polygonVertices[i + 1];\r\n            let x2 = 0;\r\n            let y2 = 0;\r\n            if (i + 2 >= last) {\r\n                x2 = firstX;\r\n                y2 = firstY;\r\n            }\r\n            else {\r\n                x2 = polygonVertices[i + 2];\r\n                y2 = polygonVertices[i + 3];\r\n            }\r\n            this.vertex(x1, y1, color);\r\n            this.vertex(x2, y2, color);\r\n        }\r\n    }\r\n    circle(filled, x, y, radius, color = null, segments = 0) {\r\n        if (segments === 0)\r\n            segments = Math.max(1, (6 * Utils_1.MathUtils.cbrt(radius)) | 0);\r\n        if (segments <= 0)\r\n            throw new Error('segments must be > 0.');\r\n        if (color === null)\r\n            color = this.color;\r\n        let angle = (2 * Utils_1.MathUtils.PI) / segments;\r\n        let cos = Math.cos(angle);\r\n        let sin = Math.sin(angle);\r\n        let cx = radius, cy = 0;\r\n        if (!filled) {\r\n            this.check(ShapeType.Line, segments * 2 + 2);\r\n            for (let i = 0; i < segments; i++) {\r\n                this.vertex(x + cx, y + cy, color);\r\n                let temp = cx;\r\n                cx = cos * cx - sin * cy;\r\n                cy = sin * temp + cos * cy;\r\n                this.vertex(x + cx, y + cy, color);\r\n            }\r\n            // Ensure the last segment is identical to the first.\r\n            this.vertex(x + cx, y + cy, color);\r\n        }\r\n        else {\r\n            this.check(ShapeType.Filled, segments * 3 + 3);\r\n            segments--;\r\n            for (let i = 0; i < segments; i++) {\r\n                this.vertex(x, y, color);\r\n                this.vertex(x + cx, y + cy, color);\r\n                let temp = cx;\r\n                cx = cos * cx - sin * cy;\r\n                cy = sin * temp + cos * cy;\r\n                this.vertex(x + cx, y + cy, color);\r\n            }\r\n            // Ensure the last segment is identical to the first.\r\n            this.vertex(x, y, color);\r\n            this.vertex(x + cx, y + cy, color);\r\n        }\r\n        cx = radius;\r\n        cy = 0;\r\n        this.vertex(x + cx, y + cy, color);\r\n    }\r\n    curve(x1, y1, cx1, cy1, cx2, cy2, x2, y2, segments, color = null) {\r\n        this.check(ShapeType.Line, segments * 2 + 2);\r\n        if (color === null)\r\n            color = this.color;\r\n        // Algorithm from: http://www.antigrain.com/research/bezier_interpolation/index.html#PAGE_BEZIER_INTERPOLATION\r\n        let subdiv_step = 1 / segments;\r\n        let subdiv_step2 = subdiv_step * subdiv_step;\r\n        let subdiv_step3 = subdiv_step * subdiv_step * subdiv_step;\r\n        let pre1 = 3 * subdiv_step;\r\n        let pre2 = 3 * subdiv_step2;\r\n        let pre4 = 6 * subdiv_step2;\r\n        let pre5 = 6 * subdiv_step3;\r\n        let tmp1x = x1 - cx1 * 2 + cx2;\r\n        let tmp1y = y1 - cy1 * 2 + cy2;\r\n        let tmp2x = (cx1 - cx2) * 3 - x1 + x2;\r\n        let tmp2y = (cy1 - cy2) * 3 - y1 + y2;\r\n        let fx = x1;\r\n        let fy = y1;\r\n        let dfx = (cx1 - x1) * pre1 + tmp1x * pre2 + tmp2x * subdiv_step3;\r\n        let dfy = (cy1 - y1) * pre1 + tmp1y * pre2 + tmp2y * subdiv_step3;\r\n        let ddfx = tmp1x * pre4 + tmp2x * pre5;\r\n        let ddfy = tmp1y * pre4 + tmp2y * pre5;\r\n        let dddfx = tmp2x * pre5;\r\n        let dddfy = tmp2y * pre5;\r\n        while (segments-- > 0) {\r\n            this.vertex(fx, fy, color);\r\n            fx += dfx;\r\n            fy += dfy;\r\n            dfx += ddfx;\r\n            dfy += ddfy;\r\n            ddfx += dddfx;\r\n            ddfy += dddfy;\r\n            this.vertex(fx, fy, color);\r\n        }\r\n        this.vertex(fx, fy, color);\r\n        this.vertex(x2, y2, color);\r\n    }\r\n    vertex(x, y, color) {\r\n        let idx = this.vertexIndex;\r\n        let vertices = this.mesh.getVertices();\r\n        vertices[idx++] = x;\r\n        vertices[idx++] = y;\r\n        vertices[idx++] = color.r;\r\n        vertices[idx++] = color.g;\r\n        vertices[idx++] = color.b;\r\n        vertices[idx++] = color.a;\r\n        this.vertexIndex = idx;\r\n    }\r\n    end() {\r\n        if (!this.isDrawing)\r\n            throw new Error('ShapeRenderer.begin() has not been called');\r\n        this.flush();\r\n        let gl = this.context;\r\n        gl.disable(gl.BLEND);\r\n        this.isDrawing = false;\r\n    }\r\n    flush() {\r\n        if (this.vertexIndex === 0)\r\n            return;\r\n        this.mesh.setVerticesLength(this.vertexIndex);\r\n        this.mesh.draw(this.shader, this.shapeType);\r\n        this.vertexIndex = 0;\r\n    }\r\n    check(shapeType, numVertices) {\r\n        if (!this.isDrawing)\r\n            throw new Error('ShapeRenderer.begin() has not been called');\r\n        if (this.shapeType === shapeType) {\r\n            if (this.mesh.maxVertices() - this.mesh.numVertices() < numVertices)\r\n                this.flush();\r\n            else\r\n                return;\r\n        }\r\n        else {\r\n            this.flush();\r\n            this.shapeType = shapeType;\r\n        }\r\n    }\r\n    dispose() {\r\n        this.mesh.dispose();\r\n    }\r\n}\r\nexports.ShapeRenderer = ShapeRenderer;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Sprite = void 0;\r\nconst Utils_1 = require(\"./Utils\");\r\nconst Vector2_1 = require(\"./Vector2\");\r\n/* eslint-disable */\r\nconst X1 = 0;\r\nconst Y1 = 1;\r\nconst C1R = 2;\r\nconst C1G = 3;\r\nconst C1B = 4;\r\nconst C1A = 5;\r\nconst U1 = 6;\r\nconst V1 = 7;\r\nconst C1R2 = 8;\r\nconst C1G2 = 9;\r\nconst C1B2 = 10;\r\nconst C1A2 = 11;\r\nconst X2 = 12;\r\nconst Y2 = 13;\r\nconst C2R = 14;\r\nconst C2G = 15;\r\nconst C2B = 16;\r\nconst C2A = 17;\r\nconst U2 = 18;\r\nconst V2 = 19;\r\nconst C2R2 = 20;\r\nconst C2G2 = 21;\r\nconst C2B2 = 22;\r\nconst C2A2 = 23;\r\nconst X3 = 24;\r\nconst Y3 = 25;\r\nconst C3R = 26;\r\nconst C3G = 27;\r\nconst C3B = 28;\r\nconst C3A = 29;\r\nconst U3 = 30;\r\nconst V3 = 31;\r\nconst C3R2 = 32;\r\nconst C3G2 = 33;\r\nconst C3B2 = 34;\r\nconst C3A2 = 35;\r\nconst X4 = 36;\r\nconst Y4 = 37;\r\nconst C4R = 38;\r\nconst C4G = 39;\r\nconst C4B = 40;\r\nconst C4A = 41;\r\nconst U4 = 42;\r\nconst V4 = 43;\r\nconst C4R2 = 44;\r\nconst C4G2 = 45;\r\nconst C4B2 = 46;\r\nconst C4A2 = 47;\r\n/* eslint-enable */\r\n/**\r\n * An unoptimized version of Sprite. Always calculate all vertices, never update partially. Will improve later after refactoring the SpriteBatch.\r\n */\r\nclass Sprite {\r\n    constructor(region) {\r\n        this.region = region;\r\n        this.dirty = false;\r\n        this.position = new Vector2_1.Vector2(0, 0);\r\n        this.size = new Vector2_1.Vector2(0, 0);\r\n        this.origin = new Vector2_1.Vector2(0, 0);\r\n        this.scale = new Vector2_1.Vector2(1, 1);\r\n        this.color = new Utils_1.Color(1, 1, 1, 1);\r\n        this.rotation = 0;\r\n        this.vertices = new Float32Array(48);\r\n        this.bounds = {\r\n            x: 0,\r\n            y: 0,\r\n            width: 0,\r\n            height: 0\r\n        };\r\n        this.setSize(region.width, region.height);\r\n        this.setOrigin(region.width / 2, region.height / 2);\r\n    }\r\n    set(sprite) {\r\n        this.region = sprite.region;\r\n        this.position.setVector(sprite.position);\r\n        this.size.setVector(sprite.size);\r\n        this.origin.setVector(sprite.origin);\r\n        this.rotation = sprite.rotation;\r\n        this.scale.setVector(sprite.scale);\r\n        this.color.setFromColor(sprite.color);\r\n        this.dirty = true;\r\n    }\r\n    setBounds(x, y, width, height) {\r\n        this.setPosition(x, y);\r\n        this.setSize(x, y);\r\n        this.dirty = true;\r\n    }\r\n    setSize(width, height) {\r\n        this.size.set(width, height);\r\n        this.dirty = true;\r\n    }\r\n    setPosition(x, y) {\r\n        this.position.set(x, y);\r\n        this.dirty = true;\r\n    }\r\n    setOriginBasedPosition(x, y) {\r\n        this.setPosition(x - this.origin.x, y - this.origin.y);\r\n    }\r\n    setX(x) {\r\n        this.position.x = x;\r\n        this.dirty = true;\r\n    }\r\n    setY(y) {\r\n        this.position.y = y;\r\n        this.dirty = true;\r\n    }\r\n    /** Sets the x position so that it is centered on the given x parameter */\r\n    setCenterX(x) {\r\n        this.setX(x - this.size.x / 2);\r\n    }\r\n    /** Sets the y position so that it is centered on the given y parameter */\r\n    setCenterY(y) {\r\n        this.setY(y - this.size.y / 2);\r\n    }\r\n    /** Sets the position so that the sprite is centered on (x, y) */\r\n    setCenter(x, y) {\r\n        this.setPosition(x - this.size.x / 2, y - this.size.y / 2);\r\n    }\r\n    /** Sets the x position relative to the current position where the sprite will be drawn. If origin, rotation, or scale are\r\n     * changed, it is slightly more efficient to translate after those operations. */\r\n    translateX(xAmount) {\r\n        this.translate(xAmount, 0);\r\n    }\r\n    /** Sets the y position relative to the current position where the sprite will be drawn. If origin, rotation, or scale are\r\n     * changed, it is slightly more efficient to translate after those operations. */\r\n    translateY(yAmount) {\r\n        this.translate(0, yAmount);\r\n    }\r\n    translate(xAmount, yAmount) {\r\n        this.position.add(xAmount, yAmount);\r\n        this.dirty = true;\r\n    }\r\n    /** Sets the color used to tint this sprite. Default is {@link Color#WHITE}. */\r\n    setColor(tint) {\r\n        this.color.setFromColor(tint);\r\n        this.dirty = true;\r\n    }\r\n    /** Sets the alpha portion of the color used to tint this sprite. */\r\n    setAlpha(a) {\r\n        this.color.a = a;\r\n        this.dirty = true;\r\n    }\r\n    /** Sets the origin in relation to the sprite's position for scaling and rotation. */\r\n    setOrigin(originX, originY) {\r\n        this.origin.set(originX, originY);\r\n        this.dirty = true;\r\n    }\r\n    /** Place origin in the center of the sprite */\r\n    setOriginCenter() {\r\n        this.origin.set(this.size.x / 2, this.size.y / 2);\r\n        this.dirty = true;\r\n    }\r\n    setRotation(rad) {\r\n        this.rotation = rad;\r\n        this.dirty = true;\r\n    }\r\n    getRotation() {\r\n        return this.rotation;\r\n    }\r\n    rotate(rad) {\r\n        if (rad === 0)\r\n            return;\r\n        this.rotation += rad;\r\n        this.dirty = true;\r\n    }\r\n    /** Sets the sprite's scale for both X and Y. The sprite scales out from the origin. This will not affect the values returned\r\n     * by {@link #getWidth()} and {@link #getHeight()} */\r\n    setScale(scaleX, scaleY) {\r\n        this.scale.set(scaleX, scaleY);\r\n        this.dirty = true;\r\n    }\r\n    /** Sets the sprite's scale relative to the current scale. for example: original scale 2 -> sprite.scale(4) -> final scale 6.\r\n     * The sprite scales out from the origin. This will not affect the values returned by {@link #getWidth()} and\r\n     * {@link #getHeight()} */\r\n    applyScale(amount) {\r\n        this.scale.scale(amount);\r\n        this.dirty = true;\r\n    }\r\n    /** Returns the packed vertices, colors, and texture coordinates for this sprite. */\r\n    getVertices(yDown = false) {\r\n        const { vertices, region } = this;\r\n        if (!this.dirty) {\r\n            return vertices;\r\n        }\r\n        let x = this.position.x;\r\n        let y = this.position.y;\r\n        let width = this.size.x;\r\n        let height = this.size.y;\r\n        let originX = this.origin.x;\r\n        let originY = this.origin.y;\r\n        let rotation = this.rotation;\r\n        let scaleX = this.scale.x;\r\n        let scaleY = this.scale.y;\r\n        let ou1 = region.u;\r\n        let ov1 = region.v;\r\n        let ou2 = region.u2;\r\n        let ov2 = region.v2;\r\n        const color = this.color;\r\n        let rotate = region.rotated;\r\n        const xRatio = width / region.originalWidth;\r\n        const yRatio = height / region.originalHeight;\r\n        const drawWidth = region.width * xRatio;\r\n        const drawHeight = region.height * yRatio;\r\n        const drawX = x + region.offsetX * xRatio;\r\n        let drawY = 0;\r\n        if (yDown) {\r\n            drawY = y + height - region.offsetY * yRatio - drawHeight;\r\n        }\r\n        else {\r\n            drawY = y + region.offsetY * yRatio;\r\n        }\r\n        x = drawX;\r\n        y = drawY;\r\n        width = drawWidth;\r\n        height = drawHeight;\r\n        if (yDown) {\r\n            const tmpV1 = ov1;\r\n            ov1 = ov2;\r\n            ov2 = tmpV1;\r\n        }\r\n        let x1 = -originX;\r\n        let x2 = width - originX;\r\n        let x3 = width - originX;\r\n        let x4 = -originX;\r\n        let y1 = -originY;\r\n        let y2 = -originY;\r\n        let y3 = height - originY;\r\n        let y4 = height - originY;\r\n        if (scaleX !== 1) {\r\n            x1 = x1 * scaleX;\r\n            x2 = x2 * scaleX;\r\n            x3 = x3 * scaleX;\r\n            x4 = x4 * scaleX;\r\n        }\r\n        if (scaleY !== 1) {\r\n            y1 = y1 * scaleY;\r\n            y2 = y2 * scaleY;\r\n            y3 = y3 * scaleY;\r\n            y4 = y4 * scaleY;\r\n        }\r\n        if (rotation !== 0) {\r\n            var cos = Math.cos(rotation);\r\n            var sin = Math.sin(rotation);\r\n            var rotatedX1 = cos * x1 - sin * y1;\r\n            var rotatedY1 = sin * x1 + cos * y1;\r\n            var rotatedX2 = cos * x2 - sin * y2;\r\n            var rotatedY2 = sin * x2 + cos * y2;\r\n            var rotatedX3 = cos * x3 - sin * y3;\r\n            var rotatedY3 = sin * x3 + cos * y3;\r\n            var rotatedX4 = cos * x4 - sin * y4;\r\n            var rotatedY4 = sin * x4 + cos * y4;\r\n            x1 = rotatedX1;\r\n            x2 = rotatedX2;\r\n            x3 = rotatedX3;\r\n            x4 = rotatedX4;\r\n            y1 = rotatedY1;\r\n            y2 = rotatedY2;\r\n            y3 = rotatedY3;\r\n            y4 = rotatedY4;\r\n        }\r\n        x1 += x + originX;\r\n        x2 += x + originX;\r\n        x3 += x + originX;\r\n        x4 += x + originX;\r\n        y1 += y + originY;\r\n        y2 += y + originY;\r\n        y3 += y + originY;\r\n        y4 += y + originY;\r\n        let u1 = ou1;\r\n        let v1 = ov1;\r\n        let u2 = ou2;\r\n        let v2 = ov2;\r\n        let u3 = u2;\r\n        let v3 = v1;\r\n        let u4 = u1;\r\n        let v4 = v2;\r\n        if (rotate) {\r\n            if (yDown) {\r\n                u1 = ou1;\r\n                v1 = ov2;\r\n                u2 = ou2;\r\n                v2 = ov1;\r\n                u3 = ou1;\r\n                v3 = ov1;\r\n                u4 = ou2;\r\n                v4 = ov2;\r\n            }\r\n            else {\r\n                u1 = ou2;\r\n                v1 = ov1;\r\n                u2 = ou1;\r\n                v2 = ov2;\r\n                u3 = ou2;\r\n                v3 = ov2;\r\n                u4 = ou1;\r\n                v4 = ov1;\r\n            }\r\n        }\r\n        var i = 0;\r\n        vertices[i++] = x1;\r\n        vertices[i++] = y1;\r\n        vertices[i++] = color.r;\r\n        vertices[i++] = color.g;\r\n        vertices[i++] = color.b;\r\n        vertices[i++] = color.a;\r\n        vertices[i++] = u1;\r\n        vertices[i++] = v1;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = x2;\r\n        vertices[i++] = y2;\r\n        vertices[i++] = color.r;\r\n        vertices[i++] = color.g;\r\n        vertices[i++] = color.b;\r\n        vertices[i++] = color.a;\r\n        vertices[i++] = u3;\r\n        vertices[i++] = v3;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = x3;\r\n        vertices[i++] = y3;\r\n        vertices[i++] = color.r;\r\n        vertices[i++] = color.g;\r\n        vertices[i++] = color.b;\r\n        vertices[i++] = color.a;\r\n        vertices[i++] = u2;\r\n        vertices[i++] = v2;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = x4;\r\n        vertices[i++] = y4;\r\n        vertices[i++] = color.r;\r\n        vertices[i++] = color.g;\r\n        vertices[i++] = color.b;\r\n        vertices[i++] = color.a;\r\n        vertices[i++] = u4;\r\n        vertices[i++] = v4;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i] = 0;\r\n        return vertices;\r\n    }\r\n    /** Returns the bounding axis aligned {@link Rectangle} that bounds this sprite. The rectangles x and y coordinates describe\r\n     * its bottom left corner. If you change the position or size of the sprite, you have to fetch the triangle again for it to be\r\n     * recomputed.\r\n     *\r\n     * @return the bounding Rectangle */\r\n    getBoundingRectangle() {\r\n        const vertices = this.vertices;\r\n        let minx = vertices[X1];\r\n        let miny = vertices[Y1];\r\n        let maxx = vertices[X1];\r\n        let maxy = vertices[Y1];\r\n        minx = minx > vertices[X2] ? vertices[X2] : minx;\r\n        minx = minx > vertices[X3] ? vertices[X3] : minx;\r\n        minx = minx > vertices[X4] ? vertices[X4] : minx;\r\n        maxx = maxx < vertices[X2] ? vertices[X2] : maxx;\r\n        maxx = maxx < vertices[X3] ? vertices[X3] : maxx;\r\n        maxx = maxx < vertices[X4] ? vertices[X4] : maxx;\r\n        miny = miny > vertices[Y2] ? vertices[Y2] : miny;\r\n        miny = miny > vertices[Y3] ? vertices[Y3] : miny;\r\n        miny = miny > vertices[Y4] ? vertices[Y4] : miny;\r\n        maxy = maxy < vertices[Y2] ? vertices[Y2] : maxy;\r\n        maxy = maxy < vertices[Y3] ? vertices[Y3] : maxy;\r\n        maxy = maxy < vertices[Y4] ? vertices[Y4] : maxy;\r\n        this.bounds.x = minx;\r\n        this.bounds.y = miny;\r\n        this.bounds.width = maxx - minx;\r\n        this.bounds.height = maxy - miny;\r\n        return this.bounds;\r\n    }\r\n    draw(batch) {\r\n        batch.drawVertices(this.region.texture, this.getVertices(batch.yDown));\r\n    }\r\n    drawWithAlpha(batch, alphaModulation) {\r\n        const oldAlpha = this.getColor().a;\r\n        this.setAlpha(oldAlpha * alphaModulation);\r\n        this.draw(batch);\r\n        this.setAlpha(oldAlpha);\r\n    }\r\n    getX() {\r\n        return this.position.x;\r\n    }\r\n    getY() {\r\n        return this.position.y;\r\n    }\r\n    /** @return the width of the sprite, not accounting for scale. */\r\n    getWidth() {\r\n        return this.size.x;\r\n    }\r\n    /** @return the height of the sprite, not accounting for scale. */\r\n    getHeight() {\r\n        return this.size.y;\r\n    }\r\n    /** The origin influences {@link #setPosition(float, float)}, {@link #setRotation(float)} and the expansion direction of\r\n     * scaling {@link #setScale(float, float)} */\r\n    getOriginX() {\r\n        return this.origin.x;\r\n    }\r\n    /** The origin influences {@link #setPosition(float, float)}, {@link #setRotation(float)} and the expansion direction of\r\n     * scaling {@link #setScale(float, float)} */\r\n    getOriginY() {\r\n        return this.origin.y;\r\n    }\r\n    /** X scale of the sprite, independent of size set by {@link #setSize(float, float)} */\r\n    getScaleX() {\r\n        return this.scale.x;\r\n    }\r\n    /** Y scale of the sprite, independent of size set by {@link #setSize(float, float)} */\r\n    getScaleY() {\r\n        return this.scale.y;\r\n    }\r\n    /** Returns the color of this sprite. If the returned instance is manipulated, {@link #setColor(Color)} must be called\r\n     * afterward. */\r\n    getColor() {\r\n        return this.color;\r\n    }\r\n}\r\nexports.Sprite = Sprite;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Texture = exports.TextureWrap = exports.TextureFilter = void 0;\r\nvar TextureFilter;\r\n(function (TextureFilter) {\r\n    TextureFilter[TextureFilter[\"Nearest\"] = 9728] = \"Nearest\";\r\n    TextureFilter[TextureFilter[\"Linear\"] = 9729] = \"Linear\";\r\n    TextureFilter[TextureFilter[\"MipMap\"] = 9987] = \"MipMap\";\r\n    TextureFilter[TextureFilter[\"MipMapNearestNearest\"] = 9984] = \"MipMapNearestNearest\";\r\n    TextureFilter[TextureFilter[\"MipMapLinearNearest\"] = 9985] = \"MipMapLinearNearest\";\r\n    TextureFilter[TextureFilter[\"MipMapNearestLinear\"] = 9986] = \"MipMapNearestLinear\";\r\n    TextureFilter[TextureFilter[\"MipMapLinearLinear\"] = 9987] = \"MipMapLinearLinear\"; // WebGLRenderingContext.LINEAR_MIPMAP_LINEAR\r\n})(TextureFilter = exports.TextureFilter || (exports.TextureFilter = {}));\r\nvar TextureWrap;\r\n(function (TextureWrap) {\r\n    TextureWrap[TextureWrap[\"MirroredRepeat\"] = 33648] = \"MirroredRepeat\";\r\n    TextureWrap[TextureWrap[\"ClampToEdge\"] = 33071] = \"ClampToEdge\";\r\n    TextureWrap[TextureWrap[\"Repeat\"] = 10497] = \"Repeat\"; // WebGLRenderingContext.REPEAT\r\n})(TextureWrap = exports.TextureWrap || (exports.TextureWrap = {}));\r\nclass Texture {\r\n    constructor(context, image, useMipMaps = false) {\r\n        this.texture = null;\r\n        this.boundUnit = 0;\r\n        this.useMipMaps = false;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this._image = image;\r\n        this.context = context;\r\n        this.useMipMaps = useMipMaps;\r\n        this.restore();\r\n        this.width = image.width;\r\n        this.height = image.height;\r\n    }\r\n    getImage() {\r\n        return this._image;\r\n    }\r\n    static createWhiteTexture(gl) {\r\n        const imageData = new ImageData(new Uint8ClampedArray([255, 255, 255, 255]), 1, 1);\r\n        const texture = new Texture(gl, imageData);\r\n        return texture;\r\n    }\r\n    static load(gl, url, useMipmaps = false) {\r\n        return new Promise(resolve => {\r\n            const image = new Image();\r\n            image.onload = () => {\r\n                resolve(new Texture(gl, image, useMipmaps));\r\n            };\r\n            image.src = url;\r\n        });\r\n    }\r\n    getWebGLTexture() {\r\n        return this.texture;\r\n    }\r\n    setFilters(minFilter, magFilter) {\r\n        let gl = this.context;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, Texture.validateMagFilter(magFilter));\r\n    }\r\n    static validateMagFilter(magFilter) {\r\n        switch (magFilter) {\r\n            case TextureFilter.MipMap:\r\n            case TextureFilter.MipMapLinearLinear:\r\n            case TextureFilter.MipMapLinearNearest:\r\n            case TextureFilter.MipMapNearestLinear:\r\n            case TextureFilter.MipMapNearestNearest:\r\n                return TextureFilter.Linear;\r\n            default:\r\n                return magFilter;\r\n        }\r\n    }\r\n    setWraps(uWrap, vWrap) {\r\n        let gl = this.context;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, uWrap);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, vWrap);\r\n    }\r\n    update(useMipMaps) {\r\n        let gl = this.context;\r\n        if (!this.texture)\r\n            this.texture = this.context.createTexture();\r\n        this.bind();\r\n        if (Texture.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL)\r\n            gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this._image);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, useMipMaps ? gl.LINEAR_MIPMAP_LINEAR : gl.LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n        if (useMipMaps)\r\n            gl.generateMipmap(gl.TEXTURE_2D);\r\n    }\r\n    restore() {\r\n        this.texture = null;\r\n        this.update(this.useMipMaps);\r\n    }\r\n    bind(unit = 0) {\r\n        let gl = this.context;\r\n        this.boundUnit = unit;\r\n        gl.activeTexture(gl.TEXTURE0 + unit);\r\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\r\n    }\r\n    unbind() {\r\n        let gl = this.context;\r\n        gl.activeTexture(gl.TEXTURE0 + this.boundUnit);\r\n        gl.bindTexture(gl.TEXTURE_2D, null);\r\n    }\r\n    dispose() {\r\n        let gl = this.context;\r\n        gl.deleteTexture(this.texture);\r\n    }\r\n}\r\nexports.Texture = Texture;\r\nTexture.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL = false;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TextureAtlas = void 0;\r\nconst Texture_1 = require(\"./Texture\");\r\nconst TextureRegion_1 = require(\"./TextureRegion\");\r\nconst Utils_1 = require(\"./Utils\");\r\nclass TextureAtlas {\r\n    constructor(pages, regions) {\r\n        this.pages = pages;\r\n        this.regions = regions;\r\n    }\r\n    dispose() {\r\n        for (let page of this.pages) {\r\n            page.dispose();\r\n        }\r\n    }\r\n    getPages() {\r\n        return this.pages;\r\n    }\r\n    getRegions() {\r\n        return this.regions;\r\n    }\r\n    findRegion(name, index) {\r\n        for (let i = 0; i < this.regions.length; i++) {\r\n            let region = this.regions[i];\r\n            if (region.name !== name)\r\n                continue;\r\n            if (index !== undefined && region.index !== index)\r\n                continue;\r\n            return region;\r\n        }\r\n        return null;\r\n    }\r\n    findRegions(name) {\r\n        return this.regions.filter(region => region.name === name).sort((a, b) => a.index - b.index);\r\n    }\r\n    static load(gl, packFileUrl, textureOptions) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const packFileContent = yield fetch(packFileUrl).then(res => res.text());\r\n            const pageData = [];\r\n            const pages = [];\r\n            const regionsData = [];\r\n            let pageImage;\r\n            const lines = packFileContent.split(/\\r?\\n/);\r\n            let i = 0;\r\n            let tuple;\r\n            while (true) {\r\n                let line = lines[i];\r\n                if (line === undefined) {\r\n                    break;\r\n                }\r\n                if (line.trim().length === 0) {\r\n                    pageImage = null;\r\n                }\r\n                else if (!pageImage) {\r\n                    const file = (0, Utils_1.concatAndResolveUrl)(packFileUrl, `../${line}`);\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    const width = parseInt(tuple[0], 10);\r\n                    const height = parseInt(tuple[1], 10);\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    const format = tuple[0];\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    const [min, max] = tuple;\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    const direction = tuple[0];\r\n                    let repeatX = Texture_1.TextureWrap.ClampToEdge;\r\n                    let repeatY = Texture_1.TextureWrap.ClampToEdge;\r\n                    if (direction === 'x') {\r\n                        repeatX = Texture_1.TextureWrap.Repeat;\r\n                    }\r\n                    else if (direction === 'y') {\r\n                        repeatY = Texture_1.TextureWrap.Repeat;\r\n                    }\r\n                    else if (direction === 'xy') {\r\n                        repeatX = Texture_1.TextureWrap.Repeat;\r\n                        repeatY = Texture_1.TextureWrap.Repeat;\r\n                    }\r\n                    const mipMaps = min !== 'Nearest' && min !== 'Linear';\r\n                    pageImage = {\r\n                        file,\r\n                        width,\r\n                        height,\r\n                        format,\r\n                        mipMaps,\r\n                        min,\r\n                        max,\r\n                        direction,\r\n                        repeatX,\r\n                        repeatY\r\n                    };\r\n                    pageData.push(pageImage);\r\n                }\r\n                else {\r\n                    const name = line;\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    const rotate = tuple[0] === 'true';\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    const left = parseInt(tuple[0], 10);\r\n                    const top = parseInt(tuple[1], 10);\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    const width = parseInt(tuple[0], 10);\r\n                    const height = parseInt(tuple[1], 10);\r\n                    const region = {\r\n                        name,\r\n                        rotate,\r\n                        left,\r\n                        top,\r\n                        width,\r\n                        height,\r\n                        page: pageImage\r\n                    };\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    if (tuple.length === 4) {\r\n                        region.splits = tuple.map(i => parseInt(i, 10));\r\n                        i++;\r\n                        line = lines[i];\r\n                        tuple = line\r\n                            .split(':')[1]\r\n                            .split(',')\r\n                            .map(s => s.trim());\r\n                        if (tuple.length === 4) {\r\n                            region.pads = tuple.map(i => parseInt(i, 10));\r\n                            i++;\r\n                            line = lines[i];\r\n                            tuple = line\r\n                                .split(':')[1]\r\n                                .split(',')\r\n                                .map(s => s.trim());\r\n                        }\r\n                    }\r\n                    region.originalWidth = parseInt(tuple[0], 10);\r\n                    region.originalHeight = parseInt(tuple[1], 10);\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    region.offsetX = parseInt(tuple[0], 10);\r\n                    region.offsetY = parseInt(tuple[1], 10);\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    region.index = parseInt(tuple[0], 10);\r\n                    regionsData.push(region);\r\n                }\r\n                i++;\r\n            }\r\n            for (let page of pageData) {\r\n                page.texture = yield Texture_1.Texture.load(gl, page.file, textureOptions);\r\n                page.invTexWidth = 1 / page.texture.width;\r\n                page.invTexHeight = 1 / page.texture.height;\r\n            }\r\n            const regions = [];\r\n            for (let regionData of regionsData) {\r\n                const { left: x, top: y } = regionData;\r\n                const width = regionData.rotate ? regionData.height : regionData.width;\r\n                const height = regionData.rotate ? regionData.width : regionData.height;\r\n                const { texture, invTexWidth, invTexHeight } = regionData.page;\r\n                regions.push(new TextureRegion_1.TextureRegion(texture, x, y, width, height, regionData, invTexWidth, invTexHeight, regionData.rotate));\r\n            }\r\n            return new TextureAtlas(pages, regions);\r\n        });\r\n    }\r\n}\r\nexports.TextureAtlas = TextureAtlas;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TextureRegion = void 0;\r\nconst Affine2_1 = require(\"./Affine2\");\r\nclass TextureRegion {\r\n    constructor(tex, x, y, width, height, extraData, invTexWidth, invTexHeight, rotate = false) {\r\n        this.name = null;\r\n        this.index = 0;\r\n        this.texture = null;\r\n        this.regionX = 0;\r\n        this.regionY = 0;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.invTexWidth = 0;\r\n        this.invTexHeight = 0;\r\n        this.originalWidth = 0;\r\n        this.originalHeight = 0;\r\n        this.offsetX = 0;\r\n        this.offsetY = 0;\r\n        this.u = 0;\r\n        this.v = 0;\r\n        this.u2 = 0;\r\n        this.v2 = 0;\r\n        this.rotated = false;\r\n        this.tmpTransform = new Affine2_1.Affine2();\r\n        if (!invTexWidth || !invTexHeight) {\r\n            invTexWidth = 1 / tex.width;\r\n            invTexHeight = 1 / tex.height;\r\n        }\r\n        const u = x * invTexWidth;\r\n        const v = (y + height) * invTexHeight;\r\n        const u2 = (x + width) * invTexWidth;\r\n        const v2 = y * invTexHeight;\r\n        this.texture = tex;\r\n        this.regionX = x;\r\n        this.regionY = y;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.originalWidth = width;\r\n        this.originalHeight = height;\r\n        this.offsetX = 0;\r\n        this.offsetY = 0;\r\n        this.u = u;\r\n        this.v = v;\r\n        this.u2 = u2;\r\n        this.v2 = v2;\r\n        this.rotated = rotate;\r\n        for (let key in extraData) {\r\n            this[key] = extraData[key];\r\n        }\r\n    }\r\n    static splitTexture(texture, cols, rows) {\r\n        const { width, height } = texture;\r\n        const regionWidth = width / cols;\r\n        const regionHeight = height / rows;\r\n        const regions = [];\r\n        for (let y = 0; y < rows; y++) {\r\n            for (let x = 0; x < cols; x++) {\r\n                regions.push(new TextureRegion(texture, x * regionWidth, y * regionHeight, regionWidth, regionHeight, {}));\r\n            }\r\n        }\r\n        return regions;\r\n    }\r\n    draw(batch, x, y, width, height, originX = 0, originY = 0, rotation = 0, scaleX = 1, scaleY = 1) {\r\n        const { originalWidth, originalHeight, offsetX, offsetY, width: regionWidth, height: regionHeight } = this;\r\n        const xRatio = width / originalWidth;\r\n        const yRatio = height / originalHeight;\r\n        const drawWidth = regionWidth * xRatio;\r\n        const drawHeight = regionHeight * yRatio;\r\n        const drawX = x + offsetX * xRatio;\r\n        let drawY = 0;\r\n        if (batch.yDown) {\r\n            drawY = y + height - offsetY * yRatio - drawHeight;\r\n        }\r\n        else {\r\n            drawY = y + offsetY * yRatio;\r\n        }\r\n        originX = originX - (drawX - x);\r\n        originY = originY - (drawY - y);\r\n        batch.draw(this.texture, drawX, drawY, drawWidth, drawHeight, originX, originY, rotation, scaleX, scaleY, this.u, this.v, this.u2, this.v2, this.rotated);\r\n    }\r\n    drawTransformed(batch, width, height, transform) {\r\n        const { originalWidth, originalHeight, offsetX, offsetY, width: regionWidth, height: regionHeight } = this;\r\n        const xRatio = width / originalWidth;\r\n        const yRatio = height / originalHeight;\r\n        const drawWidth = regionWidth * xRatio;\r\n        const drawHeight = regionHeight * yRatio;\r\n        const drawX = offsetX * xRatio;\r\n        let drawY = 0;\r\n        if (batch.yDown) {\r\n            drawY = height - offsetY * yRatio - drawHeight;\r\n        }\r\n        else {\r\n            drawY = offsetY * yRatio;\r\n        }\r\n        this.tmpTransform.set(transform);\r\n        this.tmpTransform.translate(drawX, drawY);\r\n        batch.drawTransformed(this.texture, drawWidth, drawHeight, this.tmpTransform, this.u, this.v, this.u2, this.v2, this.rotated);\r\n    }\r\n}\r\nexports.TextureRegion = TextureRegion;\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.concatAndResolveUrl = exports.ArrayMap = exports.copyArray = exports.createStage = exports.pointInRect = exports.resizeCanvas = exports.createGameLoop = exports.WindowedMean = exports.TimeKeeper = exports.Pools = exports.FlushablePool = exports.Pool = exports.Utils = exports.PowOut = exports.Pow = exports.Interpolation = exports.MathUtils = exports.Color = exports.StringSet = exports.IntSet = exports.Align = void 0;\r\nclass Align {\r\n    static isLeft(align) {\r\n        return (align & this.left) !== 0;\r\n    }\r\n    static isRight(align) {\r\n        return (align & this.right) !== 0;\r\n    }\r\n    static isTop(align) {\r\n        return (align & this.top) !== 0;\r\n    }\r\n    static isBottom(align) {\r\n        return (align & this.bottom) !== 0;\r\n    }\r\n    static isCenterVertical(align) {\r\n        return (align & this.top) === 0 && (align & this.bottom) === 0;\r\n    }\r\n    static isCenterHorizontal(align) {\r\n        return (align & this.left) === 0 && (align & this.right) === 0;\r\n    }\r\n}\r\nexports.Align = Align;\r\n_a = Align;\r\nAlign.center = 1 << 0;\r\nAlign.top = 1 << 1;\r\nAlign.bottom = 1 << 2;\r\nAlign.left = 1 << 3;\r\nAlign.right = 1 << 4;\r\nAlign.topLeft = _a.top | _a.left;\r\nAlign.topRight = _a.top | _a.right;\r\nAlign.bottomLeft = _a.bottom | _a.left;\r\nAlign.bottomRight = _a.bottom | _a.right;\r\nclass IntSet {\r\n    constructor() {\r\n        this.array = new Array();\r\n    }\r\n    add(value) {\r\n        let contains = this.contains(value);\r\n        this.array[value | 0] = value | 0;\r\n        return !contains;\r\n    }\r\n    contains(value) {\r\n        return this.array[value | 0] !== undefined;\r\n    }\r\n    remove(value) {\r\n        this.array[value | 0] = undefined;\r\n    }\r\n    clear() {\r\n        this.array.length = 0;\r\n    }\r\n}\r\nexports.IntSet = IntSet;\r\nclass StringSet {\r\n    constructor() {\r\n        this.entries = {};\r\n        this.size = 0;\r\n    }\r\n    add(value) {\r\n        let contains = this.entries[value];\r\n        this.entries[value] = true;\r\n        if (!contains) {\r\n            this.size++;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    addAll(values) {\r\n        let oldSize = this.size;\r\n        for (var i = 0, n = values.length; i < n; i++)\r\n            this.add(values[i]);\r\n        return oldSize !== this.size;\r\n    }\r\n    contains(value) {\r\n        return this.entries[value];\r\n    }\r\n    clear() {\r\n        this.entries = {};\r\n        this.size = 0;\r\n    }\r\n}\r\nexports.StringSet = StringSet;\r\nclass Color {\r\n    constructor(r = 0, g = 0, b = 0, a = 0) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n        this.a = a;\r\n    }\r\n    unsafeSet(r, g, b, a) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n        this.a = a;\r\n    }\r\n    set(r, g, b, a) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n        this.a = a;\r\n        return this.clamp();\r\n    }\r\n    setFromColor(c) {\r\n        this.r = c.r;\r\n        this.g = c.g;\r\n        this.b = c.b;\r\n        this.a = c.a;\r\n        return this;\r\n    }\r\n    setFromString(hex) {\r\n        hex = hex.charAt(0) === '#' ? hex.substring(1) : hex;\r\n        this.r = parseInt(hex.substring(0, 2), 16) / 255;\r\n        this.g = parseInt(hex.substring(2, 4), 16) / 255;\r\n        this.b = parseInt(hex.substring(4, 6), 16) / 255;\r\n        this.a = hex.length !== 8 ? 1 : parseInt(hex.substring(6, 8), 16) / 255;\r\n        return this;\r\n    }\r\n    add(r, g, b, a) {\r\n        this.r += r;\r\n        this.g += g;\r\n        this.b += b;\r\n        this.a += a;\r\n        return this.clamp();\r\n    }\r\n    clamp() {\r\n        if (this.r < 0)\r\n            this.r = 0;\r\n        else if (this.r > 1)\r\n            this.r = 1;\r\n        if (this.g < 0)\r\n            this.g = 0;\r\n        else if (this.g > 1)\r\n            this.g = 1;\r\n        if (this.b < 0)\r\n            this.b = 0;\r\n        else if (this.b > 1)\r\n            this.b = 1;\r\n        if (this.a < 0)\r\n            this.a = 0;\r\n        else if (this.a > 1)\r\n            this.a = 1;\r\n        return this;\r\n    }\r\n    lerp(target, t) {\r\n        this.r += t * (target.r - this.r);\r\n        this.g += t * (target.g - this.g);\r\n        this.b += t * (target.b - this.b);\r\n        this.a += t * (target.a - this.a);\r\n        return this.clamp();\r\n    }\r\n    mul(r, g, b, a) {\r\n        this.r *= r;\r\n        this.g *= g;\r\n        this.b *= b;\r\n        this.a *= a;\r\n        return this.clamp();\r\n    }\r\n    toIntBits() {\r\n        return ((255 * this.a) << 24) | ((255 * this.b) << 16) | ((255 * this.g) << 8) | (255 * this.r);\r\n    }\r\n    equals(other) {\r\n        if (this === other)\r\n            return true;\r\n        return this.toIntBits() === other.toIntBits();\r\n    }\r\n    static rgba8888ToColor(color, value) {\r\n        color.r = ((value & 0xff000000) >>> 24) / 255;\r\n        color.g = ((value & 0x00ff0000) >>> 16) / 255;\r\n        color.b = ((value & 0x0000ff00) >>> 8) / 255;\r\n        color.a = (value & 0x000000ff) / 255;\r\n    }\r\n    static rgb888ToColor(color, value) {\r\n        color.r = ((value & 0x00ff0000) >>> 16) / 255;\r\n        color.g = ((value & 0x0000ff00) >>> 8) / 255;\r\n        color.b = (value & 0x000000ff) / 255;\r\n    }\r\n    static fromString(hex) {\r\n        return new Color().setFromString(hex);\r\n    }\r\n}\r\nexports.Color = Color;\r\nColor.WHITE = new Color(1, 1, 1, 1);\r\nColor.RED = new Color(1, 0, 0, 1);\r\nColor.GREEN = new Color(0, 1, 0, 1);\r\nColor.BLUE = new Color(0, 0, 1, 1);\r\nColor.MAGENTA = new Color(1, 0, 1, 1);\r\nclass MathUtils {\r\n    static clamp(value, min, max) {\r\n        if (value < min)\r\n            return min;\r\n        if (value > max)\r\n            return max;\r\n        return value;\r\n    }\r\n    static cosDeg(degrees) {\r\n        return Math.cos(degrees * MathUtils.degRad);\r\n    }\r\n    static sinDeg(degrees) {\r\n        return Math.sin(degrees * MathUtils.degRad);\r\n    }\r\n    static signum(value) {\r\n        return value > 0 ? 1 : value < 0 ? -1 : 0;\r\n    }\r\n    static toInt(x) {\r\n        return x > 0 ? Math.floor(x) : Math.ceil(x);\r\n    }\r\n    static cbrt(x) {\r\n        let y = Math.pow(Math.abs(x), 1 / 3);\r\n        return x < 0 ? -y : y;\r\n    }\r\n    static randomTriangular(min, max) {\r\n        return MathUtils.randomTriangularWith(min, max, (min + max) * 0.5);\r\n    }\r\n    static randomTriangularWith(min, max, mode) {\r\n        let u = Math.random();\r\n        let d = max - min;\r\n        if (u <= (mode - min) / d)\r\n            return min + Math.sqrt(u * d * (mode - min));\r\n        return max - Math.sqrt((1 - u) * d * (max - mode));\r\n    }\r\n    static isPowerOfTwo(value) {\r\n        return value && (value & (value - 1)) === 0;\r\n    }\r\n    static isEqual(a, b) {\r\n        return Math.abs(a - b) <= MathUtils.FLOAT_ROUNDING_ERROR;\r\n    }\r\n    static isZero(value) {\r\n        return Math.abs(value) <= MathUtils.FLOAT_ROUNDING_ERROR;\r\n    }\r\n}\r\nexports.MathUtils = MathUtils;\r\nMathUtils.FLOAT_ROUNDING_ERROR = 0.000001; // 32 bits\r\nMathUtils.PI = 3.1415927;\r\nMathUtils.PI2 = MathUtils.PI * 2;\r\nMathUtils.radiansToDegrees = 180 / MathUtils.PI;\r\nMathUtils.radDeg = MathUtils.radiansToDegrees;\r\nMathUtils.degreesToRadians = MathUtils.PI / 180;\r\nMathUtils.degRad = MathUtils.degreesToRadians;\r\nclass Interpolation {\r\n    apply(start, end, a) {\r\n        return start + (end - start) * this.applyInternal(a);\r\n    }\r\n}\r\nexports.Interpolation = Interpolation;\r\nclass Pow extends Interpolation {\r\n    constructor(power) {\r\n        super();\r\n        this.power = 2;\r\n        this.power = power;\r\n    }\r\n    applyInternal(a) {\r\n        if (a <= 0.5)\r\n            return Math.pow(a * 2, this.power) / 2;\r\n        return Math.pow((a - 1) * 2, this.power) / (this.power % 2 === 0 ? -2 : 2) + 1;\r\n    }\r\n}\r\nexports.Pow = Pow;\r\nclass PowOut extends Pow {\r\n    // constructor(power: number) {\r\n    //   super(power);\r\n    // }\r\n    applyInternal(a) {\r\n        return Math.pow(a - 1, this.power) * (this.power % 2 === 0 ? -1 : 1) + 1;\r\n    }\r\n}\r\nexports.PowOut = PowOut;\r\nclass Utils {\r\n    static arrayCopy(source, sourceStart, dest, destStart, numElements) {\r\n        for (let i = sourceStart, j = destStart; i < sourceStart + numElements; i++, j++) {\r\n            dest[j] = source[i];\r\n        }\r\n    }\r\n    static arrayFill(array, fromIndex, toIndex, value) {\r\n        for (let i = fromIndex; i < toIndex; i++)\r\n            array[i] = value;\r\n    }\r\n    static setArraySize(array, size, value = 0) {\r\n        let oldSize = array.length;\r\n        if (oldSize === size)\r\n            return array;\r\n        array.length = size;\r\n        if (oldSize < size) {\r\n            for (let i = oldSize; i < size; i++)\r\n                array[i] = value;\r\n        }\r\n        return array;\r\n    }\r\n    static ensureArrayCapacity(array, size, value = 0) {\r\n        if (array.length >= size)\r\n            return array;\r\n        return Utils.setArraySize(array, size, value);\r\n    }\r\n    static newArray(size, defaultValue) {\r\n        let array = new Array(size);\r\n        for (let i = 0; i < size; i++)\r\n            array[i] = defaultValue;\r\n        return array;\r\n    }\r\n    static newFloatArray(size) {\r\n        if (Utils.SUPPORTS_TYPED_ARRAYS)\r\n            return new Float32Array(size);\r\n        else {\r\n            let array = new Array(size);\r\n            for (let i = 0; i < array.length; i++)\r\n                array[i] = 0;\r\n            return array;\r\n        }\r\n    }\r\n    static newShortArray(size) {\r\n        if (Utils.SUPPORTS_TYPED_ARRAYS)\r\n            return new Int16Array(size);\r\n        else {\r\n            let array = new Array(size);\r\n            for (let i = 0; i < array.length; i++)\r\n                array[i] = 0;\r\n            return array;\r\n        }\r\n    }\r\n    static toFloatArray(array) {\r\n        return Utils.SUPPORTS_TYPED_ARRAYS ? new Float32Array(array) : array;\r\n    }\r\n    static toSinglePrecision(value) {\r\n        return Utils.SUPPORTS_TYPED_ARRAYS ? Math.fround(value) : value;\r\n    }\r\n    static contains(array, element, identity = true) {\r\n        for (var i = 0; i < array.length; i++)\r\n            if (array[i] === element)\r\n                return true;\r\n        return false;\r\n    }\r\n    static enumValue(type, name) {\r\n        return type[name[0].toUpperCase() + name.slice(1)];\r\n    }\r\n    static getHashCodeOfString(s) {\r\n        var hash = 0, i, chr;\r\n        if (this.length === 0)\r\n            return hash;\r\n        for (i = 0; i < this.length; i++) {\r\n            chr = s.charCodeAt(i);\r\n            hash = (hash << 5) - hash + chr;\r\n            hash |= 0; // Convert to 32bit integer\r\n        }\r\n        return hash;\r\n    }\r\n}\r\nexports.Utils = Utils;\r\nUtils.SUPPORTS_TYPED_ARRAYS = typeof Float32Array !== 'undefined';\r\nclass Pool {\r\n    constructor(instantiator) {\r\n        this.items = new Array();\r\n        if (instantiator) {\r\n            this.instantiator = instantiator;\r\n        }\r\n        else {\r\n            this.instantiator = () => ({});\r\n        }\r\n    }\r\n    obtain() {\r\n        const item = this.items.length > 0 ? this.items.pop() : this.instantiator();\r\n        return item;\r\n    }\r\n    free(item) {\r\n        if (item === null || item === void 0 ? void 0 : item.reset) {\r\n            item.reset();\r\n        }\r\n        this.items.push(item);\r\n    }\r\n    freeAll(items) {\r\n        for (let i = 0; i < items.length; i++)\r\n            this.free(items[i]);\r\n    }\r\n    clear() {\r\n        this.items.length = 0;\r\n    }\r\n}\r\nexports.Pool = Pool;\r\nclass FlushablePool extends Pool {\r\n    constructor(instantiator) {\r\n        super(instantiator);\r\n        this.obtained = new Array();\r\n    }\r\n    obtain() {\r\n        const result = super.obtain();\r\n        this.obtained.push(result);\r\n        return result;\r\n    }\r\n    flush() {\r\n        super.freeAll(this.obtained);\r\n        this.obtained.length = 0;\r\n    }\r\n    free(object) {\r\n        const index = this.obtained.indexOf(object);\r\n        if (index > -1) {\r\n            this.obtained.splice(index, 1);\r\n        }\r\n        super.free(object);\r\n    }\r\n    freeAll(objects) {\r\n        for (let i = 0; i < objects.length; i++) {\r\n            const index = this.obtained.indexOf(objects[i]);\r\n            if (index >= 0) {\r\n                this.obtained.splice(index, 1);\r\n            }\r\n        }\r\n        super.freeAll(objects);\r\n    }\r\n}\r\nexports.FlushablePool = FlushablePool;\r\nclass Pools {\r\n    static free(name, object) {\r\n        if (this.pools[name]) {\r\n            this.pools[name].free(object);\r\n        }\r\n    }\r\n    static freeAll(name, objects) {\r\n        if (this.pools[name]) {\r\n            this.pools[name].freeAll(objects);\r\n        }\r\n    }\r\n    static get(name, instantiator) {\r\n        if (this.pools[name]) {\r\n            return this.pools[name];\r\n        }\r\n        this.pools[name] = new Pool(instantiator);\r\n        return this.pools[name];\r\n    }\r\n    static set(name, pool) {\r\n        this.pools[name] = pool;\r\n    }\r\n    static obtain(name, instantiator) {\r\n        return this.get(name, instantiator).obtain();\r\n    }\r\n}\r\nexports.Pools = Pools;\r\nPools.pools = {};\r\nclass TimeKeeper {\r\n    constructor() {\r\n        this.maxDelta = 0.064;\r\n        this.framesPerSecond = 0;\r\n        this.delta = 0;\r\n        this.totalTime = 0;\r\n        this.lastTime = Date.now() / 1000;\r\n        this.frameCount = 0;\r\n        this.frameTime = 0;\r\n    }\r\n    update() {\r\n        let now = Date.now() / 1000;\r\n        this.delta = now - this.lastTime;\r\n        this.frameTime += this.delta;\r\n        this.totalTime += this.delta;\r\n        if (this.delta > this.maxDelta)\r\n            this.delta = this.maxDelta;\r\n        this.lastTime = now;\r\n        this.frameCount++;\r\n        if (this.frameTime > 1) {\r\n            this.framesPerSecond = this.frameCount / this.frameTime;\r\n            this.frameTime = 0;\r\n            this.frameCount = 0;\r\n        }\r\n    }\r\n}\r\nexports.TimeKeeper = TimeKeeper;\r\nclass WindowedMean {\r\n    constructor(windowSize = 32) {\r\n        this.addedValues = 0;\r\n        this.lastValue = 0;\r\n        this.mean = 0;\r\n        this.dirty = true;\r\n        this.values = new Array(windowSize);\r\n    }\r\n    hasEnoughData() {\r\n        return this.addedValues >= this.values.length;\r\n    }\r\n    addValue(value) {\r\n        if (this.addedValues < this.values.length)\r\n            this.addedValues++;\r\n        this.values[this.lastValue++] = value;\r\n        if (this.lastValue > this.values.length - 1)\r\n            this.lastValue = 0;\r\n        this.dirty = true;\r\n    }\r\n    getMean() {\r\n        if (this.hasEnoughData()) {\r\n            if (this.dirty) {\r\n                let mean = 0;\r\n                for (let i = 0; i < this.values.length; i++)\r\n                    mean += this.values[i];\r\n                this.mean = mean / this.values.length;\r\n                this.dirty = false;\r\n            }\r\n            return this.mean;\r\n        }\r\n        return 0;\r\n    }\r\n}\r\nexports.WindowedMean = WindowedMean;\r\nconst createGameLoop = (update) => {\r\n    let lastUpdate = Date.now();\r\n    let fps = 0;\r\n    let running = true;\r\n    let requestId;\r\n    let frameInLastSecond = 0;\r\n    let elapsed = 0;\r\n    function loop() {\r\n        if (running) {\r\n            const delta = Date.now() - lastUpdate;\r\n            lastUpdate = Date.now();\r\n            frameInLastSecond++;\r\n            elapsed += delta;\r\n            if (elapsed >= 1000) {\r\n                fps = frameInLastSecond;\r\n                frameInLastSecond = 0;\r\n                elapsed -= 1000;\r\n            }\r\n            requestId = requestAnimationFrame(loop);\r\n            update(delta / 1000);\r\n        }\r\n    }\r\n    loop();\r\n    return {\r\n        isRunning: () => running,\r\n        start: () => {\r\n            if (!running) {\r\n                running = true;\r\n                loop();\r\n            }\r\n        },\r\n        stop: () => {\r\n            if (requestId) {\r\n                cancelAnimationFrame(requestId);\r\n            }\r\n            running = false;\r\n        },\r\n        getFps: () => fps\r\n    };\r\n};\r\nexports.createGameLoop = createGameLoop;\r\nconst resizeCanvas = (canvas, deviceRatio) => {\r\n    const devicePixelRatio = deviceRatio || window.devicePixelRatio || 1;\r\n    const displayWidth = canvas.clientWidth * devicePixelRatio;\r\n    const displayHeight = canvas.clientHeight * devicePixelRatio;\r\n    if (canvas.width !== displayWidth || canvas.height !== displayHeight) {\r\n        canvas.width = displayWidth;\r\n        canvas.height = displayHeight;\r\n    }\r\n    return [displayWidth, displayHeight];\r\n};\r\nexports.resizeCanvas = resizeCanvas;\r\nconst pointInRect = (pX, pY, x, y, width, height) => {\r\n    return pX > x && pX < x + width && pY > y && pY < y + height;\r\n};\r\nexports.pointInRect = pointInRect;\r\nconst createStage = (options) => {\r\n    const defaultOptions = {\r\n        hidden: false,\r\n        info: true\r\n    };\r\n    options = Object.assign(Object.assign({}, defaultOptions), options);\r\n    const wrapper = document.createElement('div');\r\n    wrapper.setAttribute('style', `position:fixed;top:0;left:0;right:0;bottom:0;`);\r\n    if (options.wrapperClassName) {\r\n        wrapper.className = options.wrapperClassName;\r\n    }\r\n    if (options.hidden) {\r\n        wrapper.style.display = 'none';\r\n    }\r\n    const canvas = document.createElement('canvas');\r\n    canvas.setAttribute('style', `width:100%;height:100%;`);\r\n    const info = document.createElement('div');\r\n    info.setAttribute('style', `position:absolute;top:1em;left:1em;color:white`);\r\n    if (!options.info) {\r\n        info.style.display = 'none';\r\n    }\r\n    wrapper.appendChild(canvas);\r\n    wrapper.appendChild(info);\r\n    document.body.appendChild(wrapper);\r\n    return {\r\n        getCanvas: () => canvas,\r\n        getInfo: () => info,\r\n        show: () => (wrapper.style.display = 'block'),\r\n        hide: () => (wrapper.style.display = 'none'),\r\n        cleanup: () => document.body.removeChild(wrapper)\r\n    };\r\n};\r\nexports.createStage = createStage;\r\nconst copyArray = (src, target, targetOffset = 0, srcOffset = 0, count = target.length) => {\r\n    for (let i = 0; i < count; i++) {\r\n        target[targetOffset + i] = src[srcOffset + i];\r\n    }\r\n};\r\nexports.copyArray = copyArray;\r\nclass ArrayMap {\r\n    constructor() {\r\n        this.keys = [];\r\n        this.values = [];\r\n        this.size = 0;\r\n    }\r\n    set(key, value) {\r\n        let index = this.indexOfKey(key);\r\n        if (index === -1) {\r\n            index = this.size++;\r\n        }\r\n        this.keys[index] = key;\r\n        this.values[index] = value;\r\n        return index;\r\n    }\r\n    get(key, defaultValue = null) {\r\n        let i = this.size - 1;\r\n        for (; i >= 0; i--) {\r\n            if (this.keys[i] === key)\r\n                return this.values[i];\r\n        }\r\n        return defaultValue;\r\n    }\r\n    indexOfKey(key) {\r\n        for (let i = 0, n = this.size; i < n; i++)\r\n            if (this.keys[i] === key)\r\n                return i;\r\n        return -1;\r\n    }\r\n    removeKey(key) {\r\n        for (let i = 0, n = this.size; i < n; i++) {\r\n            if (this.keys[i] === key) {\r\n                this.removeIndex(i);\r\n            }\r\n        }\r\n    }\r\n    removeIndex(index) {\r\n        if (index >= this.size)\r\n            throw new Error(`index out of bound`);\r\n        this.size--;\r\n        this.keys.splice(index, 1);\r\n        this.values.splice(index, 1);\r\n    }\r\n    clear() {\r\n        this.keys.length = 0;\r\n        this.values.length = 0;\r\n        this.size = 0;\r\n    }\r\n}\r\nexports.ArrayMap = ArrayMap;\r\nfunction concatAndResolveUrl(url, concat) {\r\n    let url1 = url.split('/');\r\n    let url2 = concat.split('/');\r\n    let url3 = [];\r\n    for (let i = 0, l = url1.length; i < l; i++) {\r\n        if (url1[i] === '..') {\r\n            url3.pop();\r\n        }\r\n        else if (url1[i] === '.') {\r\n            continue;\r\n        }\r\n        else {\r\n            url3.push(url1[i]);\r\n        }\r\n    }\r\n    for (let i = 0, l = url2.length; i < l; i++) {\r\n        if (url2[i] === '..') {\r\n            url3.pop();\r\n        }\r\n        else if (url2[i] === '.') {\r\n            continue;\r\n        }\r\n        else {\r\n            url3.push(url2[i]);\r\n        }\r\n    }\r\n    return url3.join('/');\r\n}\r\nexports.concatAndResolveUrl = concatAndResolveUrl;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Vector2 = void 0;\r\nclass Vector2 {\r\n    constructor(x = 0, y = 0) {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    getX() {\r\n        return this.x;\r\n    }\r\n    getY() {\r\n        return this.y;\r\n    }\r\n    set(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n        return this;\r\n    }\r\n    setVector(v) {\r\n        return this.set(v.x, v.y);\r\n    }\r\n    add(x, y) {\r\n        this.x += x;\r\n        this.y += y;\r\n        return this;\r\n    }\r\n    addVector(v) {\r\n        return this.add(v.x, v.y);\r\n    }\r\n    sub(x, y) {\r\n        return this.add(-x, -y);\r\n    }\r\n    subVector(v) {\r\n        return this.sub(v.x, v.y);\r\n    }\r\n    scale(scalar) {\r\n        this.x *= scalar;\r\n        this.y *= scalar;\r\n        return this;\r\n    }\r\n    dot(v) {\r\n        return this.x * v.x + this.y * v.y;\r\n    }\r\n    distanceSqr(v) {\r\n        const deltaX = this.x - v.x;\r\n        const deltaY = this.y - v.y;\r\n        return deltaX * deltaX + deltaY * deltaY;\r\n    }\r\n    distance(v) {\r\n        return Math.sqrt(this.distanceSqr(v));\r\n    }\r\n    angle() {\r\n        return Math.atan2(this.y, this.x);\r\n    }\r\n    len2() {\r\n        return this.x * this.x + this.y * this.y;\r\n    }\r\n    len() {\r\n        return Math.sqrt(this.len2());\r\n    }\r\n    nor() {\r\n        const len = this.len();\r\n        if (len !== 0) {\r\n            this.x /= len;\r\n            this.y /= len;\r\n        }\r\n        return this;\r\n    }\r\n    rotateRad(rad) {\r\n        const cos = Math.cos(rad);\r\n        const sin = Math.sin(rad);\r\n        const newX = this.x * cos - this.y * sin;\r\n        const newY = this.x * sin + this.y * cos;\r\n        this.x = newX;\r\n        this.y = newY;\r\n        return this;\r\n    }\r\n    rotate(degrees) {\r\n        return this.rotateRad((degrees * Math.PI) / 180);\r\n    }\r\n    cpy() {\r\n        return new Vector2(this.x, this.y);\r\n    }\r\n    mul(mat) {\r\n        const x = this.x * mat.val[0] + this.y * mat.val[3] + mat.val[6];\r\n        const y = this.x * mat.val[1] + this.y * mat.val[4] + mat.val[7];\r\n        this.x = x;\r\n        this.y = y;\r\n        return this;\r\n    }\r\n    lerp(target, alpha) {\r\n        const invAlpha = 1.0 - alpha;\r\n        this.x = this.x * invAlpha + target.x * alpha;\r\n        this.y = this.y * invAlpha + target.y * alpha;\r\n        return this;\r\n    }\r\n}\r\nexports.Vector2 = Vector2;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Vector3 = void 0;\r\nconst Matrix3_1 = require(\"./Matrix3\");\r\nconst Matrix4_1 = require(\"./Matrix4\");\r\nclass Vector3 {\r\n    constructor(x = 0, y = 0, z = 0) {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.z = 0;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n    isZero() {\r\n        return this.x === 0 && this.y === 0 && this.z === 0;\r\n    }\r\n    dst2(point) {\r\n        const a = point.x - this.x;\r\n        const b = point.y - this.y;\r\n        const c = point.z - this.z;\r\n        return a * a + b * b + c * c;\r\n    }\r\n    setFrom(v) {\r\n        this.x = v.x;\r\n        this.y = v.y;\r\n        this.z = v.z;\r\n        return this;\r\n    }\r\n    set(x, y, z) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        return this;\r\n    }\r\n    add(v) {\r\n        this.x += v.x;\r\n        this.y += v.y;\r\n        this.z += v.z;\r\n        return this;\r\n    }\r\n    sub(v) {\r\n        this.x -= v.x;\r\n        this.y -= v.y;\r\n        this.z -= v.z;\r\n        return this;\r\n    }\r\n    scale(s) {\r\n        this.x *= s;\r\n        this.y *= s;\r\n        this.z *= s;\r\n        return this;\r\n    }\r\n    normalize() {\r\n        let len = this.length();\r\n        if (len === 0)\r\n            return this;\r\n        len = 1 / len;\r\n        this.x *= len;\r\n        this.y *= len;\r\n        this.z *= len;\r\n        return this;\r\n    }\r\n    cross(v) {\r\n        return this.set(this.y * v.z - this.z * v.y, this.z * v.x - this.x * v.z, this.x * v.y - this.y * v.x);\r\n    }\r\n    multiply(matrix) {\r\n        let l_mat = matrix.values;\r\n        return this.set(this.x * l_mat[Matrix4_1.Matrix4.M00] + this.y * l_mat[Matrix4_1.Matrix4.M01] + this.z * l_mat[Matrix4_1.Matrix4.M02] + l_mat[Matrix4_1.Matrix4.M03], this.x * l_mat[Matrix4_1.Matrix4.M10] + this.y * l_mat[Matrix4_1.Matrix4.M11] + this.z * l_mat[Matrix4_1.Matrix4.M12] + l_mat[Matrix4_1.Matrix4.M13], this.x * l_mat[Matrix4_1.Matrix4.M20] + this.y * l_mat[Matrix4_1.Matrix4.M21] + this.z * l_mat[Matrix4_1.Matrix4.M22] + l_mat[Matrix4_1.Matrix4.M23]);\r\n    }\r\n    multiplyMat3(matrix) {\r\n        const l_mat = matrix.val;\r\n        return this.set(this.x * l_mat[Matrix3_1.Matrix3.M00] + this.y * l_mat[Matrix3_1.Matrix3.M01] + this.z * l_mat[Matrix3_1.Matrix3.M02], this.x * l_mat[Matrix3_1.Matrix3.M10] + this.y * l_mat[Matrix3_1.Matrix3.M11] + this.z * l_mat[Matrix3_1.Matrix3.M12], this.x * l_mat[Matrix3_1.Matrix3.M20] + this.y * l_mat[Matrix3_1.Matrix3.M21] + this.z * l_mat[Matrix3_1.Matrix3.M22]);\r\n    }\r\n    project(matrix) {\r\n        let l_mat = matrix.values;\r\n        let l_w = 1 /\r\n            (this.x * l_mat[Matrix4_1.Matrix4.M30] + this.y * l_mat[Matrix4_1.Matrix4.M31] + this.z * l_mat[Matrix4_1.Matrix4.M32] + l_mat[Matrix4_1.Matrix4.M33]);\r\n        return this.set((this.x * l_mat[Matrix4_1.Matrix4.M00] + this.y * l_mat[Matrix4_1.Matrix4.M01] + this.z * l_mat[Matrix4_1.Matrix4.M02] + l_mat[Matrix4_1.Matrix4.M03]) *\r\n            l_w, (this.x * l_mat[Matrix4_1.Matrix4.M10] + this.y * l_mat[Matrix4_1.Matrix4.M11] + this.z * l_mat[Matrix4_1.Matrix4.M12] + l_mat[Matrix4_1.Matrix4.M13]) *\r\n            l_w, (this.x * l_mat[Matrix4_1.Matrix4.M20] + this.y * l_mat[Matrix4_1.Matrix4.M21] + this.z * l_mat[Matrix4_1.Matrix4.M22] + l_mat[Matrix4_1.Matrix4.M23]) *\r\n            l_w);\r\n    }\r\n    unproject(output, invMatrix, viewX, viewY, viewWidth, viewHeight) {\r\n        let { x, y, z } = this;\r\n        x = x - viewX;\r\n        y = viewHeight - y - 1;\r\n        y = y - viewY;\r\n        output.set((2 * x) / viewWidth - 1, (2 * y) / viewHeight - 1, 2 * z - 1);\r\n        output.project(invMatrix);\r\n        return output;\r\n    }\r\n    dot(v) {\r\n        return this.x * v.x + this.y * v.y + this.z * v.z;\r\n    }\r\n    dotWithValue(x, y, z) {\r\n        return this.x * x + this.y * y + this.z * z;\r\n    }\r\n    rotate(axis, degrees) {\r\n        Vector3.tmpMat.setToRotation(axis, degrees);\r\n        return this.multiply(Vector3.tmpMat);\r\n    }\r\n    length() {\r\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n    }\r\n    length2() {\r\n        return this.x * this.x + this.y * this.y + this.z * this.z;\r\n    }\r\n    distance(v) {\r\n        let a = v.x - this.x;\r\n        let b = v.y - this.y;\r\n        let c = v.z - this.z;\r\n        return Math.sqrt(a * a + b * b + c * c);\r\n    }\r\n    lerp(target, alpha) {\r\n        this.x += alpha * (target.x - this.x);\r\n        this.y += alpha * (target.y - this.y);\r\n        this.z += alpha * (target.z - this.z);\r\n        return this;\r\n    }\r\n    equals(other) {\r\n        if (this === other)\r\n            return true;\r\n        return this.x === other.x && this.y === other.y && this.z === other.z;\r\n    }\r\n}\r\nexports.Vector3 = Vector3;\r\nVector3.X = new Vector3(1, 0, 0);\r\nVector3.Y = new Vector3(0, 1, 0);\r\nVector3.Z = new Vector3(0, 0, 1);\r\nVector3.Zero = new Vector3(0, 0, 0);\r\nVector3.tmpMat = new Matrix4_1.Matrix4();\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.createViewport = void 0;\r\nconst Camera_1 = require(\"./Camera\");\r\nconst Utils_1 = require(\"./Utils\");\r\nconst createViewport = (canvas, width, height, options) => {\r\n    const defaultOptions = {\r\n        autoUpdate: true,\r\n        pixelRatio: undefined,\r\n        crop: true\r\n    };\r\n    options = Object.assign(Object.assign({}, defaultOptions), options);\r\n    let contextOption;\r\n    if (options.disablePremultipliedAlpha) {\r\n        contextOption = {\r\n            premultipliedAlpha: false\r\n        };\r\n    }\r\n    contextOption = Object.assign(Object.assign({}, contextOption), options.contextOption);\r\n    let gl = canvas.getContext('webgl2', contextOption);\r\n    if (!gl) {\r\n        gl = canvas.getContext('webgl', contextOption);\r\n    }\r\n    const additionalCameras = [];\r\n    let { autoUpdate, pixelRatio, crop } = options;\r\n    pixelRatio = pixelRatio || window.devicePixelRatio || 1;\r\n    const viewportInfo = {\r\n        pixelRatio,\r\n        x: 0,\r\n        y: 0,\r\n        width,\r\n        height,\r\n        worldWidth: width,\r\n        worldHeight: height\r\n    };\r\n    let resizeHandler;\r\n    const [vWidth, vHeight] = (0, Utils_1.resizeCanvas)(canvas, pixelRatio);\r\n    const camera = new Camera_1.OrthoCamera(width, height, vWidth, vHeight);\r\n    if (autoUpdate) {\r\n        resizeHandler = e => {\r\n            viewportObject.update();\r\n        };\r\n        window.addEventListener('resize', resizeHandler);\r\n    }\r\n    const viewportObject = {\r\n        getViewportInfo() {\r\n            return viewportInfo;\r\n        },\r\n        getCamera() {\r\n            return camera;\r\n        },\r\n        addCamera(camera) {\r\n            additionalCameras.push(camera);\r\n        },\r\n        getContext() {\r\n            return gl;\r\n        },\r\n        getCanvas() {\r\n            return canvas;\r\n        },\r\n        update() {\r\n            let [vWidth, vHeight] = (0, Utils_1.resizeCanvas)(canvas, pixelRatio);\r\n            const ratio = width / height;\r\n            const vRatio = vWidth / vHeight;\r\n            if (crop) {\r\n                let displayWidth, displayHeight;\r\n                if (ratio < vRatio) {\r\n                    displayHeight = vHeight;\r\n                    displayWidth = vHeight * ratio;\r\n                }\r\n                else {\r\n                    displayWidth = vWidth;\r\n                    displayHeight = vWidth / ratio;\r\n                }\r\n                const displayX = (vWidth - displayWidth) / 2;\r\n                const displayY = (vHeight - displayHeight) / 2;\r\n                viewportInfo.x = displayX;\r\n                viewportInfo.y = displayY;\r\n                viewportInfo.width = displayWidth;\r\n                viewportInfo.height = displayHeight;\r\n                gl.viewport(displayX, displayY, displayWidth, displayHeight);\r\n                camera.setPosition(width / 2, height / 2);\r\n                camera.resize(width, height, displayWidth, displayHeight);\r\n                for (let camera of additionalCameras) {\r\n                    camera.setPosition(width / 2, height / 2);\r\n                    camera.resize(width, height, displayWidth, displayHeight);\r\n                }\r\n            }\r\n            else {\r\n                viewportInfo.x = 0;\r\n                viewportInfo.y = 0;\r\n                viewportInfo.width = vWidth;\r\n                viewportInfo.height = vHeight;\r\n                gl.viewport(0, 0, vWidth, vHeight);\r\n                let cameraWidth, cameraHeight, cameraX, cameraY;\r\n                if (ratio < vRatio) {\r\n                    cameraHeight = height;\r\n                    cameraWidth = cameraHeight * vRatio;\r\n                    cameraX = -(cameraWidth - width) / 2;\r\n                    cameraY = 0;\r\n                }\r\n                else {\r\n                    cameraWidth = width;\r\n                    cameraHeight = cameraWidth / vRatio;\r\n                    cameraX = 0;\r\n                    cameraY = -(cameraHeight - height) / 2;\r\n                }\r\n                camera.setPosition(cameraX + cameraWidth / 2, cameraY + cameraHeight / 2);\r\n                camera.resize(cameraWidth, cameraHeight, vWidth, vHeight);\r\n                for (let camera of additionalCameras) {\r\n                    camera.setPosition(cameraX + cameraWidth / 2, cameraY + cameraHeight / 2);\r\n                    camera.resize(cameraWidth, cameraHeight, vWidth, vHeight);\r\n                }\r\n            }\r\n        },\r\n        cleanUp() {\r\n            if (resizeHandler) {\r\n                window.removeEventListener('resize', resizeHandler);\r\n            }\r\n        }\r\n    };\r\n    autoUpdate && viewportObject.update();\r\n    return viewportObject;\r\n};\r\nexports.createViewport = createViewport;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ViewportInputHandler = void 0;\r\nconst InputHandler_1 = require(\"./InputHandler\");\r\nconst Vector2_1 = require(\"./Vector2\");\r\nconst createViewportAwareInputListener = (handler, viewport) => {\r\n    return (x, y) => {\r\n        const { x: vX, y: vY, pixelRatio } = viewport.getViewportInfo();\r\n        x = x * pixelRatio - vX;\r\n        y = y * pixelRatio - vY;\r\n        handler(x, y);\r\n    };\r\n};\r\nclass ViewportInputHandler {\r\n    constructor(viewport) {\r\n        this.screenCoord = new Vector2_1.Vector2();\r\n        this.worldCoord = new Vector2_1.Vector2();\r\n        this.viewport = viewport;\r\n        this.canvas = viewport.getCanvas();\r\n        this.inputHandler = new InputHandler_1.InputHandler(this.canvas);\r\n    }\r\n    isTouched() {\r\n        return this.inputHandler.isTouched();\r\n    }\r\n    cleanup() {\r\n        this.inputHandler.cleanup();\r\n    }\r\n    addEventListener(event, listener) {\r\n        this.inputHandler.addEventListener(event, createViewportAwareInputListener(listener, this.viewport));\r\n    }\r\n    getX(index = 0) {\r\n        const { x: vX, pixelRatio } = this.viewport.getViewportInfo();\r\n        return this.inputHandler.getX(index) * pixelRatio - vX;\r\n    }\r\n    getY(index = 0) {\r\n        const { y: vY, pixelRatio } = this.viewport.getViewportInfo();\r\n        return this.inputHandler.getY(index) * pixelRatio - vY;\r\n    }\r\n    getTouchedWorldCoord(camera) {\r\n        if (!camera) {\r\n            camera = this.viewport.getCamera();\r\n        }\r\n        this.screenCoord.set(this.getX(), this.getY());\r\n        camera.unprojectVector2(this.worldCoord, this.screenCoord);\r\n        return this.worldCoord;\r\n    }\r\n    getTotalTouched() {\r\n        return this.inputHandler.touches;\r\n    }\r\n}\r\nexports.ViewportInputHandler = ViewportInputHandler;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./3d\"), exports);\r\n__exportStar(require(\"./Affine2\"), exports);\r\n__exportStar(require(\"./Animation\"), exports);\r\n__exportStar(require(\"./AssetManager\"), exports);\r\n__exportStar(require(\"./BitmapFont\"), exports);\r\n__exportStar(require(\"./BitmapFontCache\"), exports);\r\n__exportStar(require(\"./BitmapFontData\"), exports);\r\n__exportStar(require(\"./BoundingBox\"), exports);\r\n__exportStar(require(\"./Camera\"), exports);\r\n__exportStar(require(\"./Game\"), exports);\r\n__exportStar(require(\"./Glyph\"), exports);\r\n__exportStar(require(\"./GlyphLayout\"), exports);\r\n__exportStar(require(\"./GlyphRun\"), exports);\r\n__exportStar(require(\"./InputHandler\"), exports);\r\n__exportStar(require(\"./Matrix4\"), exports);\r\n__exportStar(require(\"./Mesh\"), exports);\r\n__exportStar(require(\"./NumberUtils\"), exports);\r\n__exportStar(require(\"./PolygonBatcher\"), exports);\r\n__exportStar(require(\"./Quaternion\"), exports);\r\n__exportStar(require(\"./Shader\"), exports);\r\n__exportStar(require(\"./ShapeRenderer\"), exports);\r\n__exportStar(require(\"./Sprite\"), exports);\r\n__exportStar(require(\"./Texture\"), exports);\r\n__exportStar(require(\"./TextureAtlas\"), exports);\r\n__exportStar(require(\"./TextureRegion\"), exports);\r\n__exportStar(require(\"./Utils\"), exports);\r\n__exportStar(require(\"./Vector2\"), exports);\r\n__exportStar(require(\"./Vector3\"), exports);\r\n__exportStar(require(\"./Viewport\"), exports);\r\n__exportStar(require(\"./ViewportInputHandler\"), exports);\r\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nmodule.exports = _createForOfIteratorHelper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct.js\");\n\nvar possibleConstructorReturn = require(\"./possibleConstructorReturn.js\");\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}\n\nmodule.exports = _createSuper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var superPropBase = require(\"./superPropBase.js\");\n\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get.bind(), module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n\n      return desc.value;\n    }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  }\n\n  return _get.apply(this, arguments);\n}\n\nmodule.exports = _get, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nfunction _regeneratorRuntime() {\n  \"use strict\";\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) {\n            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n          }\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\n\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableRest = require(\"./nonIterableRest.js\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nexport default function _regeneratorRuntime() {\n  \"use strict\";\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  };\n\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) {\n            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n          }\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export class Constants {\r\n  public static readonly SCREEN_WIDTH = 750;\r\n  public static readonly SCREEN_HEIGHT = 1500;\r\n  public static readonly DEFAULT_DIRECTION_X = 5;\r\n  public static readonly DEFAULT_DIRECTION_Y = 0;\r\n}\r\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import { Component } from \"flat-ecs\";\r\n\r\nexport class Health extends Component {\r\n  hp: number;\r\n  maxHP: number;\r\n\r\n  setHp(hp: number) {\r\n    this.hp = hp;\r\n  }\r\n  setMaxHP(maxHP: number) {\r\n    this.maxHP = maxHP;\r\n  }\r\n}\r\n","import { Component } from \"flat-ecs\";\r\nimport { Vector2 } from \"gdxts\";\r\n\r\nexport class Moveable extends Component {\r\n  direction: Vector2 = new Vector2();\r\n  speed: number;\r\n  setDirection(x: number, y: number) {\r\n    this.direction.set(x, y);\r\n  }\r\n  setSpeed(speed: number) {\r\n    this.speed = speed;\r\n  }\r\n}\r\n","import { Component } from \"flat-ecs\";\r\nimport { Vector2 } from \"gdxts\";\r\n\r\nexport class Spartial extends Component {\r\n  pos: Vector2 = new Vector2(0, 0);\r\n  radius: number = 0;\r\n  rotation: number = 0;\r\n  speed: number = 0;\r\n  setPos(x: number, y: number) {\r\n    this.pos.set(x, y);\r\n  }\r\n  setRadius(r: number) {\r\n    this.radius = r;\r\n  }\r\n  setRotation(r: number) {\r\n    this.rotation = r;\r\n  }\r\n  setSpeed(s: number) {\r\n    this.speed = s;\r\n  }\r\n}\r\n","export default function _initializerDefineProperty(target, property, descriptor, context) {\n  if (!descriptor) return;\n  Object.defineProperty(target, property, {\n    enumerable: descriptor.enumerable,\n    configurable: descriptor.configurable,\n    writable: descriptor.writable,\n    value: descriptor.initializer ? descriptor.initializer.call(context) : void 0\n  });\n}","export default function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object.keys(descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object.defineProperty(target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}","import { Component } from \"flat-ecs\";\r\n\r\nexport class Damage extends Component {\r\n  damage: number;\r\n\r\n  setDmg(dmg: number) {\r\n    this.damage = dmg;\r\n  }\r\n}\r\n","import { Archetype, Inject, System } from \"flat-ecs\";\r\nimport { Damage } from \"../component/Damage\";\r\nimport { Spartial } from \"../component/Spatial\";\r\nimport { ConfigGame } from \"../dto/ConfigGame\";\r\nimport { GameState } from \"../dto/GameState\";\r\nimport { LevelState } from \"../dto/LevelState\";\r\nimport { PowerEnemy } from \"../dto/PowerEnemy\";\r\n\r\nexport class UpgradeLevelSystem extends System {\r\n  @Inject(\"levelState\") levelState: LevelState;\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n  @Inject(\"powerEnemy\") powerEnemy: PowerEnemy;\r\n\r\n  protectBallArchetype = new Archetype([Spartial, Damage]);\r\n  offsetProtectBall = 100;\r\n\r\n  process(): void {\r\n    if (this.levelState.exp >= this.levelState.maxExp) {\r\n      this.levelState.exp = 1;\r\n      this.levelState.currentLevel++;\r\n      this.configGame.enemysRespawnTime *= 2;\r\n      this.powerEnemy.hp += 75;\r\n      for (let i = this.configGame.amountProtectBall - 1; i >= 0; i--) {\r\n        this.world.deleteEntity(this.gameState.protectBall[i]);\r\n        this.gameState.protectBall.splice(i, 1);\r\n      }\r\n      this.configGame.amountProtectBall = Math.max(\r\n        this.configGame.amountProtectBall - 5,\r\n        0\r\n      );\r\n\r\n      if (this.levelState.currentLevel === 1) {\r\n        this.levelState.maxExp = 100;\r\n      }\r\n      if (this.levelState.currentLevel === 2) {\r\n        this.levelState.maxExp = 70;\r\n      }\r\n      if (this.levelState.currentLevel === 3) {\r\n        this.levelState.maxExp = 50;\r\n      }\r\n      if (this.levelState.currentLevel === 4) {\r\n        this.levelState.maxExp = 30;\r\n      }\r\n\r\n      if (this.levelState.role === 1) {\r\n        this.configGame.normalAttack *= 2;\r\n        this.configGame.speedProtectBall++;\r\n        this.configGame.cooldownSkill3 *= 2;\r\n\r\n        for (let i = 0; i < this.configGame.amountProtectBall; i++) {\r\n          const protectBall = this.world.createEntityByArchetype(\r\n            this.protectBallArchetype\r\n          );\r\n          this.gameState.protectBall.push(protectBall);\r\n          const damageProtectBall = this.world.getComponent(\r\n            protectBall,\r\n            Damage\r\n          );\r\n          damageProtectBall.setDmg(50);\r\n          const spartialProtectBall = this.world.getComponent(\r\n            protectBall,\r\n            Spartial\r\n          );\r\n          spartialProtectBall.pos.set(\r\n            this.offsetProtectBall,\r\n            this.offsetProtectBall\r\n          );\r\n          spartialProtectBall.setRadius(15);\r\n          spartialProtectBall.setRotation(\r\n            (360 / this.configGame.amountProtectBall) * i\r\n          );\r\n        }\r\n      }\r\n      if (this.levelState.role === 2) {\r\n        this.configGame.sizeSkill1Mage /= 1.5;\r\n        this.configGame.laserCooldown += 0.5;\r\n\r\n        for (let i = 0; i < this.configGame.amountProtectBall; i++) {\r\n          const protectBall = this.world.createEntityByArchetype(\r\n            this.protectBallArchetype\r\n          );\r\n          this.gameState.protectBall.push(protectBall);\r\n          const damageProtectBall = this.world.getComponent(\r\n            protectBall,\r\n            Damage\r\n          );\r\n          damageProtectBall.setDmg(50);\r\n          const spartialProtectBall = this.world.getComponent(\r\n            protectBall,\r\n            Spartial\r\n          );\r\n          spartialProtectBall.pos.set(\r\n            this.offsetProtectBall,\r\n            this.offsetProtectBall\r\n          );\r\n          spartialProtectBall.setRadius(15);\r\n          spartialProtectBall.setRotation(\r\n            (360 / this.configGame.amountProtectBall) * i\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { System, Inject } from \"flat-ecs\";\r\nimport { OrthoCamera } from \"gdxts\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { Constants } from \"../../Constant\";\r\nimport { GameState } from \"../../dto/GameState\";\r\n\r\nexport class CameraProcessingSystem extends System {\r\n  @Inject(\"cameraGame\") cameraGame: OrthoCamera;\r\n  @Inject(\"gameState\") gameState: GameState;\r\n\r\n  // initialized(): void {\r\n  //   this.cameraGame.setPosition(\r\n  //     Constants.SCREEN_WIDTH / 2,\r\n  //     Constants.SCREEN_HEIGHT / 2\r\n  //   );\r\n\r\n  //   this.cameraGame.update();\r\n  // }\r\n  process(): void {\r\n    const spartial = this.world.getComponent(this.gameState.playerID, Spartial);\r\n\r\n    this.cameraGame.setPosition(spartial.pos.x, spartial.pos.y);\r\n\r\n    this.cameraGame.update();\r\n  }\r\n}\r\n","import { System, Inject } from \"flat-ecs\";\r\nimport { Color, OrthoCamera, ShapeRenderer, Vector2 } from \"gdxts\";\r\nimport { Health } from \"../../component/Health\";\r\nimport { GameState } from \"../../dto/GameState\";\r\nimport { JoyStick } from \"../../dto/JoyStick\";\r\n\r\nexport class JoystickRenderSystem extends System {\r\n  @Inject(\"shapeRenderer\") shapeRenderer: ShapeRenderer;\r\n  @Inject(\"cameraUI\") cameraUI: OrthoCamera;\r\n  @Inject(\"cameraGame\") cameraGame: OrthoCamera;\r\n  @Inject(\"gameState\") gameState: GameState;\r\n\r\n  @Inject(\"joyStick\") joyStick: JoyStick;\r\n\r\n  process(): void {\r\n    //joystick\r\n    const healthPlayer = this.world.getComponent(\r\n      this.gameState.playerID,\r\n      Health\r\n    );\r\n\r\n    this.shapeRenderer.setProjection(this.cameraUI.combined);\r\n    this.shapeRenderer.begin();\r\n    if (healthPlayer.hp >= 0) {\r\n      this.shapeRenderer.circle(\r\n        false,\r\n        this.joyStick.origin.x,\r\n        this.joyStick.origin.y,\r\n        125,\r\n        Color.WHITE\r\n      );\r\n      this.shapeRenderer.circle(\r\n        true,\r\n        this.joyStick.thumbPos.x,\r\n        this.joyStick.thumbPos.y,\r\n        35,\r\n        Color.WHITE\r\n      );\r\n    }\r\n\r\n    this.shapeRenderer.end();\r\n    this.shapeRenderer.setProjection(this.cameraGame.combined);\r\n  }\r\n}\r\n","import { Inject, System } from \"flat-ecs\";\r\nimport { Vector2, ViewportInputHandler } from \"gdxts\";\r\nimport { Constants } from \"../../Constant\";\r\nimport { JoyStick } from \"../../dto/JoyStick\";\r\n\r\nexport class JoystickSystem extends System {\r\n  @Inject(\"inputHandler\") inputHandler: ViewportInputHandler;\r\n  @Inject(\"joyStick\") joyStick: JoyStick;\r\n\r\n  tempTouchedWorldCoord = new Vector2();\r\n  tempDirection = new Vector2(\r\n    Constants.DEFAULT_DIRECTION_X,\r\n    Constants.DEFAULT_DIRECTION_Y\r\n  );\r\n\r\n  initialized(): void {}\r\n  process(): void {\r\n    //moveMainChar\r\n    if (\r\n      this.inputHandler.isTouched() &&\r\n      this.inputHandler.getTouchedWorldCoord().y < Constants.SCREEN_HEIGHT / 2\r\n    ) {\r\n      if (this.joyStick.touched === false) {\r\n        this.joyStick.origin.setVector(\r\n          this.inputHandler.getTouchedWorldCoord()\r\n        );\r\n      }\r\n      this.joyStick.touched = true;\r\n      this.joyStick.move = true;\r\n\r\n      if (!this.joyStick.dragging) {\r\n        this.joyStick.dragging = true;\r\n      }\r\n\r\n      this.joyStick.direction\r\n        .setVector(this.inputHandler.getTouchedWorldCoord())\r\n        .subVector(this.joyStick.origin)\r\n        .nor();\r\n\r\n      if (\r\n        this.joyStick.direction.x < 0 &&\r\n        this.tempTouchedWorldCoord.x - this.joyStick.origin.x >\r\n          this.joyStick.direction.x * 125\r\n      ) {\r\n        this.joyStick.thumbPos.setVector(\r\n          this.inputHandler.getTouchedWorldCoord()\r\n        );\r\n      } else if (\r\n        this.joyStick.direction.x > 0 &&\r\n        this.tempTouchedWorldCoord.x - this.joyStick.origin.x <\r\n          this.joyStick.direction.x * 125\r\n      ) {\r\n        this.joyStick.thumbPos.setVector(\r\n          this.inputHandler.getTouchedWorldCoord()\r\n        );\r\n      } else {\r\n        this.joyStick.thumbPos\r\n          .setVector(this.joyStick.direction)\r\n          .scale(125)\r\n          .addVector(this.joyStick.origin);\r\n      }\r\n\r\n      this.tempTouchedWorldCoord.setVector(\r\n        this.inputHandler.getTouchedWorldCoord()\r\n      );\r\n    } else {\r\n      this.tempDirection.setVector(this.joyStick.direction);\r\n\r\n      this.joyStick.dragging = false;\r\n      this.joyStick.origin.set(400, 300);\r\n      this.joyStick.thumbPos.set(400, 300);\r\n    }\r\n  }\r\n}\r\n","import { Inject, System } from \"flat-ecs\";\r\nimport { Damage } from \"../../component/Damage\";\r\nimport { Health } from \"../../component/Health\";\r\nimport { Moveable } from \"../../component/Movable\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { GameState } from \"../../dto/GameState\";\r\n\r\nexport class NormalAttackProcessingSystem extends System {\r\n  @Inject(\"gameState\") gameState: GameState;\r\n\r\n  process(): void {\r\n    //Out of ScreenGame\r\n    const spartialPlayer = this.world.getComponent(\r\n      this.gameState.playerID,\r\n      Spartial\r\n    );\r\n    for (let i = 0; i < this.gameState.normalAttackBulletIDs.length; i++) {\r\n      const spartialBullet = this.world.getComponent(\r\n        this.gameState.normalAttackBulletIDs[i],\r\n        Spartial\r\n      );\r\n      if (spartialPlayer.pos.distance(spartialBullet.pos) > 350) {\r\n        this.world.deleteEntity(this.gameState.normalAttackBulletIDs[i]);\r\n        this.gameState.normalAttackBulletIDs.splice(i, 1);\r\n      }\r\n    }\r\n    for (let i = this.gameState.normalAttackBulletIDs.length - 1; i >= 0; i--) {\r\n      const spartialBullet = this.world.getComponent(\r\n        this.gameState.normalAttackBulletIDs[i],\r\n        Spartial\r\n      );\r\n      const moveAbleBullet = this.world.getComponent(\r\n        this.gameState.normalAttackBulletIDs[i],\r\n        Moveable\r\n      );\r\n      const damageBullet = this.world.getComponent(\r\n        this.gameState.normalAttackBulletIDs[i],\r\n        Damage\r\n      );\r\n\r\n      spartialBullet.pos.add(\r\n        moveAbleBullet.direction.x * moveAbleBullet.speed,\r\n        moveAbleBullet.direction.y * moveAbleBullet.speed\r\n      );\r\n      //Collision\r\n      for (let j = this.gameState.enemyIDs.length - 1; j >= 0; j--) {\r\n        const spartialEnemy = this.world.getComponent(\r\n          this.gameState.enemyIDs[j],\r\n          Spartial\r\n        );\r\n        const heathEnemy = this.world.getComponent(\r\n          this.gameState.enemyIDs[j],\r\n          Health\r\n        );\r\n        if (\r\n          spartialEnemy.pos.x <= spartialBullet.pos.x + spartialBullet.radius &&\r\n          spartialEnemy.pos.x >= spartialBullet.pos.x - spartialBullet.radius &&\r\n          spartialEnemy.pos.y <= spartialBullet.pos.y + spartialBullet.radius &&\r\n          spartialEnemy.pos.y >= spartialBullet.pos.y - spartialBullet.radius\r\n        ) {\r\n          // this.world.deleteEntity(this.gameState.normalAttackBulletIDs[i]);\r\n          heathEnemy.hp = Math.max(heathEnemy.hp - damageBullet.damage, 0);\r\n          // this.gameState.normalAttackBulletIDs.splice(i, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { System, Inject } from \"flat-ecs\";\r\nimport { Color, ShapeRenderer } from \"gdxts\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { ConfigGame } from \"../../dto/ConfigGame\";\r\nimport { GameState } from \"../../dto/GameState\";\r\n\r\nexport class NormalAttackRenderSystem extends System {\r\n  @Inject(\"shapeRenderer\") shapeRenderer: ShapeRenderer;\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n\r\n  process(): void {\r\n    this.shapeRenderer.begin();\r\n    for (let i = 0; i < this.gameState.normalAttackBulletIDs.length; i++) {\r\n      const spartialBullet = this.world.getComponent(\r\n        this.gameState.normalAttackBulletIDs[i],\r\n        Spartial\r\n      );\r\n      this.shapeRenderer.circle(\r\n        true,\r\n        spartialBullet.pos.x,\r\n        spartialBullet.pos.y,\r\n        spartialBullet.radius,\r\n        Color.RED\r\n      );\r\n    }\r\n\r\n    this.shapeRenderer.end();\r\n  }\r\n}\r\n","import { Archetype, Inject, System } from \"flat-ecs\";\r\nimport { Vector2 } from \"gdxts\";\r\nimport { Damage } from \"../../component/Damage\";\r\nimport { Moveable } from \"../../component/Movable\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { ConfigGame } from \"../../dto/ConfigGame\";\r\nimport { GameState } from \"../../dto/GameState\";\r\nimport { JoyStick } from \"../../dto/JoyStick\";\r\nimport { LevelState } from \"../../dto/LevelState\";\r\n\r\nexport class NormalAttackSpawningSystem extends System {\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n  @Inject(\"joyStick\") joyStick: JoyStick;\r\n  @Inject(\"levelState\") levelState: LevelState;\r\n  cooldownNormalAttack = -3;\r\n\r\n  process(): void {\r\n    this.cooldownNormalAttack += this.world.delta;\r\n\r\n    const spartialPlayer = this.world.getComponent(\r\n      this.gameState.playerID,\r\n      Spartial\r\n    );\r\n    //normalAttack\r\n    if (\r\n      this.cooldownNormalAttack >= this.configGame.normalAttack &&\r\n      this.joyStick.direction != new Vector2(0, 0) &&\r\n      this.levelState.currentLevel <= 3\r\n    ) {\r\n      for (\r\n        let i = -2 + (this.levelState.currentLevel - 1);\r\n        i <= 2 - (this.levelState.currentLevel - 1);\r\n        i++\r\n      ) {\r\n        const normalAttackAchetype = new Archetype([\r\n          Spartial,\r\n          Moveable,\r\n          Damage,\r\n        ]);\r\n        const normalAttack =\r\n          this.world.createEntityByArchetype(normalAttackAchetype);\r\n        this.gameState.normalAttackBulletIDs.push(normalAttack);\r\n        const spartialBullet = this.world.getComponent(\r\n          this.gameState.normalAttackBulletIDs[\r\n            this.gameState.normalAttackBulletIDs.length - 1\r\n          ],\r\n          Spartial\r\n        );\r\n        const moveAbleBullet = this.world.getComponent(\r\n          this.gameState.normalAttackBulletIDs[\r\n            this.gameState.normalAttackBulletIDs.length - 1\r\n          ],\r\n          Moveable\r\n        );\r\n        const damageBullet = this.world.getComponent(\r\n          this.gameState.normalAttackBulletIDs[\r\n            this.gameState.normalAttackBulletIDs.length - 1\r\n          ],\r\n          Damage\r\n        );\r\n        spartialBullet.setPos(spartialPlayer.pos.x, spartialPlayer.pos.y);\r\n        spartialBullet.setRadius(25);\r\n\r\n        moveAbleBullet.setDirection(\r\n          this.joyStick.direction.x,\r\n          this.joyStick.direction.y\r\n        );\r\n        moveAbleBullet.direction.rotate(5 * i);\r\n\r\n        moveAbleBullet.setSpeed(20);\r\n        damageBullet.setDmg(50 * this.levelState.currentLevel);\r\n      }\r\n\r\n      this.cooldownNormalAttack = 0;\r\n    }\r\n    if (this.levelState.currentLevel === 4) {\r\n      if (\r\n        this.cooldownNormalAttack >= this.configGame.normalAttack &&\r\n        this.joyStick.direction != new Vector2(0, 0)\r\n      ) {\r\n        const normalAttackAchetype = new Archetype([\r\n          Spartial,\r\n          Moveable,\r\n          Damage,\r\n        ]);\r\n        const normalAttack =\r\n          this.world.createEntityByArchetype(normalAttackAchetype);\r\n        this.gameState.normalAttackBulletIDs.push(normalAttack);\r\n        const spartialBullet = this.world.getComponent(\r\n          this.gameState.normalAttackBulletIDs[\r\n            this.gameState.normalAttackBulletIDs.length - 1\r\n          ],\r\n          Spartial\r\n        );\r\n        const moveAbleBullet = this.world.getComponent(\r\n          this.gameState.normalAttackBulletIDs[\r\n            this.gameState.normalAttackBulletIDs.length - 1\r\n          ],\r\n          Moveable\r\n        );\r\n        const damageBullet = this.world.getComponent(\r\n          this.gameState.normalAttackBulletIDs[\r\n            this.gameState.normalAttackBulletIDs.length - 1\r\n          ],\r\n          Damage\r\n        );\r\n        spartialBullet.setPos(spartialPlayer.pos.x, spartialPlayer.pos.y);\r\n        spartialBullet.setRadius(10);\r\n\r\n        moveAbleBullet.setDirection(\r\n          this.joyStick.direction.x,\r\n          this.joyStick.direction.y\r\n        );\r\n        moveAbleBullet.direction.rotate(0);\r\n\r\n        moveAbleBullet.setSpeed(20);\r\n        damageBullet.setDmg(25 * this.levelState.currentLevel);\r\n\r\n        this.cooldownNormalAttack = 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Inject, System } from \"flat-ecs\";\r\nimport {\r\n  AssetManager,\r\n  Color,\r\n  OrthoCamera,\r\n  PolygonBatch,\r\n  ShapeRenderer,\r\n  Texture,\r\n  Vector2,\r\n} from \"gdxts\";\r\nimport { Health } from \"../component/Health\";\r\nimport { Spartial } from \"../component/Spatial\";\r\nimport { GameState } from \"../dto/GameState\";\r\nimport { LevelState } from \"../dto/LevelState\";\r\n\r\nexport class PlayerRenderSystem extends System {\r\n  @Inject(\"shapeRenderer\") shapeRenderer: ShapeRenderer;\r\n  @Inject(\"assetManager\") assetManager: AssetManager;\r\n  @Inject(\"batch\") batch: PolygonBatch;\r\n  @Inject(\"cameraGame\") cameraGame: OrthoCamera;\r\n  @Inject(\"cameraUI\") cameraUI: OrthoCamera;\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"levelState\") levelState: LevelState;\r\n\r\n  width = 50;\r\n  offset = 30;\r\n  tempDirection = new Vector2(0, 0);\r\n  offsetAngle = 45;\r\n  knight1: Texture;\r\n  knight2: Texture;\r\n  knight3: Texture;\r\n  knight4: Texture;\r\n  knight5: Texture;\r\n\r\n  mage1: Texture;\r\n  mage2: Texture;\r\n  mage3: Texture;\r\n  mage4: Texture;\r\n  mage5: Texture;\r\n\r\n  initialized(): void {\r\n    this.knight1 = this.assetManager.getTexture(\"knight1\") as Texture;\r\n    this.knight2 = this.assetManager.getTexture(\"knight2\") as Texture;\r\n    this.knight3 = this.assetManager.getTexture(\"knight3\") as Texture;\r\n    this.knight4 = this.assetManager.getTexture(\"knight4\") as Texture;\r\n\r\n    this.mage1 = this.assetManager.getTexture(\"mage1\") as Texture;\r\n    this.mage2 = this.assetManager.getTexture(\"mage2\") as Texture;\r\n    this.mage3 = this.assetManager.getTexture(\"mage3\") as Texture;\r\n    this.mage4 = this.assetManager.getTexture(\"mage4\") as Texture;\r\n  }\r\n\r\n  process(): void {\r\n    const spartial = this.world.getComponent(this.gameState.playerID, Spartial);\r\n    const healthPlayer = this.world.getComponent(\r\n      this.gameState.playerID,\r\n      Health\r\n    );\r\n    this.shapeRenderer.begin();\r\n\r\n    if (healthPlayer.hp > 0) {\r\n      // this.shapeRenderer.circle(\r\n      //   true,\r\n      //   spartial.pos.x,\r\n      //   spartial.pos.y,\r\n      //   spartial.radius,\r\n      //   Color.GREEN\r\n      // );\r\n\r\n      this.shapeRenderer.rect(\r\n        true,\r\n        spartial.pos.x - this.offset,\r\n        spartial.pos.y - this.offset - 15,\r\n        this.width * (healthPlayer.hp / healthPlayer.maxHP),\r\n        15,\r\n        Color.RED\r\n      );\r\n      this.shapeRenderer.rect(\r\n        false,\r\n        spartial.pos.x - this.offset,\r\n        spartial.pos.y - this.offset - 15,\r\n        this.width,\r\n        15\r\n      );\r\n      //exp\r\n      this.shapeRenderer.rect(\r\n        true,\r\n        spartial.pos.x - this.offset - 1,\r\n        spartial.pos.y - this.offset - 25,\r\n        this.width * (this.levelState.exp / this.levelState.maxExp),\r\n        10,\r\n        Color.WHITE\r\n      );\r\n      this.tempDirection.set(50, 50);\r\n      this.tempDirection.rotate(spartial.rotation - this.offsetAngle);\r\n      this.tempDirection.addVector(spartial.pos);\r\n      this.shapeRenderer.circle(\r\n        true,\r\n        this.tempDirection.x,\r\n        this.tempDirection.y,\r\n        10,\r\n        Color.MAGENTA\r\n      );\r\n    }\r\n    this.shapeRenderer.end();\r\n    this.batch.setProjection(this.cameraGame.combined);\r\n    this.batch.begin();\r\n    if (this.levelState.role === 1 && healthPlayer.hp >= 0) {\r\n      if (this.levelState.currentLevel === 1) {\r\n        this.batch.draw(\r\n          this.knight4,\r\n          spartial.pos.x - this.offset,\r\n          spartial.pos.y - this.offset,\r\n          65,\r\n          65\r\n        );\r\n      }\r\n      if (this.levelState.currentLevel === 2) {\r\n        this.batch.draw(\r\n          this.knight3,\r\n          spartial.pos.x - this.offset,\r\n          spartial.pos.y - this.offset,\r\n          65,\r\n          65\r\n        );\r\n      }\r\n      if (this.levelState.currentLevel === 3) {\r\n        this.batch.draw(\r\n          this.knight2,\r\n          spartial.pos.x - this.offset,\r\n          spartial.pos.y - this.offset,\r\n          65,\r\n          65\r\n        );\r\n      }\r\n      if (this.levelState.currentLevel >= 4) {\r\n        this.batch.draw(\r\n          this.knight1,\r\n          spartial.pos.x - this.offset,\r\n          spartial.pos.y - this.offset,\r\n          65,\r\n          65\r\n        );\r\n      }\r\n    }\r\n    if (this.levelState.role === 2) {\r\n      if (this.levelState.currentLevel === 1) {\r\n        this.batch.draw(\r\n          this.mage4,\r\n          spartial.pos.x - this.offset,\r\n          spartial.pos.y - this.offset,\r\n          65,\r\n          65\r\n        );\r\n      }\r\n      if (this.levelState.currentLevel === 2) {\r\n        this.batch.draw(\r\n          this.mage3,\r\n          spartial.pos.x - this.offset,\r\n          spartial.pos.y - this.offset,\r\n          65,\r\n          65\r\n        );\r\n      }\r\n      if (this.levelState.currentLevel === 3) {\r\n        this.batch.draw(\r\n          this.mage2,\r\n          spartial.pos.x - this.offset,\r\n          spartial.pos.y - this.offset,\r\n          65,\r\n          65\r\n        );\r\n      }\r\n      if (this.levelState.currentLevel >= 4) {\r\n        this.batch.draw(\r\n          this.mage1,\r\n          spartial.pos.x - this.offset,\r\n          spartial.pos.y - this.offset,\r\n          65,\r\n          65\r\n        );\r\n      }\r\n    }\r\n    this.batch.end();\r\n    this.batch.setProjection(this.cameraUI.combined);\r\n  }\r\n}\r\n","import { System, Inject } from \"flat-ecs\";\r\nimport { Damage } from \"../../component/Damage\";\r\nimport { Health } from \"../../component/Health\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { ConfigGame } from \"../../dto/ConfigGame\";\r\nimport { GameState } from \"../../dto/GameState\";\r\n\r\nexport class ProtectBallProcessSystem extends System {\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n  offset = 100;\r\n\r\n  process(): void {\r\n    for (let i = 0; i < this.gameState.protectBall.length; i++) {\r\n      const spartialProtectBall = this.world.getComponent(\r\n        this.gameState.protectBall[i],\r\n        Spartial\r\n      );\r\n      const damageProtectBall = this.world.getComponent(\r\n        this.gameState.protectBall[i],\r\n        Damage\r\n      );\r\n      const spartialPlayer = this.world.getComponent(\r\n        this.gameState.playerID,\r\n        Spartial\r\n      );\r\n      spartialProtectBall.pos.set(this.offset, this.offset);\r\n      spartialProtectBall.pos.rotate(\r\n        (spartialProtectBall.rotation -= this.configGame.speedProtectBall)\r\n      );\r\n      spartialProtectBall.pos.addVector(spartialPlayer.pos);\r\n\r\n      for (let j = this.gameState.enemyIDs.length - 1; j >= 0; j--) {\r\n        const spartialEnemy = this.world.getComponent(\r\n          this.gameState.enemyIDs[j],\r\n          Spartial\r\n        );\r\n        const healthEnemy = this.world.getComponent(\r\n          this.gameState.enemyIDs[j],\r\n          Health\r\n        );\r\n        if (\r\n          spartialEnemy.pos.x <= spartialProtectBall.pos.x + 25 &&\r\n          spartialEnemy.pos.x >= spartialProtectBall.pos.x - 25 &&\r\n          spartialEnemy.pos.y <= spartialProtectBall.pos.y + 25 &&\r\n          spartialEnemy.pos.y >= spartialProtectBall.pos.y - 25\r\n        ) {\r\n          healthEnemy.hp = Math.max(\r\n            healthEnemy.hp - damageProtectBall.damage,\r\n            0\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { System, Inject } from \"flat-ecs\";\r\nimport { ShapeRenderer } from \"gdxts\";\r\nimport { Health } from \"../../component/Health\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { GameState } from \"../../dto/GameState\";\r\n\r\nexport class ProtectBallRenderSystem extends System {\r\n  @Inject(\"shapeRenderer\") shapeRenderer: ShapeRenderer;\r\n  @Inject(\"gameState\") gameState: GameState;\r\n\r\n  process(): void {\r\n    const healthPlayer = this.world.getComponent(\r\n      this.gameState.playerID,\r\n      Health\r\n    );\r\n    this.shapeRenderer.begin();\r\n    if (healthPlayer.hp > 0) {\r\n      for (let i = 0; i < this.gameState.protectBall.length; i++) {\r\n        const spartial = this.world.getComponent(\r\n          this.gameState.protectBall[i],\r\n          Spartial\r\n        );\r\n        this.shapeRenderer.circle(\r\n          true,\r\n          spartial.pos.x,\r\n          spartial.pos.y,\r\n          spartial.radius\r\n        );\r\n      }\r\n    }\r\n    this.shapeRenderer.end();\r\n  }\r\n}\r\n","import { Archetype, Inject, System } from \"flat-ecs\";\r\nimport { Damage } from \"../../component/Damage\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { ConfigGame } from \"../../dto/ConfigGame\";\r\nimport { GameState } from \"../../dto/GameState\";\r\n\r\nexport class ProtectBallSpawningSystem extends System {\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n\r\n  offset = 100;\r\n  initialized(): void {\r\n    for (let i = 0; i < this.configGame.amountProtectBall; i++) {\r\n      const protectBallArchetype = new Archetype([Spartial, Damage]);\r\n      const protectBall =\r\n        this.world.createEntityByArchetype(protectBallArchetype);\r\n      this.gameState.protectBall.push(protectBall);\r\n      const damageProtectBall = this.world.getComponent(\r\n        this.gameState.protectBall[i],\r\n        Damage\r\n      );\r\n      damageProtectBall.setDmg(50);\r\n      const spartialProtectBall = this.world.getComponent(\r\n        this.gameState.protectBall[i],\r\n        Spartial\r\n      );\r\n      spartialProtectBall.pos.set(this.offset, this.offset);\r\n      spartialProtectBall.setRadius(15);\r\n      spartialProtectBall.setRotation(\r\n        (360 / this.configGame.amountProtectBall) * i\r\n      );\r\n    }\r\n  }\r\n\r\n  process(): void {}\r\n}\r\n","import { System, Inject, Archetype } from \"flat-ecs\";\r\nimport { Vector2 } from \"gdxts\";\r\nimport { Damage } from \"../../component/Damage\";\r\nimport { Health } from \"../../component/Health\";\r\nimport { Moveable } from \"../../component/Movable\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { ConfigGame } from \"../../dto/ConfigGame\";\r\nimport { GameState } from \"../../dto/GameState\";\r\nimport { LevelState } from \"../../dto/LevelState\";\r\n\r\nexport class Skill3ProcessSystem extends System {\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n  @Inject(\"levelState\") levelState: LevelState;\r\n\r\n  time = 0;\r\n  tempNumber: number = 0;\r\n  tempVec2 = new Vector2();\r\n\r\n  process(): void {\r\n    this.time += this.world.delta;\r\n\r\n    for (let i = this.gameState.bulletIDs.length - 1; i >= 0; i--) {\r\n      const spartialBullet = this.world.getComponent(\r\n        this.gameState.bulletIDs[i],\r\n        Spartial\r\n      );\r\n      const moveAbleBullet = this.world.getComponent(\r\n        this.gameState.bulletIDs[i],\r\n        Moveable\r\n      );\r\n      const damageBullet = this.world.getComponent(\r\n        this.gameState.bulletIDs[i],\r\n        Damage\r\n      );\r\n\r\n      spartialBullet.pos.add(\r\n        moveAbleBullet.direction.x * moveAbleBullet.speed,\r\n        moveAbleBullet.direction.y * moveAbleBullet.speed\r\n      );\r\n      //Collision\r\n      for (let j = this.gameState.enemyIDs.length - 1; j >= 0; j--) {\r\n        const spartialEnemy = this.world.getComponent(\r\n          this.gameState.enemyIDs[j],\r\n          Spartial\r\n        );\r\n        const heathEnemy = this.world.getComponent(\r\n          this.gameState.enemyIDs[j],\r\n          Health\r\n        );\r\n        if (\r\n          spartialEnemy.pos.x <= spartialBullet.pos.x + 25 &&\r\n          spartialEnemy.pos.x >= spartialBullet.pos.x - 25 &&\r\n          spartialEnemy.pos.y <= spartialBullet.pos.y + 25 &&\r\n          spartialEnemy.pos.y >= spartialBullet.pos.y - 25\r\n        ) {\r\n          heathEnemy.hp = Math.max(heathEnemy.hp - damageBullet.damage, 0);\r\n        }\r\n\r\n        //Out of ScreenGame\r\n        const spartialPlayer = this.world.getComponent(\r\n          this.gameState.playerID,\r\n          Spartial\r\n        );\r\n        for (let i = 0; i < this.gameState.bulletIDs.length; i++) {\r\n          const spartialBullet = this.world.getComponent(\r\n            this.gameState.bulletIDs[i],\r\n            Spartial\r\n          );\r\n          if (spartialPlayer.pos.distance(spartialBullet.pos) > 1000) {\r\n            this.world.deleteEntity(this.gameState.bulletIDs[i]);\r\n            this.gameState.bulletIDs.splice(i, 1);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { System, Inject } from \"flat-ecs\";\r\nimport { Color, ShapeRenderer } from \"gdxts\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { ConfigGame } from \"../../dto/ConfigGame\";\r\nimport { GameState } from \"../../dto/GameState\";\r\n\r\nexport class Skill3RenderSystem extends System {\r\n  @Inject(\"shapeRenderer\") shapeRenderer: ShapeRenderer;\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n\r\n  process(): void {\r\n    this.shapeRenderer.begin();\r\n    for (let i = 0; i < this.gameState.bulletIDs.length; i++) {\r\n      const spartialBullet = this.world.getComponent(\r\n        this.gameState.bulletIDs[i],\r\n        Spartial\r\n      );\r\n      this.shapeRenderer.circle(\r\n        true,\r\n        spartialBullet.pos.x,\r\n        spartialBullet.pos.y,\r\n        spartialBullet.radius,\r\n        Color.WHITE\r\n      );\r\n    }\r\n\r\n    this.shapeRenderer.end();\r\n  }\r\n}\r\n","import { Archetype, Inject, System } from \"flat-ecs\";\r\nimport { Vector2 } from \"gdxts\";\r\nimport { config } from \"process\";\r\nimport { Damage } from \"../../component/Damage\";\r\nimport { Moveable } from \"../../component/Movable\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { ConfigGame } from \"../../dto/ConfigGame\";\r\nimport { GameState } from \"../../dto/GameState\";\r\nimport { JoyStick } from \"../../dto/JoyStick\";\r\nimport { LevelState } from \"../../dto/LevelState\";\r\n\r\nfunction getRandomInt(min: number, max: number) {\r\n  return Math.floor(Math.random() * (max - min)) + min;\r\n}\r\n\r\nexport class Skill3SpawningSystem extends System {\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n  @Inject(\"joyStick\") joyStick: JoyStick;\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"levelState\") levelState: LevelState;\r\n\r\n  timeSkill3 = 0;\r\n  tempNumber = 0;\r\n  tempVec2 = new Vector2();\r\n\r\n  process(): void {\r\n    this.timeSkill3 += this.world.delta;\r\n\r\n    const spartialPlayer = this.world.getComponent(\r\n      this.gameState.playerID,\r\n      Spartial\r\n    );\r\n\r\n    //Skill3\r\n    if (\r\n      this.timeSkill3 >= this.configGame.cooldownSkill3 &&\r\n      this.gameState.enemyIDs.length &&\r\n      this.levelState.currentLevel < 3\r\n    ) {\r\n      const bulletArchetype = new Archetype([Spartial, Moveable, Damage]);\r\n      const bullet = this.world.createEntityByArchetype(bulletArchetype);\r\n      this.gameState.bulletIDs.push(bullet);\r\n      const spartialBullet = this.world.getComponent(\r\n        this.gameState.bulletIDs[this.gameState.bulletIDs.length - 1],\r\n        Spartial\r\n      );\r\n      const moveAbleBullet = this.world.getComponent(\r\n        this.gameState.bulletIDs[this.gameState.bulletIDs.length - 1],\r\n        Moveable\r\n      );\r\n      const damageBullet = this.world.getComponent(\r\n        this.gameState.bulletIDs[this.gameState.bulletIDs.length - 1],\r\n        Damage\r\n      );\r\n\r\n      damageBullet.setDmg(25);\r\n\r\n      const spartialEnemy = this.world.getComponent(\r\n        this.gameState.enemyIDs[\r\n          getRandomInt(0, this.gameState.enemyIDs.length)\r\n        ],\r\n        Spartial\r\n      );\r\n      this.tempVec2\r\n        .setVector(spartialEnemy.pos)\r\n        .subVector(spartialPlayer.pos)\r\n        .nor();\r\n\r\n      moveAbleBullet.setDirection(this.tempVec2.x, this.tempVec2.y);\r\n      moveAbleBullet.speed = 15;\r\n\r\n      spartialBullet.setPos(spartialPlayer.pos.x, spartialPlayer.pos.y);\r\n      spartialBullet.setRadius(10);\r\n      if (this.gameState.enemyIDs.length > 2) {\r\n        for (let i = 0; i < 4 - this.levelState.currentLevel - 1; i++) {\r\n          const bulletArchetype = new Archetype([Spartial, Moveable, Damage]);\r\n          const bullet = this.world.createEntityByArchetype(bulletArchetype);\r\n          this.gameState.bulletIDs.push(bullet);\r\n          const spartialBullet = this.world.getComponent(\r\n            this.gameState.bulletIDs[this.gameState.bulletIDs.length - 1],\r\n            Spartial\r\n          );\r\n          const moveAbleBullet = this.world.getComponent(\r\n            this.gameState.bulletIDs[this.gameState.bulletIDs.length - 1],\r\n            Moveable\r\n          );\r\n          const damageBullet = this.world.getComponent(\r\n            this.gameState.bulletIDs[this.gameState.bulletIDs.length - 1],\r\n            Damage\r\n          );\r\n\r\n          damageBullet.setDmg(25);\r\n\r\n          const spartialEnemy = this.world.getComponent(\r\n            this.gameState.enemyIDs[\r\n              getRandomInt(0, this.gameState.enemyIDs.length)\r\n            ],\r\n            Spartial\r\n          );\r\n          this.tempVec2\r\n            .setVector(spartialEnemy.pos)\r\n            .subVector(spartialPlayer.pos)\r\n            .nor();\r\n\r\n          moveAbleBullet.setDirection(this.tempVec2.x, this.tempVec2.y);\r\n          moveAbleBullet.speed = 15;\r\n\r\n          spartialBullet.setPos(spartialPlayer.pos.x, spartialPlayer.pos.y);\r\n          spartialBullet.setRadius(10);\r\n        }\r\n      }\r\n\r\n      this.timeSkill3 = 0;\r\n    }\r\n  }\r\n}\r\n","import { Inject, System } from \"flat-ecs\";\r\nimport { Health } from \"../component/Health\";\r\nimport { Moveable } from \"../component/Movable\";\r\nimport { Spartial } from \"../component/Spatial\";\r\nimport { ConfigGame } from \"../dto/ConfigGame\";\r\nimport { GameState } from \"../dto/GameState\";\r\nimport { JoyStick } from \"../dto/JoyStick\";\r\n\r\nexport class PlayerMovementSystem extends System {\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n  @Inject(\"joyStick\") joyStick: JoyStick;\r\n\r\n  process(): void {\r\n    const spartial = this.world.getComponent(this.gameState.playerID, Spartial);\r\n    const moveAble = this.world.getComponent(this.gameState.playerID, Moveable);\r\n    const health = this.world.getComponent(this.gameState.playerID, Health);\r\n\r\n    if (health.hp <= 0) {\r\n      this.configGame.stop = true;\r\n    }\r\n\r\n    if (this.joyStick.dragging) {\r\n      // spartial.rotation = this.joyStick.direction.angle();\r\n      spartial.pos.add(\r\n        this.joyStick.direction.x * moveAble.speed,\r\n        this.joyStick.direction.y * moveAble.speed\r\n      );\r\n      spartial.rotation =\r\n        this.joyStick.direction.angle() < 0\r\n          ? ((2 * Math.PI + this.joyStick.direction.angle()) * 180) / Math.PI\r\n          : (this.joyStick.direction.angle() / Math.PI) * 180;\r\n    }\r\n    for (let i = 0; i < this.gameState.enemyIDs.length; i++) {\r\n      const spartialEnemy = this.world.getComponent(\r\n        this.gameState.enemyIDs[i],\r\n        Spartial\r\n      );\r\n\r\n      if (\r\n        spartial.pos.x <= spartialEnemy.pos.x + 50 &&\r\n        spartial.pos.x >= spartialEnemy.pos.x - 50 &&\r\n        spartial.pos.y <= spartialEnemy.pos.y + 50 &&\r\n        spartial.pos.y >= spartialEnemy.pos.y - 50\r\n      ) {\r\n        health.hp -= 1;\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Inject, System } from \"flat-ecs\";\r\nimport { Color, ShapeRenderer } from \"gdxts\";\r\nimport { Health } from \"../../component/Health\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { GameState } from \"../../dto/GameState\";\r\n\r\nexport class ProtectSkillRenderSystem extends System {\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"shapeRenderer\") shapeRenderer: ShapeRenderer;\r\n\r\n  process(): void {\r\n    const spartialProtectSkill = this.world.getComponent(\r\n      this.gameState.protectSkill,\r\n      Spartial\r\n    );\r\n    const healthPlayer = this.world.getComponent(\r\n      this.gameState.playerID,\r\n      Health\r\n    );\r\n\r\n    this.shapeRenderer.begin();\r\n    if (healthPlayer.hp >= 0) {\r\n      this.shapeRenderer.circle(\r\n        true,\r\n        spartialProtectSkill.pos.x,\r\n        spartialProtectSkill.pos.y,\r\n        spartialProtectSkill.radius,\r\n        Color.RED\r\n      );\r\n    }\r\n    this.shapeRenderer.end();\r\n  }\r\n}\r\n","import { Archetype, Inject, System } from \"flat-ecs\";\r\nimport { Damage } from \"../../component/Damage\";\r\nimport { Health } from \"../../component/Health\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { ConfigGame } from \"../../dto/ConfigGame\";\r\nimport { GameState } from \"../../dto/GameState\";\r\n\r\nexport class ProtectProcessingSystem extends System {\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n\r\n  initialized() {\r\n    const protectDmgArchetype = new Archetype([Spartial, Damage]);\r\n    const protectSkill =\r\n      this.world.createEntityByArchetype(protectDmgArchetype);\r\n    this.gameState.protectSkill = protectSkill;\r\n    const damageProtectSkill = this.world.getComponent(\r\n      this.gameState.protectSkill,\r\n      Damage\r\n    );\r\n    damageProtectSkill.setDmg(25);\r\n  }\r\n\r\n  process(): void {\r\n    this.configGame.timeToMakeDamage +=\r\n      this.world.delta * this.configGame.sizeSkill1Mage;\r\n\r\n    const spartialPlayer = this.world.getComponent(\r\n      this.gameState.playerID,\r\n      Spartial\r\n    );\r\n    const spartialProtectSkill = this.world.getComponent(\r\n      this.gameState.protectSkill,\r\n      Spartial\r\n    );\r\n    const damageProtectSkill = this.world.getComponent(\r\n      this.gameState.protectSkill,\r\n      Damage\r\n    );\r\n\r\n    spartialProtectSkill.setPos(spartialPlayer.pos.x, spartialPlayer.pos.y);\r\n    spartialProtectSkill.setRadius(this.configGame.timeToMakeDamage);\r\n    if (this.configGame.timeToMakeDamage > this.configGame.sizeSkill1Mage) {\r\n      for (let i = 0; i < this.gameState.enemyIDs.length; i++) {\r\n        const spartialEnemy = this.world.getComponent(\r\n          this.gameState.enemyIDs[i],\r\n          Spartial\r\n        );\r\n        const healthEnemy = this.world.getComponent(\r\n          this.gameState.enemyIDs[i],\r\n          Health\r\n        );\r\n        if (\r\n          spartialEnemy.pos.x <=\r\n            spartialProtectSkill.pos.x + spartialProtectSkill.radius &&\r\n          spartialEnemy.pos.x >=\r\n            spartialProtectSkill.pos.x - spartialProtectSkill.radius &&\r\n          spartialEnemy.pos.y <=\r\n            spartialProtectSkill.pos.y + spartialProtectSkill.radius &&\r\n          spartialEnemy.pos.y >=\r\n            spartialProtectSkill.pos.y - spartialProtectSkill.radius\r\n        ) {\r\n          healthEnemy.hp = Math.max(\r\n            healthEnemy.hp - damageProtectSkill.damage,\r\n            0\r\n          );\r\n        }\r\n      }\r\n      this.configGame.timeToMakeDamage = 0;\r\n    }\r\n  }\r\n}\r\n","import { System, Inject } from \"flat-ecs\";\r\nimport { Damage } from \"../../component/Damage\";\r\nimport { Health } from \"../../component/Health\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { ConfigGame } from \"../../dto/ConfigGame\";\r\nimport { GameState } from \"../../dto/GameState\";\r\n\r\nexport class TornadoProcessSystem extends System {\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n  offset = 175;\r\n\r\n  process(): void {\r\n    for (let i = 0; i < this.gameState.protectBall.length; i++) {\r\n      const spartialProtectBall = this.world.getComponent(\r\n        this.gameState.protectBall[i],\r\n        Spartial\r\n      );\r\n      const damageProtectBall = this.world.getComponent(\r\n        this.gameState.protectBall[i],\r\n        Damage\r\n      );\r\n      const spartialPlayer = this.world.getComponent(\r\n        this.gameState.playerID,\r\n        Spartial\r\n      );\r\n      spartialProtectBall.pos.set(this.offset, this.offset);\r\n      spartialProtectBall.pos.rotate(\r\n        (spartialProtectBall.rotation -= this.configGame.speedProtectBall)\r\n      );\r\n      spartialProtectBall.pos.addVector(spartialPlayer.pos);\r\n\r\n      for (let j = this.gameState.enemyIDs.length - 1; j >= 0; j--) {\r\n        const spartialEnemy = this.world.getComponent(\r\n          this.gameState.enemyIDs[j],\r\n          Spartial\r\n        );\r\n        const healthEnemy = this.world.getComponent(\r\n          this.gameState.enemyIDs[j],\r\n          Health\r\n        );\r\n        if (\r\n          spartialEnemy.pos.x <= spartialProtectBall.pos.x + 25 &&\r\n          spartialEnemy.pos.x >= spartialProtectBall.pos.x - 25 &&\r\n          spartialEnemy.pos.y <= spartialProtectBall.pos.y + 25 &&\r\n          spartialEnemy.pos.y >= spartialProtectBall.pos.y - 25\r\n        ) {\r\n          healthEnemy.hp = Math.max(\r\n            healthEnemy.hp - damageProtectBall.damage,\r\n            0\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Archetype, Inject, System } from \"flat-ecs\";\r\nimport { Damage } from \"../../component/Damage\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { ConfigGame } from \"../../dto/ConfigGame\";\r\nimport { GameState } from \"../../dto/GameState\";\r\n\r\nexport class TornadoSpawningSystem extends System {\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n\r\n  offset = 175;\r\n  initialized(): void {\r\n    for (let i = 0; i < this.configGame.amountProtectBall; i++) {\r\n      const protectBallArchetype = new Archetype([Spartial, Damage]);\r\n      const protectBall =\r\n        this.world.createEntityByArchetype(protectBallArchetype);\r\n      this.gameState.protectBall.push(protectBall);\r\n      const damageProtectBall = this.world.getComponent(\r\n        this.gameState.protectBall[i],\r\n        Damage\r\n      );\r\n      damageProtectBall.setDmg(5);\r\n      const spartialProtectBall = this.world.getComponent(\r\n        this.gameState.protectBall[i],\r\n        Spartial\r\n      );\r\n      spartialProtectBall.pos.set(this.offset, this.offset);\r\n      spartialProtectBall.setRadius(15);\r\n      spartialProtectBall.setRotation(\r\n        (360 / this.configGame.amountProtectBall) * i\r\n      );\r\n    }\r\n  }\r\n\r\n  process(): void {}\r\n}\r\n","import { System, Inject } from \"flat-ecs\";\r\nimport { ShapeRenderer } from \"gdxts\";\r\nimport { Health } from \"../../component/Health\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { GameState } from \"../../dto/GameState\";\r\n\r\nexport class TornadoRenderSystem extends System {\r\n  @Inject(\"shapeRenderer\") shapeRenderer: ShapeRenderer;\r\n  @Inject(\"gameState\") gameState: GameState;\r\n\r\n  process(): void {\r\n    const healthPlayer = this.world.getComponent(\r\n      this.gameState.playerID,\r\n      Health\r\n    );\r\n    this.shapeRenderer.begin();\r\n    if (healthPlayer.hp > 0) {\r\n      for (let i = 0; i < this.gameState.protectBall.length; i++) {\r\n        const spartial = this.world.getComponent(\r\n          this.gameState.protectBall[i],\r\n          Spartial\r\n        );\r\n        this.shapeRenderer.circle(\r\n          true,\r\n          spartial.pos.x,\r\n          spartial.pos.y,\r\n          spartial.radius\r\n        );\r\n      }\r\n    }\r\n    this.shapeRenderer.end();\r\n  }\r\n}\r\n","import { System, Inject } from \"flat-ecs\";\r\nimport { Vector2 } from \"gdxts\";\r\nimport { Health } from \"../component/Health\";\r\nimport { Spartial } from \"../component/Spatial\";\r\nimport { GameState } from \"../dto/GameState\";\r\nimport { JoyStick } from \"../dto/JoyStick\";\r\nimport { LevelState } from \"../dto/LevelState\";\r\n\r\nexport class EnemyMovementSystem extends System {\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"joyStick\") joyStick: JoyStick;\r\n  @Inject(\"levelState\") levelState: LevelState;\r\n\r\n  direction = new Vector2();\r\n\r\n  process(): void {\r\n    const spartialPlayer = this.world.getComponent(\r\n      this.gameState.playerID,\r\n      Spartial\r\n    );\r\n    for (let i = this.gameState.enemyIDs.length - 1; i >= 0; i--) {\r\n      const healthEnemy = this.world.getComponent(\r\n        this.gameState.enemyIDs[i],\r\n        Health\r\n      );\r\n      if (healthEnemy.hp <= 0) {\r\n        this.world.deleteEntity(this.gameState.enemyIDs[i]);\r\n        this.gameState.enemyIDs.splice(i, 1);\r\n        this.levelState.exp++;\r\n      }\r\n    }\r\n    for (let i = 0; i < this.gameState.enemyIDs.length; i++) {\r\n      const spartialEnemy = this.world.getComponent(\r\n        this.gameState.enemyIDs[i],\r\n        Spartial\r\n      );\r\n\r\n      this.direction\r\n        .setVector(spartialPlayer.pos)\r\n        .subVector(spartialEnemy.pos)\r\n        .nor();\r\n\r\n      spartialEnemy.pos.add(this.direction.x * 3, this.direction.y * 3);\r\n    }\r\n  }\r\n}\r\n","import { Inject, System } from \"flat-ecs\";\r\nimport { Color, ShapeRenderer } from \"gdxts\";\r\nimport { Health } from \"../component/Health\";\r\nimport { Spartial } from \"../component/Spatial\";\r\nimport { GameState } from \"../dto/GameState\";\r\n\r\nexport class EnemyRenderSystem extends System {\r\n  @Inject(\"shapeRenderer\") shapeRenderer: ShapeRenderer;\r\n  @Inject(\"gameState\") gameState: GameState;\r\n\r\n  width = 50;\r\n  offset = 25;\r\n  process(): void {\r\n    this.shapeRenderer.begin();\r\n    for (let i = 0; i < this.gameState.enemyIDs.length; i++) {\r\n      const spartial = this.world.getComponent(\r\n        this.gameState.enemyIDs[i],\r\n        Spartial\r\n      );\r\n      const healthEnemy = this.world.getComponent(\r\n        this.gameState.enemyIDs[i],\r\n        Health\r\n      );\r\n      this.shapeRenderer.circle(\r\n        true,\r\n        spartial.pos.x,\r\n        spartial.pos.y,\r\n        spartial.radius,\r\n        Color.BLUE\r\n      );\r\n      this.shapeRenderer.rect(\r\n        true,\r\n        spartial.pos.x - this.offset,\r\n        spartial.pos.y - this.offset - 15,\r\n        this.width * (healthEnemy.hp / healthEnemy.maxHP),\r\n        15,\r\n        Color.RED\r\n      );\r\n      this.shapeRenderer.rect(\r\n        false,\r\n        spartial.pos.x - this.offset,\r\n        spartial.pos.y - this.offset - 15,\r\n        this.width,\r\n        15\r\n      );\r\n    }\r\n    this.shapeRenderer.end();\r\n  }\r\n}\r\n","import { System, Inject, Archetype } from \"flat-ecs\";\r\nimport { Health } from \"../component/Health\";\r\nimport { Spartial } from \"../component/Spatial\";\r\nimport { Constants } from \"../Constant\";\r\nimport { ConfigGame } from \"../dto/ConfigGame\";\r\nimport { GameState } from \"../dto/GameState\";\r\nimport { LevelState } from \"../dto/LevelState\";\r\nimport { PowerEnemy } from \"../dto/PowerEnemy\";\r\n\r\nexport class EnemySpawningSystem extends System {\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n  @Inject(\"powerEnemy\") powerEnemy: PowerEnemy;\r\n  @Inject(\"levelState\") levelState: LevelState;\r\n\r\n  MAX_ENEMIES = 40;\r\n\r\n  time = -1;\r\n\r\n  getRandomInt(min: number, max: number) {\r\n    return Math.floor(Math.random() * (max - min)) + min;\r\n  }\r\n\r\n  process(): void {\r\n    const spartialPlayer = this.world.getComponent(\r\n      this.gameState.playerID,\r\n      Spartial\r\n    );\r\n\r\n    this.time += this.world.delta;\r\n    if (\r\n      this.time >= this.configGame.enemysRespawnTime &&\r\n      this.gameState.enemyIDs.length < this.MAX_ENEMIES\r\n    ) {\r\n      const enemyArchetype = new Archetype([Spartial, Health]);\r\n      const enemy = this.world.createEntityByArchetype(enemyArchetype);\r\n      this.gameState.enemyIDs.push(enemy);\r\n      const spartialEnemy = this.world.getComponent(\r\n        this.gameState.enemyIDs[this.gameState.enemyIDs.length - 1],\r\n        Spartial\r\n      );\r\n      spartialEnemy.setPos(\r\n        this.getRandomInt(0, Constants.SCREEN_WIDTH / 2),\r\n        this.getRandomInt(0, Constants.SCREEN_HEIGHT / 2)\r\n      );\r\n      spartialEnemy.setRadius(25);\r\n      const heathEnemy = this.world.getComponent(\r\n        this.gameState.enemyIDs[this.gameState.enemyIDs.length - 1],\r\n        Health\r\n      );\r\n      heathEnemy.setHp(this.powerEnemy.hp);\r\n      heathEnemy.setMaxHP(this.powerEnemy.hp);\r\n\r\n      this.time = 0;\r\n    }\r\n  }\r\n}\r\n","import { Archetype, Inject, System } from \"flat-ecs\";\r\nimport { Vector2 } from \"gdxts\";\r\nimport { config } from \"process\";\r\nimport { Damage } from \"../../component/Damage\";\r\nimport { Moveable } from \"../../component/Movable\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { ConfigGame } from \"../../dto/ConfigGame\";\r\nimport { GameState } from \"../../dto/GameState\";\r\nimport { JoyStick } from \"../../dto/JoyStick\";\r\nimport { LevelState } from \"../../dto/LevelState\";\r\n\r\nfunction getRandomInt(min: number, max: number) {\r\n  return Math.floor(Math.random() * (max - min)) + min;\r\n}\r\n\r\nexport class LaserSpawningSystem extends System {\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n  @Inject(\"joyStick\") joyStick: JoyStick;\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"levelState\") levelState: LevelState;\r\n\r\n  timeLaser = 0;\r\n  tempNumber = 0;\r\n  tempVec2 = new Vector2();\r\n\r\n  process(): void {\r\n    this.timeLaser += this.world.delta;\r\n\r\n    const spartialPlayer = this.world.getComponent(\r\n      this.gameState.playerID,\r\n      Spartial\r\n    );\r\n\r\n    //Laser\r\n    if (\r\n      this.timeLaser >= this.configGame.laserCooldown &&\r\n      this.gameState.enemyIDs.length &&\r\n      this.levelState.currentLevel < 3\r\n    ) {\r\n      const LaserArchetype = new Archetype([Spartial, Moveable, Damage]);\r\n      const Laser = this.world.createEntityByArchetype(LaserArchetype);\r\n      this.gameState.laserSkillID.push(Laser);\r\n      const spartialLaser = this.world.getComponent(\r\n        this.gameState.laserSkillID[this.gameState.laserSkillID.length - 1],\r\n        Spartial\r\n      );\r\n      const moveAbleLaser = this.world.getComponent(\r\n        this.gameState.laserSkillID[this.gameState.laserSkillID.length - 1],\r\n        Moveable\r\n      );\r\n      const damageLaser = this.world.getComponent(\r\n        this.gameState.laserSkillID[this.gameState.laserSkillID.length - 1],\r\n        Damage\r\n      );\r\n\r\n      damageLaser.setDmg(15);\r\n\r\n      const spartialEnemy = this.world.getComponent(\r\n        this.gameState.enemyIDs[\r\n          getRandomInt(0, this.gameState.enemyIDs.length)\r\n        ],\r\n        Spartial\r\n      );\r\n      this.tempVec2\r\n        .setVector(spartialEnemy.pos)\r\n        .subVector(spartialPlayer.pos)\r\n        .nor();\r\n\r\n      moveAbleLaser.setDirection(this.tempVec2.x, this.tempVec2.y);\r\n      moveAbleLaser.speed = 15;\r\n\r\n      spartialLaser.setPos(spartialPlayer.pos.x, spartialPlayer.pos.y);\r\n      spartialLaser.setRadius(50);\r\n\r\n      this.timeLaser = 0;\r\n    }\r\n  }\r\n}\r\n","import { System, Inject, Archetype } from \"flat-ecs\";\r\nimport { Vector2 } from \"gdxts\";\r\nimport { Damage } from \"../../component/Damage\";\r\nimport { Health } from \"../../component/Health\";\r\nimport { Moveable } from \"../../component/Movable\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { ConfigGame } from \"../../dto/ConfigGame\";\r\nimport { GameState } from \"../../dto/GameState\";\r\nimport { LevelState } from \"../../dto/LevelState\";\r\n\r\nfunction getRandomInt(min: number, max: number) {\r\n  return Math.floor(Math.random() * (max - min)) + min;\r\n}\r\n\r\nexport class LaserProcessSystem extends System {\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n  @Inject(\"levelState\") levelState: LevelState;\r\n\r\n  time = 0;\r\n  tempNumber: number = 0;\r\n  tempVec2 = new Vector2();\r\n\r\n  process(): void {\r\n    this.time += this.world.delta;\r\n\r\n    for (let i = this.gameState.laserSkillID.length - 1; i >= 0; i--) {\r\n      const spartialBullet = this.world.getComponent(\r\n        this.gameState.laserSkillID[i],\r\n        Spartial\r\n      );\r\n      const moveAbleBullet = this.world.getComponent(\r\n        this.gameState.laserSkillID[i],\r\n        Moveable\r\n      );\r\n      const damageBullet = this.world.getComponent(\r\n        this.gameState.laserSkillID[i],\r\n        Damage\r\n      );\r\n\r\n      spartialBullet.pos.add(\r\n        moveAbleBullet.direction.x * moveAbleBullet.speed,\r\n        moveAbleBullet.direction.y * moveAbleBullet.speed\r\n      );\r\n      //Collision\r\n      for (let j = this.gameState.enemyIDs.length - 1; j >= 0; j--) {\r\n        const spartialEnemy = this.world.getComponent(\r\n          this.gameState.enemyIDs[j],\r\n          Spartial\r\n        );\r\n        const heathEnemy = this.world.getComponent(\r\n          this.gameState.enemyIDs[j],\r\n          Health\r\n        );\r\n        if (\r\n          spartialEnemy.pos.x <= spartialBullet.pos.x + spartialBullet.radius &&\r\n          spartialEnemy.pos.x >= spartialBullet.pos.x - spartialBullet.radius &&\r\n          spartialEnemy.pos.y <= spartialBullet.pos.y + spartialBullet.radius &&\r\n          spartialEnemy.pos.y >= spartialBullet.pos.y - spartialBullet.radius\r\n        ) {\r\n          // this.world.deleteEntity(this.gameState.laserSkillID[i]);\r\n          heathEnemy.hp = Math.max(heathEnemy.hp - damageBullet.damage, 0);\r\n          // this.gameState.laserSkillID.splice(i, 1);\r\n          //   for (let i = 0; i < 8; i++) {\r\n          //     const tempBulletArchetype = new Archetype([\r\n          //       Spartial,\r\n          //       Moveable,\r\n          //       Damage,\r\n          //     ]);\r\n          //     const tempBullet =\r\n          //       this.world.createEntityByArchetype(tempBulletArchetype);\r\n          //     this.gameState.tempBullet.push(tempBullet);\r\n          //     const spartialTempBullet = this.world.getComponent(\r\n          //       this.gameState.tempBullet[this.gameState.tempBullet.length - 1],\r\n          //       Spartial\r\n          //     );\r\n          //     const moveableTempBullet = this.world.getComponent(\r\n          //       this.gameState.tempBullet[this.gameState.tempBullet.length - 1],\r\n          //       Moveable\r\n          //     );\r\n          //     const damageTempBullet = this.world.getComponent(\r\n          //       this.gameState.tempBullet[this.gameState.tempBullet.length - 1],\r\n          //       Damage\r\n          //     );\r\n          //     damageTempBullet.setDmg(25);\r\n          //     // moveAbleLaser.setDirection(this.tempVec2.x, this.tempVec2.y);\r\n          //     // moveAbleLaser.speed = 15;\r\n          //     spartialTempBullet.setPos(75, 75);\r\n          //     spartialTempBullet.setRadius(15);\r\n          //     spartialTempBullet.setRotation((360 / 8) * i);\r\n          //     spartialTempBullet.pos.rotate(spartialTempBullet.rotation);\r\n          //     spartialTempBullet.pos.addVector(spartialEnemy.pos)\r\n          //     // moveAbleLaser.setDirection(this.tempVec2.x, this.tempVec2.y);\r\n          //     // moveAbleLaser.speed = 15;\r\n          //   }\r\n        }\r\n\r\n        //Out of ScreenGame\r\n        const spartialPlayer = this.world.getComponent(\r\n          this.gameState.playerID,\r\n          Spartial\r\n        );\r\n        for (let i = 0; i < this.gameState.laserSkillID.length; i++) {\r\n          const spartialBullet = this.world.getComponent(\r\n            this.gameState.laserSkillID[i],\r\n            Spartial\r\n          );\r\n          if (spartialPlayer.pos.distance(spartialBullet.pos) > 1500) {\r\n            this.world.deleteEntity(this.gameState.laserSkillID[i]);\r\n            this.gameState.laserSkillID.splice(i, 1);\r\n          }\r\n        }\r\n\r\n        //tempBullet\r\n        // for(let i = 0; i < this.gameState.tempBullet.length;i++){\r\n        //   const spartialTempBullet = this.world.getComponent(\r\n        //     this.gameState.tempBullet[this.gameState.tempBullet.length - 1],\r\n        //     Spartial\r\n        //   );\r\n        //   spartialTempBullet.pos.\r\n        // }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { System, Inject } from \"flat-ecs\";\r\nimport { Color, ShapeRenderer } from \"gdxts\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { ConfigGame } from \"../../dto/ConfigGame\";\r\nimport { GameState } from \"../../dto/GameState\";\r\n\r\nexport class LaserRenderSystem extends System {\r\n  @Inject(\"shapeRenderer\") shapeRenderer: ShapeRenderer;\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n\r\n  process(): void {\r\n    this.shapeRenderer.begin();\r\n    for (let i = 0; i < this.gameState.laserSkillID.length; i++) {\r\n      const spartialBullet = this.world.getComponent(\r\n        this.gameState.laserSkillID[i],\r\n        Spartial\r\n      );\r\n      this.shapeRenderer.circle(\r\n        true,\r\n        spartialBullet.pos.x,\r\n        spartialBullet.pos.y,\r\n        spartialBullet.radius,\r\n        Color.GREEN\r\n      );\r\n    }\r\n\r\n    this.shapeRenderer.end();\r\n  }\r\n}\r\n","import { Inject, System } from \"flat-ecs\";\r\nimport { InputEvent, InputHandler } from \"gdxts\";\r\nimport { ConfigGame } from \"../dto/ConfigGame\";\r\nimport { LevelState } from \"../dto/LevelState\";\r\nimport { UpgradeLevelSystem } from \"./UpgradeLevelSystem\";\r\nimport { CameraProcessingSystem } from \"./knight/CameraProcessingSystem\";\r\nimport { JoystickRenderSystem } from \"./knight/JoystickRenderSystem\";\r\nimport { JoystickSystem } from \"./knight/JoystickSystem\";\r\nimport { NormalAttackProcessingSystem } from \"./knight/NormalAttackProcessSystem\";\r\nimport { NormalAttackRenderSystem } from \"./knight/NormalAttackRenderSystem\";\r\nimport { NormalAttackSpawningSystem } from \"./knight/NormalAttackSpawningSystem\";\r\nimport { PlayerRenderSystem } from \"./PlayerRenderSystem\";\r\nimport { ProtectBallProcessSystem } from \"./knight/ProtectBallProcessSystem\";\r\nimport { ProtectBallRenderSystem } from \"./knight/ProtectBallRenderSystem\";\r\nimport { ProtectBallSpawningSystem } from \"./knight/ProtectBallSpawningSystem\";\r\nimport { Skill3ProcessSystem } from \"./knight/Skill3ProcessSystem\";\r\nimport { Skill3RenderSystem } from \"./knight/Skill3RenderSystem\";\r\nimport { Skill3SpawningSystem } from \"./knight/Skill3SpawningSystem\";\r\nimport { GameState } from \"../dto/GameState\";\r\nimport { PlayerMovementSystem } from \"./PlayerMovementSystem\";\r\nimport { ProtectSkillRenderSystem } from \"./mage/ProtectSkillRenderSystem\";\r\nimport { ProtectProcessingSystem } from \"./mage/ProtectProcessingSystem\";\r\nimport { TornadoProcessSystem } from \"./mage/TornadoProcessSystem\";\r\nimport { TornadoSpawningSystem } from \"./mage/TornadoSpawningSystem\";\r\nimport { TornadoRenderSystem } from \"./mage/TornadoRenderSystem\";\r\nimport { EnemyMovementSystem } from \"./EnemyMovementSystem\";\r\nimport { EnemyRenderSystem } from \"./EnemyRenderSystem\";\r\nimport { EnemySpawningSystem } from \"./EnemySpawningSystem\";\r\nimport { LaserSpawningSystem } from \"./mage/LaserSpawningSystem\";\r\nimport { LaserProcessSystem } from \"./mage/LaserProcessSystem\";\r\nimport { LaserRenderSystem } from \"./mage/LaserRenderSystem\";\r\nimport { Constants } from \"../Constant\";\r\n\r\nexport class MenuRoleSystem extends System {\r\n  @Inject(\"gameState\") gameState: GameState;\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n  @Inject(\"inputHandler\") inputHandler: InputHandler;\r\n  @Inject(\"levelState\") levelState: LevelState;\r\n\r\n  initialized(): void {\r\n    this.inputHandler.addEventListener(InputEvent.TouchStart, (x, y) => {\r\n      if (this.configGame.start == false) {\r\n        if (x >= 0 && x <= Constants.SCREEN_WIDTH / 2) {\r\n          this.levelState.role = 1;\r\n          this.world.addSystem(new JoystickSystem(), true);\r\n          this.world.addSystem(new PlayerMovementSystem(), true);\r\n          this.world.addSystem(new EnemySpawningSystem(), true);\r\n          this.world.addSystem(new EnemyMovementSystem(), true);\r\n          this.world.addSystem(new Skill3SpawningSystem(), true);\r\n          this.world.addSystem(new Skill3ProcessSystem(), true);\r\n          this.world.addSystem(new ProtectBallSpawningSystem(), true);\r\n          this.world.addSystem(new ProtectBallProcessSystem(), true);\r\n          this.world.addSystem(new UpgradeLevelSystem(), true);\r\n          this.world.addSystem(new NormalAttackSpawningSystem(), true);\r\n          this.world.addSystem(new NormalAttackProcessingSystem(), true);\r\n          this.world.addSystem(new PlayerRenderSystem(), false);\r\n\r\n          this.world.addSystem(new CameraProcessingSystem(), false);\r\n          this.world.addSystem(new JoystickRenderSystem(), false);\r\n          this.world.addSystem(new EnemyRenderSystem(), false);\r\n          this.world.addSystem(new NormalAttackRenderSystem(), false);\r\n          this.world.addSystem(new Skill3RenderSystem(), false);\r\n          this.world.addSystem(new ProtectBallRenderSystem(), false);\r\n          this.configGame.start = true;\r\n        }\r\n        if (x >= Constants.SCREEN_WIDTH / 2) {\r\n          this.levelState.role = 2;\r\n          this.configGame.amountProtectBall = 15;\r\n          this.configGame.start = true;\r\n\r\n          this.world.addSystem(new PlayerMovementSystem(), true);\r\n          this.world.addSystem(new JoystickSystem(), true);\r\n          this.world.addSystem(new UpgradeLevelSystem(), true);\r\n          this.world.addSystem(new EnemySpawningSystem(), true);\r\n          this.world.addSystem(new EnemyMovementSystem(), true);\r\n          this.world.addSystem(new ProtectProcessingSystem(), true);\r\n          this.world.addSystem(new TornadoSpawningSystem(), true);\r\n          this.world.addSystem(new TornadoProcessSystem(), true);\r\n          this.world.addSystem(new LaserSpawningSystem(), true);\r\n          this.world.addSystem(new LaserProcessSystem(), true);\r\n\r\n          this.world.addSystem(new CameraProcessingSystem(), false);\r\n          this.world.addSystem(new ProtectSkillRenderSystem(), false);\r\n          this.world.addSystem(new PlayerRenderSystem(), false);\r\n          this.world.addSystem(new JoystickRenderSystem(), false);\r\n          this.world.addSystem(new EnemyRenderSystem(), false);\r\n          this.world.addSystem(new TornadoRenderSystem(), false);\r\n          this.world.addSystem(new LaserRenderSystem(), false);\r\n        }\r\n      }\r\n    });\r\n  }\r\n  process(): void {}\r\n}\r\n","import { System, Inject } from \"flat-ecs\";\r\nimport { Color, ShapeRenderer } from \"gdxts\";\r\nimport { Spartial } from \"../../component/Spatial\";\r\nimport { Constants } from \"../../Constant\";\r\nimport { GameState } from \"../../dto/GameState\";\r\n\r\nconst GRID_WIDTH = Constants.SCREEN_WIDTH / 10;\r\nconst GRID_HEIGHT = GRID_WIDTH;\r\n\r\nexport class GridMapRenderSystem extends System {\r\n  @Inject(\"shapeRenderer\") shapeRenderer: ShapeRenderer;\r\n  @Inject(\"gameState\") gameState: GameState;\r\n\r\n  process(): void {\r\n    const spartialPlayer = this.world.getComponent(\r\n      this.gameState.playerID,\r\n      Spartial\r\n    );\r\n\r\n    this.shapeRenderer.begin();\r\n    //GridX\r\n    const deltaX = spartialPlayer.pos.x % (Constants.SCREEN_WIDTH / 2);\r\n    const totalDrawX = Math.ceil(\r\n      (Constants.SCREEN_WIDTH + Math.abs(deltaX)) / GRID_WIDTH\r\n    );\r\n\r\n    for (let i = 0; i <= totalDrawX; i++) {\r\n      let x = 0;\r\n      if (spartialPlayer.pos.x >= 0) {\r\n        x =\r\n          spartialPlayer.pos.x -\r\n          deltaX +\r\n          GRID_WIDTH * i -\r\n          Constants.SCREEN_WIDTH / 2;\r\n      } else {\r\n        x =\r\n          spartialPlayer.pos.x -\r\n          deltaX -\r\n          GRID_WIDTH * i +\r\n          Constants.SCREEN_WIDTH / 2;\r\n      }\r\n      this.shapeRenderer.line(\r\n        x,\r\n        -Constants.SCREEN_HEIGHT / 2 + spartialPlayer.pos.y,\r\n        x,\r\n        Constants.SCREEN_HEIGHT + spartialPlayer.pos.y,\r\n        Color.MAGENTA\r\n      );\r\n    }\r\n\r\n    // GridY\r\n    const deltaY = spartialPlayer.pos.y % (Constants.SCREEN_HEIGHT / 2);\r\n    const totalDrawY = Math.ceil(\r\n      (Constants.SCREEN_HEIGHT + Math.abs(deltaY)) / GRID_HEIGHT\r\n    );\r\n    for (let i = 0; i < totalDrawY; i++) {\r\n      let y = 0;\r\n      if (spartialPlayer.pos.y >= 0) {\r\n        y =\r\n          spartialPlayer.pos.y -\r\n          deltaY +\r\n          GRID_HEIGHT * i -\r\n          Constants.SCREEN_HEIGHT / 2;\r\n      } else {\r\n        y =\r\n          spartialPlayer.pos.y -\r\n          deltaY -\r\n          GRID_HEIGHT * i +\r\n          Constants.SCREEN_HEIGHT / 2;\r\n      }\r\n      this.shapeRenderer.line(\r\n        -Constants.SCREEN_WIDTH / 2 + spartialPlayer.pos.x,\r\n        y,\r\n        Constants.SCREEN_WIDTH + spartialPlayer.pos.x,\r\n        y,\r\n        Color.MAGENTA\r\n      );\r\n    }\r\n    this.shapeRenderer.end();\r\n  }\r\n}\r\n","import { Inject, System } from \"flat-ecs\";\r\nimport {\r\n  AssetManager,\r\n  BitmapFont,\r\n  InputEvent,\r\n  InputHandler,\r\n  OrthoCamera,\r\n  PolygonBatch,\r\n  Texture,\r\n} from \"gdxts\";\r\nimport { Constants } from \"../Constant\";\r\nimport { ConfigGame } from \"../dto/ConfigGame\";\r\n\r\nexport class MenuRenderSystem extends System {\r\n  @Inject(\"cameraUI\") cameraUI: OrthoCamera;\r\n  @Inject(\"cameraGame\") cameraGame: OrthoCamera;\r\n\r\n  @Inject(\"configGame\") configGame: ConfigGame;\r\n  @Inject(\"inputHandler\") inputHandler: InputHandler;\r\n  @Inject(\"assetManager\") assetManager: AssetManager;\r\n  @Inject(\"batch\") batch: PolygonBatch;\r\n  @Inject(\"font1\") font1: BitmapFont;\r\n  @Inject(\"font2\") font2: BitmapFont;\r\n\r\n  knight: Texture;\r\n  mage: Texture;\r\n  offset = 150;\r\n\r\n  initialized(): void {\r\n    this.knight = this.assetManager.getTexture(\"knight\") as Texture;\r\n    this.mage = this.assetManager.getTexture(\"mage\") as Texture;\r\n  }\r\n  process(): void {\r\n    this.batch.setProjection(this.cameraUI.combined);\r\n    this.batch.begin();\r\n    if (this.configGame.start === false) {\r\n      this.batch.draw(\r\n        this.knight,\r\n        Constants.SCREEN_WIDTH / 2 - this.offset - 200,\r\n        Constants.SCREEN_HEIGHT / 2 - this.offset - 50,\r\n        300,\r\n        300\r\n      );\r\n      this.batch.draw(\r\n        this.mage,\r\n        Constants.SCREEN_WIDTH / 2 - this.offset + 250,\r\n        Constants.SCREEN_HEIGHT / 2 - this.offset - 25,\r\n        200,\r\n        250\r\n      );\r\n    }\r\n    this.batch.end();\r\n  }\r\n}\r\n","import { Archetype, World } from \"flat-ecs\";\r\nimport {\r\n  AssetManager,\r\n  BitmapFont,\r\n  InputHandler,\r\n  OrthoCamera,\r\n  PolygonBatch,\r\n  Screen,\r\n  ShapeRenderer,\r\n  Vector2,\r\n  Viewport,\r\n  ViewportInputHandler,\r\n} from \"gdxts\";\r\n\r\nimport { Health } from \"../component/Health\";\r\nimport { Moveable } from \"../component/Movable\";\r\nimport { Spartial } from \"../component/Spatial\";\r\nimport { Constants } from \"../Constant\";\r\nimport { ConfigGame } from \"../dto/ConfigGame\";\r\nimport { GameState } from \"../dto/GameState\";\r\nimport { JoyStick } from \"../dto/JoyStick\";\r\nimport { LevelState } from \"../dto/LevelState\";\r\nimport { MenuRoleSystem } from \"../System/MenuRole\";\r\nimport { GridMapRenderSystem } from \"../System/knight/GridMapRenderSystem\";\r\nimport { MenuRenderSystem } from \"../System/MenuRenderSystem\";\r\nimport { PowerEnemy } from \"../dto/PowerEnemy\";\r\n\r\nexport const createGameScreen = async (\r\n  assetManager: AssetManager,\r\n  viewport: Viewport\r\n): Promise<Screen> => {\r\n  const gl = viewport.getContext();\r\n  const cameraUI = viewport.getCamera();\r\n\r\n  const viewportInfo = viewport.getViewportInfo();\r\n  const cameraGame = new OrthoCamera(\r\n    Constants.SCREEN_WIDTH,\r\n    Constants.SCREEN_HEIGHT,\r\n    viewportInfo.worldWidth,\r\n    viewportInfo.worldHeight\r\n  );\r\n  viewport.addCamera(cameraGame);\r\n  const world = new World();\r\n\r\n  const batch = new PolygonBatch(gl);\r\n  const shapeRenderer = new ShapeRenderer(gl);\r\n  const inputHandler = new ViewportInputHandler(viewport);\r\n\r\n  const font = await BitmapFont.load(gl, \"./font.fnt\");\r\n  const font2 = await BitmapFont.load(gl, \"./font2.fnt\");\r\n\r\n  const joyStick: JoyStick = {\r\n    origin: new Vector2(),\r\n    direction: new Vector2(),\r\n    thumbPos: new Vector2(),\r\n\r\n    touched: false,\r\n    move: false,\r\n    dragging: false,\r\n  };\r\n\r\n  //perSecond\r\n  const configGame: ConfigGame = {\r\n    normalAttack: 0.25,\r\n    cooldownSkill3: 0.45,\r\n    enemysRespawnTime: 0.2,\r\n    amountProtectBall: 10,\r\n    speedProtectBall: 5,\r\n    timeToMakeDamage: 0.75,\r\n    sizeSkill1Mage: 200,\r\n    laserCooldown: 1.25,\r\n\r\n    start: false,\r\n    pause: false,\r\n    stop: false,\r\n  };\r\n\r\n  const playerArchetype = new Archetype([Spartial, Moveable, Health]);\r\n  const player = world.createEntityByArchetype(playerArchetype);\r\n  const gameState: GameState = {\r\n    playerID: player,\r\n    enemyIDs: [],\r\n    bulletIDs: [],\r\n    normalAttackBulletIDs: [],\r\n    protectBall: [],\r\n    protectSkill: 0,\r\n    laserSkillID: [],\r\n    tempBullet: [],\r\n  };\r\n  const levelState: LevelState = {\r\n    role: 0,\r\n    exp: 1,\r\n    maxExp: 100,\r\n    currentLevel: 1,\r\n  };\r\n  const powerEnemy: PowerEnemy = {\r\n    hp: 100,\r\n    damage: 25,\r\n  };\r\n\r\n  const spartialPlayer = world.getComponent(gameState.playerID, Spartial);\r\n  spartialPlayer.setPos(0, 0);\r\n  spartialPlayer.setRadius(25);\r\n  const moveAblePlayer = world.getComponent(gameState.playerID, Moveable);\r\n  moveAblePlayer.speed = 4;\r\n  const healthPlayer = world.getComponent(gameState.playerID, Health);\r\n  healthPlayer.setHp(100);\r\n  healthPlayer.setMaxHP(100);\r\n\r\n  world.register(\"cameraGame\", cameraGame);\r\n  world.register(\"batch\", batch);\r\n  world.register(\"shapeRenderer\", shapeRenderer);\r\n  world.register(\"assetManager\", assetManager);\r\n  world.register(\"cameraUI\", cameraUI);\r\n  world.register(\"cameraGame\", cameraGame);\r\n\r\n  world.register(\"gameState\", gameState);\r\n  world.register(\"configGame\", configGame);\r\n  world.register(\"levelState\", levelState);\r\n  world.register(\"powerEnemy\", powerEnemy);\r\n\r\n  world.register(\"inputHandler\", inputHandler);\r\n  world.register(\"joyStick\", joyStick);\r\n  world.register(\"font\", font);\r\n  world.register(\"font2\", font2);\r\n\r\n  world.addSystem(new GridMapRenderSystem(), false);\r\n  world.addSystem(new MenuRenderSystem(), false);\r\n  world.addSystem(new MenuRoleSystem(), true);\r\n\r\n  gl.clearColor(0, 0, 0, 1);\r\n\r\n  return {\r\n    update(delta: number) {\r\n      gl.clear(gl.COLOR_BUFFER_BIT);\r\n      batch.setProjection(cameraGame.combined);\r\n      shapeRenderer.setProjection(cameraGame.combined);\r\n\r\n      world.setDelta(delta);\r\n      if (!configGame.pause && !configGame.stop) {\r\n        world.processActiveSystem();\r\n      }\r\n      world.processPassiveSystem();\r\n    },\r\n    dispose(): void {},\r\n  };\r\n};\r\n","import {\r\n  AssetManager,\r\n  createGameLoop,\r\n  createStage,\r\n  createViewport,\r\n  Game,\r\n} from \"gdxts\";\r\nimport { Constants } from \"./Constant\";\r\nimport { createGameScreen } from \"./gameScreen/GameScreen\";\r\n\r\nexport const init = async () => {\r\n  const stage = createStage();\r\n  const canvas = stage.getCanvas();\r\n  const viewport = createViewport(\r\n    canvas,\r\n    Constants.SCREEN_WIDTH,\r\n    Constants.SCREEN_HEIGHT\r\n  );\r\n  const gl = viewport.getContext();\r\n\r\n  const assetManager = new AssetManager(gl);\r\n  // await assetManager.loadTexture(\"./pauseIcon.png\", \"pauseIcon\");\r\n  // await assetManager.loadTexture(\"./playIcon.png\", \"playIcon\");\r\n  await assetManager.loadTexture(\"./knight.png\", \"knight\");\r\n  await assetManager.loadTexture(\"./knight1.png\", \"knight1\");\r\n  await assetManager.loadTexture(\"./knight2.png\", \"knight2\");\r\n  await assetManager.loadTexture(\"./knight3.png\", \"knight3\");\r\n  await assetManager.loadTexture(\"./knight4.png\", \"knight4\");\r\n\r\n  await assetManager.loadTexture(\"./mage.png\", \"mage\");\r\n  await assetManager.loadTexture(\"./mage1.png\", \"mage1\");\r\n  await assetManager.loadTexture(\"./mage2.png\", \"mage2\");\r\n  await assetManager.loadTexture(\"./mage3.png\", \"mage3\");\r\n  await assetManager.loadTexture(\"./mage4.png\", \"mage4\");\r\n  Game.shared.setScreen(await createGameScreen(assetManager, viewport));\r\n\r\n  createGameLoop((delta: number) => {\r\n    Game.shared.update(delta);\r\n  });\r\n};\r\ninit();\r\n"],"names":["ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","call","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","value","EventEmitter","init","this","module","exports","once","emitter","name","Promise","resolve","reject","errorListener","err","removeListener","resolver","slice","arguments","eventTargetAgnosticAddListener","handler","flags","on","addErrorHandlerIfEventEmitter","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","m","events","existing","warning","create","newListener","emit","unshift","push","length","warned","w","Error","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","Array","i","unwrapListeners","arrayClone","listenerCount","n","copy","addEventListener","wrapListener","arg","removeEventListener","defineProperty","enumerable","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","len","listeners","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","key","keys","rawListeners","eventNames","FastBitSet","iterable","words","obj","Symbol","iterator","add","resize","flip","clear","remove","isEmpty","c","has","checkedAdd","word","newword","trim","nl","hammingWeight","v","hammingWeight4","v1","v2","v3","v4","size","answer","array","pos","k","t","forEach","fnc","clone","intersects","otherbitmap","newcount","Math","min","intersection","intersection_size","new_intersection","equals","mcount","difference","difference_size","toString","join","union","new_union","max","c2","new_difference","union_size","__importDefault","mod","__esModule","Archetype","fastbitset_1","require","componentTypes","componentBits","default","componentBitsInitialized","Component","ComponentMapper","data","entityId","component","EntityIteratingSystem","System_1","types","world","getComponentIndex","begin","getEntities","processEntity","end","System","EntitySystem","entities","processEntities","Inject","propName","targetType","constructor","hasOwnProperty","__inject__","InjectMapper","__injectMapper__","ComponentMapper_1","World","mappers","componentBitsMap","componentIndices","Map","currentComponentIndex","activeSystems","passiveSystems","injectionRegistry","delta","getNewId","typeIndex","getMapperByIndex","archetype","id","addComponent","updateComponentBits","mapper","getComponentBits","getMapper","entityComponentBits","system","active","setWorld","injectMapper","inject","initialized","injectPoints","injectKey","componentType","object","injectName","dispose","process","World_1","Archetype_1","Component_1","EntityIteratingSystem_1","EntitySystem_1","InjectMapper_1","Inject_1","DefaultRenderableSorter","Vector3_1","BlendingAttribute_1","tmpV1","Vector3","tmpV2","camera","renderables","worldTransform","center","output","isZero","getTranslation","hasRotationOrScaling","x","y","z","multiply","o1","o2","b1","material","BlendingAttribute","Type","blended","meshPart","dst","dst2","result","DefaultShaderProvider","DefaultShader_1","gl","config","vertexShader","fragmentShader","shaders","Config","renderable","suggestedShader","shader","canRender","createShader","DefaultShader","DefaultTextureBinder","Texture_1","method","offset","reuseCount","bindCount","currentTexture","getMaxTextureUnits","MAX_GLES_UNITS","textures","unitsLRU","LRU","activeTexture","TEXTURE0","texture","rebind","reused","ROUNDROBIN","bindTextureRoundRobin","bindTextureLRU","setWraps","TextureWrap","Repeat","setFilters","TextureFilter","Linear","idx","getParameter","MAX_TEXTURE_IMAGE_UNITS","GL20","GL_ES_VERSION_2_0","GL_DEPTH_BUFFER_BIT","GL_STENCIL_BUFFER_BIT","GL_COLOR_BUFFER_BIT","GL_FALSE","GL_TRUE","GL_POINTS","GL_LINES","GL_LINE_LOOP","GL_LINE_STRIP","GL_TRIANGLES","GL_TRIANGLE_STRIP","GL_TRIANGLE_FAN","GL_ZERO","GL_ONE","GL_SRC_COLOR","GL_ONE_MINUS_SRC_COLOR","GL_SRC_ALPHA","GL_ONE_MINUS_SRC_ALPHA","GL_DST_ALPHA","GL_ONE_MINUS_DST_ALPHA","GL_DST_COLOR","GL_ONE_MINUS_DST_COLOR","GL_SRC_ALPHA_SATURATE","GL_FUNC_ADD","GL_BLEND_EQUATION","GL_BLEND_EQUATION_RGB","GL_BLEND_EQUATION_ALPHA","GL_FUNC_SUBTRACT","GL_FUNC_REVERSE_SUBTRACT","GL_BLEND_DST_RGB","GL_BLEND_SRC_RGB","GL_BLEND_DST_ALPHA","GL_BLEND_SRC_ALPHA","GL_CONSTANT_COLOR","GL_ONE_MINUS_CONSTANT_COLOR","GL_CONSTANT_ALPHA","GL_ONE_MINUS_CONSTANT_ALPHA","GL_BLEND_COLOR","GL_ARRAY_BUFFER","GL_ELEMENT_ARRAY_BUFFER","GL_ARRAY_BUFFER_BINDING","GL_ELEMENT_ARRAY_BUFFER_BINDING","GL_STREAM_DRAW","GL_STATIC_DRAW","GL_DYNAMIC_DRAW","GL_BUFFER_SIZE","GL_BUFFER_USAGE","GL_CURRENT_VERTEX_ATTRIB","GL_FRONT","GL_BACK","GL_FRONT_AND_BACK","GL_TEXTURE_2D","GL_CULL_FACE","GL_BLEND","GL_DITHER","GL_STENCIL_TEST","GL_DEPTH_TEST","GL_SCISSOR_TEST","GL_POLYGON_OFFSET_FILL","GL_SAMPLE_ALPHA_TO_COVERAGE","GL_SAMPLE_COVERAGE","GL_NO_ERROR","GL_INVALID_ENUM","GL_INVALID_VALUE","GL_INVALID_OPERATION","GL_OUT_OF_MEMORY","GL_CW","GL_CCW","GL_LINE_WIDTH","GL_ALIASED_POINT_SIZE_RANGE","GL_ALIASED_LINE_WIDTH_RANGE","GL_CULL_FACE_MODE","GL_FRONT_FACE","GL_DEPTH_RANGE","GL_DEPTH_WRITEMASK","GL_DEPTH_CLEAR_VALUE","GL_DEPTH_FUNC","GL_STENCIL_CLEAR_VALUE","GL_STENCIL_FUNC","GL_STENCIL_FAIL","GL_STENCIL_PASS_DEPTH_FAIL","GL_STENCIL_PASS_DEPTH_PASS","GL_STENCIL_REF","GL_STENCIL_VALUE_MASK","GL_STENCIL_WRITEMASK","GL_STENCIL_BACK_FUNC","GL_STENCIL_BACK_FAIL","GL_STENCIL_BACK_PASS_DEPTH_FAIL","GL_STENCIL_BACK_PASS_DEPTH_PASS","GL_STENCIL_BACK_REF","GL_STENCIL_BACK_VALUE_MASK","GL_STENCIL_BACK_WRITEMASK","GL_VIEWPORT","GL_SCISSOR_BOX","GL_COLOR_CLEAR_VALUE","GL_COLOR_WRITEMASK","GL_UNPACK_ALIGNMENT","GL_PACK_ALIGNMENT","GL_MAX_TEXTURE_SIZE","GL_MAX_TEXTURE_UNITS","GL_MAX_VIEWPORT_DIMS","GL_SUBPIXEL_BITS","GL_RED_BITS","GL_GREEN_BITS","GL_BLUE_BITS","GL_ALPHA_BITS","GL_DEPTH_BITS","GL_STENCIL_BITS","GL_POLYGON_OFFSET_UNITS","GL_POLYGON_OFFSET_FACTOR","GL_TEXTURE_BINDING_2D","GL_SAMPLE_BUFFERS","GL_SAMPLES","GL_SAMPLE_COVERAGE_VALUE","GL_SAMPLE_COVERAGE_INVERT","GL_NUM_COMPRESSED_TEXTURE_FORMATS","GL_COMPRESSED_TEXTURE_FORMATS","GL_DONT_CARE","GL_FASTEST","GL_NICEST","GL_GENERATE_MIPMAP","GL_GENERATE_MIPMAP_HINT","GL_BYTE","GL_UNSIGNED_BYTE","GL_SHORT","GL_UNSIGNED_SHORT","GL_INT","GL_UNSIGNED_INT","GL_FLOAT","GL_FIXED","GL_DEPTH_COMPONENT","GL_ALPHA","GL_RGB","GL_RGBA","GL_LUMINANCE","GL_LUMINANCE_ALPHA","GL_UNSIGNED_SHORT_4_4_4_4","GL_UNSIGNED_SHORT_5_5_5_1","GL_UNSIGNED_SHORT_5_6_5","GL_FRAGMENT_SHADER","GL_VERTEX_SHADER","GL_MAX_VERTEX_ATTRIBS","GL_MAX_VERTEX_UNIFORM_VECTORS","GL_MAX_VARYING_VECTORS","GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS","GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS","GL_MAX_TEXTURE_IMAGE_UNITS","GL_MAX_FRAGMENT_UNIFORM_VECTORS","GL_SHADER_TYPE","GL_DELETE_STATUS","GL_LINK_STATUS","GL_VALIDATE_STATUS","GL_ATTACHED_SHADERS","GL_ACTIVE_UNIFORMS","GL_ACTIVE_UNIFORM_MAX_LENGTH","GL_ACTIVE_ATTRIBUTES","GL_ACTIVE_ATTRIBUTE_MAX_LENGTH","GL_SHADING_LANGUAGE_VERSION","GL_CURRENT_PROGRAM","GL_NEVER","GL_LESS","GL_EQUAL","GL_LEQUAL","GL_GREATER","GL_NOTEQUAL","GL_GEQUAL","GL_ALWAYS","GL_KEEP","GL_REPLACE","GL_INCR","GL_DECR","GL_INVERT","GL_INCR_WRAP","GL_DECR_WRAP","GL_VENDOR","GL_RENDERER","GL_VERSION","GL_EXTENSIONS","GL_NEAREST","GL_LINEAR","GL_NEAREST_MIPMAP_NEAREST","GL_LINEAR_MIPMAP_NEAREST","GL_NEAREST_MIPMAP_LINEAR","GL_LINEAR_MIPMAP_LINEAR","GL_TEXTURE_MAG_FILTER","GL_TEXTURE_MIN_FILTER","GL_TEXTURE_WRAP_S","GL_TEXTURE_WRAP_T","GL_TEXTURE","GL_TEXTURE_CUBE_MAP","GL_TEXTURE_BINDING_CUBE_MAP","GL_TEXTURE_CUBE_MAP_POSITIVE_X","GL_TEXTURE_CUBE_MAP_NEGATIVE_X","GL_TEXTURE_CUBE_MAP_POSITIVE_Y","GL_TEXTURE_CUBE_MAP_NEGATIVE_Y","GL_TEXTURE_CUBE_MAP_POSITIVE_Z","GL_TEXTURE_CUBE_MAP_NEGATIVE_Z","GL_MAX_CUBE_MAP_TEXTURE_SIZE","GL_TEXTURE0","GL_TEXTURE1","GL_TEXTURE2","GL_TEXTURE3","GL_TEXTURE4","GL_TEXTURE5","GL_TEXTURE6","GL_TEXTURE7","GL_TEXTURE8","GL_TEXTURE9","GL_TEXTURE10","GL_TEXTURE11","GL_TEXTURE12","GL_TEXTURE13","GL_TEXTURE14","GL_TEXTURE15","GL_TEXTURE16","GL_TEXTURE17","GL_TEXTURE18","GL_TEXTURE19","GL_TEXTURE20","GL_TEXTURE21","GL_TEXTURE22","GL_TEXTURE23","GL_TEXTURE24","GL_TEXTURE25","GL_TEXTURE26","GL_TEXTURE27","GL_TEXTURE28","GL_TEXTURE29","GL_TEXTURE30","GL_TEXTURE31","GL_ACTIVE_TEXTURE","GL_REPEAT","GL_CLAMP_TO_EDGE","GL_MIRRORED_REPEAT","GL_FLOAT_VEC2","GL_FLOAT_VEC3","GL_FLOAT_VEC4","GL_INT_VEC2","GL_INT_VEC3","GL_INT_VEC4","GL_BOOL","GL_BOOL_VEC2","GL_BOOL_VEC3","GL_BOOL_VEC4","GL_FLOAT_MAT2","GL_FLOAT_MAT3","GL_FLOAT_MAT4","GL_SAMPLER_2D","GL_SAMPLER_CUBE","GL_VERTEX_ATTRIB_ARRAY_ENABLED","GL_VERTEX_ATTRIB_ARRAY_SIZE","GL_VERTEX_ATTRIB_ARRAY_STRIDE","GL_VERTEX_ATTRIB_ARRAY_TYPE","GL_VERTEX_ATTRIB_ARRAY_NORMALIZED","GL_VERTEX_ATTRIB_ARRAY_POINTER","GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING","GL_IMPLEMENTATION_COLOR_READ_TYPE","GL_IMPLEMENTATION_COLOR_READ_FORMAT","GL_COMPILE_STATUS","GL_INFO_LOG_LENGTH","GL_SHADER_SOURCE_LENGTH","GL_SHADER_COMPILER","GL_SHADER_BINARY_FORMATS","GL_NUM_SHADER_BINARY_FORMATS","GL_LOW_FLOAT","GL_MEDIUM_FLOAT","GL_HIGH_FLOAT","GL_LOW_INT","GL_MEDIUM_INT","GL_HIGH_INT","GL_FRAMEBUFFER","GL_RENDERBUFFER","GL_RGBA4","GL_RGB5_A1","GL_RGB565","GL_DEPTH_COMPONENT16","GL_STENCIL_INDEX","GL_STENCIL_INDEX8","GL_RENDERBUFFER_WIDTH","GL_RENDERBUFFER_HEIGHT","GL_RENDERBUFFER_INTERNAL_FORMAT","GL_RENDERBUFFER_RED_SIZE","GL_RENDERBUFFER_GREEN_SIZE","GL_RENDERBUFFER_BLUE_SIZE","GL_RENDERBUFFER_ALPHA_SIZE","GL_RENDERBUFFER_DEPTH_SIZE","GL_RENDERBUFFER_STENCIL_SIZE","GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE","GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME","GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL","GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE","GL_COLOR_ATTACHMENT0","GL_DEPTH_ATTACHMENT","GL_STENCIL_ATTACHMENT","GL_NONE","GL_FRAMEBUFFER_COMPLETE","GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT","GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT","GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS","GL_FRAMEBUFFER_UNSUPPORTED","GL_FRAMEBUFFER_BINDING","GL_RENDERBUFFER_BINDING","GL_MAX_RENDERBUFFER_SIZE","GL_INVALID_FRAMEBUFFER_OPERATION","GL_VERTEX_PROGRAM_POINT_SIZE","GL_COVERAGE_BUFFER_BIT_NV","GL_TEXTURE_MAX_ANISOTROPY_EXT","GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT","Material","counter","other","attributes","attr","Attributes","Mesh3D","VertexDataType","BoundingBox_1","Vector2_1","VertexAttribute_1","VertexAttributes_1","GL20_1","IndexBufferObject_1","VertexBufferObject_1","staticVertices","staticIndices","maxVertices","maxIndices","autoBind","isInstanced","tmpV","vertices","makeVertexBuffer","indices","IndexBufferObject","isVertexArray","addManagedMesh","isStatic","vertexAttributes","VertexBufferObject","setVertices","targetOffset","source","sourceOffset","updateVertices","srcOffset","destOffset","getNumVertices","getVertexSize","buffer","getBuffer","at","setIndices","getNumIndices","getNumMaxVertices","getNumMaxIndices","getAttributes","vertexSize","locations","unbind","primitiveType","drawElements","drawArrays","meshes","indexOf","splice","usage","bbox","BoundingBox","numVertices","verts","inf","posAttrib","getVertexAttribute","Usage","Position","numComponents","ext","out","transform","numIndices","posoff","centerX","centerY","centerZ","r","sub","length2","sqrt","calculateRadiusSquared","scaleX","scaleY","scaleZ","posAttr","getVertices","matrix","start","posOffset","stride","TextureCoordinates","transformUV","removeDuplicates","checks","attrs","newVertexSize","as","ai","a","j","getIndices","tmp","idx1","newIndex","idx2","found","VertexAttributes","getVertexAttributes","mesh","invalidate","dimensions","Vector2","mul","ModelBatch","Utils_1","DefaultRenderableSorter_1","DefaultShaderProvider_1","DefaultTextureBinder_1","Renderable_1","RenderContext_1","RenderablePool","environment","FlushablePool","sorter","renderablesPool","Renderable","shaderProvider","ownContext","RenderContext","cam","flush","sort","currentShader","render","getShader","renderableProvider","getRenderables","ModelInstance","Matrix4_1","Animation_1","Node_1","NodeAnimation_1","NodeKeyframe_1","model","rootNodeIds","materials","nodes","animations","Matrix4","copyNodes","copyAnimations","defaultShareKeyframes","calculateTransforms","nodeIds","node","nodeId","part","parts","bindPose","invBoneBindTransforms","getNode","includes","midx","findIndex","getChildCount","invalidateNode","getChildByIndex","recursive","ignoreCase","Node","shareKeyframes","anim","copyAnimation","sourceAnim","animation","Animation3D","duration","nodeAnimations","nanim","nodeAnim","NodeAnimation","translation","rotation","scaling","kf","NodeKeyframe","keytime","nodePart","setRenderable","bones","values","globalTransform","idt","pool","getRenderablesWithNode","enabled","getRenderable","obtain","getChildren","child","calculateBoneTransforms","extendBoundingBox","toUpperCase","PerspectiveCamera","Fustrum_1","fieldOfViewY","viewportWidth","viewportHeight","far","near","fieldOfView","up","direction","view","combined","projection","invProjectionView","frustum","Frustum","tmpVec","update","updateFrustum","aspect","abs","setToLookAt","invert","normalize","dot","scale","normalizeUp","cross","vec","axis","angle","rotate","point","translate","textureBinder","disable","DEPTH_TEST","depthFunc","depthMask","BLEND","blending","CULL_FACE","cullFace","blendSFactor","blendDFactor","depthFunction","depthRangeNear","depthRangeFar","wasEnabled","enable","depthRange","sFactor","dFactor","blendFunc","face","FRONT","BACK","FRONT_AND_BACK","MeshPart_1","MeshPart","setByMeshPart","Attribute","typeBit","numberOfTrailingZeros","hashCode","getAttributeAlias","alias","getAttributeType","sorted","mask","att","attribute","attribute1","attribute2","attribute3","attribute4","arg0","arg1","compareValues","same","_a","sourceFunc","destFunc","opacity","setType","sourceFunction","destFunction","Alias","register","ColorAttribute3D","color","Color","g","b","Mask","Ambient","Diffuse","Specular","Reflection","Emissive","AmbientLight","Fog","DiffuseAlias","SpecularAlias","AmbientAlias","EmissiveAlias","ReflectionAlias","AmbientLightAlias","FogAlias","DirectionalLightsAttribute","lights","copyFrom","FloatAttribute","Shininess","AlphaTest","ShininessAlias","AlphaTestAlias","IntAttribute","CullFace","CullFaceAlias","PointLightsAttribute","SpotLightsAttribute","TextureAttribute","offsetU","offsetV","scaleU","scaleV","uvIndex","region","u","u2","ta","setTextureRegion","Normal","Bump","BumpAlias","NormalAlias","VertexAttribute3D","Shader_1","ColorUnpacked","ColorPacked","Generic","BoneWeight","Tangent","BiNormal","normalized","unit","usageIndex","num","Shader","POSITION","TEXCOORDS","NORMAL","COLOR","TANGENT","BINORMAL","BONEWEIGHT","calculateOffsets","defaultIfNotFound","vertexAttribute","findByUsage","getSizeInBytes","returnValue","getMask","__createBinding","o","k2","desc","getOwnPropertyDescriptor","writable","configurable","__exportStar","p","AmbientCubemap","NUM_VALUES","Utils","arrayCopy","side","clamp","x2","y2","z2","d","rd","gd","bd","intensity","distance","BaseLight","DirectionalLight","directionX","directionY","directionZ","setFrom","dirX","dirY","dirZ","Environment","Attributes_1","DirectionalLightsAttribute_1","PointLightAttribute_1","SpotLightAttribute_1","DirectionalLight_1","PointLight_1","SpotLight_1","light","addLight","addDirectionalLight","PointLight","addPointLight","SpotLight","addSpotLight","dirLights","pointLights","spotLights","removeLight","removeDirectionalLight","removePointLight","removeSpotLight","positionX","positionY","positionZ","setFromColor","cutoffAngle","exponent","posX","posY","posZ","MathUtils","isEqual","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","e","rejected","done","then","G3dModelLoader","Quaternion_1","ModelAnimation_1","ModelData_1","ModelMaterial_1","ModelMesh_1","ModelMeshPart_1","ModelNode_1","ModelNodeAnimation_1","ModelNodeKeyframe_1","ModelNodePart_1","ModelTexture_1","Model_1","UBJsonReader_1","tempQ","Quaternion","reader","UBJsonReader","fileName","fileExtension","split","binaryFomat","parseModel","shipData","shipModel","Model","load","path","substring","lastIndexOf","fetch","res","arrayBuffer","json","parse","text","string","JSON","ModelData","version","VERSION_HI","VERSION_LO","getString","parseMeshes","parseMaterials","parseNodes","parseAnimations","jsonMesh","ModelMesh","parseAttributes","meshParts","jsonPart","ModelMeshPart","partId","parseType","blendWeightCount","Binormal","startsWith","TexCoords","materialDir","jsonMaterial","ModelMaterial","diffuse","parseColor","ambient","emissive","specular","reflection","shininess","getFloat","jsonTexture","ModelTexture","textureId","endsWith","uvTranslation","readVector2","uvScaling","textureType","parseTextureUsage","USAGE_AMBIENT","USAGE_BUMP","USAGE_DIFFUSE","USAGE_EMISSIVE","USAGE_NONE","USAGE_NORMAL","USAGE_REFLECTION","USAGE_SHININESS","USAGE_SPECULAR","USAGE_TRANSPARENCY","USAGE_UNKNOWN","colorArray","vectorArray","parseNodesRecursively","jsonNode","ModelNode","meshId","ModelNodePart","meshPartId","materialId","ArrayMap","bone","val","children","ModelAnimation","ModelNodeAnimation","keyframes","isArray","keyframe","tkf","ModelNodeKeyframe","rkf","skf","translationKF","rotationKF","scalingKF","defValue","ObjLoader","MtlLoader","ObjMaterial","Material_1","Group","faces","numFaces","mat","materialName","reset","ambientColor","diffuseColor","specularColor","addTexture","alphaTexFilename","ambientTexFilename","diffuseTexFilename","specularTexFilename","shininessTexFilename","texFilename","tex","WHITE","currentMaterial","ok","fileContent","lines","map","s","line","charAt","tokens","toLowerCase","build","replace","parseFloat","norms","uvs","groups","loadModelData","flipV","logWarning","mtl","activeGroup","firstChar","getIndex","hasNorms","hasUVs","setActiveGroup","numGroups","group","numElements","finalVerts","vi","vertIndex","normIndex","finalIndices","stringId","pm","mm","getMaterial","parseInt","BinaryInput","oldFormat","input","readByte","parseWithType","charCodeAt","parseArray","parseObject","readUChar","readShort","readInt","readLong","readFloat","parseString","parseData","readString","valueType","parseSize","useIntOnError","defaultValue","readUShort","readUInt","blockType","dataType","sOptional","readStringWithSize","strings","DataView","getInt8","getUint8","getInt16","getInt32","optimizePositive","readUnsignedByte","chars","fromCharCode","byteCount","getFloat32","Plane_1","planes","planePoints","planePointsArray","Plane","inverseProjectionView","clipSpacePlanePointsArray","prj","testPoint","PlaneSide","Back","radius","normal","len2","clipSpacePlanePoints","point1","point2","point3","pointX","pointY","pointZ","norX","norY","norZ","dist","dotWithValue","OnPlane","Front","plane","halfExtents","bounds","getCenter","getDimensions","ColorAttribute_1","FloatAttribute_1","TextureAttribute_1","Mesh_1","TextureProvider_1","NodePart_1","disposables","nodePartBones","modelData","textureProvider","FileTextureProvider","loadMeshes","loadMaterials","loadNodes","loadAnimations","modelAnimations","modelNodes","loadNode","modelNode","modelNodePart","meshMaterial","NodePart","addChild","convertMesh","modelMesh","hasIndices","indicesOffset","updateIndices","modelMaterials","convertMaterial","f","setTexture","setOffset","setScale","disposable","inheritTransform","isAnimated","localTransform","parent","setFromTranslationRotation","calculateLocalTransform","calculateWorldTransform","partCount","childCount","removeChild","insertChild","getParent","detach","MaterialType","BaseShader","Uniform","LocalSetter","GlobalSetter","inputID","materialMask","environmentMask","overallMask","matFlags","envFlags","uniforms","validators","setters","globalUniforms","localUniforms","combinedAttributes","tempArray","instance","validator","setter","getUniformID","program","validate","getUniformLocation","isGlobal","location","getAttributeLocation","getKey","currentMesh","det3x3","setAttributes","renderWithCombinedAttributes","getAttributeLocations","number","uniform","setUniform4x4f","setUniform3x3f","getValues","setUniform3f","setUniform2f","setUniform4f","setUniformf","setUniformi","bindTexture","Setters","Inputs","Bones","ACubemap","Matrix3_1","IntAttribute_1","AmbientCubemap_1","BaseShader_1","numDirectionalLights","numPointLights","numSpotLights","numBones","ignoreUnimplemented","defaultCullFace","defaultDepthFunc","dirLightsOffset","pointLightsOffset","cacheAmbientCubemap","setColor","addWithColorAndDirection","setUniform3fv","getUniformAlias","ones","idtMatrix","setUniform4x4fWithLocation","loc","projTrans","viewTrans","projViewTrans","cameraPosition","cameraDirection","cameraUp","cameraNearFar","worldTrans","viewWorldTrans","projViewWorldTrans","normalMatrix","diffuseTexture","diffuseUVTransform","specularTexture","specularUVTransform","emissiveColor","emissiveTexture","emissiveUVTransform","reflectionColor","reflectionTexture","reflectionUVTransform","normalTexture","normalUVTransform","ambientTexture","ambientUVTransform","alphaTest","ambientCube","environmentCubemap","setMatrix4","set4f","setVector3","set2f","temp","tmpM","Matrix3","setMatrix3","setByMatrix4","inv","transpose","setF","setI","prefix","u_dirLights0color","u_dirLights0direction","u_dirLights1color","u_pointLights0color","u_pointLights0position","u_pointLights0intensity","u_pointLights1color","u_spotLights0color","u_spotLights0position","u_spotLights0intensity","u_spotLights0direction","u_spotLights0cutoffAngle","u_spotLights0exponent","u_spotLights1color","u_fogColor","u_shadowMapProjViewTrans","u_shadowTexture","u_shadowPCFOffset","lightLocs","ambientCubemap","defaultVertexShader","defaultFragmentShader","createPrefix","shaderProgram","combineAttributes","lighting","shadowMap","attributesMask","optionalAttributes","vertexMask","getMaskWithSizePacked","directionalLights","implementedFlags","u_projTrans","u_viewTrans","u_projViewTrans","u_cameraPosition","u_cameraDirection","u_cameraUp","u_cameraNearFar","timeUniform","u_time","u_worldTrans","u_viewWorldTrans","u_projViewWorldTrans","u_normalMatrix","u_bones","u_shininess","u_opacity","u_diffuseColor","u_diffuseTexture","u_diffuseUVTransform","u_specularColor","u_specularTexture","u_specularUVTransform","u_emissiveColor","u_emissiveTexture","u_emissiveUVTransform","u_reflectionColor","u_reflectionTexture","u_reflectionUVTransform","u_normalTexture","u_normalUVTransform","u_ambientTexture","u_ambientUVTransform","u_alphaTest","u_ambientCubemap","initWithVariables","dirLightsLoc","getLightLoc","dirLightsColorOffset","dirLightsDirectionOffset","dirLightsSize","pointLightsLoc","pointLightsColorOffset","pointLightsPositionOffset","pointLightsIntensityOffset","pointLightsSize","spotLightsLoc","spotLightsColorOffset","spotLightsPositionOffset","spotLightsDirectionOffset","spotLightsIntensityOffset","spotLightsCutoffAngleOffset","spotLightsExponentOffset","spotLightsSize","renderableMask","combineAttributeMasks","setFromValue","lightsSet","setBlending","bindMaterial","bindLights","is","setCullFace","setDepthTest","setDepthMask","dla","dirs","pla","points","sla","spots","setUniform3fWithLocation","setUniform1fWithLocation","flag","tmpAttributes","and","or","AnimationController","AnimationDesc","BaseAnimationController_1","speed","time","loopCount","loops","diff","invTime","floor","onLoop","onEnd","animationPool","Pool","current","queued","queuedTransitionTime","previous","transitionCurrentTime","transitionTargetTime","inAction","paused","allowSameAnimation","justChangedAnimation","getAnimation","obtainAnimation","removeAnimation","free","remain","actionWithAnimationDesc","applyAnimations","applyAnimation","setAnimationWithOffset","setAnimationWithAnimationDesc","transitionTime","animateWithOffset","animateWithAnimationDesc","queueWithAnimationDesc","queueWithOffset","actionWithOffset","toQueue","obtainAnimationDesc","BaseAnimationController","Transform","alpha","lerp","targetT","targetR","targetS","slerp","transformPool","applying","weight","transforms","toMatrix4","anim1","time1","anim2","time2","lastIndex","minIndex","maxIndex","getFirstKeyframeIndexAtTime","firstKeyframe","secondKeyframe","tmpT","getTranslationAtTime","getRotationAtTime","getScalingAtTime","getNodeAnimationTransform","lerpWithTranform","applyNodeAnimationBlending","entries","applyNodeAnimationDirectly","BoxShapeBuilder","VertexInfo_1","vectorPool","builder","width","height","depth","buildWithRect","corner000","corner010","corner100","corner110","corner001","corner011","corner101","corner111","i000","vertex","i100","i110","i010","i001","i101","i011","i111","getPrimitiveType","rect","index8Values","buildWithVertexInfo","vertTmp1","vertTmp2","vertTmp3","vertTmp4","vertTmp5","vertTmp6","vertTmp7","vertTmp8","nor","rectWithVectorCorner","hw","hh","hd","x0","y0","z0","x1","y1","z1","buildWithVectorCorner","obtainV3","freeAll","tmpV0","tmpV3","tmpV4","tmpV5","tmpV6","tmpV7","vertTmp0","VertexInfo","isDirty","isBound","indicesLength","empty","byteBuffer","Uint16Array","isDirect","ownsBuffer","bufferHandle","createBuffer","bufferData","subarray","bindBuffer","deleteBuffer","WebGLBuffer","MeshBuilder","NumberUtils_1","BoxShapeBuilder_1","tempC1","hasColor","uOffset","uScale","vOffset","vScale","hasUVTransform","vertexTransformationEnabled","positionTransform","normalTransform","tmpNormal","vindex","istart","_vertex","posSize","norOffset","biNorOffset","tangentOffset","colOffset","colSize","cpOffset","uvOffset","setVertexTransform","setUVRangeByRegion","newColor","endpart","MAX_VERTICES","getMaxVertices","getMaxIndices","u1","setUVRange","transformPosition","transformNormal","rgba8888ToColor","col","NumberUtil","colorToFloat","buildWithWidthHeight","uv","MAX_INDEX","addVertex","info","vertexWithData","hasPosition","hasNormal","hasUV","value1","value2","value3","value4","value5","value6","value7","value8","corner00","corner10","corner11","corner01","index6Values","index4Values","rectWithVertexInfo","setUV","x00","y00","z00","x10","y10","z10","x11","y11","z11","x01","y01","z01","normalX","normalY","normalZ","setPos","setNor","vTmp","multiplyMat3","indicesMap","ModelBuilder","MeshBuilder_1","builders","tmpTransform","mb","getLastIndex","SHORT_MAX_VALUE","endnode","rebuildReferencesWithModel","addNode","manageDisposable","meshpart","createNode","box","getBuilder","createAttributes","rebuildReferences","mpm","minFilter","magFilter","uWrap","vWrap","useMipMaps","Texture","verticesLength","Float32Array","setBuffer","setUsage","bufferChanged","numAttributes","enableVertexAttribArray","vertexAttribPointer","disableVertexAttribArray","Affine2","m00","m01","m02","m10","m11","m12","M00","M01","M02","M10","M11","M12","M03","M13","degrees","cos","PI","sin","radians","shearX","shearY","l","det","invDet","tmp00","tmp01","tmp02","tmp10","tmp11","tmp12","tmp0","tmp1","PlayMode","Animation","keyFrames","frameDurations","totalDuration","lastDuration","fD","stateTimeRemainder","reverse","fN","stateTime","mode","runIndex","frameNumber","getFrameNumber","LOOP","LOOP_PINGPONG","REVERSED","LOOP_REVERSED","AssetManager","BitmapFont_1","TextureAtlas_1","promises","atlases","jsonData","binaryData","fonts","getTotal","promise","TextureAtlas","atlas","reportDone","BitmapFont","font","all","delete","BitmapFontCache_1","BitmapFontData_1","regions","integer","glyphValues","glyphs","page","glyph","setGlyphRegion","missingGlyph","draw","batch","str","targetWidth","halign","Align","left","wrap","truncate","cache","addText","getColor","getScaleX","getScaleY","getRegions","getRegion","getLineHeight","lineHeight","getSpaceXadvance","spaceXadvance","getXHeight","xHeight","getCapHeight","capHeight","getAscent","ascent","getDescent","descent","isFlipped","flipped","ownsTexture","setFixedWidthGlyphs","maxAdvance","getGlyph","xadvance","xoffset","kerning","fixedWidth","setUseIntegerPositions","usesIntegerPositions","getCache","getData","getOwnsTexture","setOwnsTexture","newFontCache","BitmapFontCache","log","fontFile","interger","fontData","BitmapFontData","loadFont","GlyphLayout_1","tempColor","drawingTexts","layouts","pooledLayouts","setPosition","xAmount","yAmount","round","pageVertices","ii","nn","setColors","intBits","intToFloatColor","Pools","pageGlyphIndices","requireGlyphs","layout","requirePageGlyphs","glyphCount","tempGlyphCount","runs","glyphItems","vertexCount","newVertices","setPageCount","pageCount","newPageVertices","fill","newIdx","newPageGlyphIndices","pageGlyphIndicesLength","addToCache","runCount","colors","colorsIndex","nextColorGlyphIndex","glyphIndex","lastColorFloatBits","run","xAdvances","gx","gy","addGlyph","currentTint","yoffset","setText","setTextToCache","addTextToCache","getX","getY","getFont","use","getVertexCount","getLayouts","GlyphLayout","find","item","Glyph_1","TextureRegion_1","CHARACTER_MAX_VALUE","blankLineScale","xChars","capChars","imagePaths","padding","padTop","padRight","padBottom","padLeft","padY","common","baseLine","idMatches","match","RegExp","fileMatches","Glyph","StringTokenizer","nextToken","ch","srcX","srcY","hasMoreTokens","_c","setGlyph","first","second","amount","setKerning","hasMetricsOverride","overrideAscent","overrideDescent","overrideDown","overrideCapHeight","overrideLineHeight","overrideSpaceXAdvance","overrideXHeight","spaceGlyph","xadvanceGlyph","getFirstGlyph","xGlyph","capGlyph","down","regionsData","top","pageId","pages","concatAndResolveUrl","invTexWidth","invTexHeight","regionData","TextureRegion","originalWidth","originalHeight","offsetX","offsetY","setLineHeight","PAGE_SIZE","hasGlyph","getGlyphs","lastGlyph","markupEnabled","getKerning","lastGlyphWidth","getWrapIndex","glyphsItems","isWhitespace","isBreakChar","breakChars","character","getImagePath","getImagePaths","scaleXY","delimitter","strArray","currentIndex","st","cnt","dim","clr","minimum","maximum","l_point","extPoint","Infinity","a_bounds","tmpVector","isValid","lx","sumx","ly","sumy","lz","sumz","OrthoCamera","screenWidth","screenHeight","zoom","projectionView","yDown","tmp3","cameraX","cameraY","ortho","lookAt","screenCoords","project","worldCoords","worldCoord","screenCoord","screenToWorld","Game","screen","currentScreen","shared","PAGES","LOG2_PAGE_SIZE","Uint32Array","ArrayBuffer","GlyphRun_1","hAlign","epsilon","glyphRunPool","GlyphRun","colorStack","wrapOrTruncate","currentColor","toIntBits","nextColor","isLastRun","lineRun","runStart","runEnd","newline","runEnded","appendRun","setLastGlyphXAdvance","runWidth","getGlyphWidth","wrapIndex","calculateWidths","alignRuns","runsItems","glyphWidth","truncateRun","truncateWidth","droppedGlyphCount","last","getLineOffset","glyphs2","xAdvances2","firstEnd","secondStart","glyphs1","xAdvances1","firstGlyphCount","secondGlyphCount","reductionThreshold","colorChangeIndex","lastColor","InputHandler","InputEvent","events_1","eventMaps","TouchStart","TouchEnd","TouchMove","getMouseEvent","inputEvent","touch","mevt","MouseEvent","clientX","clientY","canvas","lastX","lastY","touched","touches","mouseDownHandler","evt","handleMove","mouseUpHandler","mouseMoveHandler","touchStartHandler","preventDefault","changedTouches","changeTouch","identifier","dispatchEvent","touchEndHandler","element","touchMoveHandler","event","getBoundingClientRect","touchedX","touchedY","unprojectVector2","setByMatrix3","M20","M21","M22","v00","v01","v02","v10","v11","v12","v20","v21","v22","setToRotationRad","degreesToRadians","oc","inv_det","vector","rotateRad","radiansToDegrees","atan2","mata","matb","M33","quaternion","xs","ys","zs","wx","wy","wz","xx","xy","xz","yy","yz","zz","M23","M30","M31","M32","orientation","l_det","fovy","aspectRatio","identity","l_fd","tan","l_a1","l_a2","right","bottom","x_orth","y_orth","z_orth","tx","ty","tz","initTemps","xAxis","yAxis","zAxis","tmpMatrix","tempVec","xw","yw","zw","r00","r01","r02","r10","r11","r12","r20","r21","r22","m20","m21","m22","m30","m31","m32","setFromQuaternion","quat","setFromAxis","inv_w","vecs","numVecs","tmpArrayForVec","matrix4_proj","Color2Attribute","ColorAttribute","TexCoordAttribute","Position3Attribute","Position2Attribute","VertexAttribute","VertexAttributeType","Mesh","dirtyVertices","dirtyIndices","elementsPerVertex","drawWithOffset","UNSIGNED_SHORT","ARRAY_BUFFER","verticesBuffer","attrib","FLOAT","ELEMENT_ARRAY_BUFFER","indicesBuffer","DYNAMIC_DRAW","Float","COLOR2","int8","Int8Array","int32","Int32Array","float32","intBitsToFloat","bits","PolygonBatch","quad","twoColorTint","isDrawing","lastTexture","projectionValues","newTwoColoredTextured","srcColorBlend","SRC_ALPHA","srcAlphaBlend","ONE","dstBlend","ONE_MINUS_SRC_ALPHA","drawCalls","MVP_MATRIX","blendFuncSeparate","drawVertices","QUAD_TRIANGLES","indexStart","setVerticesLength","indicesArray","setIndicesLength","ou1","ov1","ou2","ov2","u3","u4","x3","y3","x4","y4","TRIANGLES","totalDrawCalls","originX","originY","rotatedX1","rotatedY1","rotatedX2","rotatedY2","rotatedX3","rotatedY3","rotatedX4","rotatedY4","yaw","pitch","roll","setEulerAnglesRad","hr","shr","chr","hp","shp","chp","hy","shy","chy","chy_shp","shy_chp","chy_chp","shy_shp","pole","getGimbalPole","getRollRad","asin","getPitchRad","getYawRad","tmp2","conjugate","mulLeft","newX","newY","newZ","newW","qx","qy","qz","qw","setFromAxisRad","l_ang","PI2","l_sin","l_cos","normalizeAxes","setFromAxes","yx","zx","zy","acos","absDot","scale0","scale1","invSinTheta","q","exp","norm","normExp","pow","theta","coeff","scalar","getAxisAngleRad","FLOAT_ROUNDING_ERROR","getAngleRad","w1","w2","vs","fs","tmp2x2","tmp3x3","tmp4x4","vsSource","fsSource","compile","compileShader","VERTEX_SHADER","FRAGMENT_SHADER","compileProgram","shaderSource","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","isContextLost","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","useProgram","uniform1i","uniform1f","uniform2f","uniform3f","uniform4f","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","uniform3fv","pedantic","getAttribLocation","SAMPLER","ShapeRenderer","ShapeType","shapeType","Filled","vertexIndex","newColored","check","Point","Line","filled","color2","color3","color4","polygonVertices","firstX","firstY","segments","cbrt","cx","cy","cx1","cy1","cx2","cy2","subdiv_step","subdiv_step2","subdiv_step3","pre1","pre2","pre4","pre5","tmp1x","tmp1y","tmp2x","tmp2y","fx","fy","dfx","dfy","ddfx","ddfy","dddfx","dddfy","Sprite","dirty","origin","setSize","setOrigin","sprite","setVector","setX","setY","tint","rad","rotated","xRatio","yRatio","drawWidth","drawHeight","drawX","minx","miny","maxx","maxy","alphaModulation","oldAlpha","setAlpha","image","boundUnit","_image","restore","texParameteri","TEXTURE_2D","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","validateMagFilter","TEXTURE_WRAP_S","TEXTURE_WRAP_T","createTexture","DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","LINEAR","LINEAR_MIPMAP_LINEAR","CLAMP_TO_EDGE","generateMipmap","deleteTexture","ImageData","Uint8ClampedArray","url","useMipmaps","Image","onload","src","MipMap","MipMapLinearLinear","MipMapLinearNearest","MipMapNearestLinear","MipMapNearestNearest","filter","packFileUrl","textureOptions","packFileContent","pageData","pageImage","tuple","splits","pads","file","format","repeatX","ClampToEdge","repeatY","mipMaps","Affine2_1","extraData","regionX","regionY","regionWidth","regionHeight","drawY","drawTransformed","cols","rows","copyArray","createStage","pointInRect","resizeCanvas","createGameLoop","WindowedMean","TimeKeeper","PowOut","Pow","Interpolation","StringSet","IntSet","align","topLeft","topRight","bottomLeft","bottomRight","contains","oldSize","hex","setFromString","RED","GREEN","BLUE","MAGENTA","degRad","ceil","randomTriangularWith","random","radDeg","applyInternal","power","sourceStart","dest","destStart","fromIndex","toIndex","setArraySize","SUPPORTS_TYPED_ARRAYS","Int16Array","fround","hash","instantiator","items","obtained","objects","pools","maxDelta","framesPerSecond","totalTime","lastTime","Date","now","frameCount","frameTime","windowSize","addedValues","lastValue","mean","hasEnoughData","requestId","lastUpdate","fps","running","frameInLastSecond","elapsed","loop","requestAnimationFrame","isRunning","stop","cancelAnimationFrame","getFps","deviceRatio","devicePixelRatio","window","displayWidth","clientWidth","displayHeight","clientHeight","pX","pY","options","assign","hidden","wrapper","document","createElement","setAttribute","wrapperClassName","className","style","display","appendChild","body","getCanvas","getInfo","show","hide","cleanup","indexOfKey","removeIndex","url1","url2","url3","deltaX","deltaY","distanceSqr","invAlpha","l_mat","l_w","invMatrix","viewX","viewY","viewWidth","viewHeight","tmpMat","setToRotation","X","Y","Z","Zero","createViewport","Camera_1","contextOption","defaultOptions","autoUpdate","pixelRatio","crop","disablePremultipliedAlpha","premultipliedAlpha","getContext","resizeHandler","additionalCameras","viewportInfo","worldWidth","worldHeight","vWidth","vHeight","viewportObject","getViewportInfo","getCamera","addCamera","ratio","vRatio","displayX","displayY","viewport","cameraWidth","cameraHeight","cleanUp","ViewportInputHandler","InputHandler_1","inputHandler","isTouched","vX","vY","arr2","arrayLikeToArray","self","ReferenceError","Constructor","_defineProperties","props","descriptor","protoProps","staticProps","unsupportedIterableToArray","allowArrayLike","it","F","_e","normalCompletion","didErr","_e2","isNativeReflectConstruct","possibleConstructorReturn","Derived","hasNativeReflectConstruct","Super","NewTarget","construct","superPropBase","_get","property","base","_getPrototypeOf","setPrototypeOf","__proto__","subClass","superClass","sham","Proxy","Boolean","valueOf","iter","from","_i","_s","_arr","_n","_d","_typeof","assertThisInitialized","_regeneratorRuntime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","innerFn","outerFn","tryLocsList","protoGenerator","Generator","Context","_invoke","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","skipTempReset","prev","rootRecord","rval","exception","handle","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","_setPrototypeOf","arrayWithHoles","iterableToArrayLimit","nonIterableRest","arrayWithoutHoles","iterableToArray","nonIterableSpread","minLen","test","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","_createClass","_classCallCheck","Constants","SCREEN_WIDTH","SCREEN_HEIGHT","DEFAULT_DIRECTION_X","DEFAULT_DIRECTION_Y","_inherits","_assertThisInitialized","_possibleConstructorReturn","_createSuper","Health","maxHP","Moveable","Spartial","_initializerDefineProperty","initializer","_applyDecoratedDescriptor","decorators","reduce","decorator","Damage","damage","dmg","UpgradeLevelSystem","protectBallArchetype","offsetProtectBall","levelState","maxExp","currentLevel","configGame","enemysRespawnTime","powerEnemy","amountProtectBall","deleteEntity","gameState","protectBall","role","normalAttack","speedProtectBall","cooldownSkill3","createEntityByArchetype","getComponent","setDmg","spartialProtectBall","setRadius","setRotation","sizeSkill1Mage","laserCooldown","CameraProcessingSystem","spartial","playerID","cameraGame","JoystickRenderSystem","healthPlayer","shapeRenderer","setProjection","cameraUI","circle","joyStick","thumbPos","JoystickSystem","tempTouchedWorldCoord","tempDirection","getTouchedWorldCoord","move","dragging","subVector","addVector","NormalAttackProcessingSystem","spartialPlayer","normalAttackBulletIDs","spartialBullet","moveAbleBullet","damageBullet","enemyIDs","spartialEnemy","heathEnemy","NormalAttackRenderSystem","NormalAttackSpawningSystem","cooldownNormalAttack","normalAttackAchetype","setDirection","setSpeed","PlayerRenderSystem","offsetAngle","knight1","knight2","knight3","knight4","knight5","mage1","mage2","mage3","mage4","mage5","assetManager","getTexture","ProtectBallProcessSystem","damageProtectBall","healthEnemy","ProtectBallRenderSystem","ProtectBallSpawningSystem","Skill3ProcessSystem","tempNumber","tempVec2","bulletIDs","Skill3RenderSystem","getRandomInt","Skill3SpawningSystem","timeSkill3","bulletArchetype","bullet","PlayerMovementSystem","moveAble","health","ProtectSkillRenderSystem","spartialProtectSkill","protectSkill","ProtectProcessingSystem","protectDmgArchetype","timeToMakeDamage","damageProtectSkill","TornadoProcessSystem","TornadoSpawningSystem","TornadoRenderSystem","EnemyMovementSystem","EnemyRenderSystem","EnemySpawningSystem","MAX_ENEMIES","enemyArchetype","enemy","setHp","setMaxHP","LaserSpawningSystem","timeLaser","LaserArchetype","Laser","laserSkillID","spartialLaser","moveAbleLaser","LaserProcessSystem","LaserRenderSystem","MenuRoleSystem","addSystem","GRID_WIDTH","GRID_HEIGHT","GridMapRenderSystem","totalDrawX","totalDrawY","MenuRenderSystem","knight","mage","createGameScreen","font2","pause","playerArchetype","player","tempBullet","clearColor","COLOR_BUFFER_BIT","setDelta","processActiveSystem","processPassiveSystem","stage","loadTexture","setScreen"],"sourceRoot":""}